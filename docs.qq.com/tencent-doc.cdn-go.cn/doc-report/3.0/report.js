var tencentDocReport=function(){"use strict";var t=function(){function t(){if("undefined"!=typeof window)try{if(!window.localStorage)return void this.noStoragePolyfill();if(Storage.prototype.isHooked)return;this.getWrapper(),this.setWrapper(),this.removeWrapper(),Storage.prototype.isHooked=!0,Object.freeze(Storage.prototype)}catch(t){console.error("localStorage 使用出错",t)}}return t.prototype.getWrapper=function(){var t=Storage.prototype.getItem;Storage.prototype.getItem=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return t.apply(this,e)}catch(t){return console.error("getItem error",t),null}}},t.prototype.setWrapper=function(){var t=Storage.prototype.setItem;Storage.prototype.setItem=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{t.apply(this,e)}catch(t){"QuotaExceededError"===t.name&&(localStorage.clear(),console.error("removeItem error",t))}}},t.prototype.removeWrapper=function(){var t=Storage.prototype.removeItem;Storage.prototype.removeItem=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{t.apply(this,e)}catch(t){console.error("removeItem error",t)}}},t.prototype.noStoragePolyfill=function(){window.localStorage={getItem:function(){return null},setItem:function(){return null},removeItem:function(){return null},clear:function(){return null}}},t}();function e(t){var e=new RegExp("(?:^|;+|\\s+)".concat(t,"=([^;]*)")),n="object"==typeof document&&document.cookie.match(e);return n?n[1]:null}function n(t,e,n,r,o){var i=new Date;i.setTime(i.getTime()+(n?36e5*n:2592e6)),"undefined"!=typeof document&&(document.cookie="".concat(t,"=").concat(e,";expires=").concat(i.toGMTString(),";path=").concat(o||"/",";").concat(r?"domain=".concat(r,";"):""))}function r(t){var e=window.location.search.substring(1);if(e)for(var n=0,r=e.split("&");n<r.length;n++){var o=r[n].split("="),i=o[0],a=o[1];if(i===t)return a}}function o(t,e){void 0===e&&(e=window.navigator.userAgent);try{var n=new RegExp("\\b".concat(t,"\\/((\\d+\\.){1,3}\\d+)"),"i").exec(e);return n&&n.length>1&&n[1]||""}catch(t){return""}}new t;var i={doc:1,sheet:2,form:3,slide:4,pdf:7,mind:8,flowchart:9,rec:10},a={qq:1,wx:2,ww:5},s=-1,u=1,c=0;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function f(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var l={exports:{}};function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}"undefined"!=typeof window&&window,l.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==p(t)&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=73)}([function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){t.exports=!n(3)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(5);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(18)("wks"),o=n(17),i=n(0).Symbol,a="function"==typeof i;(t.exports=function(t){return r[t]||(r[t]=a&&i[t]||(a?i:o)("Symbol."+t))}).store=r},function(t,e){t.exports=function(t){return"object"==p(t)?null!==t:"function"==typeof t}},function(t,e,n){var r=n(0),o=n(15),i=n(11),a=n(12),s=n(19),u=function t(e,n,u){var c,f,l,p,d=e&t.F,h=e&t.G,g=e&t.P,m=e&t.B,v=h?r:e&t.S?r[n]||(r[n]={}):(r[n]||{}).prototype,y=h?o:o[n]||(o[n]={}),b=y.prototype||(y.prototype={});for(c in h&&(u=n),u)l=((f=!d&&v&&void 0!==v[c])?v:u)[c],p=m&&f?s(l,r):g&&"function"==typeof l?s(Function.call,l):l,v&&a(v,c,l,e&t.U),y[c]!=l&&i(y,c,p),g&&b[c]!=l&&(b[c]=l)};r.core=o,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,n){var r=n(2),o=n(24),i=n(16),a=Object.defineProperty;e.f=n(1)?Object.defineProperty:function(t,e,n){if(r(t),e=i(e,!0),r(n),o)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(14),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(7),o=n(26);t.exports=n(1)?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(0),o=n(11),i=n(13),a=n(17)("src"),s=n(45),u=(""+s).split("toString");n(15).inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,n,s){var c="function"==typeof n;c&&(i(n,"name")||o(n,"name",e)),t[e]!==n&&(c&&(i(n,a)||o(n,a,t[e]?""+t[e]:u.join(String(e)))),t===r?t[e]=n:s?t[e]?t[e]=n:o(t,e,n):(delete t[e],o(t,e,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[a]||s.call(this)}))},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e){var n=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(5);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(15),o=n(0),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(46)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){var r=n(27);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(8);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(31),o=n(8);t.exports=function(t){return r(o(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var r,o,i=n(40),a=RegExp.prototype.exec,s=String.prototype.replace,u=a,c=(r=/a/,o=/b*/g,a.call(r,"a"),a.call(o,"a"),0!==r.lastIndex||0!==o.lastIndex),f=void 0!==/()??/.exec("")[1];(c||f)&&(u=function(t){var e,n,r,o,u=this;return f&&(n=new RegExp("^"+u.source+"$(?!\\s)",i.call(u))),c&&(e=u.lastIndex),r=a.call(u,t),c&&r&&(u.lastIndex=u.global?r.index+r[0].length:e),f&&r&&r.length>1&&s.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r}),t.exports=u},function(t,e,n){t.exports=!n(1)&&!n(3)((function(){return 7!=Object.defineProperty(n(25)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(5),o=n(0).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(14),o=Math.max,i=Math.min;t.exports=function(t,e){return(t=r(t))<0?o(t+e,0):i(t,e)}},function(t,e,n){var r=n(4)("unscopables"),o=Array.prototype;null==o[r]&&n(11)(o,r,{}),t.exports=function(t){o[r][t]=!0}},function(t,e,n){var r=n(19),o=n(31),i=n(20),a=n(9),s=n(50);t.exports=function(t,e){var n=1==t,u=2==t,c=3==t,f=4==t,l=6==t,p=5==t||l,d=e||s;return function(e,s,h){for(var g,m,v=i(e),y=o(v),b=r(s,h,3),w=a(y.length),O=0,T=n?d(e,w):u?d(e,0):void 0;w>O;O++)if((p||O in y)&&(m=b(g=y[O],O,v),t))if(n)T[O]=m;else if(m)switch(t){case 3:return!0;case 5:return g;case 6:return O;case 2:T.push(g)}else if(f)return!1;return l?-1:c||f?f:T}}},function(t,e,n){var r=n(10);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){var r=n(5),o=n(54).set;t.exports=function(t,e,n){var i,a=e.constructor;return a!==n&&"function"==typeof a&&(i=a.prototype)!==n.prototype&&r(i)&&o&&o(t,i),t}},function(t,e,n){var r=n(55),o=n(26),i=n(21),a=n(16),s=n(13),u=n(24),c=Object.getOwnPropertyDescriptor;e.f=n(1)?c:function(t,e){if(t=i(t),e=a(e,!0),u)try{return c(t,e)}catch(t){}if(s(t,e))return o(!r.f.call(t,e),t[e])}},function(t,e,n){var r=n(35),o=n(22).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,e,n){var r=n(13),o=n(21),i=n(56)(!1),a=n(36)("IE_PROTO");t.exports=function(t,e){var n,s=o(t),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~i(c,n)||c.push(n));return c}},function(t,e,n){var r=n(18)("keys"),o=n(17);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,e,n){var r=n(5),o=n(10),i=n(4)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==o(t))}},function(t,e,n){var r=n(65)(!0);t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},function(t,e,n){var r=n(66),o=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var i=n.call(t,e);if("object"!=p(i))throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(t))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(t,e)}},function(t,e,n){var r=n(2);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){n(67);var r=n(12),o=n(11),i=n(3),a=n(8),s=n(4),u=n(23),c=s("species"),f=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),l=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var p=s(t),d=!i((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),h=d?!i((function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[c]=function(){return n}),n[p](""),!e})):void 0;if(!d||!h||"replace"===t&&!f||"split"===t&&!l){var g=/./[p],m=n(a,p,""[t],(function(t,e,n,r,o){return e.exec===u?d&&!o?{done:!0,value:g.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}})),v=m[0],y=m[1];r(String.prototype,t,v),o(RegExp.prototype,p,2==e?function(t,e){return y.call(t,this,e)}:function(t){return y.call(t,this)})}}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e,n){var r=n(6);r(r.S+r.F*!n(1),"Object",{defineProperty:n(7).f})},function(t,e,n){t.exports=n(18)("native-function-to-string",Function.toString)},function(t,e){t.exports=!1},function(t,e,n){var r=n(6);r(r.P,"Array",{fill:n(48)}),n(29)("fill")},function(t,e,n){var r=n(20),o=n(28),i=n(9);t.exports=function(t){for(var e=r(this),n=i(e.length),a=arguments.length,s=o(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,c=void 0===u?n:o(u,n);c>s;)e[s++]=t;return e}},function(t,e,n){var r=n(6),o=n(30)(5),i=!0;"find"in[]&&Array(1).find((function(){i=!1})),r(r.P+r.F*i,"Array",{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n(29)("find")},function(t,e,n){var r=n(51);t.exports=function(t,e){return new(r(t))(e)}},function(t,e,n){var r=n(5),o=n(52),i=n(4)("species");t.exports=function(t){var e;return o(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!o(e.prototype)||(e=void 0),r(e)&&null===(e=e[i])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){var r=n(10);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(0),o=n(13),i=n(10),a=n(32),s=n(16),u=n(3),c=n(34).f,f=n(33).f,l=n(7).f,p=n(57).trim,d=r.Number,h=d,g=d.prototype,m="Number"==i(n(59)(g)),v="trim"in String.prototype,y=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){var n,r,o,i=(e=v?e.trim():p(e,3)).charCodeAt(0);if(43===i||45===i){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===i){switch(e.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+e}for(var a,u=e.slice(2),c=0,f=u.length;c<f;c++)if((a=u.charCodeAt(c))<48||a>o)return NaN;return parseInt(u,r)}}return+e};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof d&&(m?u((function(){g.valueOf.call(n)})):"Number"!=i(n))?a(new h(y(e)),n,d):y(e)};for(var b,w=n(1)?c(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),O=0;w.length>O;O++)o(h,b=w[O])&&!o(d,b)&&l(d,b,f(h,b));d.prototype=g,g.constructor=d,n(12)(r,"Number",d)}},function(t,e,n){var r=n(5),o=n(2),i=function(t,e){if(o(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n(19)(Function.call,n(33).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return i(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:i}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(21),o=n(9),i=n(28);t.exports=function(t){return function(e,n,a){var s,u=r(e),c=o(u.length),f=i(a,c);if(t&&n!=n){for(;c>f;)if((s=u[f++])!=s)return!0}else for(;c>f;f++)if((t||f in u)&&u[f]===n)return t||f||0;return!t&&-1}}},function(t,e,n){var r=n(6),o=n(8),i=n(3),a=n(58),s="["+a+"]",u=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),f=function(t,e,n){var o={},s=i((function(){return!!a[t]()||"​"!="​"[t]()})),u=o[t]=s?e(l):a[t];n&&(o[n]=u),r(r.P+r.F*s,"String",o)},l=f.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(c,"")),t};t.exports=f},function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e,n){var r=n(2),o=n(60),i=n(22),a=n(36)("IE_PROTO"),s=function(){},u=function(){var t,e=n(25)("iframe"),r=i.length;for(e.style.display="none",n(62).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[i[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[a]=t):n=u(),void 0===e?n:o(n,e)}},function(t,e,n){var r=n(7),o=n(2),i=n(61);t.exports=n(1)?Object.defineProperties:function(t,e){o(t);for(var n,a=i(e),s=a.length,u=0;s>u;)r.f(t,n=a[u++],e[n]);return t}},function(t,e,n){var r=n(35),o=n(22);t.exports=Object.keys||function(t){return r(t,o)}},function(t,e,n){var r=n(0).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(37),o=n(2),i=n(64),a=n(38),s=n(9),u=n(39),c=n(23),f=n(3),l=Math.min,p=[].push,d="length",h=!f((function(){}));n(41)("split",2,(function(t,e,n,f){var g;return g="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[d]||2!="ab".split(/(?:ab)*/)[d]||4!=".".split(/(.?)(.?)/)[d]||".".split(/()()/)[d]>1||"".split(/.?/)[d]?function(t,e){var o=String(this);if(void 0===t&&0===e)return[];if(!r(t))return n.call(o,t,e);for(var i,a,s,u=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),l=0,h=void 0===e?4294967295:e>>>0,g=new RegExp(t.source,f+"g");(i=c.call(g,o))&&!((a=g.lastIndex)>l&&(u.push(o.slice(l,i.index)),i[d]>1&&i.index<o[d]&&p.apply(u,i.slice(1)),s=i[0][d],l=a,u[d]>=h));)g.lastIndex===i.index&&g.lastIndex++;return l===o[d]?!s&&g.test("")||u.push(""):u.push(o.slice(l)),u[d]>h?u.slice(0,h):u}:"0".split(void 0,0)[d]?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,r){var o=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,o,r):g.call(String(o),n,r)},function(t,e){var r=f(g,t,this,e,g!==n);if(r.done)return r.value;var c=o(t),p=String(this),d=i(c,RegExp),m=c.unicode,v=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(h?"y":"g"),y=new d(h?c:"^(?:"+c.source+")",v),b=void 0===e?4294967295:e>>>0;if(0===b)return[];if(0===p.length)return null===u(y,p)?[p]:[];for(var w=0,O=0,T=[];O<p.length;){y.lastIndex=h?O:0;var S,D=u(y,h?p:p.slice(O));if(null===D||(S=l(s(y.lastIndex+(h?0:O)),p.length))===w)O=a(p,O,m);else{if(T.push(p.slice(w,O)),T.length===b)return T;for(var x=1;x<=D.length-1;x++)if(T.push(D[x]),T.length===b)return T;O=w=S}}return T.push(p.slice(w)),T}]}))},function(t,e,n){var r=n(2),o=n(27),i=n(4)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||null==(n=r(a)[i])?e:o(n)}},function(t,e,n){var r=n(14),o=n(8);t.exports=function(t){return function(e,n){var i,a,s=String(o(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(i=s.charCodeAt(u))<55296||i>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):i:t?s.slice(u,u+2):a-56320+(i-55296<<10)+65536}}},function(t,e,n){var r=n(10),o=n(4)("toStringTag"),i="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?n:i?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,n){var r=n(23);n(6)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(t,e,n){var r=n(6),o=n(30)(1);r(r.P+r.F*!n(69)([].map,!0),"Array",{map:function(t){return o(this,t,arguments[1])}})},function(t,e,n){var r=n(3);t.exports=function(t,e){return!!t&&r((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},function(t,e,n){var r=n(2),o=n(20),i=n(9),a=n(14),s=n(38),u=n(39),c=Math.max,f=Math.min,l=Math.floor,p=/\$([$&`']|\d\d?|<[^>]*>)/g,d=/\$([$&`']|\d\d?)/g;n(41)("replace",2,(function(t,e,n,h){return[function(r,o){var i=t(this),a=null==r?void 0:r[e];return void 0!==a?a.call(r,i,o):n.call(String(i),r,o)},function(t,e){var o=h(n,t,this,e);if(o.done)return o.value;var l=r(t),p=String(this),d="function"==typeof e;d||(e=String(e));var m=l.global;if(m){var v=l.unicode;l.lastIndex=0}for(var y=[];;){var b=u(l,p);if(null===b)break;if(y.push(b),!m)break;""===String(b[0])&&(l.lastIndex=s(p,i(l.lastIndex),v))}for(var w,O="",T=0,S=0;S<y.length;S++){b=y[S];for(var D=String(b[0]),x=c(f(a(b.index),p.length),0),R=[],I=1;I<b.length;I++)R.push(void 0===(w=b[I])?w:String(w));var j=b.groups;if(d){var _=[D].concat(R,x,p);void 0!==j&&_.push(j);var E=String(e.apply(void 0,_))}else E=g(D,p,x,R,j,e);x>=T&&(O+=p.slice(T,x)+E,T=x+D.length)}return O+p.slice(T)}];function g(t,e,r,i,a,s){var u=r+t.length,c=i.length,f=d;return void 0!==a&&(a=o(a),f=p),n.call(s,f,(function(n,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(u);case"<":s=a[o.slice(1,-1)];break;default:var f=+o;if(0===f)return n;if(f>c){var p=l(f/10);return 0===p?n:p<=c?void 0===i[p-1]?o.charAt(1):i[p-1]+o.charAt(1):n}s=i[f-1]}return void 0===s?"":s}))}}))},function(t,e,n){var r=n(0),o=n(32),i=n(7).f,a=n(34).f,s=n(37),u=n(40),c=r.RegExp,f=c,l=c.prototype,p=/a/g,d=/a/g,h=new c(p)!==p;if(n(1)&&(!h||n(3)((function(){return d[n(4)("match")]=!1,c(p)!=p||c(d)==d||"/a/i"!=c(p,"i")})))){c=function(t,e){var n=this instanceof c,r=s(t),i=void 0===e;return!n&&r&&t.constructor===c&&i?t:o(h?new f(r&&!i?t.source:t,e):f((r=t instanceof c)?t.source:t,r&&i?u.call(t):e),n?this:l,c)};for(var g=function(t){t in c||i(c,t,{configurable:!0,get:function(){return f[t]},set:function(e){f[t]=e}})},m=a(f),v=0;m.length>v;)g(m[v++]);l.constructor=c,c.prototype=l,n(12)(r,"RegExp",c)}n(72)("RegExp")},function(t,e,n){var r=n(0),o=n(7),i=n(1),a=n(4)("species");t.exports=function(t){var e=r[t];i&&e&&!e[a]&&o.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,n){n.r(e),n.d(e,"UserAgent",(function(){return p})),n.d(e,"getVersionFromUA",(function(){return l})),n.d(e,"compareVersion",(function(){return f})),n(44);var r=n(42),o=n.n(r),i=n(43),a=n.n(i),s=(n(47),n(49),n(53),n(63),n(68),n(70),n(71),/\d+([._]\d+)*/);function u(t){var e,n=s.exec(t);return null!==(e=null==n?void 0:n[0].replace(/_/g,"."))&&void 0!==e?e:null}function c(t){var e=u(t);return(null==e?void 0:e.split(".").map(Number))||[]}function f(t,e){return n=c(t),r=c(e),(o=Array(Math.max(n.length,r.length)).fill(0).map((function(t,e){return(n[e]||0)-(r[e]||0)})).find((function(t){return 0!==t}))||0)<0?-1:o>0?1:0;var n,r,o}function l(t,e){var n;try{n=new RegExp("\\b".concat(t,"\\W+\\d+([\\._]\\d+)*"),"i")}catch(t){return null}var r=n.exec(e);return r?u(r[0].substring(t.length)):null}var p=function(){function t(e){var n=this;o()(this,t),this.userAgent="",this.getAndroidVersion=function(){return n.isAndroid?l("Android",n.userAgent):null},this.isAndroidVersionAboveOrEqual=function(t){return f(n.getAndroidVersion()||"",t)>=0},this.getIOSVersion=function(){return n.isIOS?l("OS",n.userAgent):null},this.isIOSVersionAboveOrEqual=function(t){return f(n.getIOSVersion()||"",t)>=0},this.getPCQQBrowserVersion=function(){return n.isPCQQBrowser?l("QQBrowser",n.userAgent):null},this.isPCQQBrowserVersionAboveOrEqual=function(t){return f(n.getPCQQBrowserVersion()||"",t)>=0},this.getMobileQQBrowserVersion=function(){return n.isMobileQQBrowser?l("MQQBrowser",n.userAgent):null},this.isMobileQQBrowserVersionAboveOrEqual=function(t){return f(n.getMobileQQBrowserVersion()||"",t)>=0},this.getChromeVersion=function(){return l("Chrome",n.userAgent)},this.isChromeVersionAboveOrEqual=function(t){return f(n.getChromeVersion()||"",t)>=0},this.getWeChatVersion=function(){return n.isWeChat||n.isWxMiniProgram?l("MicroMessenger",n.userAgent):null},this.isWeChatVersionAboveOrEqual=function(t){return f(n.getWeChatVersion()||"",t)>=0},this.getWxDriveVersion=function(){return n.isWxDrive?l("WXDrive",n.userAgent):null},this.isWxDriveVersionAboveOrEqual=function(t){return f(n.getWxDriveVersion()||"",t)>=0},this.getWxWorkVersion=function(){return n.isWxWork?l("wxwork",n.userAgent):null},this.isWxWorkVersionAboveOrEqual=function(t){return f(n.getWxWorkVersion()||"",t)>=0},this.getWxWorkPrivateVersion=function(){return n.isWxWorkPrivate?l("wxworklocal",n.userAgent):null},this.isWxWorkPrivateVersionAboveOrEqual=function(t){return f(n.getWxWorkPrivateVersion()||"",t)>=0},this.getQQVersion=function(){return n.isQQ||n.isQQMiniProgram?l("QQ",n.userAgent):null},this.isQQVersionAboveOrEqual=function(t){return f(n.getQQVersion()||"",t)>=0},this.getTimVersion=function(){return n.isTim?l("TIM",n.userAgent):null},this.isTimVersionAboveOrEqual=function(t){return f(n.getTimVersion()||"",t)>=0},this.getTencentDocsAppVersion=function(){return l("TencentDocs",n.userAgent)},this.isTencentDocsAppVersionAboveOrEqual=function(t){return f(n.getTencentDocsAppVersion()||"",t)>=0},this.getPCTencentDocsClientVersion=function(){return l("TxDocsPC",n.userAgent)},this.isPCTencentDocsClientVersionAboveOrEqual=function(t){return f(n.getPCTencentDocsClientVersion()||"",t)>=0},this.getElectronTencentDocsClientVersion=function(){return l("TDAppDesktop",n.userAgent)},this.isElectronTencentDocsClientVersionAboveOrEqual=function(t){return f(n.getElectronTencentDocsClientVersion()||"",t)>=0},void 0===e&&(e="undefined"!=typeof navigator?navigator.userAgent:""),Object.defineProperty(this,"userAgent",{value:e,writable:!1})}return a()(t,[{key:"isMobile",get:function(){return/(mobile)/i.test(this.userAgent)||this.isAndroidPad}},{key:"isMobilePhone",get:function(){return/(mobile)/i.test(this.userAgent)&&!this.isIPad}},{key:"isIPhone",get:function(){return/(iphone)/i.test(this.userAgent)}},{key:"isIPad",get:function(){return/(ipad)/i.test(this.userAgent)}},{key:"isAndroidPhone",get:function(){return/(mobile)/i.test(this.userAgent)&&this.isAndroid}},{key:"isAndroidPad",get:function(){return!/(mobile)/i.test(this.userAgent)&&this.isAndroid}},{key:"isPC",get:function(){return!this.isMobile}},{key:"isMac",get:function(){return!this.isMobile&&/Mac OS X/i.test(this.userAgent)}},{key:"isIPadEmulatedMac",get:function(){return this.isMac&&navigator.maxTouchPoints>1}},{key:"isAndroid",get:function(){return/android|adr/i.test(this.userAgent)}},{key:"isIOS",get:function(){return/(iphone|ipad|ipod)/i.test(this.userAgent)}},{key:"isWindows",get:function(){return/(win64|wow64|win32|wow32|windows nt)/i.test(this.userAgent)}},{key:"isWindowsUWP",get:function(){return/MSAppHost/i.test(this.userAgent)}},{key:"isLinux",get:function(){return/linux/i.test(this.userAgent)&&!this.isAndroid}},{key:"isLinuxKylin",get:function(){return/linux-kylin/i.test(this.userAgent)}},{key:"isLinuxUOS",get:function(){return/linux-uos/i.test(this.userAgent)}},{key:"isPCQQBrowser",get:function(){return!this.isMobile&&/QQBrowser/i.test(this.userAgent)&&!/QBCore/i.test(this.userAgent)}},{key:"isMobileQQBrowser",get:function(){return this.isMobile&&/MQQBrowser/i.test(this.userAgent)&&!this.isTimOrQQ&&!this.isWeChat&&!this.isWxWork&&!this.isTencentDocsApp&&!this.isWeiYunApp&&!this.isMiniProgram}},{key:"isQQBrowser",get:function(){return this.isMobile?this.isMobileQQBrowser:this.isPCQQBrowser}},{key:"isChrome",get:function(){return/(Chrome|CriOS)\/\S+( Mobile\S*)? Safari\/\S+$/i.test(this.userAgent)}},{key:"isSafari",get:function(){return/Version\/\S+( Mobile\S*)? Safari\/\S+$/i.test(this.userAgent)}},{key:"isIE",get:function(){return/MSIE/i.test(this.userAgent)&&!/opera/i.test(this.userAgent)||/Trident/i.test(this.userAgent)}},{key:"isOldEdge",get:function(){return/Edge/i.test(this.userAgent)}},{key:"isChromiumEdge",get:function(){return/Edg\//i.test(this.userAgent)}},{key:"isFirefox",get:function(){return/(Firefox|Focus|FxiOS)\//i.test(this.userAgent)}},{key:"isWeChat",get:function(){return/MicroMessenger/i.test(this.userAgent)&&!this.isWxWork&&!this.isWxMiniProgram}},{key:"isWxWork",get:function(){return/(wxwork)/i.test(this.userAgent)}},{key:"isWxWorkCustom",get:function(){return/WeComCEF/i.test(this.userAgent)&&this.isWxWork}},{key:"isWxWorkPrivate",get:function(){return/(wxworklocal)/i.test(this.userAgent)}},{key:"isWxDrive",get:function(){return/WXDrive/i.test(this.userAgent)}},{key:"isQQ",get:function(){return/QQ\//i.test(this.userAgent)&&!this.isTencentDocsApp&&!this.isQQMiniProgram&&!this.isTim}},{key:"isQQForGooglePlay",get:function(){return/QQ\//i.test(this.userAgent)&&/_GM/i.test(this.userAgent)}},{key:"isTim",get:function(){return/TIM/i.test(this.userAgent)}},{key:"isPCTim",get:function(){return/QBCore/i.test(this.userAgent)&&/TIM2.0/i.test(this.userAgent)}},{key:"isTimOrQQ",get:function(){return this.isTim||this.isQQ}},{key:"isTimOrQQFamily",get:function(){return this.isTim||/QQ/i.test(this.userAgent)}},{key:"isMiniProgram",get:function(){return/miniprogram|miniapp(?!enable)/i.test(this.userAgent)||"undefined"!=typeof __wxjs_environment&&"miniprogram"===__wxjs_environment}},{key:"isWxMiniProgram",get:function(){return/MicroMessenger/i.test(this.userAgent)&&this.isMiniProgram}},{key:"isQQMiniProgram",get:function(){return/QQ\/|TIM/i.test(this.userAgent)&&this.isMiniProgram}},{key:"isTencentDocsApp",get:function(){return/TencentDocs/i.test(this.userAgent)}},{key:"isPCTencentDocsClient",get:function(){return/TxDocsPC/i.test(this.userAgent)}},{key:"isPCTencentDocsApp",get:function(){return this.isPCTencentDocsClient}},{key:"isElectronTencentDocsClient",get:function(){return/TDAppDesktop/i.test(this.userAgent)}},{key:"isWeiYunApp",get:function(){return/weiyun/i.test(this.userAgent)}},{key:"isSouGou",get:function(){return/SE 2\.X MetaSr 1\.0/i.test(this.userAgent)}},{key:"isTencentMeeting",get:function(){return/tencent_wemeet/i.test(this.userAgent)}},{key:"isTencentMeetingRooms",get:function(){return/TencentMeetingRooms/i.test(this.userAgent)}}]),t}();e.default=new p}]);var d,h=f(l.exports);function g(t){for(var e="",n=0;n<t;n++)e+=Math.random().toString(36).substr(2);return e}function m(){var t;return null!==(t=window.basicClientVars)&&void 0!==t?t:{}}function v(){var t;return null!==(t=window.clientVars)&&void 0!==t?t:{}}var y="doc.weixin.qq.com"===(null===(d=window.location)||void 0===d?void 0:d.hostname);var b=null,w=null,O=null;function T(){if(b)return b;var t=e("p_luin")||e("p_uin");return t&&(b=t.replace(/^[o0]+/i,"")),b}function S(){if(w)return w;var t=e("uid");return t&&(w=t),w}function D(){return T()||function(){var t;return(null===(t=m().userInfo)||void 0===t?void 0:t.uin)||v().uin||null}()||x()}function x(){return function(){var t;return(null===(t=window.global_multi_user)||void 0===t?void 0:t.uid)||null}()||S()||function(){var t,e;return(null===(t=m().userInfo)||void 0===t?void 0:t.userId)||(null===(e=v().userInfo)||void 0===e?void 0:e.uid)||null}()}function R(){var t;try{var e=null===(t=window.localStorage)||void 0===t?void 0:t.getItem("browserStr");return e||(e=g(5),window.localStorage&&window.localStorage.setItem("browserStr",e)),e}catch(t){return g(5)}}function I(){if(O)return O;var t=r("adtag");if(t)O=t,n("adtag",t,8760,".docs.qq.com","/"),localStorage.setItem("tdsourcetag",t);else{var o=r("tdsourcetag");if(o)O=o,n("adtag",o,8760,".docs.qq.com","/"),localStorage.setItem("tdsourcetag",o);else{var i=r("from_page");i&&(O=i,n("adtag",i,8760,".docs.qq.com","/"),localStorage.setItem("tdsourcetag",i))}}return O||(O=localStorage.getItem("tdsourcetag")||e("adtag")||""),O}function j(){if(v().userIsGuest)return 3;if(!D())return 3;var t=e("utype");return t&&a[t]?a[t]:s}function _(){var t,e;return(null===(e=null===(t=m().docInfo)||void 0===t?void 0:t.padInfo)||void 0===e?void 0:e.padType)||v().padType}function E(t){void 0===t&&(t="");var e=_()||t;return e&&i[e]?i[e]:s}function C(){var t,e=(null===(t=m().docInfo)||void 0===t?void 0:t.isOwner)||v().isOwner;return void 0===e?s:e?u:c}function A(t){var e;return t||(null===(e=m().authInfo)||void 0===e?void 0:e.privilegeFlag)||v().rightFlag||s}function k(){var t,e,n=(null===(e=null===(t=m().docInfo)||void 0===t?void 0:t.padInfo)||void 0===e?void 0:e.padTitle)||v().padTitle;return n?n.replace(/&/g,"\\&").replace(/\|/g,"\\|").replace(/=/g,"\\=").replace(/%/g,"\\%").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t"):null}function P(){var t;return(null===(t=m().createInfo)||void 0===t?void 0:t.creatorId)||v().creatorId||null}function M(){var t,e;return(null===(e=null===(t=m().docInfo)||void 0===t?void 0:t.padInfo)||void 0===e?void 0:e.domainId)||v().domainId||null}function L(){var t,e;return(null===(e=null===(t=m().docInfo)||void 0===t?void 0:t.padInfo)||void 0===e?void 0:e.padId)||v().padId||null}function B(){var t,e;return(null===(e=null===(t=m().docInfo)||void 0===t?void 0:t.ownerInfo)||void 0===e?void 0:e.ownerId)||v().ownerId||null}function q(){var t,e;return(null===(e=null===(t=v().collab_client_vars)||void 0===t?void 0:t.apid)||void 0===e?void 0:e.apid)||null}function N(){var t,e;return(null===(t=m().userInfo)||void 0===t?void 0:t.corpId)||(null===(e=v().userInfo)||void 0===e?void 0:e.corp_id)||null}function W(){return h.isMobile?h.isAndroid?2:h.isIOS?h.isIPad?6:3:4:h.isMac?5:h.isLinuxUOS?9:h.isLinuxKylin?8:h.isLinux?7:h.isPCTencentDocsClient||h.isWindows?1:s}function F(){for(var t=[[h.isPCTencentDocsClient,10],[h.isTencentMeeting,14],[h.isTim,2],[h.isWxMiniProgram,3],[h.isWeChat,4],[h.isTencentDocsApp,6],[h.isWindowsUWP,8],[h.isQQ,1],[h.isWxWork,9],[h.isWeiYunApp,11],[h.isQQMiniProgram,12],[h.isElectronTencentDocsClient,13],[h.isQQBrowser,5],[h.isMobileQQBrowser,5],[h.isChrome,5],[h.isQQBrowser,5],[h.isSafari,5],[h.isOldEdge,5],[h.isIE,5],[h.isChromiumEdge,5],[h.isFirefox,5]],e=0;e<t.length;e++){var n=t[e],r=n[0],o=n[1];if(r)return o}return s}function U(){var t=v(),e=t.userLoginCorpName,n=t.userLoginCorpId;if(!e||!n){var r=t.userInfo||{};e=r.corp_name,n=r.corp_id}return e&&n?"".concat(e,"-").concat(n):null}function Q(){return e("free_go_proxy")||e("env_name")||e("env_id")||e("fd")}var K="tencent-doc-token",V="fingerprint";!function(){var t=window.localStorage&&window.localStorage.getItem(K),r=e(V);if(r&&r!==t){n(V,R());try{window.localStorage&&window.localStorage.setItem(K,g(5))}catch(t){return}}}();var H=function(){return H=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},H.apply(this,arguments)};function G(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}var z={},J=!1,X=!1;function Y(){var t=v();return!J&&t.ownerId&&(J=!0,Z()),!X&&t.userInfo&&(X=!0,Z()),z}function Z(t){var e,n;void 0===t&&(t={}),Object.assign(z,H({table:"dc03111",third_appid:q(),uin:D(),uid:x(),user_mac:R(),uin_type:j(),platform:W(),appid:h.isElectronTencentDocsClient?o("TDAppDesktop"):h.isPCTencentDocsClient?o("TxDocsPC"):h.isTencentDocsApp?o("TencentDocs"):void 0,touin:P(),isOwner:C(),file_type:E(),id:L(),source1:F(),source2:"",source3:U()||I(),obj1:A(),obj2:k(),ver1:(e=M(),n=L(),e&&n?"".concat(e,"$").concat(n):v().globalPadId||null),ver2:P(),ver3:M(),ver4:B(),web_version:window.__globalReleaseVersion||null,abtest:window.ExpIdList||null},y?{work_weixin_ext:JSON.stringify({corpid:N(),itemname:"",vid:x(),logid:""}),work_weixin_source:""}:{}),t);var r=Q();r&&(z.dev_route_id=r)}var $=Object.freeze({__proto__:null,getCookieUid:S,getCookieUin:T,getSource1:F,getPlatform:W,getFileTypeForReport:E,getAuth:A,getDefaultTdwData:Y,resetDefaultTdwData:Z}),tt={exports:{}};function et(t){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},et(t)}function nt(t,e){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];void 0!==r&&(t[n]=r)}}!function(t,e){window,t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==et(t)&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=21)}([function(t,e,n){(function(t){function r(t){return(r="function"==typeof Symbol&&"symbol"==et(Symbol.iterator)?function(t){return et(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":et(t)})(t)}n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return s})),n.d(e,"m",(function(){return u})),n.d(e,"l",(function(){return c})),n.d(e,"p",(function(){return f})),n.d(e,"k",(function(){return l})),n.d(e,"i",(function(){return p})),n.d(e,"j",(function(){return d})),n.d(e,"g",(function(){return h})),n.d(e,"n",(function(){return g})),n.d(e,"q",(function(){return m})),n.d(e,"d",(function(){return v})),n.d(e,"h",(function(){return y})),n.d(e,"o",(function(){return b})),n.d(e,"f",(function(){return O})),n.d(e,"e",(function(){return T})),n.d(e,"r",(function(){return S}));var o="undefined"!=typeof window&&window&&window.navigator?window:null,i="undefined"!=typeof self&&self&&self.navigator?self:null,a=y()?qq||wx:null,s=o||i,u=o&&o.localStorage&&"function"==typeof o.localStorage.getItem?1:y()&&"function"==typeof a.getStorage?2:0,c="object"===("undefined"==typeof indexedDB?"undefined":r(indexedDB))&&"function"==typeof indexedDB.open;function f(t,e,n){for(var r in e)if(e.hasOwnProperty(r)){if(n&&-1!==n.indexOf(r))continue;var o=e[r];void 0!==o&&(t[r]=o)}}function l(t,e){return"string"==typeof t&&(!e||t.length===e)}function p(t){return"number"==typeof t}function d(t){return l(t)||p(t)}function h(t){if(!t)return!1;var e=t.constructor.toString().substring(9).indexOf("Array");return t&&e>-1&&e<=1}function g(t,e){for(var n in e)(o=e[n])&&"object"===r(o)&&!h(o)?g(t[n],e[n]):t[n]=e[n];var o}function m(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(encodeURIComponent(String(n))+"="+encodeURIComponent(String(t[n])));return e.join("&")}function v(){return(new Date).getTime()}function y(){return"object"===("undefined"==typeof qq?"undefined":r(qq))&&qq.canIUse?qq.canIUse("request"):!("object"!==("undefined"==typeof wx?"undefined":r(wx))||!wx.canIUse)&&wx.canIUse("request")}function b(t,e){for(var n=Object.keys(t),r=n.length,o=0;o<r;o++){var i=n[o];e(i,t[i])}}function w(t){return!!(s&&s.location&&s.location.search.indexOf(t)>0)}function O(){return w("alloy_report_debug")||w("alloy-report-debug")}function T(){return w("alloy_report_close")||w("alloy-report-close")}function S(t){for(var e=[],n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=n.length,o=0;o<t;o++)e.push(n.charAt(Math.floor(Math.random()*r)));return e.join("")}}).call(this,n(14))},function(t,e,n){n.d(e,"c",(function(){return p})),n.d(e,"a",(function(){return d})),n.d(e,"d",(function(){return h})),n.d(e,"b",(function(){return g})),n.d(e,"e",(function(){return m}));var r=n(0),o=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},i="[AlloyReport]",a=Object(r.f)(),s=console.log,u=console.error,c=console.warn,f=console.info,l=function(t,e){t.apply(void 0,o([i],e))},p=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a&&l(s,t)},d=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];u.apply(void 0,o([i],t))},h=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a&&l(c,t)},g=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a&&l(f,t)},m=function(t){a=t}},function(t,e,n){(function(t,r){n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return f}));var o=n(19),i=n(0),a=n(9),s=new o.a,u=s.create("global"),c=s.create("hooks"),f=s.create("dispatch");!function(){if(i.b&&i.b.addEventListener){var e=function(){a.a&&a.a.postMessageToWorker&&a.a.postMessageToWorker({type:"beforeunload"},!0),u.trigger("beforeunload")};i.b.addEventListener("beforeunload",e),i.b.addEventListener("pagehide",e)}else t&&t.isNodePlatform&&r.on("beforeExit",(function(){u.trigger("beforeunload")}))}()}).call(this,n(14),n(25))},function(t,e,n){n.d(e,"d",(function(){return a})),n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return u})),n.d(e,"b",(function(){return c})),n.d(e,"e",(function(){return f}));var r=n(1),o=n(9),i=n(0);function a(t,e){return f((function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];if(!i.b||!i.b.requestIdleCallback)return t.apply(void 0,n);i.b.requestIdleCallback((function(){try{return t.apply(void 0,n)}catch(t){e&&e(),Object(r.a)(t)}}),{timeout:5e3})}),e)}function s(){return c()&&!0}function u(){return!1}function c(){return!(!o.a||!o.a.worker)}function f(t,e){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];try{return t.apply(void 0,n)}catch(t){e&&e(),Object(r.a)(t)}}}},function(t,e,n){var r=n(0),o=n(3),i=n(9),a=n(1),s=n(11),u=function(){function t(){var t=this;this.configs={mergeQueueConfig:{sourceKey:"report_source_v2",pendingKey:"report_pending_v2",maxInBatch:5e4,maxSize:5e4},enableMergeReport:!0,cgiURL:s.a?"https://docrp.weixin.qq.com/report/node/":"https://report.idqqimg.com/node/report/",backupUrl:"https://report.idqqimg.com/node_b/",isLogPrint:Object(r.f)(),isCloseReport:Object(r.e)(),expiredTime:6048e5,supportOffline:!0,maxStoreReport:1e4,headRequest:!0,enableWorker:!0},this.closeLog=function(){t.configs.isLogPrint=!1,Object(a.e)(!1),t.syncConfigToWorker()},this.openLog=function(){t.configs.isLogPrint=!0,Object(a.e)(!0),t.syncConfigToWorker()},this.closeReport=function(){t.configs.isCloseReport=!0,t.syncConfigToWorker()},this.openReport=function(){t.configs.isCloseReport=!1,t.syncConfigToWorker()},this.enableMerge=function(){t.configs.enableMergeReport=!0,t.syncConfigToWorker()},this.disableMerge=function(){t.configs.enableMergeReport=!1,t.syncConfigToWorker()},this.disableWorker=function(){t.configs.enableWorker=!1,i.a.terminateWorker()},this.reset=function(e){s.a||(Object(r.n)(t.configs,e),Object(a.e)(t.configs.isLogPrint),t.syncConfigToWorker())},this.syncConfigToWorker=function(){if(Object(o.a)()){var e=JSON.parse(JSON.stringify(t.configs));i.a.postMessageToWorker({type:"config",payload:e})}}}return Object.defineProperty(t.prototype,"mergeQueueConfig",{get:function(){return this.configs.mergeQueueConfig},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enableMergeReport",{get:function(){return this.configs.enableMergeReport},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cgiURL",{get:function(){return this.configs.cgiURL},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLogPrint",{get:function(){return this.configs.isLogPrint},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCloseReport",{get:function(){return this.configs.isCloseReport},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"expiredTime",{get:function(){return this.configs.expiredTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"supportOffline",{get:function(){return this.configs.supportOffline},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxStoreReport",{get:function(){return this.configs.maxStoreReport},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headRequest",{get:function(){return this.configs.headRequest},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enableWorker",{get:function(){return this.configs.enableWorker},enumerable:!1,configurable:!0}),t}();e.a=new u},function(t,e,n){var r=["onReceiveReporter","onHanldeParams","onBeforeCommonReport","onBeforeMergeReport","onBeforeReportSend","onReportSenderError","onReportSenderSuccess","onReportSenderTimeout"],o=n(1),i=n(2),a=n(3),s=n(9),u=(n(17),function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}),c=function(){var t=this;this.addHooks=function(e,n){"function"==typeof n?-1!==r.indexOf(e)?(i.c.on(e,n),t.syncHooksToWorker(e,"add")):Object(o.d)("不支持的钩子"):Object(o.d)("参数必须是函数")},this.removeHooks=function(e,n){i.c.remove(e,n),t.syncHooksToWorker(e,"remove")},this.execute=function(t,e){i.c.trigger.apply(i.c,u([t],e))},this.getExecuteFunction=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];i.c.getLength(t)&&i.c.trigger.apply(i.c,u([t],e))}},this.syncHooksToWorker=function(t,e){if(Object(a.a)()){var n={name:t,action:e};s.a.postMessageToWorker({type:"hooks",payload:n})}},this.onReceiveReporter=this.getExecuteFunction("onReceiveReporter"),this.onHanldeParams=this.getExecuteFunction("onHanldeParams"),this.onBeforeCommonReport=this.getExecuteFunction("onBeforeCommonReport"),this.onBeforeMergeReport=this.getExecuteFunction("onBeforeMergeReport"),this.onBeforeReportSend=this.getExecuteFunction("onBeforeReportSend"),this.onReportSenderError=this.getExecuteFunction("onReportSenderError"),this.onReportSenderSuccess=this.getExecuteFunction("onReportSenderSuccess"),this.onReportSenderTimeout=this.getExecuteFunction("onReportSenderTimeout")};e.a=new c},function(t,e,n){var r,o,i;!function(t){t[t.NO_WORKER=35056324]="NO_WORKER",t[t.NO_INDEDEDDB=35056325]="NO_INDEDEDDB",t[t.WORKER_FAIL=34981047]="WORKER_FAIL",t[t.SDK_LOAD=34980701]="SDK_LOAD",t[t.INDEDEDDB_OPEN_FAIL=34981048]="INDEDEDDB_OPEN_FAIL",t[t.INDEDEDDB_OVER_LIMIT=34981049]="INDEDEDDB_OVER_LIMIT",t[t.INDEDEDDB_OVER_TIME=34986191]="INDEDEDDB_OVER_TIME",t[t.REPORT_NONE=34987578]="REPORT_NONE"}(r||(r={})),function(t){t.INLINE_LOAD_COST="inline-load-cost",t.SDK_LOAD_COST="sdk-load-cost",t.REPORT_TOTAL="report-total",t.REPORT_FAIL="report-fail",t.REPORT_OFFLINE="report-offline",t.REPORT_ONEXIT="report-onexit"}(o||(o={})),function(t){t[t.SUM=1]="SUM",t[t.AVERAGE=2]="AVERAGE"}(i||(i={}));var a=n(2),s=n(1);n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return o}));var u=function(){return(u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},c=function(){function t(){var t=this;this.projectID=64,this.pageName="sdk-inside",this.dataDBKey="ALLOYREPORT_REPORT_INSIDE",this.getLastInsideDatas=function(){var e=[],n=[],r=window.localStorage&&window.localStorage.getItem(t.dataDBKey);if(r)try{(r=JSON.parse(r))&&(e=r.monitor,n=(n=r.adt).map((function(e){return u({projectid:t.projectID,pagename:t.pageName},e)}))),window.localStorage.removeItem(t.dataDBKey)}catch(t){}return{monitor:e,adt:n}},this.saveInsideDatas=function(){var e,n;if(window&&window.localStorage){var r=window.localStorage.getItem(t.dataDBKey);if(r)try{r=JSON.parse(r)}catch(t){Object(s.a)(t)}else r={};var o=r.monitor,i=void 0===o?[]:o,a=r.adt,u=void 0===a?[]:a;if((e=t.monitorID).push.apply(e,i),(n=t.adtDatas).push.apply(n,u),t.monitorID.length||t.adtDatas.length){var c=JSON.stringify({monitor:t.monitorID,adt:t.adtDatas});window.localStorage.setItem(t.dataDBKey,c),t.monitorID=[],t.adtDatas=[]}}},this.adtDatas=[],this.monitorID=[],this.pointIDValues={},this.isMainHandledExit=!1,this.initEvent(),this.doResourceReport(),this.doReceiveNoneReport()}return t.prototype.monitor=function(t){this.monitorID.push(t)},t.prototype.adt=function(t,e){this.adtDatas.push({pointid:t,pointvalue:e})},t.prototype.adtSum=function(t,e){this.pointIDValues[t]||(this.pointIDValues[t]=[0,0,i.SUM]),this.pointIDValues[t][0]+=e,this.pointIDValues[t][1]+=1},t.prototype.adtAverage=function(t,e){this.pointIDValues[t]||(this.pointIDValues[t]=[0,0,i.AVERAGE]),this.pointIDValues[t][0]+=e,this.pointIDValues[t][1]+=1},t.prototype.mergeIDValuesToAdt=function(){for(var t=Object.keys(this.pointIDValues),e=0;e<t.length;e++){var n=t[e],r=this.pointIDValues[n],o=0;r[2]===i.SUM?o=r[0]:r[2]===i.AVERAGE&&(o=r[0]/r[1]),this.adtDatas.push({pointid:n,pointvalue:o})}},t.prototype.syncDatasToMainThread=function(){this.mergeIDValuesToAdt();var t={monitor:this.monitorID,adt:this.adtDatas};self.postMessage({type:"reportInside",datas:t})},t.prototype.initEvent=function(){var t=this;a.b.on("beforeunload",(function(){t.isMainHandledExit=!0,t.mergeIDValuesToAdt(),t.saveInsideDatas()})),a.b.on("reportInside",(function(e){var n,r,o=e.datas,i=void 0===o?{}:o;t.mergeIDValuesToAdt();var a=i.monitor,s=i.adt;(n=t.monitorID).push.apply(n,a),(r=t.adtDatas).push.apply(r,s),t.saveInsideDatas()}))},t.prototype.doResourceReport=function(){var t=window&&(window.performance||window.webkitPerformance||window.msPerformance)||null,e=null;if(t&&t.getEntries?e=t.getEntries():t&&t.getEntriesByType&&(e=t.getEntriesByType("resource")),e)for(var n=e.length,r=0;r<n;r++){var i=e[r],a=i.name,s=i.duration,u=i.initiatorType;"script"===(u=u&&u.toLocaleLowerCase&&u.toLocaleLowerCase())&&(s=parseFloat(s.toFixed(2)),-1!==a.indexOf("alloyreport.inline.js")?this.adt(o.INLINE_LOAD_COST,s):-1!==a.indexOf("alloyreport.sdk.js")&&this.adt(o.SDK_LOAD_COST,s))}},t.prototype.doReceiveNoneReport=function(){var t=this;setTimeout((function(){t.pointIDValues[o.REPORT_TOTAL]||t.monitor(r.REPORT_NONE)}),6e4)},t}();e.c=new c},function(t,e,n){var r,o,i=n(0),a=n(3),s=n(4);!function(t){t[t.GET=0]="GET",t[t.POST=1]="POST",t[t.HEAD=2]="HEAD",t[t.BEACON=3]="BEACON"}(r||(r={})),function(t){t.HUATUO="huatuo",t.MONITOR="monitor",t.RETCODE="retcode",t.TDBANK="tdbank",t.TDW="tdw",t.COMMON="common",t.BEACON="beacon",t.ZZS="zzs"}(o||(o={}));var u,c,f=n(1),l=function(){function t(){this.MemStore={},this.isWxStorage=2===i.m}return t.prototype.set=function(t,e){if(i.m)try{return this.isWxStorage?i.c&&i.c.setStorageSync(t,e):i.b&&i.b.localStorage.setItem(t,JSON.stringify(e)),!0}catch(t){}return!1},t.prototype.get=function(t,e){var n;if(i.m)try{this.isWxStorage?n=i.c&&i.c.getStorageSync(t):(n=i.b&&i.b.localStorage.getItem(t)).length>512e3?(n=e,Object(f.d)("警告：调用频率过高，部分上报数据已丢失")):n=JSON.parse(n)}catch(t){}return n||(n=e,e&&this.set(t,n)),n},t}(),p=n(2),d=n(16),h=n(6),g=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},m=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},v=function(){function t(){var t=this;this.databaseName="AlloyReport-DB",this.tableName="AlloyReport-Table",this.expiredTime=Object(i.d)()-s.a.expiredTime,this.tsRangeExpired=IDBKeyRange.upperBound(this.expiredTime,!0),this.tsRangeNotExpired=IDBKeyRange.lowerBound(this.expiredTime,!1),this.statistic={},this.readonly="readonly",this.readwrite="readwrite",this.addDataCache=[],this.overLimitReport=!1,this.dbDataCache={},this.addBatch=function(){return g(t,void 0,void 0,(function(){var t=this;return m(this,(function(e){return g(t,void 0,void 0,(function(){var t,e,n,r,o,i=this;return m(this,(function(a){switch(a.label){case 0:return[4,this.getDB()];case 1:return t=a.sent(),e=t.transaction(this.tableName,this.readwrite),n=e.objectStore(this.tableName),r=this.addDataCache,this.addDataCache=[],o=r.map((function(t){return new Promise((function(e){var r=t.key,o=t.data,a=t.tryTimes,s=o.ts,u=n.add({key:r,data:o,tryTimes:0,ts:s});u.onsuccess=function(t){var n=t.target.result;i.setStatistic(r,n,s,a,o),e(!0)},u.onerror=function(t){Object(f.a)(t),e(!1)}}))})),Promise.all(o).then((function(){2===i.initedStatistic&&p.a.trigger("indexedDBDispatch",i.statistic)})).catch((function(t){Object(f.a)(t)})),[2]}}))})),[2]}))}))},this.handleFailByIDs=function(e,n){return g(t,void 0,void 0,(function(){var t,r,o,a=this;return m(this,(function(s){return(t=this.statistic[e])?(r=[],o=[],Object(i.o)(t,(function(t,i){var s=parseInt(t);if(-1!==n.indexOf(s)){var u=i[0],c=i[1];!c||c<1?(r.push(s),a.setStatistic(e,s,u,1)):(o.push(s),delete a.statistic[e][s])}})),this.query("id",this.readwrite,void 0,null,(function(t,e,n){-1!==o.indexOf(t.id)?e.delete(n.primaryKey):-1!==r.indexOf(t.id)&&e.put({id:t.id,key:t.key,data:t.data,tryTimes:1,ts:t.ts})})).then((function(){setTimeout((function(){p.a.trigger("indexedDBDispatch",a.statistic,e)}),1e3*Math.floor(120*Math.random()+30))})),h.c.adtSum(h.a.REPORT_FAIL,o.length),[2]):[2]}))}))},this.deleteByIDs=function(e){return g(t,void 0,void 0,(function(){var t,n,r,o,i,a,s,u;return m(this,(function(c){switch(c.label){case 0:for(t=Object.keys(this.statistic),u=0;u<t.length;u++)for(n=t[u],r=0;r<e.length;r++)o=e[r],delete this.statistic[n][o];return[4,this.getDB()];case 1:for(i=c.sent(),a=i.transaction(this.tableName,this.readwrite),s=a.objectStore(this.tableName),u=0;u<e.length;u++)s.delete(e[u]);return[2]}}))}))},this.initIndexedDB(),p.a.on("dispatchSuccessID",this.deleteByIDs),p.a.on("dispatchFailID",this.handleFailByIDs)}return t.prototype.add=function(t){return g(this,void 0,void 0,(function(){return m(this,(function(e){return this.addDataCache.push(t),Object(d.a)("dbAddBatch",this.addBatch,100),[2]}))}))},t.prototype.queryByIDs=function(t){return g(this,void 0,void 0,(function(){var e,n,r,o;return m(this,(function(i){for(e=[],n=!0,r=0;r<t.length;r++){if(!(o=this.dbDataCache[t[r]])){n=!1;break}e.push(o)}return n?[2,Promise.resolve(e)]:[2,this.query("id",this.readonly,void 0,(function(e){return-1!==t.indexOf(e.id)}))]}))}))},t.prototype.getStatistic=function(){return this.statistic},t.prototype.query=function(t,e,n,r,o){return g(this,void 0,void 0,(function(){var i=this;return m(this,(function(a){return[2,new Promise((function(a,s){return g(i,void 0,void 0,(function(){var i,s,u,c,l;return m(this,(function(p){switch(p.label){case 0:return[4,this.getDB()];case 1:return i=p.sent(),s=i.transaction(this.tableName,e),u=s.objectStore(this.tableName),c=u.index(t).openCursor(n),l=[],c.onsuccess=function(t){var e=c.result;e?(r&&r(e.value),l.push(e.value),o&&o(e.value,u,e),e.continue()):a(l)},c.onerror=function(t){Object(f.a)(t),a(t)},[2]}}))}))}))]}))}))},t.prototype.getDB=function(){return this.cacheGetDBPromise?this.cacheGetDBPromise:this.db?this.db:(this.cacheGetDBPromise=this.initIndexedDB(),this.cacheGetDBPromise)},t.prototype.initIndexedDB=function(){var t=this;return new Promise((function(e){var n=indexedDB.open(t.databaseName);n.onerror=function(t){h.c.monitor(h.b.INDEDEDDB_OPEN_FAIL),Object(f.a)("打开 indexdb 失败。",t)},n.onsuccess=function(n){t.db=n.target.result,Object(f.b)("打开 indexdb 成功"),t.initStatistic(),e(t.db)},n.onupgradeneeded=function(e){var n=e.target.result;if(!n.objectStoreNames.contains(t.databaseName)){var r=n.createObjectStore(t.tableName,{keyPath:"id",autoIncrement:!0});r.createIndex("key","key",{unique:!1}),r.createIndex("tryTimes","tryTimes",{unique:!1}),r.createIndex("ts","ts",{unique:!1}),r.createIndex("id","id",{unique:!1})}}}))},t.prototype.setStatistic=function(t,e,n,r,o){this.statistic[t]||(this.statistic[t]={});var i=this.statistic[t];if(i[e]=[n,r],o){this.dbDataCache[e]={id:e,key:t,data:o,tryTimes:r,ts:n};var a=Object.keys(this.dbDataCache);if(a.length>50){a.sort();for(var u=a.slice(0,a.length-50).map((function(t){return parseInt(t)})),c=0;c<u.length;c++)delete this.dbDataCache[u[c]]}}else delete this.dbDataCache[e];var f=Object.keys(i),l=f.length,p=s.a.maxStoreReport;l>p&&(f.sort(),u=f.slice(0,l-p).map((function(t){return parseInt(t)})),this.deleteByIDs(u),this.overLimitReport||(this.overLimitReport=!0,h.c.monitor(h.b.INDEDEDDB_OVER_LIMIT)))},t.prototype.initStatistic=function(){var t=this;this.initedStatistic||(this.initedStatistic=1,this.query("ts",this.readonly,this.tsRangeNotExpired,null,(function(e){var n=e.id,r=e.ts,o=e.tryTimes,i=e.key;t.setStatistic(i,n,r,o)})).then((function(){t.initedStatistic=2,p.a.trigger("indexedDBDispatch",t.statistic,null)})).catch((function(){t.initedStatistic=2,p.a.trigger("indexedDBDispatch",t.statistic,null)})),this.deleteExpiredReporter())},t.prototype.deleteExpiredReporter=function(){return g(this,void 0,Promise,(function(){var t,e=this;return m(this,(function(n){return t=0,[2,new Promise((function(n,r){return g(e,void 0,void 0,(function(){var e,r,o,i;return m(this,(function(a){switch(a.label){case 0:return[4,this.getDB()];case 1:return e=a.sent(),r=e.transaction(this.tableName,this.readwrite),o=r.objectStore(this.tableName),(i=o.index("ts").openCursor(this.tsRangeExpired)).onsuccess=function(e){var r=i.result;r?(o.delete(r.primaryKey),r.continue(),t++):(t?(h.c.monitor(h.b.INDEDEDDB_OVER_TIME),Object(f.b)("过期上报数据已清除")):Object(f.b)("当前没有过期上报数据"),n())},i.onerror=function(t){Object(f.a)(t),n()},[2]}}))}))}))]}))}))},t}(),y=function(){var t=this;this.MemStore={},this.set=function(e,n){t.MemStore[e]=n},this.get=function(e,n){var r;return(r=t.MemStore[e])||(r=n,n&&t.set(e,r)),r},this.each=function(e){for(var n=t.MemStore,r=Object.keys(n),o=r.length,i=0;i<o;i++)e&&e(n[r[i]])}},b=new(function(){function t(){var t=this;this.isIndexedDB=!1,this.isLocalDB=!1,this.get=function(e,n){return t.isLocalDB?t.constDB.get(e,n):t.db.get(e,n)},this.set=function(e,n){return t.isLocalDB?t.constDB.set(e,n):t.db.set(e,n)},this.add=function(e){var n=t.constDB.add(e);return n.catch((function(t){Object(f.a)(t)})),n},this.queryByIDs=function(e){var n=t.constDB.queryByIDs(e);return n.catch((function(t){Object(f.a)(t)})),n},this.db=new y;try{Object(a.b)()&&Object(a.a)()||this.initConstDB()}catch(t){Object(f.a)(t)}}return t.prototype.initConstDB=function(){i.l?(this.constDB=new v,this.isIndexedDB=!0):i.m&&(this.constDB=new l,this.isLocalDB=!0),i.l||h.c.monitor(h.b.NO_INDEDEDDB)},t.prototype.getStatistic=function(){return this.constDB.getStatistic()},t}()),w=n(12),O=function(){return(O=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};!function(t){t[t.ALL=1]="ALL",t[t.PART=2]="PART"}(u||(u={})),function(t){t[t.ERROR=-1]="ERROR",t[t.ALL=1]="ALL",t[t.PART=2]="PART"}(c||(c={}));var T=function(){function t(){var t=this;this.lastAddToBatchTime={},this.storeConfig=new y,this.dispatchTimeIDs={},this.sentIDs=[],this.count=0,this.dispatchBatch=function(e,n){if(!s.a.supportOffline||w.a.getStatus()){var r=t.dispatchTimeIDs,o=Object(i.d)();if(n)clearTimeout(r[n]),o-t.lastAddToBatchTime[n]>2e3?(t.dispatchBatchBySourceKey(e,n,u.ALL),t.lastAddToBatchTime[n]=0):t.dispatchBatchBySourceKey(e,n,u.PART)===c.PART&&(r[n]=setTimeout((function(){t.dispatchBatch(b.getStatistic(),n)}),2e3));else for(var a=Object.keys(e),l=0;l<a.length;l++){var p=a[l];t.dispatchBatchBySourceKey(e,p,u.ALL),t.lastAddToBatchTime[p]=0}}else Object(f.b)("网络离线，暂停上报")},p.a.on("indexedDBDispatch",this.dispatchBatch),p.b.on("networkConnect",(function(){Object(f.b)("网络恢复，上报离线数据"),p.a.trigger("indexedDBDispatch",b.getStatistic(),null)}))}return t.prototype.addOne=function(t,e,n){var r=t.sourceKey,o=Object(i.d)();b.add({key:r,data:{ts:o+this.count,param:e,opts:n},tryTimes:0}),this.count++,this.lastAddToBatchTime[r]||(this.lastAddToBatchTime[r]=o)},t.prototype.successItems=function(t,e){var n=e.map((function(t){return t.id})),r=this.sentIDs.filter((function(t){return-1===n.indexOf(t)}));this.sentIDs=r,p.a.trigger("dispatchSuccessID",n)},t.prototype.failItems=function(t,e){var n=t.sourceKey,r=e.map((function(t){return t.id})),o=this.sentIDs.filter((function(t){return-1===r.indexOf(t)}));this.sentIDs=o,s.a.supportOffline&&!w.a.getStatus()||p.a.trigger("dispatchFailID",n,r)},t.prototype.getConfigBySourceKey=function(t){if(s.a.mergeQueueConfig.sourceKey===t)return s.a.mergeQueueConfig;var e=dt.getAdapterBySourceKey(t);return e&&e.configs&&e.configs.queueConfig?e.configs.queueConfig:null},t.prototype.dispatchBatchBySourceKey=function(t,e,n){if(!t[e])return c.ERROR;var r=Object.keys(t[e]).map((function(t){return parseInt(t,10)})),o=(r=this.filterIDsBySent(r)).length;if(o<1)return c.ERROR;var i=this.getConfigBySourceKey(e);if(!i)return c.ERROR;var a=i.maxInBatch||10,s=c.ALL;if(n===u.PART){if(o<a)return c.PART;var f=o%a;s=0===f?c.ALL:c.PART,r.sort(),r=r.slice(0,o-f)}return this.dispatchBatchByIds(r,i,a),s},t.prototype.dispatchBatchByIds=function(t,e,n){var r=e.sourceKey;this.sentIDs=this.sentIDs.concat(t),b.queryByIDs(t).then((function(o){for(var i=[],a=0;a<o.length;a++){var u=o[a],c=u.data,f=u.id;-1!==t.indexOf(f)&&i.push(O(O({},c),{id:f}))}for(a=0;a<i.length;a+=n){var l=i.slice(a,a+n);r===s.a.mergeQueueConfig.sourceKey?p.a.trigger("dispatchMerge",e,l):p.a.trigger("dispatchCommon",e,l)}})).catch((function(t){Object(f.a)(t),Object(f.a)("从数据库取数据错误")}))},t.prototype.filterIDsBySent=function(t){var e=this.sentIDs;return t.filter((function(t){return-1===e.indexOf(t)}))},t}(),S=function(){function t(){this.storeConfig=new y,this.addTimeIDs={},this.dispatchTimeIDs={},this.lastAddToBatchTime={},this.batchCache={},this.counter=0}return t.prototype.addOne=function(t,e,n){e&&this.addToBatch(t,e,n)},t.prototype.successItems=function(t,e){for(var n=t.pendingKey,r=t.sourceKey,o=b.get(n,[]),i=b.get(r,[]),a=[],s=[],u=e.map((function(t){return t.ts})),c=o.length-1;c>=0;c--)-1===u.indexOf(o[c].ts)&&s.push(o[c]);for(c=i.length-1;c>=0;c--)-1===u.indexOf(i[c].ts)&&a.push(i[c]);o.length!==s.length&&b.set(n,s),i.length!==a.length&&b.set(r,a)},t.prototype.failItems=function(t,e){for(var n=t.pendingKey,r=t.sourceKey,o=b.get(n,[]),i=b.get(r,[]),a=[],u=[],c=e.map((function(t){return t.ts})),f=o.length-1;f>=0;f--){var l=o[f];-1!==c.indexOf(l.ts)?(!l.tryTimes||l.tryTimes<1||s.a.supportOffline&&!w.a.getStatus())&&(l.tryTimes=1,a.push(l)):u.push(l)}o.length!==u.length&&b.set(n,u),i.length!==a.length&&b.set(r,a);var p=i.length+o.length-(u.length+a.length);h.c.adtSum(h.a.REPORT_FAIL,p)},t.prototype.addToBatch=function(t,e,n){var r=this,o=(this.storeConfig,this.addTimeIDs),a=this.lastAddToBatchTime,s=this.batchCache,u=t.sourceKey,c=Object(i.d)();if(clearTimeout(o[u]),s[u]||(s[u]=[]),a[u]&&c-a[u]<50)return e&&(s[u].push({ts:c+this.counter,param:e,opts:n}),this.counter+=1),void(o[u]=setTimeout((function(){r.addToBatch(t,null,{})}),10));var f=b.get(u,[]);this.storeConfig.set(u,t),f||(f=[]),e&&f.push({id:c+this.counter,param:e,opts:n}),s[u].length&&(f=f.concat(s[u])),s[u]=[],a[u]=c,b.set(u,f),this.dispatchBatch(t,f)},t.prototype.dispatchBatch=function(t,e){var n=this;if(!s.a.supportOffline||w.a.getStatus()){var r=this.dispatchTimeIDs,o=t.sourceKey,a=t.pendingKey,u=t.maxInBatch,c=void 0===u?10:u,l=0;if(c<1&&(c=10),clearTimeout(r[o]),e.length>0)if(e.length>=c?l=c:Object(i.d)()-this.lastAddToBatchTime[o]>2e3&&(l=e.length),0!==l){for(var d=b.get(a,[]),h=[],g=0;g<l;g++)e[g].startTime=Object(i.d)(),h.push(e[g]),d.push(e[g]);var m=e.slice(l);b.set(t.sourceKey,m),b.set(t.pendingKey,d),o===s.a.mergeQueueConfig.sourceKey?p.a.trigger("dispatchMerge",t,h):p.a.trigger("dispatchCommon",t,h),m.length>=c&&this.dispatchBatch(t,m)}else r[o]=setTimeout((function(){n.dispatchBatch(t,e)}),2e3)}else Object(f.b)("网络离线，暂停上报")},t}(),D=new(function(){function t(){b.isIndexedDB?this.queueInstance=new T:this.queueInstance=new S}return t.prototype.addOne=function(t,e,n){this.queueInstance.addOne(t,e,n),s.a.supportOffline&&!w.a.getStatus()&&h.c.adtSum(h.a.REPORT_OFFLINE,1)},t.prototype.successItems=function(t,e){this.queueInstance.successItems(t,e)},t.prototype.failItems=function(t,e){this.queueInstance.failItems(t,e)},t}()),x=n(10),R=new(function(){function t(){var t=this;this.sendReporter=function(e,n,o){if(0!==n.length){for(var i=[],a="",s=0;s<n.length;s++){var u=n[s],c=u.param,f=u.opts;i.push(c),a=f.name}var l=dt.getAdapterByName(a),p=l.getConfigs(),d=l.getMethods(),h=function(){o?D.successItems(o,n):D.successItems(e,n)},g=function(){o?D.failItems(o,n):D.failItems(e,n)};if(d[r.HEAD]||d[r.GET]){var m=l.transToURL(i,n[0].opts);if(t.isUrlOverLimit(m))return void t.sendRequestViaDatas(p.baseURL,l.buildData(i,{}),h,g);t.sendRequestViaURls(m,h,g)}else t.sendRequestViaDatas(p.baseURL,l.buildData(i,{}),h,g)}},this.initEvent()}return t.prototype.initEvent=function(){p.a.on("dispatchCommon",this.sendReporter),p.a.on("dispatchTryCommon",this.sendReporter)},t.prototype.isUrlOverLimit=function(t){return(Array.isArray(t)?t:[t]).some((function(t){return t.length>2e3}))},t.prototype.sendRequestViaURls=function(t,e,n){if(Object(i.g)(t))for(var r=0;r<t.length;r++)Object(x.a)({url:t[r]+"&t="+Object(i.d)(),method:"GET",onSucc:e,onError:n,onTimeout:n});else t&&Object(x.a)({url:t+"&t="+Object(i.d)(),method:"GET",onSucc:e,onError:n,onTimeout:n})},t.prototype.sendRequestViaDatas=function(t,e,n,r){if(Object(i.g)(e))for(var o=0;o<e.length;o++)Object(x.a)({url:t,method:"POST",onSucc:n,onError:r,onTimeout:r,data:e[o],postFormat:"JSON"});else e&&Object(x.a)({url:t,method:"POST",onSucc:n,onError:r,onTimeout:r,data:e,postFormat:"JSON"})},t.prototype.report=function(t,e,n,o){var i=t.getConfigs(),a=t.getMethods(),s=i.queueConfig;if(Object(f.b)("[common-"+n.name+"]",e),o&&(a[r.HEAD]||a[r.GET])){var u=t.transToURL(e,n);return this.isUrlOverLimit(u)?void this.sendRequestViaDatas(i.baseURL,t.buildData(e,{})):void this.sendRequestViaURls(u)}o&&this.sendRequestViaDatas(i.baseURL,t.buildData(e,{})),D.addOne(s,e,n)},t}()),I=new(function(){function t(){this.LSErrorFlag=0,this.LSTimeDiffDelay=0,this.LSTestModeFlag=0,this.errorFlag={set:this.errorSet,get:this.errorGet,clear:function(){}},this.testModeFlag={set:this.testSet,get:this.testGet,clear:this.testClear},this.timeDiffFlag={set:this.diffSet,get:this.diffGet,clear:function(){}}}return t.prototype.errorSet=function(t){this.LSErrorFlag=1},t.prototype.errorGet=function(){return 1===this.LSErrorFlag},t.prototype.testGet=function(){var t=+new Date,e=this.LSTestModeFlag;return 0!==e&&t-e<6048e5},t.prototype.testSet=function(){this.LSTestModeFlag=+new Date},t.prototype.testClear=function(){this.LSTestModeFlag=0},t.prototype.diffSet=function(){this.LSTimeDiffDelay=+new Date},t.prototype.diffGet=function(){var t=+new Date,e=this.LSTimeDiffDelay;return!(0===e||t-e>864e5)},t}()),j=new(function(){function t(){this.started=!1,this.LSLastPingTime=0,this.LSErrorFlag=1}return t.prototype.send=function(t){var e=this;Object(x.a)({url:t+"?v=3&t="+ +new Date+"&q=check",onSucc:function(){e.started=!1,clearInterval(e.intervalHandler),e.LSErrorFlag=0},method:"GET"})},t.prototype.start=function(t){var e=this;this.pingURL=t,this.started||(this.started=!0,clearInterval(this.intervalHandler),this.intervalHandler=setInterval((function(){var t=e.LSLastPingTime,n=Object(i.d)();0===t?e.LSLastPingTime=n:n>t+6e4&&(e.LSLastPingTime=n,e.send(e.pingURL))}),6e4))},t.prototype.stop=function(){this.intervalHandler&&(clearInterval(this.intervalHandler),this.intervalHandler=null)},t}()),_=n(15),E=n.n(_),C=I.errorFlag,A=I.testModeFlag,k=new(function(){function t(){var t=this;this.sendReporter=function(e,n){s.a.mergeQueueConfig,n.length&&Object(x.a)({onSucc:function(){A.clear(),j.stop(),D.successItems(s.a.mergeQueueConfig,n)},onError:function(e){C.set(s.a.cgiURL),t.dispatchOriginRequest(n),4===e&&$.commonReport(2394321)},onTimeout:function(){t.dispatchOriginRequest(n),Object(i.d)()-Object(i.d)()<8e3&&$.commonReport(2589015),C.set(s.a.cgiURL)},onTest:function(){A.set(),D.successItems(s.a.mergeQueueConfig,n)},timeout:1e4,url:s.a.cgiURL,data:t.buildData(n),method:"POST"})},this.initEvent()}return t.prototype.initEvent=function(){p.a.on("dispatchMerge",this.sendReporter)},t.prototype.getAdapterConfigByName=function(t){var e=dt.getAdapterByName(t);return e&&e.getConfigs()||{}},t.prototype.buildData=function(t){for(var e=[],n=0;n<t.length;n++)Object(f.b)("[merge-"+t[n].opts.name+"]",t[n].param),e.push({param:t[n].param,opts:t[n].opts});var r=JSON.stringify(e);return e=E.a.compressToBase64(r),e=encodeURIComponent(e),{v:"3",t:+new Date,q:e}},t.prototype.splitItemsBySourceKey=function(t){for(var e={},n=0;n<t.length;n++){var r=t[n],o=dt.getAdapterByName(r.opts.name).getSourceKey();e[o]||(e[o]=[]),e[o].push(r)}return e},t.prototype.sendOriginalRequest=function(t){for(var e=0;e<t.length;e++)dt.getAdapterByName(t[e].opts.name).commonReport(t[e].param,t[e].opts)},t.prototype.dispatchOriginRequest=function(t){var e=this.splitItemsBySourceKey(t);Object(i.o)(e,(function(t,e){var n=dt.getAdapterBySourceKey(t).getConfigs();p.a.trigger("dispatchTryCommon",n,e,s.a.mergeQueueConfig)}))},t.prototype.report=function(t,e,n){var r=t.getConfigs(),o=r.shouldMerge,i=r.reportInTestMode,a=!1;if(o?A.get()?("function"!=typeof o||o(e))&&("function"!=typeof i||i(e))||(a=!0):"function"!=typeof o||o(e)||(a=!0):a=!0,a)R.report(t,e,n,!1);else{var u=s.a.mergeQueueConfig;D.addOne(u,e,n)}},t}()),P=new(function(){function t(){}return t.prototype.report=function(t,e,n){Object(f.b)("[immediate-"+n.name+"]",e);var r=t.transToURL(e,n);if(r){var o=r+"&t="+Object(i.d)();if(!Object(x.b)({url:o})){t.getConfigs().queueConfig;var a=function(){t.report(e,n,!1)};Object(x.a)({url:o,method:"GET",onSucc:function(){},onError:a,onTimeout:a})}}},t}()),M=function(t,e,n,o){t.getConfigs();var i=t.getMethods();o&&i[r.BEACON]?P.report(t,e,n):s.a.enableMergeReport?k.report(t,e,n):R.report(t,e,n,o)},L=n(5),B=n(9),q=n(11),N=function(){var t=this;this.adapterName=o.COMMON,this.transToURL=function(t,e){return""},this.buildData=function(t,e){return{}},this.resetConfig=function(e){t.configs?q.a||(Object(i.n)(t.configs,e),t.syncConfigToWorker()):Object(f.a)("找不到此适配器")},this.getConfigs=function(){return t.configs||{}},this.getMethods=function(){var e=t.configs.methods.toString(2);return e.length<4&&(e=new Array(4-e.length).fill("0").join("")+e),e.split("").map((function(t){return parseInt(t)}))},this.getSourceKey=function(){var e=t.getConfigs();return e.queueConfig&&e.queueConfig.sourceKey||""},this.report=function(e,n,r){void 0===n&&(n={}),void 0===r&&(r=!1),n.name=t.adapterName,Object(a.a)()&&h.c.adtSum(h.a.REPORT_TOTAL,1);try{Object(a.a)()&&!r?B.a.postMessageToWorker({type:"api",payload:{data:e,opts:n,isImmediately:r},opts:{reportType:"auto"}}):M(t,e,n,r)}catch(t){Object(f.a)(t)}},this.commonReport=function(e,n,r){void 0===n&&(n={}),void 0===r&&(r=!1),n.name=t.adapterName;try{Object(a.a)()?B.a.postMessageToWorker({type:"api",payload:{data:e,opts:n,isImmediately:r},opts:{reportType:"common"}}):(L.a.onBeforeCommonReport(e,n,r),R.report(t,e,n,r))}catch(t){Object(f.a)(t)}},this.mergeReport=function(e,n){void 0===n&&(n={}),n.name=t.adapterName;try{Object(a.a)()?B.a.postMessageToWorker({type:"api",payload:{data:e,opts:n,isImmediately:!1},opts:{reportType:"merge"}}):(L.a.onBeforeMergeReport(e,n),k.report(t,e,n))}catch(t){Object(f.a)(t)}},this.apiRequestToWorker=function(t,e,n){B.a.postMessageToWorker({type:"apiWorker",payload:{data:t,opts:e},opts:{reportType:n}},!0)},this.syncConfigToWorker=function(){if(Object(a.a)()){var e=t.configs,n=e.baseURL,r=e.shouldMerge,o=e.reportInTestMode,i=e.queueConfig,s={baseURL:n,shouldMerge:"function"==typeof r?r():r,reportInTestMode:"function"==typeof o?o():o,queueConfig:{maxInBatch:i.maxInBatch,maxSize:i.maxSize}};B.a.postMessageToWorker({type:"adapterConfig",payload:s,opts:{adapterName:t.adapterName}})}}},W=new N;function F(t){return(F="function"==typeof Symbol&&"symbol"==et(Symbol.iterator)?function(t){return et(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":et(t)})(t)}var U,Q,K,V,H,G,z,J,X=(U=function(t,e){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}U(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Y=new(function(t){function e(){var e=t.call(this)||this;return e.adapterName=o.HUATUO,e.configs={baseURL:"https://report.idqqimg.com/node_b/speedreport?",shouldMerge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},reportInTestMode:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},queueConfig:{sourceKey:"huatuo_queue_v3",pendingKey:"huatuo_pending_v3",maxInBatch:20,maxSize:10},methods:15,postFormat:"FORM-DATA"},e.transToURL=function(t,n){var r,o,a=t||[];"object"!==F(t)||Object(i.g)(t)||(a=[t]);var s=[];if(!a.length)return[];for(var u in r=e.exractData(a))r.hasOwnProperty(u)&&(o={flag1:r[u].flag1,flag2:r[u].flag2,flag3:r[u].flag3,apn:n.envInfo.apn,appid:r[u].appid,platform:n.envInfo.platform},Object.assign(o,r[u].timingObj),s.push(e.configs.baseURL+Object(i.q)(o)));return s},e}return X(e,t),e.prototype.exractData=function(t){var e=t||[],n=null,r="";if(e.length){n={};for(var o=0;o<e.length;o++)n[r=e[o].flag1+"_"+e[o].flag2+"_"+e[o].flag3+e[o].appid]||(n[r]={flag1:e[o].flag1,flag2:e[o].flag2,flag3:e[o].flag3,appid:e[o].appid,timingObj:{}}),n[r].timingObj[e[o].id]=e[o].timing}return n},e}(N)),Z=(J=function(t,e){return(J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}J(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),$=new(function(t){function e(){var e=t.call(this)||this;return e.adapterName=o.MONITOR,e.configs={baseURL:q.a?"https://docrp.weixin.qq.com/report/node_b/monitorreport?monitors=":"https://report.idqqimg.com/node_b/monitorreport?monitors=",shouldMerge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},reportInTestMode:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},queueConfig:{sourceKey:"monitor_queue_v3",pendingKey:"monitor_pending_v3",maxInBatch:100,maxSize:10},methods:15,postFormat:"FORM-DATA"},e.transToURL=function(t){var n=[];return"number"==typeof t?n.push(t):Object(i.g)(t)&&(n=t),n.length&&e.configs?e.configs.baseURL+"["+n+"]":""},e}return Z(e,t),e}(N)),tt=(z=function(t,e){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}z(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),nt=new(function(t){function e(){var e=t.call(this)||this;return e.adapterName=o.RETCODE,e.configs={baseURL:q.a?"https://docrp.weixin.qq.com/report/node_b/retcodereport?":"https://report.idqqimg.com/node_b/retcodereport?",shouldMerge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},reportInTestMode:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},queueConfig:{sourceKey:"retcode_queue_v3",pendingKey:"retcode_pending_v3",maxInBatch:20,maxSize:10},methods:15,postFormat:"FORM-DATA"},e.keyList=["domain","cgi","type","code","time","rate","uin","apn","device","signalStrength","expansion1","expansion2","expansion3","data","platform","appid"],e.transToURL=function(t,n){var r,o="",a=[];if(Object(i.g)(t))for(r=0;r<t.length;r++)a.push(e.extractData(t[r],r+1));else a.push(e.extractData(t,1));return a.length>0?(o=e.configs.baseURL+"key="+encodeURIComponent(e.keyList.join(",")),o+="&"+a.join("&")):o},e}return tt(e,t),e.prototype.extractData=function(t,e){for(var n=[],r=0;r<this.keyList.length;r++)n.push(e+"_"+(r+1)+"="+encodeURIComponent(t[this.keyList[r]]));if(n.length>0)return n.join("&")},e}(N)),rt=(G=function(t,e){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}G(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ot=new(function(t){function e(){var e=t.call(this)||this;return e.adapterName=o.TDBANK,e.configs={baseURL:"https://report.idqqimg.com/node_b/tdbankreport?",shouldMerge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},reportInTestMode:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},queueConfig:{sourceKey:"tdbank_queue_v3",pendingKey:"tdbank_pending_v3",maxInBatch:20,maxSize:10},methods:15,postFormat:"FORM-DATA"},e.transToURL=function(t,n){var r,o,a,s=t||[],u=[],c={};if(Object(i.g)(s)){r=s.length;for(var f=0;f<r;f++)c[a=(o=s[f]).tdbank_table&&o.tdbank_busi_id?o.tdbank_table+"|"+o.tdbank_busi_id:o.table_id+"|"+o.busi_id]||(c[a]=[]),c[a].push(o);for(var l in c)c.hasOwnProperty(l)&&u.push(e.getItemURL(c[l],n));return u}return e.getItemURL([s],n)},e}return rt(e,t),e.prototype.getItemURL=function(t,e){var n,r,o,a=[],s=[],u={},c={tdbank_busi_id:!0,tdbank_table:!0,busi_id:!0,table_id:!0};return function(){var e,n,i,f,l=1,p=[];for(e=0;e<t.length;e++)for(i in f=t[e],r=t[e].tdbank_table||t[e].table_id,o=t[e].tdbank_busi_id||t[e].busi_id,f)if(f.hasOwnProperty(i)){if(c[i])continue;if(u[i])continue;u[i]=l++,a.push(i)}for(e=0;e<t.length;e++){for(f=t[e],p=new Array(a.length),n=0;n<a.length;n++)p[n]=void 0===f[a[n]]?"":f[a[n]];s.push(p)}}(),t&&0!==t.length?(n={table_id:r,busi_id:o,fields:JSON.stringify(a),datas:JSON.stringify(s)},n=this.configs.baseURL+Object(i.q)(n)):""},e}(N)),it=(H=function(t,e){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}H(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),at=function(){return(at=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},st=new(function(t){function e(){var e=t.call(this)||this;return e.adapterName=o.TDW,e.configs={baseURL:q.a?"https://docrp.weixin.qq.com/report/node_b/tdwreport?":"https://report.idqqimg.com/node_b/tdwreport?",shouldMerge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},reportInTestMode:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},queueConfig:{sourceKey:"tdw_queue_v3",pendingKey:"tdw_pending_v3",maxInBatch:20,maxSize:10},methods:15,postFormat:"FORM-DATA"},e.transToURL=function(t,n){var r,o,a=t||[],s=at({timeField:"t"},n),u=[],c={};if(Object(i.g)(a)){r=a.length;for(var f=0;f<r;f++)c[(o=a[f]).table]||(c[o.table]=[]),c[o.table].push(o);for(var l in c)c.hasOwnProperty(l)&&u.push(e.getItemURL(c[l],l,s));return u}return e.getItemURL([a],a.table,s)},e}return it(e,t),e.prototype.getItemURL=function(t,e,n){var r,o=[],a=[],s={},u={};return delete t.table,u[n.timeField]=!0,function(){var e,n,r,i,c=1,f=[];for(e=0;e<t.length;e++)for(r in i=t[e])if(i.hasOwnProperty(r)){if(u[r])continue;if(s[r])continue;s[r]=c++,o.push(r)}for(e=0;e<t.length;e++){for(i=t[e],f=new Array(o.length),n=0;n<o.length;n++)f[n]=void 0===i[o[n]]?"":i[o[n]];a.push(f)}}(),t&&0!==t.length?(r={table:e,fields:JSON.stringify(o),datas:JSON.stringify(a),pr_t:n.timeField},r=this.configs.baseURL+Object(i.q)(r)):""},e}(N)),ut=(V=function(t,e){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}V(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ct=new(function(t){function e(){var e=t.call(this)||this;return e.adapterName=o.BEACON,e.configs={baseURL:"https://otheve.beacon.qq.com/analytics/upload?tp=js",shouldMerge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},reportInTestMode:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},queueConfig:{sourceKey:"beacon_queue_v3",pendingKey:"beacon_pending_v3",maxInBatch:20,maxSize:10},methods:4,postFormat:"JSON"},e.buildData=function(t,e){var n;if(Object(i.g)(t)){var r=t;if(r.length<2)return r;for(var o={},a=0;a<r.length;a++){var s=r[a],u=s.appkey;o[u]?(n=o[u].msgs[0].data.events).push.apply(n,s.msgs[0].data.events):o[u]=s}return Object.keys(o).map((function(t){return o[t]}))}return[t]},e}return ut(e,t),e}(N)),ft=(K=function(t,e){return(K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}K(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});!function(t){t.STATUS="status",t.VALUE="value"}(Q||(Q={}));var lt=new(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.adapterName=o.ZZS,e.configs={baseURL:q.a?"https://docrp.weixin.qq.com/report/node_b/zzsreport":"https://report.idqqimg.com/node_b/zzsreport",shouldMerge:function(){return!1},reportInTestMode:function(){return!1},queueConfig:{sourceKey:"zzs_queue_v3",pendingKey:"zzs_pending_v3",maxInBatch:100,maxSize:100},methods:4,postFormat:"JSON"},e.buildData=function(t){var n,r,o,a,s,u,c,f=t;return Object(i.g)(t)||(f=[t]),{domain:null===(n=f[0])||void 0===n?void 0:n.domain,tenant:null===(r=f[0])||void 0===r?void 0:r.tenant,third:null===(o=f[0])||void 0===o?void 0:o.third,platform:null===(a=f[0])||void 0===a?void 0:a.platform,source:null===(s=f[0])||void 0===s?void 0:s.source,version:null===(u=f[0])||void 0===u?void 0:u.version,env:null===(c=f[0])||void 0===c?void 0:c.env,datas:f.map((function(t){var n,r=e.getDataFieldsWithType(t.type).map((function(e){var n;return null!==(n=t[e])&&void 0!==n?n:""})),o=[null!==(n=t.errmsg)&&void 0!==n?n:""];return t.dimensions&&(o=o.concat(t.dimensions)),r.push(o),r}))}},e}return ft(e,t),e.prototype.getDataFieldsWithType=function(t){switch(t){case Q.VALUE:return["project","type","attrid","value"];case Q.STATUS:default:return["project","type","attrid","status"]}},e}(N));n.d(e,"d",(function(){return Y})),n.d(e,"e",(function(){return $})),n.d(e,"f",(function(){return nt})),n.d(e,"g",(function(){return ot})),n.d(e,"h",(function(){return st})),n.d(e,"b",(function(){return W})),n.d(e,"a",(function(){return ct})),n.d(e,"i",(function(){return lt}));var pt=function(){function t(){}return t.prototype.getAdapterByName=function(t){switch(t){case o.HUATUO:return Y;case o.MONITOR:return $;case o.RETCODE:return nt;case o.TDBANK:return ot;case o.TDW:return st;case o.BEACON:return ct;case o.ZZS:return lt;default:return W}},t.prototype.getAdapterBySourceKey=function(t){switch(t){case Y.configs.queueConfig.sourceKey:return Y;case $.configs.queueConfig.sourceKey:return $;case nt.configs.queueConfig.sourceKey:return nt;case ot.configs.queueConfig.sourceKey:return ot;case st.configs.queueConfig.sourceKey:return st;case ct.configs.queueConfig.sourceKey:return ct;case lt.configs.queueConfig.sourceKey:return lt;default:return W}},t}(),dt=e.c=new pt},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==et(Symbol.iterator)?function(t){return et(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":et(t)})(t)}var o,i=new(function(){function t(){this.ua=navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase()||"",this.href=location&&location.href||"",this.wxUrlContainStr="__wxjs_environment=miniprogram",this.qqUrlContainStr="__wxjs_environment=qqminiprogram",this.ie=/rv:([\d.]+)\) like gecko/.test(this.ua)||/msie ([\d.]+)/.test(this.ua)||/Trident/.test(this.ua),this.chrome=/chrome\/([\d.]+)/.test(this.ua),this.opera=/opera/.test(this.ua),this.safari=/webkit/.test(this.ua),this.firefox=/firefox/.test(this.ua)&&!/(compatible|webkit)/.test(this.ua),this.edge=/edge/.test(this.ua),this.edgeChromium=this.chrome&&this.edge,this.isPad=/(ipad)/i.test(this.ua),this.isMobile=/(mobile)/i.test(this.ua)&&!this.isPad,this.isMac=/Mac OS X/i.test(this.ua)&&!this.isMobile,this.isAndroid=/android|adr/i.test(this.ua),this.isIOS=/(iphone|ipad|ipod)/.test(this.ua),this.isWindowStore=/MSAppHost/i.test(this.ua),this.isPCQQBrowser=!this.isMobile&&/QQBrowser/i.test(this.ua)&&!/QBCore/i.test(this.ua),this.isMobileQQBrowser=this.isMobile&&/MQQBrowser/i.test(this.ua)&&!/TBS/i.test(this.ua),this.isQQBrowser=this.isMobile?this.isMobileQQBrowser:this.isPCQQBrowser,this.isWxMiniProgram=this.href.indexOf(this.wxUrlContainStr)>-1||/MicroMessenger/i.test(this.ua)&&/miniProgram/i.test(this.ua),this.isQQMiniProgram=this.href.indexOf(this.qqUrlContainStr)>-1||/QQ/i.test(this.ua)&&/MiniApp/i.test(this.ua),this.isMiniProgram=this.isWxMiniProgram||this.isQQMiniProgram,this.isWxWork=/(wxwork)/i.test(this.ua),this.isWeWork=this.isWxWork,this.isWeChat=/MicroMessenger/i.test(this.ua)&&!this.isWxWork&&!this.isWxMiniProgram,this.isWechat=this.isWeChat,this.isTim=/TIM/i.test(this.ua),this.isQQ=/QQ/i.test(this.ua)&&!this.isWxWork&&!this.isWeChat&&!this.isQQBrowser&&!this.isTim&&!this.isQQMiniProgram,this.isTimOrQQ=this.isTim||this.isQQ,this.isTimOrQQFamily=this.isTim||/QQ/i.test(this.ua),this.isPCTim=/QBCore/i.test(this.ua)&&/TIM2.0/i.test(this.ua),this.isWindowPlatform=/(win64|wow64|win32|wow32)/i.test(this.ua),this.isQQNativeMiniProgram="object"===("undefined"==typeof wx?"undefined":r(wx))&&"function"==typeof wx.canIUse&&wx.canIUse("request"),this.isWxNativeMiniProgram=!this.isQQNativeMiniProgram&&"object"===("undefined"==typeof qq?"undefined":r(qq))&&"function"==typeof qq.canIUse&&qq.canIUse("request"),this.isNativeMiniProgram=this.isQQNativeMiniProgram||this.isWxNativeMiniProgram}return Object.defineProperty(t.prototype,"browser",{get:function(){return{isIE:this.ie,isChrome:this.chrome,isOpera:this.opera,isSafari:this.safari,isFirefox:this.firefox,isEdge:this.edge,isEdgeChromium:this.edgeChromium,isPCQQBrowser:this.isPCQQBrowser,isMobileQQBrowser:this.isMobileQQBrowser,isQQBrowser:this.isQQBrowser}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"platform",{get:function(){return{isPad:this.isPad,isMobile:this.isMobile,isMac:this.isMac,isAndroid:this.isAndroid,isIOS:this.isIOS,isWindow:this.isWindowPlatform}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"host",{get:function(){return{isWindowStore:this.isWindowStore,isWxMiniProgram:this.isWxMiniProgram,isQQMiniProgram:this.isQQMiniProgram,isMiniProgram:this.isMiniProgram,isQQNativeMiniProgram:!!this.isQQNativeMiniProgram,isWxNativeMiniProgram:!!this.isWxNativeMiniProgram,isNativeMiniProgram:!!this.isNativeMiniProgram,isWxWork:this.isWxWork,isWeWork:this.isWeWork,isWeChat:this.isWeChat,isWechat:this.isWechat,isTim:this.isTim,isQQ:this.isQQ,isTimOrQQ:this.isTimOrQQ,isTimOrQQFamily:this.isTimOrQQFamily,isPCTim:this.isPCTim}},enumerable:!1,configurable:!0}),t}()),a="undefined"==typeof window,s=new(function(){function t(){this.lastCookie="",this.lastCookieObj={},this.platformCache="",this.browserCache="",this.networkGot=!1,this.networkRet="-1"}return Object.defineProperty(t.prototype,"uin",{get:function(){var t=this.getCookie("uin")||"";return"o0"===t.slice(0,2)?t.slice(2):"o"===t.slice(0,1)?t.slice(1):t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"networkType",{get:function(){var t=this;if(a||this.networkGot)return this.networkRet;var e=window&&window.mqq;return e&&e.device&&e.device.getNetworkType&&e.support("mqq.device.getNetworkType")&&e.device.getNetworkType((function(e){t.networkRet=e})),this.networkGot=!0,this.networkRet},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"platform",{get:function(){if(a||this.platformCache)return this.platformCache;var t=window&&window.navigator&&window.navigator.userAgent||"";t=t.toLocaleLowerCase();var e="unknown";return/android|adr/i.test(t)?e="android":/(iphone|ipad|ipod)/i.test(t)?e="ios":/(mobile)/i.test(t)?e="mobile":t&&(e="pc"),this.platformCache=e,e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"browser",{get:function(){if(a||this.browserCache)return this.browserCache;var t=i.browser,e=(t.isIE?"IE":t.isChrome&&"Chrome")||t.isFirefox&&"Firefox"||t.isSafari&&"Safari"||t.isEdgeChromium&&"EdgeChromium"||t.isEdge&&"Edge"||"unknown";return this.browserCache=e,e},enumerable:!1,configurable:!0}),t.prototype.getCookie=function(t){if(a)return"";var e=document&&document.cookie||"";if(this.lastCookie&&this.lastCookie===e)return this.lastCookieObj[t]||"";this.lastCookie=e;for(var n=e.split(";"),r=n.length,o=0;o<r;o++){var i=n[o].trim().split("="),s=i[0],u=decodeURIComponent(i.slice(1).join("="));this.lastCookieObj[s]=u}return this.lastCookieObj[t]||""},t}()),u=n(7),c=n(5),f=n(0),l=n(3);!function(t){t.ACGI="acgi",t.ADT="adt",t.AST="ast",t.APM="apm",t.HUATUO="huatuo",t.MONITOR="monitor",t.PERFORMANCE="performance",t.RETCODE="retcode",t.TDBANK="tdbank",t.TDW="tdw",t.BEACON="beacon",t.ZZS="zzs"}(o||(o={}));var p,d=n(1);function h(t){return(h="function"==typeof Symbol&&"symbol"==et(Symbol.iterator)?function(t){return et(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":et(t)})(t)}function g(){p={appid:0,flag1:0,flag2:0,flag3:0,speedTime:[]}}function m(t,e){void 0===e&&(e=!0);var n=["appid","flag2","flag2","flag3"].filter((function(e){return!t||!t[e]}));return!(n.length>0&&(e&&Object(d.a)("缺少必要参数:"+n.join(",")),1))}var v=Object(l.d)((function(t,e){if(void 0===e&&(e=!1),c.a.onReceiveReporter(o.HUATUO,t,e),m(t)){if(void 0===t.speedTime)throw"没有测速信息";if(t.speedTime=function(t,e){var n=t.speedTime,r={};if(isNaN(+n)||(n=[+n]),void 0!==t.id&&1===n.length)return r[t.id]=n[0],delete t.id,r;if(n instanceof Array&&n.length){var o=!1;n[0]<1e12&&(o=!0);for(var i=0;i<n.length;i++)o?n[i]&&(r[i+1]=n[i]):0!==i&&n[i]&&(r[i]=n[i]-n[0])}else if("object"===h(n))for(var a in n)if(n.hasOwnProperty(a))if(e){if(""+parseInt(a)!=""+a)throw"有个奇怪的东西混入speedTime里面了："+a;r[a]=n[a]}else r[a]=n[a];return r}(t,!0),!Object.keys(t.speedTime).length)throw"解析 speedTime 参数错误";c.a.onHanldeParams(o.HUATUO,t);var n=t.speedTime;for(var r in n)u.d.report({flag1:t.flag1,flag2:t.flag2,flag3:t.flag3,timing:n[r],id:r,appid:t.appid},{envInfo:{platform:t.platform||s.platform,apn:t.apn||s.networkType}},e)}}));v.timeStart=function(t){g(),m(t)&&(p.appid=t.appid,p.flag1=t.flag1,p.flag2=t.flag2,p.flag3=t.flag3,p.speedTime=[],p.speedTime.push(Object(f.d)()))},v.time=function(){m(p)&&p.speedTime.push(Object(f.d)())},v.timeEnd=function(t){void 0===t&&(t=!1),m(p)&&(p.speedTime.push(Object(f.d)()),v(p,t),g())};var y=v,b=Object(l.d)((function(t,e){if(c.a.onReceiveReporter(o.MONITOR,t,e),"number"!=typeof t)return console.warn("invalid id");c.a.onHanldeParams(o.MONITOR,t),u.e.report(t,{},e)})),w=(window&&(window.performance||window.webkitPerformance||window.msPerformance)||{}).timing,O=void 0===w?null:w,T=[],S=Object(l.d)((function(t,e){c.a.onReceiveReporter(o.PERFORMANCE,t,e),O?(t.speedTime=function(){if(T.length)return T;var t=["navigationStart","unloadEventStart","unloadEventEnd","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"];O.domContentLoadedStart?t.splice(15,2,"domContentLoadedStart","domContentLoadedEnd"):O.domContentLoadedEventStart||t.splice(15,2,"domContentLoaded","domContentLoaded");for(var e=0,n=t.length;e<n;e++)T[e]=O[t[e]];return T}(),c.a.onHanldeParams(o.PERFORMANCE,t),y(t)):Object(d.c)("没有找到 performance timming 信息")})),D=Object(l.d)((function(t,e){c.a.onReceiveReporter(o.RETCODE,t,e);var n=function(t){if(!t||!t.url)return Object(d.c)("url 是必需参数"),!1;if(Math.random()<1/(t.rate||1))return!0;var e;try{e=decodeURIComponent(t.url)}catch(t){return!1}return!!/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/.test(e)&&null}(t);if(null===n)return n;var r={appid:t.appid||0,type:t.type||0,code:t.code||0,time:t.time||0,device:t.device||"",signalStrength:"",expansion1:t.expansion1||"",expansion2:t.expansion2||"",expansion3:t.expansion3||"",data:t.data||"",platform:t.platform||s.platform,rate:t.rate||1,uin:t.uin||0},i=RegExp.$4||"",a=RegExp.$5||"",f=RegExp.$6||"";return r.domain=i,r.cgi=a,t.includeSearch&&(r.cgi=a+f),r.apn=s.networkType,c.a.onHanldeParams(o.RETCODE,r),u.f.report(r,{},e),!0})),x=Object(l.d)((function(t,e){c.a.onReceiveReporter(o.TDBANK,t,e),t.uin||(t.uin=s.uin),c.a.onHanldeParams(o.TDBANK,t),u.g.report(t,{},e)})),R=0,I={},j=Object(l.d)((function(t,e,n){if(c.a.onReceiveReporter(o.TDW,t,e,n),!t)throw"params can not be null";var r=t.table||n||R;if(!r){try{var i=window&&window.location&&window.location.host;!i||"qqweb.qq.com"!==i&&-1===i.indexOf("qun.qq.com")||(r="dc00141")}catch(t){throw"not found host"}if(!r)throw"table can not be null"}t.table=r;var a={};Object(f.p)(a,I),Object(f.p)(a,t),a.uin||(a.uin=s.uin),c.a.onHanldeParams(o.TDW,a),u.h.report(a,{},e)}));j.setDefaultTable=function(t){R=t},j.setDefaultData=function(t){Object(f.p)(I,t)},j.clearDefaultData=function(){I={}};var _=j,E=n(2),C=!1,A={holdTime:1e3,interval:60,maxReport:10},k=Object(l.d)((function(t){if(C)Object(d.d)("已经初始化过卡顿上报了");else if(C=!0,t.monitor||t.tdw)if(Object(l.b)()){var e={};Object(f.p)(e,A),Object(f.p)(e,t),Object(f.i)(e.holdTime)&&Object(f.i)(e.interval)?(E.b.on("jankReceiveHeartBeat",(function(){u.b.apiRequestToWorker(e,{},"jank")})),u.b.apiRequestToWorker(e,{init:!0},"jank")):Object(d.a)("holdTime 或 interval 参数错误")}else Object(d.d)("worker 没有起来，不做卡顿监控");else Object(d.a)("缺少 monitor 或 tdw 参数")}));k.stop=function(){u.b.apiRequestToWorker({},{stop:!0},"jank")};var P=k,M=function(){function t(t){this.debugAppKey="LOGDEBUGKEY00001",this.isDebug=Object(f.f)(),this.defaultData={deviceId:"",initTime:"",language:"",pixel:"",sdkVersion:"3.1.43-web"},this.deviceID="",t?(Object(f.k)(t.appkey)||Object(d.a)("appKey 必须是 String"),this.appkey=t.appkey,this.versionCode=t.versionCode||"2.11.1",this.openid=t.openid||"openid",this.channelID=t.channelID||"channel",t.isDebug&&(this.isDebug=!0),this.initDefaultData()):Object(d.a)("缺少参数")}return t.prototype.onUserAction=function(t,e){this.report(t,e)},t.prototype.onDirectUserAction=function(t,e){this.report(t,e,!0)},t.prototype.getDeviceId=function(){return this.deviceID||(this.deviceID=f.b&&f.b.localStorage.getItem("AlloyReport-Beacon-Device")||"",this.deviceID||(this.deviceID=Object(f.r)(32),f.b&&f.b.localStorage.setItem("AlloyReport-Beacon-Device",this.deviceID))),this.deviceID},t.prototype.addAdditionalParams=function(){},t.prototype.reportPV=function(){},t.prototype.setOpenId=function(t){this.openid=t},t.prototype.report=function(t,e,n){if(Object(f.k)(t)){var r=Object(f.d)(),o={};for(var i in e)if(e.hasOwnProperty(i)){var a=e[i];if(!Object(f.j)(a))return void Object(d.a)("参数必须是 String 或 Number 类型");o[i]=a}var s=[{data:{id:"null1591619692845",pages:[],start:r,status:2,duration:n?0:3e3,events:[{id:t,name:t,start:r,count:1,params:o}]},type:2}],c={appkey:this.isDebug?this.debugAppKey:this.appkey,versionCode:this.versionCode,channelID:this.channelID,opid:this.openid,deviceId:this.defaultData.deviceId,initTime:this.defaultData.initTime,language:this.defaultData.language,pixel:this.defaultData.pixel,sdkVersion:this.defaultData.sdkVersion,msgs:s};u.a.report(c,{},n)}else Object(d.a)("eventCode 需要是 String 类型")},t.prototype.initDefaultData=function(){this.defaultData.sdkVersion="VERSION",this.defaultData.language=f.b&&f.b.navigator&&f.b.navigator.language||"",this.defaultData.initTime=String(Object(f.d)());var t=f.b&&f.b.screen||{},e=t.width,n=void 0===e?0:e,r=t.height,o=[n,void 0===r?0:r];f.b&&f.b.devicePixelRatio&&o.push(f.b.devicePixelRatio),this.defaultData.pixel=o.join("*"),this.defaultData.deviceId=this.getDeviceId()},t}(),L=Object(l.d)((function(t,e){if(c.a.onReceiveReporter(o.ZZS,t,e),"string"!=typeof t.attrid)return console.warn("invalid id");c.a.onHanldeParams(o.ZZS,t),u.i.report(t,{},e)}));n.d(e,"b",(function(){return y})),n.d(e,"d",(function(){return b})),n.d(e,"e",(function(){return S})),n.d(e,"f",(function(){return D})),n.d(e,"g",(function(){return x})),n.d(e,"h",(function(){return _})),n.d(e,"c",(function(){return P})),n.d(e,"a",(function(){return M})),n.d(e,"j",(function(){return L})),n.d(e,"i",(function(){return i}))},function(t,e,n){var r=n(0),o=n(1),i=n(5),a=n(20),s=n.n(a),u=n(2),c=n(16),f=n(6),l=n(8),p=function(){function t(){var t=this;this.isNativeMP=Object(r.h)(),this.msgCache=[],this.postMessageCacheToWorker=function(){try{var e=t.msgCache;t.msgCache=[],t.worker&&t.worker.postMessage(e)}catch(t){Object(o.a)(t)}},this.receiveMessageFromWorker=function(e){var n,r=(n=t.isNativeMP?e:e.data).type,o=n.payload;switch(r){case"hooks":t.handleMessageFromWorker(o);break;case"jank":u.b.trigger("jankReceiveHeartBeat");break;default:u.b.trigger(n.type,n)}},this.handleMessageFromWorker=function(t){var e=t.args,n=t.name;i.a.execute(n,e)},this.postMessageToWorker=function(e,n){n?t.worker&&t.worker.postMessage([e]):(t.msgCache.push(e),Object(c.a)("msgToWorker",t.postMessageCacheToWorker,2e3,(function(){return t.msgCache.length>2e3})))},this.terminateWorker=function(){var e=t.worker;l.c.stop(),t.worker=null,e&&setTimeout((function(){e.terminate&&e.terminate()}),3e3)},this.notSupportWorker=!1}return t.prototype.init=function(){try{"function"==typeof Worker?this.worker=new s.a:(f.c.monitor(f.b.NO_WORKER),this.notSupportWorker=!0)}catch(t){Object(o.a)("创建 worker 线程失败")}this.worker&&(this.worker.onmessage=this.receiveMessageFromWorker),(!this.notSupportWorker&&!this.worker||this.worker&&!this.worker.onmessage)&&f.c.monitor(f.b.WORKER_FAIL)},t}();e.a=new p},function(t,e,n){var r=n(4),o=(n(27),function(t){if(t.url){var e=new XMLHttpRequest;if(e){var n=t.method||"POST",o=!1;if(r.a.headRequest&&"GET"===n&&(-1===t.url.indexOf("report.idqqimg.com")&&-1===t.url.indexOf("report.url.cn")||(n="HEAD",o=!0)),e.onerror=function(){t.onError&&t.onError()},e.ontimeout=function(){t.onTimeout&&t.onTimeout()},e.onreadystatechange=function(){if(4===e.readyState){var n=e.status;200===n?function(){if(o)t.onSucc&&t.onSucc();else{var n=e.responseText;try{switch(JSON.parse(n).retcode){case 0:t.onSucc&&t.onSucc();break;case 1:t.onTest&&t.onTest();break;case 6:t.onTimeout&&t.onTimeout();break;default:t.onError&&t.onError(200)}}catch(e){t.onError&&t.onError(200)}}}():function(e){o?t.onError&&t.onError(e):202===e?t.onTest&&t.onTest():500===e?t.onTimeout&&t.onTimeout():t.onError&&t.onError(e)}(n)}},"POST"===n&&"JSON"!==t.postFormat){var i=new FormData;if(t.data)for(var a in t.data)t.data.hasOwnProperty(a)&&i.append(a,t.data[a]);e.open(n,t.url,!0),e.timeout=t.timeout||1e4,e.send(i)}else"POST"===n&&"JSON"===t.postFormat?(e.open(n,t.url,!0),e.timeout=t.timeout||1e4,e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.send(JSON.stringify(t.data))):(e.open(n,t.url,!0),e.timeout=t.timeout||1e4,e.send())}}}),i=(n(17),n(18),n(5)),a=n(1),s=n(0);function u(t){return(u="function"==typeof Symbol&&"symbol"==et(Symbol.iterator)?function(t){return et(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":et(t)})(t)}var c=function(t){if(!t.url)return!1;if("object"!==("undefined"==typeof window?"undefined":u(window))||!window.navigator||"function"!=typeof window.navigator.sendBeacon)return!1;try{return window.navigator.sendBeacon(t.url+"&fromSDKSendBeacon=true")}catch(t){Object(a.a)(t)}},f=n(3);function l(t){return(l="function"==typeof Symbol&&"symbol"==et(Symbol.iterator)?function(t){return et(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":et(t)})(t)}n.d(e,"b",(function(){return c}));var p=function(){return(p=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},d=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},h=function(){},g=Object(f.e)((function(t){var e=p({},t),n=e.method,r=void 0===n?"GET":n;e.url.length>2e3&&(r="POST",e.method="POST"),i.a.onBeforeReportSend(e);var u,c=e.onSucc,f=void 0===c?h:c,g=e.onError,m=void 0===g?h:g,v=e.onTimeout,y=void 0===v?h:v;e.onSucc=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];i.a.onReportSenderSuccess.apply(i.a,d([e],t)),f.apply(void 0,t)},e.onError=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];i.a.onReportSenderError.apply(i.a,d([e],t)),m.apply(void 0,t)},e.onTimeout=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];i.a.onReportSenderTimeout.apply(i.a,d([e],t)),y.apply(void 0,t)};try{"object"===("undefined"==typeof wx?"undefined":l(wx))&&(null===wx||void 0===wx?void 0:wx.request)?(u=e).url&&(u.url.indexOf("https:")<0&&(u.url="https://"+u.url),wx.request({method:"GET",url:u.url,fail:function(t){var e=t.statusCode;u.onError&&u.onError(e)},header:{UseGet:"1"},complete:function(t){var e=t.statusCode;200===e?u.onSucc&&u.onSucc():202===e?u.onTest&&u.onTest():500===e?u.onTimeout&&u.onTimeout():u.onError&&u.onError(e)}})):s.b&&s.b.Image&&"GET"===r?function(t){var e,n,r={},o={};t.timeout=t.timeout||1e4,t.url&&(e=+new Date,r[e]=new Image,r[e].id=e,r[e].onerror=function(){var e=this.id;clearTimeout(o[e]),r[e]&&(r[e].onerror=null,r[e].onload=null),delete o[e],delete r[e],n&&+new Date-n<1e3?t.onTimeout&&t.onTimeout():t.onError&&t.onError()},r[e].onload=function(){var e=this.width,n=this.id;clearTimeout(o[n]),r[n]&&(r[n].onerror=null,r[n].onload=null),delete o[n],delete r[n],1===e?t.onSucc&&t.onSucc():6===e?t.onTest&&t.onTest():5===e?t.onTimeout&&t.onTimeout():t.onError&&t.onError(e)},new Date,r[e].src=t.url,o[e]=setTimeout((function(){r[e]&&(r[e].src=""),n=+new Date}),t.timeout))}(e):o(e)}catch(t){Object(a.a)(t)}}));e.a=g},function(t,e,n){n.d(e,"a",(function(){return r}));var r=["doc.weixin.qq.com","wecom-addon.tencentsuite.com"].includes(location.hostname)},function(t,e,n){var r=n(2),o=n(0),i=n(3),a=n(9),s=function(){function t(){var t=this;this.status=1,this.isCustom=!1,this.getStatus=function(){return t.isCustom?t.status:o.a&&o.a.navigator?o.a.navigator.onLine:t.status},this.isOffline=function(){return!t.getStatus()},this.setOffline=function(){t.isCustom||(t.isCustom=!0,t.offEvent()),t.offlineListener()},this.setOnline=function(){t.isCustom||(t.isCustom=!0,t.offEvent()),t.onlineListener()},this.offlineListener=function(){Object(i.a)()?t.syncStatusToWorker(0):Object(i.c)()||t.handleOffLine()},this.onlineListener=function(){Object(i.a)()?t.syncStatusToWorker(1):Object(i.c)()||t.handleOnLine()},this.handleOffLine=function(e){e&&e.isCustom&&(t.isCustom=!0),t.status=0},this.handleOnLine=function(e){e&&e.isCustom&&(t.isCustom=!0),t.status||(t.status=1,Object(i.b)()&&Object(i.c)()?r.b.trigger("networkConnect"):Object(i.b)()||r.b.trigger("networkConnect"))},this.initEvent()}return t.prototype.initEvent=function(){o.b&&o.b.addEventListener&&(o.b.addEventListener("online",this.onlineListener),o.b.addEventListener("offline",this.offlineListener)),Object(i.c)()&&(r.b.on("workerOffline",this.handleOffLine),r.b.on("workerOnline",this.handleOnLine))},t.prototype.offEvent=function(){o.b&&o.b.removeEventListener&&(o.b.removeEventListener("online",this.onlineListener),o.b.removeEventListener("offline",this.offlineListener))},t.prototype.syncStatusToWorker=function(t){this.status=t,a.a.postMessageToWorker({type:t?"online":"offline",payload:{isCustom:this.isCustom}},!0)},t}();e.a=new s},function(t,e,n){(function(t){n.d(e,"a",(function(){return d})),n(22),n(1),n(23),n(24),n(9);var r=n(4),o=n(8);n.d(e,"c",(function(){return o.d})),n.d(e,"d",(function(){return o.f})),n.d(e,"e",(function(){return o.g})),n.d(e,"f",(function(){return o.h})),n.d(e,"g",(function(){return o.j})),n.d(e,"b",(function(){return o.b}));var i=n(7),a=n(10),s=n(15),u=n.n(s),c=n(5),f=n(6),l=n(12);function p(t){return(p="function"==typeof Symbol&&"symbol"==et(Symbol.iterator)?function(t){return et(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":et(t)})(t)}var d=(new(function(){function e(){var e=this;this.report={isMain:!0,closeLog:r.a.closeLog,openLog:r.a.openLog,reset:r.a.reset,resetConfig:r.a.reset,closeReport:r.a.closeReport,openReport:r.a.openReport,enableMerge:r.a.enableMerge,disableMerge:r.a.disableMerge,disableWorker:r.a.disableWorker,reportSender:a.a,reportInside:f.c,huatuo:o.b,monitor:o.d,performance:o.e,retcode:o.f,tdbank:o.g,tdw:o.h,jank:o.c,Beacon:o.a,zzs:o.j,addHooks:c.a.addHooks,removeHooks:c.a.removeHooks,huatuoConfig:i.d.resetConfig,monitorConfig:i.e.resetConfig,retcodeConfig:i.f.resetConfig,tdbankConfig:i.g.resetConfig,tdwConfig:i.h.resetConfig,zzsConfig:i.i.resetConfig,utils:{compressToBase64:u.a.compressToBase64,decompressFromBase64:u.a.decompressFromBase64,userAgent:o.i},network:{isOffline:l.a.isOffline,setOffline:l.a.setOffline,setOnline:l.a.setOnline},version:"V3.1.51"},this.init=function(){window&&(window.AlloyReportNext?window.AlloyReportNext.isMain||Object.assign(window.AlloyReportNext,e.report):window.AlloyReportNext=e.report,window.AlloyReport||(window.AlloyReport=window.AlloyReportNext)),void 0!==t&&t.isNodePlatform},this.doInlineReport=function(){if("object"===("undefined"==typeof window?"undefined":p(window))){var t=function(){if(!window||!window.localStorage)return window.ALLOY_REPORT_NEXT;var t=window.localStorage.getItem("ALLOY_REPORT_NEXT");try{return t&&JSON.parse(t)}catch(t){return}}();t instanceof Array||(t=[]);for(var n=0;n<t.length;n++)try{var r=t[n].t.split("."),o=e.report[r[0]];if(!o)continue;if(r.length>1){var i=o&&o[r[1]];"function"==typeof i&&i.apply(window,t[n].d)}else o.apply(window,t[n].d)}catch(t){console.error(t)}window&&window.localStorage?window.localStorage.removeItem("ALLOY_REPORT_NEXT"):window.ALLOY_REPORT_NEXT=null}},this.doInsideReport=function(){for(var t=f.c.getLastInsideDatas(),e=t.monitor,n=t.adt,r=0;r<e.length;r++)Object(o.d)(e[r]);for(r=0;r<n.length;r++)Object(o.h)(n[r],!1,"dc05239")},this.init(),this.printBuildInfo(),this.doInlineReport(),this.doSDKLoadedReport(),this.doInsideReport(),setInterval((function(){e.doInlineReport()}),1e4)}return e.prototype.printBuildInfo=function(){console.log("AlloyReport-SDK-V3.1.51-build.2022.4.11")},e.prototype.doSDKLoadedReport=function(){this.report.monitor(f.b.SDK_LOAD)},e}())).report}).call(this,n(14))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==("undefined"==typeof window?"undefined":et(window))&&(n=window)}t.exports=n},function(t,e,n){var r,o=function(){var t=String.fromCharCode,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function o(t,e){if(!r[t]){r[t]={};for(var n=0;n<t.length;n++)r[t][t.charAt(n)]=n}return r[t][e]}var i={compressToBase64:function(t){if(null==t)return"";var n=i._compress(t,6,(function(t){return e.charAt(t)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:i._decompress(t.length,32,(function(n){return o(e,t.charAt(n))}))},compressToUTF16:function(e){return null==e?"":i._compress(e,15,(function(e){return t(e+32)}))+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:i._decompress(t.length,16384,(function(e){return t.charCodeAt(e)-32}))},compressToUint8Array:function(t){for(var e=i.compress(t),n=new Uint8Array(2*e.length),r=0,o=e.length;r<o;r++){var a=e.charCodeAt(r);n[2*r]=a>>>8,n[2*r+1]=a%256}return n},decompressFromUint8Array:function(e){if(null==e)return i.decompress(e);for(var n=new Array(e.length/2),r=0,o=n.length;r<o;r++)n[r]=256*e[2*r]+e[2*r+1];var a=[];return n.forEach((function(e){a.push(t(e))})),i.decompress(a.join(""))},compressToEncodedURIComponent:function(t){return null==t?"":i._compress(t,6,(function(t){return n.charAt(t)}))},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),i._decompress(t.length,32,(function(e){return o(n,t.charAt(e))})))},compress:function(e){return i._compress(e,16,(function(e){return t(e)}))},_compress:function(t,e,n){if(null==t)return"";var r,o,i,a={},s={},u="",c="",f="",l=2,p=3,d=2,h=[],g=0,m=0;for(i=0;i<t.length;i+=1)if(u=t.charAt(i),Object.prototype.hasOwnProperty.call(a,u)||(a[u]=p++,s[u]=!0),c=f+u,Object.prototype.hasOwnProperty.call(a,c))f=c;else{if(Object.prototype.hasOwnProperty.call(s,f)){if(f.charCodeAt(0)<256){for(r=0;r<d;r++)g<<=1,m==e-1?(m=0,h.push(n(g)),g=0):m++;for(o=f.charCodeAt(0),r=0;r<8;r++)g=g<<1|1&o,m==e-1?(m=0,h.push(n(g)),g=0):m++,o>>=1}else{for(o=1,r=0;r<d;r++)g=g<<1|o,m==e-1?(m=0,h.push(n(g)),g=0):m++,o=0;for(o=f.charCodeAt(0),r=0;r<16;r++)g=g<<1|1&o,m==e-1?(m=0,h.push(n(g)),g=0):m++,o>>=1}0==--l&&(l=Math.pow(2,d),d++),delete s[f]}else for(o=a[f],r=0;r<d;r++)g=g<<1|1&o,m==e-1?(m=0,h.push(n(g)),g=0):m++,o>>=1;0==--l&&(l=Math.pow(2,d),d++),a[c]=p++,f=String(u)}if(""!==f){if(Object.prototype.hasOwnProperty.call(s,f)){if(f.charCodeAt(0)<256){for(r=0;r<d;r++)g<<=1,m==e-1?(m=0,h.push(n(g)),g=0):m++;for(o=f.charCodeAt(0),r=0;r<8;r++)g=g<<1|1&o,m==e-1?(m=0,h.push(n(g)),g=0):m++,o>>=1}else{for(o=1,r=0;r<d;r++)g=g<<1|o,m==e-1?(m=0,h.push(n(g)),g=0):m++,o=0;for(o=f.charCodeAt(0),r=0;r<16;r++)g=g<<1|1&o,m==e-1?(m=0,h.push(n(g)),g=0):m++,o>>=1}0==--l&&(l=Math.pow(2,d),d++),delete s[f]}else for(o=a[f],r=0;r<d;r++)g=g<<1|1&o,m==e-1?(m=0,h.push(n(g)),g=0):m++,o>>=1;0==--l&&(l=Math.pow(2,d),d++)}for(o=2,r=0;r<d;r++)g=g<<1|1&o,m==e-1?(m=0,h.push(n(g)),g=0):m++,o>>=1;for(;;){if(g<<=1,m==e-1){h.push(n(g));break}m++}return h.join("")},decompress:function(t){return null==t?"":""==t?null:i._decompress(t.length,32768,(function(e){return t.charCodeAt(e)}))},_decompress:function(e,n,r){var o,i,a,s,u,c,f,l=[],p=4,d=4,h=3,g="",m=[],v={val:r(0),position:n,index:1};for(o=0;o<3;o+=1)l[o]=o;for(a=0,u=Math.pow(2,2),c=1;c!=u;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),a|=(s>0?1:0)*c,c<<=1;switch(a){case 0:for(a=0,u=Math.pow(2,8),c=1;c!=u;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),a|=(s>0?1:0)*c,c<<=1;f=t(a);break;case 1:for(a=0,u=Math.pow(2,16),c=1;c!=u;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),a|=(s>0?1:0)*c,c<<=1;f=t(a);break;case 2:return""}for(l[3]=f,i=f,m.push(f);;){if(v.index>e)return"";for(a=0,u=Math.pow(2,h),c=1;c!=u;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),a|=(s>0?1:0)*c,c<<=1;switch(f=a){case 0:for(a=0,u=Math.pow(2,8),c=1;c!=u;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),a|=(s>0?1:0)*c,c<<=1;l[d++]=t(a),f=d-1,p--;break;case 1:for(a=0,u=Math.pow(2,16),c=1;c!=u;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),a|=(s>0?1:0)*c,c<<=1;l[d++]=t(a),f=d-1,p--;break;case 2:return m.join("")}if(0==p&&(p=Math.pow(2,h),h++),l[f])g=l[f];else{if(f!==d)return null;g=i+i.charAt(0)}m.push(g),l[d++]=i+g.charAt(0),i=g,0==--p&&(p=Math.pow(2,h),h++)}}};return i}();void 0===(r=function(){return o}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r=n(2),o=n(6),i={},a={},s=!1;r.b.on("beforeunload",(function(){var t=0;for(var e in s=!0,i)i.hasOwnProperty(e)&&(window.clearTimeout(a[e]),i[e](),t++);o.c.adtSum(o.a.REPORT_ONEXIT,t)})),e.a=function(t,e,n,r){if(i[t])return s&&(delete i[t],e()),void(r&&r()&&(delete i[t],e()));clearTimeout(a[t]),i[t]=e,a[t]=setTimeout((function(){delete i[t],e()}),n)}},function(t,e,n){},function(t,e){},function(t,e,n){var r=n(1),o=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},i=function(){var t=this;this.namespaceCache={},this.create=function(e){t.namespaceCache[e]||(t.namespaceCache[e]={});var n=t.namespaceCache[e];return{on:function(e,r){t.on(n,e,r)},trigger:function(e){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];t.trigger.apply(t,o([n,e],r))},remove:function(e,r){t.remove(n,e,r)},getLength:function(e){return t.getLength(n,e)}}},this.on=function(t,e,n){e&&"function"==typeof n&&(void 0===t[e]&&(t[e]=[]),t[e].push(n))},this.trigger=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(e&&t[e])for(var i=t[e],a=0;a<i.length;a++)try{i[a].apply(i,n)}catch(t){Object(r.a)(t)}},this.remove=function(t,e,n){if(e&&t[e]){for(var r=t[e],o=-1,i=0;i<r.length;i++)r[i]===n&&(o=i);1!==o&&r.splice(o,1)}},this.getLength=function(t,e){return e&&t[e]?t[e].length:0}};e.a=i},function(t,e,n){t.exports=function(){return n(26)('!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){self,t.exports=function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=10)}([function(t,e,n){"use strict";(function(t){function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return s})),n.d(e,"i",(function(){return u})),n.d(e,"h",(function(){return c})),n.d(e,"l",(function(){return f})),n.d(e,"f",(function(){return p})),n.d(e,"j",(function(){return l})),n.d(e,"m",(function(){return d})),n.d(e,"c",(function(){return h})),n.d(e,"g",(function(){return g})),n.d(e,"k",(function(){return y})),n.d(e,"e",(function(){return v})),n.d(e,"d",(function(){return b}));var r="undefined"!=typeof window&&window&&window.navigator?window:null,i="undefined"!=typeof self&&self&&self.navigator?self:null,a=g()?qq||wx:null,s=r||i,u=r&&r.localStorage&&"function"==typeof r.localStorage.getItem?1:g()&&"function"==typeof a.getStorage?2:0,c="object"===("undefined"==typeof indexedDB?"undefined":o(indexedDB))&&"function"==typeof indexedDB.open;function f(t,e,n){for(var o in e)if(e.hasOwnProperty(o)){if(n&&-1!==n.indexOf(o))continue;var r=e[o];void 0!==r&&(t[o]=r)}}function p(t){if(!t)return!1;var e=t.constructor.toString().substring(9).indexOf("Array");return t&&e>-1&&e<=1}function l(t,e){for(var n in e)(r=e[n])&&"object"===o(r)&&!p(r)?l(t[n],e[n]):t[n]=e[n];var r}function d(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(encodeURIComponent(String(n))+"="+encodeURIComponent(String(t[n])));return e.join("&")}function h(){return(new Date).getTime()}function g(){return"object"===("undefined"==typeof qq?"undefined":o(qq))&&qq.canIUse?qq.canIUse("request"):!("object"!==("undefined"==typeof wx?"undefined":o(wx))||!wx.canIUse)&&wx.canIUse("request")}function y(t,e){for(var n=Object.keys(t),o=n.length,r=0;r<o;r++){var i=n[r];e(i,t[i])}}function m(t){return!!(s&&s.location&&s.location.search.indexOf(t)>0)}function v(){return m("alloy_report_debug")||m("alloy-report-debug")}function b(){return m("alloy_report_close")||m("alloy-report-close")}}).call(this,n(4))},function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"c",(function(){return l})),n.d(e,"b",(function(){return d})),n.d(e,"d",(function(){return h}));var o=n(0),r=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o},i="[AlloyReport-Worker]",a=Object(o.e)(),s=(console.log,console.error),u=console.warn,c=console.info,f=function(t,e){t.apply(void 0,r([i],e))},p=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.apply(void 0,r([i],t))},l=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a&&f(u,t)},d=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a&&f(c,t)},h=function(t){a=t}},function(t,e,n){"use strict";(function(t,o){n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return f}));var r=n(6),i=n(0),a=n(3),s=new r.a,u=s.create("global"),c=s.create("hooks"),f=s.create("dispatch");!function(){if(i.b&&i.b.addEventListener){var e=function(){a.a&&a.a.postMessageToWorker&&a.a.postMessageToWorker({type:"beforeunload"},!0),u.trigger("beforeunload")};i.b.addEventListener("beforeunload",e),i.b.addEventListener("pagehide",e)}else t&&t.isNodePlatform&&o.on("beforeExit",(function(){u.trigger("beforeunload")}))}()}).call(this,n(4),n(8))},function(t,e,n){"use strict";e.a={}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){},function(t,e,n){"use strict";var o=n(1),r=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o};e.a=function(){var t=this;this.namespaceCache={},this.create=function(e){t.namespaceCache[e]||(t.namespaceCache[e]={});var n=t.namespaceCache[e];return{on:function(e,o){t.on(n,e,o)},trigger:function(e){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];t.trigger.apply(t,r([n,e],o))},remove:function(e,o){t.remove(n,e,o)},getLength:function(e){return t.getLength(n,e)}}},this.on=function(t,e,n){e&&"function"==typeof n&&(void 0===t[e]&&(t[e]=[]),t[e].push(n))},this.trigger=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(e&&t[e])for(var i=t[e],a=0;a<i.length;a++)try{i[a].apply(i,n)}catch(t){Object(o.a)(t)}},this.remove=function(t,e,n){if(e&&t[e]){for(var o=t[e],r=-1,i=0;i<o.length;i++)o[i]===n&&(r=i);1!==r&&o.splice(r,1)}},this.getLength=function(t,e){return e&&t[e]?t[e].length:0}}},function(t,e,n){var o,r=function(){var t=String.fromCharCode,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",o={};function r(t,e){if(!o[t]){o[t]={};for(var n=0;n<t.length;n++)o[t][t.charAt(n)]=n}return o[t][e]}var i={compressToBase64:function(t){if(null==t)return"";var n=i._compress(t,6,(function(t){return e.charAt(t)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:i._decompress(t.length,32,(function(n){return r(e,t.charAt(n))}))},compressToUTF16:function(e){return null==e?"":i._compress(e,15,(function(e){return t(e+32)}))+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:i._decompress(t.length,16384,(function(e){return t.charCodeAt(e)-32}))},compressToUint8Array:function(t){for(var e=i.compress(t),n=new Uint8Array(2*e.length),o=0,r=e.length;o<r;o++){var a=e.charCodeAt(o);n[2*o]=a>>>8,n[2*o+1]=a%256}return n},decompressFromUint8Array:function(e){if(null==e)return i.decompress(e);for(var n=new Array(e.length/2),o=0,r=n.length;o<r;o++)n[o]=256*e[2*o]+e[2*o+1];var a=[];return n.forEach((function(e){a.push(t(e))})),i.decompress(a.join(""))},compressToEncodedURIComponent:function(t){return null==t?"":i._compress(t,6,(function(t){return n.charAt(t)}))},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),i._decompress(t.length,32,(function(e){return r(n,t.charAt(e))})))},compress:function(e){return i._compress(e,16,(function(e){return t(e)}))},_compress:function(t,e,n){if(null==t)return"";var o,r,i,a={},s={},u="",c="",f="",p=2,l=3,d=2,h=[],g=0,y=0;for(i=0;i<t.length;i+=1)if(u=t.charAt(i),Object.prototype.hasOwnProperty.call(a,u)||(a[u]=l++,s[u]=!0),c=f+u,Object.prototype.hasOwnProperty.call(a,c))f=c;else{if(Object.prototype.hasOwnProperty.call(s,f)){if(f.charCodeAt(0)<256){for(o=0;o<d;o++)g<<=1,y==e-1?(y=0,h.push(n(g)),g=0):y++;for(r=f.charCodeAt(0),o=0;o<8;o++)g=g<<1|1&r,y==e-1?(y=0,h.push(n(g)),g=0):y++,r>>=1}else{for(r=1,o=0;o<d;o++)g=g<<1|r,y==e-1?(y=0,h.push(n(g)),g=0):y++,r=0;for(r=f.charCodeAt(0),o=0;o<16;o++)g=g<<1|1&r,y==e-1?(y=0,h.push(n(g)),g=0):y++,r>>=1}0==--p&&(p=Math.pow(2,d),d++),delete s[f]}else for(r=a[f],o=0;o<d;o++)g=g<<1|1&r,y==e-1?(y=0,h.push(n(g)),g=0):y++,r>>=1;0==--p&&(p=Math.pow(2,d),d++),a[c]=l++,f=String(u)}if(""!==f){if(Object.prototype.hasOwnProperty.call(s,f)){if(f.charCodeAt(0)<256){for(o=0;o<d;o++)g<<=1,y==e-1?(y=0,h.push(n(g)),g=0):y++;for(r=f.charCodeAt(0),o=0;o<8;o++)g=g<<1|1&r,y==e-1?(y=0,h.push(n(g)),g=0):y++,r>>=1}else{for(r=1,o=0;o<d;o++)g=g<<1|r,y==e-1?(y=0,h.push(n(g)),g=0):y++,r=0;for(r=f.charCodeAt(0),o=0;o<16;o++)g=g<<1|1&r,y==e-1?(y=0,h.push(n(g)),g=0):y++,r>>=1}0==--p&&(p=Math.pow(2,d),d++),delete s[f]}else for(r=a[f],o=0;o<d;o++)g=g<<1|1&r,y==e-1?(y=0,h.push(n(g)),g=0):y++,r>>=1;0==--p&&(p=Math.pow(2,d),d++)}for(r=2,o=0;o<d;o++)g=g<<1|1&r,y==e-1?(y=0,h.push(n(g)),g=0):y++,r>>=1;for(;;){if(g<<=1,y==e-1){h.push(n(g));break}y++}return h.join("")},decompress:function(t){return null==t?"":""==t?null:i._decompress(t.length,32768,(function(e){return t.charCodeAt(e)}))},_decompress:function(e,n,o){var r,i,a,s,u,c,f,p=[],l=4,d=4,h=3,g="",y=[],m={val:o(0),position:n,index:1};for(r=0;r<3;r+=1)p[r]=r;for(a=0,u=Math.pow(2,2),c=1;c!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=o(m.index++)),a|=(s>0?1:0)*c,c<<=1;switch(a){case 0:for(a=0,u=Math.pow(2,8),c=1;c!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=o(m.index++)),a|=(s>0?1:0)*c,c<<=1;f=t(a);break;case 1:for(a=0,u=Math.pow(2,16),c=1;c!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=o(m.index++)),a|=(s>0?1:0)*c,c<<=1;f=t(a);break;case 2:return""}for(p[3]=f,i=f,y.push(f);;){if(m.index>e)return"";for(a=0,u=Math.pow(2,h),c=1;c!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=o(m.index++)),a|=(s>0?1:0)*c,c<<=1;switch(f=a){case 0:for(a=0,u=Math.pow(2,8),c=1;c!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=o(m.index++)),a|=(s>0?1:0)*c,c<<=1;p[d++]=t(a),f=d-1,l--;break;case 1:for(a=0,u=Math.pow(2,16),c=1;c!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=o(m.index++)),a|=(s>0?1:0)*c,c<<=1;p[d++]=t(a),f=d-1,l--;break;case 2:return y.join("")}if(0==l&&(l=Math.pow(2,h),h++),p[f])g=p[f];else{if(f!==d)return null;g=i+i.charAt(0)}y.push(g),p[d++]=i+g.charAt(0),i=g,0==--l&&(l=Math.pow(2,h),h++)}}};return i}();void 0===(o=function(){return r}.call(e,n,e,t))||(t.exports=o)},function(t,e){var n,o,r=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(t){o=a}}();var u,c=[],f=!1,p=-1;function l(){f&&u&&(f=!1,u.length?c=u.concat(c):p=-1,c.length&&d())}function d(){if(!f){var t=s(l);f=!0;for(var e=c.length;e;){for(u=c,c=[];++p<e;)u&&u[p].run();p=-1,e=c.length}u=null,f=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function g(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new h(t,e)),1!==c.length||f||s(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,n){(function(t){!function(){var e;function n(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}var o="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},r="undefined"!=typeof window&&window===this?this:void 0!==t&&null!=t?t:this;function i(){i=function(){},r.Symbol||(r.Symbol=c)}function a(t,e){this.s=t,o(this,"description",{configurable:!0,writable:!0,value:e})}a.prototype.toString=function(){return this.s};var s,u,c=(s=0,function t(e){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new a("jscomp_symbol_"+(e||"")+"_"+s++,e)});function f(){i();var t=r.Symbol.iterator;t||(t=r.Symbol.iterator=r.Symbol("Symbol.iterator")),"function"!=typeof Array.prototype[t]&&o(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return function(t){return f(),(t={next:t})[r.Symbol.iterator]=function(){return this},t}(n(this))}}),f=function(){}}function p(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:n(t)}}if("function"==typeof Object.setPrototypeOf)u=Object.setPrototypeOf;else{var l;t:{var d={};try{d.__proto__={v:!0},l=d.v;break t}catch(t){}l=!1}u=l?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var h=u;function g(){this.h=!1,this.c=null,this.o=void 0,this.b=1,this.m=this.w=0,this.g=null}function y(t){if(t.h)throw new TypeError("Generator is already running");t.h=!0}function m(t,e,n){return t.b=n,{value:e}}function v(t){for(var e in this.C=t,this.l=[],t)this.l.push(e);this.l.reverse()}function b(t){this.a=new g,this.D=t}function O(t,e,n,o){try{var r=e.call(t.a.c,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return t.a.h=!1,r;var i=r.value}catch(e){return t.a.c=null,t.a.j(e),T(t)}return t.a.c=null,o.call(t.a,i),T(t)}function T(t){for(;t.a.b;)try{var e=t.D(t.a);if(e)return t.a.h=!1,{value:e.value,done:!1}}catch(e){t.a.o=void 0,t.a.j(e)}if(t.a.h=!1,t.a.g){if(e=t.a.g,t.a.g=null,e.B)throw e.A;return{value:e.return,done:!0}}return{value:void 0,done:!0}}function D(t){this.next=function(e){return t.i(e)},this.throw=function(e){return t.j(e)},this.return=function(e){return function(t,e){y(t.a);var n=t.a.c;return n?O(t,"return"in n?n.return:function(t){return{value:t,done:!0}},e,t.a.return):(t.a.return(e),T(t))}(t,e)},f(),this[Symbol.iterator]=function(){return this}}function w(t,e){var n=new D(new b(e));return h&&h(n,t.prototype),n}if(g.prototype.i=function(t){this.o=t},g.prototype.j=function(t){this.g={A:t,B:!0},this.b=this.w||this.m},g.prototype.return=function(t){this.g={return:t},this.b=this.m},b.prototype.i=function(t){return y(this.a),this.a.c?O(this,this.a.c.next,t,this.a.i):(this.a.i(t),T(this))},b.prototype.j=function(t){return y(this.a),this.a.c?O(this,this.a.c.throw,t,this.a.i):(this.a.j(t),T(this))},"undefined"!=typeof Blob&&("undefined"==typeof FormData||!FormData.prototype.keys)){var S=function(t,e){for(var n=0;n<t.length;n++)e(t[n])},R=function(t,e,n){return e instanceof Blob?[String(t),e,void 0!==n?n+"":"string"==typeof e.name?e.name:"blob"]:[String(t),String(e)]},_=function(t,e){if(t.length<e)throw new TypeError(e+" argument required, but only "+t.length+" present.")},I=function(t){var e=p(t);return t=e.next().value,e=e.next().value,t instanceof Blob&&(t=new File([t],e,{type:t.type,lastModified:t.lastModified})),t},j="object"==typeof window?window:"object"==typeof self?self:this,E=j.FormData,x=j.XMLHttpRequest&&j.XMLHttpRequest.prototype.send,L=j.Request&&j.fetch,B=j.navigator&&j.navigator.sendBeacon;i();var C=j.Symbol&&Symbol.toStringTag;C&&(Blob.prototype[C]||(Blob.prototype[C]="Blob"),"File"in j&&!File.prototype[C]&&(File.prototype[C]="File"));try{new File([],"")}catch(t){j.File=function(t,e,n){return t=new Blob(t,n),n=n&&void 0!==n.lastModified?new Date(n.lastModified):new Date,Object.defineProperties(t,{name:{value:e},lastModifiedDate:{value:n},lastModified:{value:+n},toString:{value:function(){return"[object File]"}}}),C&&Object.defineProperty(t,C,{value:"File"}),t}}i(),f();var A=function(t){if(this.f=Object.create(null),!t)return this;var e=this;S(t.elements,(function(t){if(t.name&&!t.disabled&&"submit"!==t.type&&"button"!==t.type)if("file"===t.type){var n=t.files&&t.files.length?t.files:[new File([],"",{type:"application/octet-stream"})];S(n,(function(n){e.append(t.name,n)}))}else"select-multiple"===t.type||"select-one"===t.type?S(t.options,(function(n){!n.disabled&&n.selected&&e.append(t.name,n.value)})):"checkbox"===t.type||"radio"===t.type?t.checked&&e.append(t.name,t.value):(n="textarea"===t.type?t.value.replace(/\\r\\n/g,"\\n").replace(/\\n/g,"\\r\\n"):t.value,e.append(t.name,n))}))};if((e=A.prototype).append=function(t,e,n){_(arguments,2);var o=p(R.apply(null,arguments));t=o.next().value,e=o.next().value,n=o.next().value,(o=this.f)[t]||(o[t]=[]),o[t].push([e,n])},e.delete=function(t){_(arguments,1),delete this.f[String(t)]},e.entries=function t(){var e,n,o,r,i,a,s=this;return w(t,(function(t){switch(t.b){case 1:e=s.f,o=new v(e);case 2:var u;t:{for(u=o;0<u.l.length;){var c=u.l.pop();if(c in u.C){u=c;break t}}u=null}if(null==(n=u)){t.b=0;break}r=p(e[n]),i=r.next();case 5:if(i.done){t.b=2;break}return a=i.value,m(t,[n,I(a)],6);case 6:i=r.next(),t.b=5}}))},e.forEach=function(t,e){_(arguments,1);for(var n=p(this),o=n.next();!o.done;o=n.next()){var r=p(o.value);o=r.next().value,r=r.next().value,t.call(e,r,o,this)}},e.get=function(t){_(arguments,1);var e=this.f;return e[t=String(t)]?I(e[t][0]):null},e.getAll=function(t){return _(arguments,1),(this.f[String(t)]||[]).map(I)},e.has=function(t){return _(arguments,1),String(t)in this.f},e.keys=function t(){var e,n,o,r=this;return w(t,(function(t){if(1==t.b&&(e=p(r),n=e.next()),3!=t.b)return n.done?void(t.b=0):(o=n.value,m(t,p(o).next().value,3));n=e.next(),t.b=2}))},e.set=function(t,e,n){_(arguments,2);var o=R.apply(null,arguments);this.f[o[0]]=[[o[1],o[2]]]},e.values=function t(){var e,n,o,r,i=this;return w(t,(function(t){if(1==t.b&&(e=p(i),n=e.next()),3!=t.b)return n.done?void(t.b=0):(o=n.value,(r=p(o)).next(),m(t,r.next().value,3));n=e.next(),t.b=2}))},A.prototype._asNative=function(){for(var t=new E,e=p(this),n=e.next();!n.done;n=e.next()){var o=p(n.value);n=o.next().value,o=o.next().value,t.append(n,o)}return t},A.prototype._blob=function(){for(var t="----formdata-polyfill-"+Math.random(),e=[],n=p(this),o=n.next();!o.done;o=n.next()){var r=p(o.value);o=r.next().value,r=r.next().value,e.push("--"+t+"\\r\\n"),r instanceof Blob?e.push(\'Content-Disposition: form-data; name="\'+o+\'"; filename="\'+r.name+\'"\\r\\n\',"Content-Type: "+(r.type||"application/octet-stream")+"\\r\\n\\r\\n",r,"\\r\\n"):e.push(\'Content-Disposition: form-data; name="\'+o+\'"\\r\\n\\r\\n\'+r+"\\r\\n")}return e.push("--"+t+"--"),new Blob(e,{type:"multipart/form-data; boundary="+t})},A.prototype[Symbol.iterator]=function(){return this.entries()},A.prototype.toString=function(){return"[object FormData]"},C&&(A.prototype[C]="FormData"),x){var M=j.XMLHttpRequest.prototype.setRequestHeader;j.XMLHttpRequest.prototype.setRequestHeader=function(t,e){M.call(this,t,e),"content-type"===t.toLowerCase()&&(this.u=!0)},j.XMLHttpRequest.prototype.send=function(t){t instanceof A?(t=t._blob(),this.u||this.setRequestHeader("Content-Type",t.type),x.call(this,t)):x.call(this,t)}}if(L){var k=j.fetch;j.fetch=function(t,e){return e&&e.body&&e.body instanceof A&&(e.body=e.body._blob()),k.call(this,t,e)}}B&&(j.navigator.sendBeacon=function(t,e){return e instanceof A&&(e=e._asNative()),B.call(this,t,e)}),j.FormData=A}}()}).call(this,n(4))},function(t,e,n){"use strict";n.r(e);var o=n(2),r=n(0),i=n(1),a=n(3);function s(){return u()&&!1}function u(){return!(!a.a||!a.a.worker)}var c,f,p,l,d,h=["doc.weixin.qq.com","wecom-addon.tencentsuite.com"].includes(location.hostname),g=new(function(){function t(){var t=this;this.configs={mergeQueueConfig:{sourceKey:"report_source_v2",pendingKey:"report_pending_v2",maxInBatch:5e4,maxSize:5e4},enableMergeReport:!0,cgiURL:h?"https://docrp.weixin.qq.com/report/node/":"https://report.idqqimg.com/node/report/",backupUrl:"https://report.idqqimg.com/node_b/",isLogPrint:Object(r.e)(),isCloseReport:Object(r.d)(),expiredTime:6048e5,supportOffline:!0,maxStoreReport:1e4,headRequest:!0,enableWorker:!0},this.closeLog=function(){t.configs.isLogPrint=!1,Object(i.d)(!1),t.syncConfigToWorker()},this.openLog=function(){t.configs.isLogPrint=!0,Object(i.d)(!0),t.syncConfigToWorker()},this.closeReport=function(){t.configs.isCloseReport=!0,t.syncConfigToWorker()},this.openReport=function(){t.configs.isCloseReport=!1,t.syncConfigToWorker()},this.enableMerge=function(){t.configs.enableMergeReport=!0,t.syncConfigToWorker()},this.disableMerge=function(){t.configs.enableMergeReport=!1,t.syncConfigToWorker()},this.disableWorker=function(){t.configs.enableWorker=!1,a.a.terminateWorker()},this.reset=function(e){h||(Object(r.j)(t.configs,e),Object(i.d)(t.configs.isLogPrint),t.syncConfigToWorker())},this.syncConfigToWorker=function(){if(s()){var e=JSON.parse(JSON.stringify(t.configs));a.a.postMessageToWorker({type:"config",payload:e})}}}return Object.defineProperty(t.prototype,"mergeQueueConfig",{get:function(){return this.configs.mergeQueueConfig},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enableMergeReport",{get:function(){return this.configs.enableMergeReport},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cgiURL",{get:function(){return this.configs.cgiURL},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLogPrint",{get:function(){return this.configs.isLogPrint},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCloseReport",{get:function(){return this.configs.isCloseReport},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"expiredTime",{get:function(){return this.configs.expiredTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"supportOffline",{get:function(){return this.configs.supportOffline},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxStoreReport",{get:function(){return this.configs.maxStoreReport},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headRequest",{get:function(){return this.configs.headRequest},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enableWorker",{get:function(){return this.configs.enableWorker},enumerable:!1,configurable:!0}),t}());!function(t){t[t.GET=0]="GET",t[t.POST=1]="POST",t[t.HEAD=2]="HEAD",t[t.BEACON=3]="BEACON"}(c||(c={})),function(t){t.HUATUO="huatuo",t.MONITOR="monitor",t.RETCODE="retcode",t.TDBANK="tdbank",t.TDW="tdw",t.COMMON="common",t.BEACON="beacon",t.ZZS="zzs"}(f||(f={})),function(t){t[t.NO_WORKER=35056324]="NO_WORKER",t[t.NO_INDEDEDDB=35056325]="NO_INDEDEDDB",t[t.WORKER_FAIL=34981047]="WORKER_FAIL",t[t.SDK_LOAD=34980701]="SDK_LOAD",t[t.INDEDEDDB_OPEN_FAIL=34981048]="INDEDEDDB_OPEN_FAIL",t[t.INDEDEDDB_OVER_LIMIT=34981049]="INDEDEDDB_OVER_LIMIT",t[t.INDEDEDDB_OVER_TIME=34986191]="INDEDEDDB_OVER_TIME",t[t.REPORT_NONE=34987578]="REPORT_NONE"}(p||(p={})),function(t){t.INLINE_LOAD_COST="inline-load-cost",t.SDK_LOAD_COST="sdk-load-cost",t.REPORT_TOTAL="report-total",t.REPORT_FAIL="report-fail",t.REPORT_OFFLINE="report-offline",t.REPORT_ONEXIT="report-onexit"}(l||(l={})),function(t){t[t.SUM=1]="SUM",t[t.AVERAGE=2]="AVERAGE"}(d||(d={}));var y=function(){return(y=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},m=new(function(){function t(){var t=this;this.projectID=64,this.pageName="sdk-inside",this.dataDBKey="ALLOYREPORT_REPORT_INSIDE",this.getLastInsideDatas=function(){var e=[],n=[],o=window.localStorage&&window.localStorage.getItem(t.dataDBKey);if(o)try{(o=JSON.parse(o))&&(e=o.monitor,n=(n=o.adt).map((function(e){return y({projectid:t.projectID,pagename:t.pageName},e)}))),window.localStorage.removeItem(t.dataDBKey)}catch(t){}return{monitor:e,adt:n}},this.saveInsideDatas=function(){var e,n;if(window&&window.localStorage){var o=window.localStorage.getItem(t.dataDBKey);if(o)try{o=JSON.parse(o)}catch(t){Object(i.a)(t)}else o={};var r=o.monitor,a=void 0===r?[]:r,s=o.adt,u=void 0===s?[]:s;if((e=t.monitorID).push.apply(e,a),(n=t.adtDatas).push.apply(n,u),t.monitorID.length||t.adtDatas.length){var c=JSON.stringify({monitor:t.monitorID,adt:t.adtDatas});window.localStorage.setItem(t.dataDBKey,c),t.monitorID=[],t.adtDatas=[]}}},this.adtDatas=[],this.monitorID=[],this.pointIDValues={},this.isMainHandledExit=!1,this.initEvent(),this.doResourceReport(),this.doReceiveNoneReport()}return t.prototype.monitor=function(t){this.monitorID.push(t)},t.prototype.adt=function(t,e){this.adtDatas.push({pointid:t,pointvalue:e})},t.prototype.adtSum=function(t,e){this.pointIDValues[t]||(this.pointIDValues[t]=[0,0,d.SUM]),this.pointIDValues[t][0]+=e,this.pointIDValues[t][1]+=1},t.prototype.adtAverage=function(t,e){this.pointIDValues[t]||(this.pointIDValues[t]=[0,0,d.AVERAGE]),this.pointIDValues[t][0]+=e,this.pointIDValues[t][1]+=1},t.prototype.mergeIDValuesToAdt=function(){for(var t=Object.keys(this.pointIDValues),e=0;e<t.length;e++){var n=t[e],o=this.pointIDValues[n],r=0;o[2]===d.SUM?r=o[0]:o[2]===d.AVERAGE&&(r=o[0]/o[1]),this.adtDatas.push({pointid:n,pointvalue:r})}},t.prototype.syncDatasToMainThread=function(){this.mergeIDValuesToAdt();var t={monitor:this.monitorID,adt:this.adtDatas};self.postMessage({type:"reportInside",datas:t})},t.prototype.initEvent=function(){var t=this;o.b.on("beforeunload",(function(){t.syncDatasToMainThread()}))},t.prototype.doResourceReport=function(){},t.prototype.doReceiveNoneReport=function(){},t}()),v={},b={},O=!1;o.b.on("beforeunload",(function(){var t=0;for(var e in O=!0,v)v.hasOwnProperty(e)&&(window.clearTimeout(b[e]),v[e](),t++);m.adtSum(l.REPORT_ONEXIT,t)}));var T,D,w=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{u(o.next(t))}catch(t){i(t)}}function s(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((o=o.apply(t,e||[])).next())}))},S=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},R=function(){function t(){var t=this;this.databaseName="AlloyReport-DB",this.tableName="AlloyReport-Table",this.expiredTime=Object(r.c)()-g.expiredTime,this.tsRangeExpired=IDBKeyRange.upperBound(this.expiredTime,!0),this.tsRangeNotExpired=IDBKeyRange.lowerBound(this.expiredTime,!1),this.statistic={},this.readonly="readonly",this.readwrite="readwrite",this.addDataCache=[],this.overLimitReport=!1,this.dbDataCache={},this.addBatch=function(){return w(t,void 0,void 0,(function(){var t=this;return S(this,(function(e){return w(t,void 0,void 0,(function(){var t,e,n,r,a,s=this;return S(this,(function(u){switch(u.label){case 0:return[4,this.getDB()];case 1:return t=u.sent(),e=t.transaction(this.tableName,this.readwrite),n=e.objectStore(this.tableName),r=this.addDataCache,this.addDataCache=[],a=r.map((function(t){return new Promise((function(e){var o=t.key,r=t.data,a=t.tryTimes,u=r.ts,c=n.add({key:o,data:r,tryTimes:0,ts:u});c.onsuccess=function(t){var n=t.target.result;s.setStatistic(o,n,u,a,r),e(!0)},c.onerror=function(t){Object(i.a)(t),e(!1)}}))})),Promise.all(a).then((function(){2===s.initedStatistic&&o.a.trigger("indexedDBDispatch",s.statistic)})).catch((function(t){Object(i.a)(t)})),[2]}}))})),[2]}))}))},this.handleFailByIDs=function(e,n){return w(t,void 0,void 0,(function(){var t,i,a,s=this;return S(this,(function(u){return(t=this.statistic[e])?(i=[],a=[],Object(r.k)(t,(function(t,o){var r=parseInt(t);if(-1!==n.indexOf(r)){var u=o[0],c=o[1];!c||c<1?(i.push(r),s.setStatistic(e,r,u,1)):(a.push(r),delete s.statistic[e][r])}})),this.query("id",this.readwrite,void 0,null,(function(t,e,n){-1!==a.indexOf(t.id)?e.delete(n.primaryKey):-1!==i.indexOf(t.id)&&e.put({id:t.id,key:t.key,data:t.data,tryTimes:1,ts:t.ts})})).then((function(){setTimeout((function(){o.a.trigger("indexedDBDispatch",s.statistic,e)}),1e3*Math.floor(120*Math.random()+30))})),m.adtSum(l.REPORT_FAIL,a.length),[2]):[2]}))}))},this.deleteByIDs=function(e){return w(t,void 0,void 0,(function(){var t,n,o,r,i,a,s,u;return S(this,(function(c){switch(c.label){case 0:for(t=Object.keys(this.statistic),u=0;u<t.length;u++)for(n=t[u],o=0;o<e.length;o++)r=e[o],delete this.statistic[n][r];return[4,this.getDB()];case 1:for(i=c.sent(),a=i.transaction(this.tableName,this.readwrite),s=a.objectStore(this.tableName),u=0;u<e.length;u++)s.delete(e[u]);return[2]}}))}))},this.initIndexedDB(),o.a.on("dispatchSuccessID",this.deleteByIDs),o.a.on("dispatchFailID",this.handleFailByIDs)}return t.prototype.add=function(t){return w(this,void 0,void 0,(function(){return S(this,(function(e){return this.addDataCache.push(t),function(t,e,n,o){if(v[t])return O&&(delete v[t],e()),void(o&&o()&&(delete v[t],e()));clearTimeout(b[t]),v[t]=e,b[t]=setTimeout((function(){delete v[t],e()}),n)}("dbAddBatch",this.addBatch,100),[2]}))}))},t.prototype.queryByIDs=function(t){return w(this,void 0,void 0,(function(){var e,n,o,r;return S(this,(function(i){for(e=[],n=!0,o=0;o<t.length;o++){if(!(r=this.dbDataCache[t[o]])){n=!1;break}e.push(r)}return n?[2,Promise.resolve(e)]:[2,this.query("id",this.readonly,void 0,(function(e){return-1!==t.indexOf(e.id)}))]}))}))},t.prototype.getStatistic=function(){return this.statistic},t.prototype.query=function(t,e,n,o,r){return w(this,void 0,void 0,(function(){var a=this;return S(this,(function(s){return[2,new Promise((function(s,u){return w(a,void 0,void 0,(function(){var a,u,c,f,p;return S(this,(function(l){switch(l.label){case 0:return[4,this.getDB()];case 1:return a=l.sent(),u=a.transaction(this.tableName,e),c=u.objectStore(this.tableName),f=c.index(t).openCursor(n),p=[],f.onsuccess=function(t){var e=f.result;e?(o&&o(e.value),p.push(e.value),r&&r(e.value,c,e),e.continue()):s(p)},f.onerror=function(t){Object(i.a)(t),s(t)},[2]}}))}))}))]}))}))},t.prototype.getDB=function(){return this.cacheGetDBPromise?this.cacheGetDBPromise:this.db?this.db:(this.cacheGetDBPromise=this.initIndexedDB(),this.cacheGetDBPromise)},t.prototype.initIndexedDB=function(){var t=this;return new Promise((function(e){var n=indexedDB.open(t.databaseName);n.onerror=function(t){m.monitor(p.INDEDEDDB_OPEN_FAIL),Object(i.a)("打开 indexdb 失败。",t)},n.onsuccess=function(n){t.db=n.target.result,Object(i.b)("打开 indexdb 成功"),t.initStatistic(),e(t.db)},n.onupgradeneeded=function(e){var n=e.target.result;if(!n.objectStoreNames.contains(t.databaseName)){var o=n.createObjectStore(t.tableName,{keyPath:"id",autoIncrement:!0});o.createIndex("key","key",{unique:!1}),o.createIndex("tryTimes","tryTimes",{unique:!1}),o.createIndex("ts","ts",{unique:!1}),o.createIndex("id","id",{unique:!1})}}}))},t.prototype.setStatistic=function(t,e,n,o,r){this.statistic[t]||(this.statistic[t]={});var i=this.statistic[t];if(i[e]=[n,o],r){this.dbDataCache[e]={id:e,key:t,data:r,tryTimes:o,ts:n};var a=Object.keys(this.dbDataCache);if(a.length>50){a.sort();for(var s=a.slice(0,a.length-50).map((function(t){return parseInt(t)})),u=0;u<s.length;u++)delete this.dbDataCache[s[u]]}}else delete this.dbDataCache[e];var c=Object.keys(i),f=c.length,l=g.maxStoreReport;f>l&&(c.sort(),s=c.slice(0,f-l).map((function(t){return parseInt(t)})),this.deleteByIDs(s),this.overLimitReport||(this.overLimitReport=!0,m.monitor(p.INDEDEDDB_OVER_LIMIT)))},t.prototype.initStatistic=function(){var t=this;this.initedStatistic||(this.initedStatistic=1,this.query("ts",this.readonly,this.tsRangeNotExpired,null,(function(e){var n=e.id,o=e.ts,r=e.tryTimes,i=e.key;t.setStatistic(i,n,o,r)})).then((function(){t.initedStatistic=2,o.a.trigger("indexedDBDispatch",t.statistic,null)})).catch((function(){t.initedStatistic=2,o.a.trigger("indexedDBDispatch",t.statistic,null)})),this.deleteExpiredReporter())},t.prototype.deleteExpiredReporter=function(){return w(this,void 0,Promise,(function(){var t,e=this;return S(this,(function(n){return t=0,[2,new Promise((function(n,o){return w(e,void 0,void 0,(function(){var e,o,r,a;return S(this,(function(s){switch(s.label){case 0:return[4,this.getDB()];case 1:return e=s.sent(),o=e.transaction(this.tableName,this.readwrite),r=o.objectStore(this.tableName),(a=r.index("ts").openCursor(this.tsRangeExpired)).onsuccess=function(e){var o=a.result;o?(r.delete(o.primaryKey),o.continue(),t++):(t?(m.monitor(p.INDEDEDDB_OVER_TIME),Object(i.b)("过期上报数据已清除")):Object(i.b)("当前没有过期上报数据"),n())},a.onerror=function(t){Object(i.a)(t),n()},[2]}}))}))}))]}))}))},t}(),_=function(){var t=this;this.MemStore={},this.set=function(e,n){t.MemStore[e]=n},this.get=function(e,n){var o;return(o=t.MemStore[e])||(o=n,n&&t.set(e,o)),o},this.each=function(e){for(var n=t.MemStore,o=Object.keys(n),r=o.length,i=0;i<r;i++)e&&e(n[o[i]])}},I=new(function(){function t(){var t=this;this.isIndexedDB=!1,this.isLocalDB=!1,this.get=function(e,n){return t.isLocalDB?t.constDB.get(e,n):t.db.get(e,n)},this.set=function(e,n){return t.isLocalDB?t.constDB.set(e,n):t.db.set(e,n)},this.add=function(e){var n=t.constDB.add(e);return n.catch((function(t){Object(i.a)(t)})),n},this.queryByIDs=function(e){var n=t.constDB.queryByIDs(e);return n.catch((function(t){Object(i.a)(t)})),n},this.db=new _;try{u()&&s()||this.initConstDB()}catch(t){Object(i.a)(t)}}return t.prototype.initConstDB=function(){r.h?(this.constDB=new R,this.isIndexedDB=!0):r.i&&(this.constDB=new a.a,this.isLocalDB=!0),r.h||m.monitor(p.NO_INDEDEDDB)},t.prototype.getStatistic=function(){return this.constDB.getStatistic()},t}()),j=new(function(){function t(){var t=this;this.status=1,this.isCustom=!1,this.getStatus=function(){return t.isCustom?t.status:r.a&&r.a.navigator?r.a.navigator.onLine:t.status},this.isOffline=function(){return!t.getStatus()},this.setOffline=function(){t.isCustom||(t.isCustom=!0,t.offEvent()),t.offlineListener()},this.setOnline=function(){t.isCustom||(t.isCustom=!0,t.offEvent()),t.onlineListener()},this.offlineListener=function(){s()&&t.syncStatusToWorker(0)},this.onlineListener=function(){s()&&t.syncStatusToWorker(1)},this.handleOffLine=function(e){e&&e.isCustom&&(t.isCustom=!0),t.status=0},this.handleOnLine=function(e){e&&e.isCustom&&(t.isCustom=!0),t.status||(t.status=1,u()?o.b.trigger("networkConnect"):u()||o.b.trigger("networkConnect"))},this.initEvent()}return t.prototype.initEvent=function(){r.b&&r.b.addEventListener&&(r.b.addEventListener("online",this.onlineListener),r.b.addEventListener("offline",this.offlineListener)),o.b.on("workerOffline",this.handleOffLine),o.b.on("workerOnline",this.handleOnLine)},t.prototype.offEvent=function(){r.b&&r.b.removeEventListener&&(r.b.removeEventListener("online",this.onlineListener),r.b.removeEventListener("offline",this.offlineListener))},t.prototype.syncStatusToWorker=function(t){this.status=t,a.a.postMessageToWorker({type:t?"online":"offline",payload:{isCustom:this.isCustom}},!0)},t}()),E=function(){return(E=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};!function(t){t[t.ALL=1]="ALL",t[t.PART=2]="PART"}(T||(T={})),function(t){t[t.ERROR=-1]="ERROR",t[t.ALL=1]="ALL",t[t.PART=2]="PART"}(D||(D={}));var x=function(){function t(){var t=this;this.lastAddToBatchTime={},this.storeConfig=new _,this.dispatchTimeIDs={},this.sentIDs=[],this.count=0,this.dispatchBatch=function(e,n){if(!g.supportOffline||j.getStatus()){var o=t.dispatchTimeIDs,a=Object(r.c)();if(n)clearTimeout(o[n]),a-t.lastAddToBatchTime[n]>2e3?(t.dispatchBatchBySourceKey(e,n,T.ALL),t.lastAddToBatchTime[n]=0):t.dispatchBatchBySourceKey(e,n,T.PART)===D.PART&&(o[n]=setTimeout((function(){t.dispatchBatch(I.getStatistic(),n)}),2e3));else for(var s=Object.keys(e),u=0;u<s.length;u++){var c=s[u];t.dispatchBatchBySourceKey(e,c,T.ALL),t.lastAddToBatchTime[c]=0}}else Object(i.b)("网络离线，暂停上报")},o.a.on("indexedDBDispatch",this.dispatchBatch),o.b.on("networkConnect",(function(){Object(i.b)("网络恢复，上报离线数据"),o.a.trigger("indexedDBDispatch",I.getStatistic(),null)}))}return t.prototype.addOne=function(t,e,n){var o=t.sourceKey,i=Object(r.c)();I.add({key:o,data:{ts:i+this.count,param:e,opts:n},tryTimes:0}),this.count++,this.lastAddToBatchTime[o]||(this.lastAddToBatchTime[o]=i)},t.prototype.successItems=function(t,e){var n=e.map((function(t){return t.id})),r=this.sentIDs.filter((function(t){return-1===n.indexOf(t)}));this.sentIDs=r,o.a.trigger("dispatchSuccessID",n)},t.prototype.failItems=function(t,e){var n=t.sourceKey,r=e.map((function(t){return t.id})),i=this.sentIDs.filter((function(t){return-1===r.indexOf(t)}));this.sentIDs=i,g.supportOffline&&!j.getStatus()||o.a.trigger("dispatchFailID",n,r)},t.prototype.getConfigBySourceKey=function(t){if(g.mergeQueueConfig.sourceKey===t)return g.mergeQueueConfig;var e=bt.getAdapterBySourceKey(t);return e&&e.configs&&e.configs.queueConfig?e.configs.queueConfig:null},t.prototype.dispatchBatchBySourceKey=function(t,e,n){if(!t[e])return D.ERROR;var o=Object.keys(t[e]).map((function(t){return parseInt(t,10)})),r=(o=this.filterIDsBySent(o)).length;if(r<1)return D.ERROR;var i=this.getConfigBySourceKey(e);if(!i)return D.ERROR;var a=i.maxInBatch||10,s=D.ALL;if(n===T.PART){if(r<a)return D.PART;var u=r%a;s=0===u?D.ALL:D.PART,o.sort(),o=o.slice(0,r-u)}return this.dispatchBatchByIds(o,i,a),s},t.prototype.dispatchBatchByIds=function(t,e,n){var r=e.sourceKey;this.sentIDs=this.sentIDs.concat(t),I.queryByIDs(t).then((function(i){for(var a=[],s=0;s<i.length;s++){var u=i[s],c=u.data,f=u.id;-1!==t.indexOf(f)&&a.push(E(E({},c),{id:f}))}for(s=0;s<a.length;s+=n){var p=a.slice(s,s+n);r===g.mergeQueueConfig.sourceKey?o.a.trigger("dispatchMerge",e,p):o.a.trigger("dispatchCommon",e,p)}})).catch((function(t){Object(i.a)(t),Object(i.a)("从数据库取数据错误")}))},t.prototype.filterIDsBySent=function(t){var e=this.sentIDs;return t.filter((function(t){return-1===e.indexOf(t)}))},t}(),L=new(function(){function t(){I.isIndexedDB?this.queueInstance=new x:this.queueInstance=new a.a}return t.prototype.addOne=function(t,e,n){this.queueInstance.addOne(t,e,n),g.supportOffline&&!j.getStatus()&&m.adtSum(l.REPORT_OFFLINE,1)},t.prototype.successItems=function(t,e){this.queueInstance.successItems(t,e)},t.prototype.failItems=function(t,e){this.queueInstance.failItems(t,e)},t}()),B=(n(9),function(t){if(t.url){var e=new XMLHttpRequest;if(e){var n=t.method||"POST",o=!1;if(g.headRequest&&"GET"===n&&(-1===t.url.indexOf("report.idqqimg.com")&&-1===t.url.indexOf("report.url.cn")||(n="HEAD",o=!0)),e.onerror=function(){t.onError&&t.onError()},e.ontimeout=function(){t.onTimeout&&t.onTimeout()},e.onreadystatechange=function(){if(4===e.readyState){var n=e.status;200===n?function(){if(o)t.onSucc&&t.onSucc();else{var n=e.responseText;try{switch(JSON.parse(n).retcode){case 0:t.onSucc&&t.onSucc();break;case 1:t.onTest&&t.onTest();break;case 6:t.onTimeout&&t.onTimeout();break;default:t.onError&&t.onError(200)}}catch(e){t.onError&&t.onError(200)}}}():function(e){o?t.onError&&t.onError(e):202===e?t.onTest&&t.onTest():500===e?t.onTimeout&&t.onTimeout():t.onError&&t.onError(e)}(n)}},"POST"===n&&"JSON"!==t.postFormat){var r=new FormData;if(t.data)for(var i in t.data)t.data.hasOwnProperty(i)&&r.append(i,t.data[i]);e.open(n,t.url,!0),e.timeout=t.timeout||1e4,e.send(r)}else"POST"===n&&"JSON"===t.postFormat?(e.open(n,t.url,!0),e.timeout=t.timeout||1e4,e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.send(JSON.stringify(t.data))):(e.open(n,t.url,!0),e.timeout=t.timeout||1e4,e.send())}}}),C=(n(5),["onReceiveReporter","onHanldeParams","onBeforeCommonReport","onBeforeMergeReport","onBeforeReportSend","onReportSenderError","onReportSenderSuccess","onReportSenderTimeout"]),A=new function(){var t=this;this.addHooks=function(e,n){"function"==typeof n?-1!==C.indexOf(e)?(o.c.on(e,n),t.syncHooksToWorker(e,"add")):Object(i.c)("不支持的钩子"):Object(i.c)("参数必须是函数")},this.removeHooks=function(e,n){o.c.remove(e,n),t.syncHooksToWorker(e,"remove")},this.execute=function(t,e){o.c.trigger.apply(o.c,function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o}([t],e))},this.getExecuteFunction=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(o.c.getLength(t)){var r={type:"hooks",payload:{args:e,name:t}};try{var i=JSON.stringify(r);St.postMessageToMain(JSON.parse(i))}catch(t){}}}},this.syncHooksToWorker=function(t,e){if(s()){var n={name:t,action:e};a.a.postMessageToWorker({type:"hooks",payload:n})}},this.onReceiveReporter=this.getExecuteFunction("onReceiveReporter"),this.onHanldeParams=this.getExecuteFunction("onHanldeParams"),this.onBeforeCommonReport=this.getExecuteFunction("onBeforeCommonReport"),this.onBeforeMergeReport=this.getExecuteFunction("onBeforeMergeReport"),this.onBeforeReportSend=this.getExecuteFunction("onBeforeReportSend"),this.onReportSenderError=this.getExecuteFunction("onReportSenderError"),this.onReportSenderSuccess=this.getExecuteFunction("onReportSenderSuccess"),this.onReportSenderTimeout=this.getExecuteFunction("onReportSenderTimeout")};function M(t){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var k=function(){return(k=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},P=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o},q=function(){},N=function(t,e){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];try{return t.apply(void 0,n)}catch(t){e&&e(),Object(i.a)(t)}}}((function(t){var e=k({},t),n=e.method,o=void 0===n?"GET":n;e.url.length>2e3&&(o="POST",e.method="POST"),A.onBeforeReportSend(e);var s=e.onSucc,u=void 0===s?q:s,c=e.onError,f=void 0===c?q:c,p=e.onTimeout,l=void 0===p?q:p;e.onSucc=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];A.onReportSenderSuccess.apply(A,P([e],t)),u.apply(void 0,t)},e.onError=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];A.onReportSenderError.apply(A,P([e],t)),f.apply(void 0,t)},e.onTimeout=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];A.onReportSenderTimeout.apply(A,P([e],t)),l.apply(void 0,t)};try{"object"===("undefined"==typeof wx?"undefined":M(wx))&&(null===wx||void 0===wx?void 0:wx.request)?Object(a.a)(e):r.b&&r.b.Image&&"GET"===o?Object(a.a)(e):B(e)}catch(t){Object(i.a)(t)}})),F=new(function(){function t(){var t=this;this.sendReporter=function(e,n,o){if(0!==n.length){for(var r=[],i="",a=0;a<n.length;a++){var s=n[a],u=s.param,f=s.opts;r.push(u),i=f.name}var p=bt.getAdapterByName(i),l=p.getConfigs(),d=p.getMethods(),h=function(){o?L.successItems(o,n):L.successItems(e,n)},g=function(){o?L.failItems(o,n):L.failItems(e,n)};if(d[c.HEAD]||d[c.GET]){var y=p.transToURL(r,n[0].opts);if(t.isUrlOverLimit(y))return void t.sendRequestViaDatas(l.baseURL,p.buildData(r,{}),h,g);t.sendRequestViaURls(y,h,g)}else t.sendRequestViaDatas(l.baseURL,p.buildData(r,{}),h,g)}},this.initEvent()}return t.prototype.initEvent=function(){o.a.on("dispatchCommon",this.sendReporter),o.a.on("dispatchTryCommon",this.sendReporter)},t.prototype.isUrlOverLimit=function(t){return(Array.isArray(t)?t:[t]).some((function(t){return t.length>2e3}))},t.prototype.sendRequestViaURls=function(t,e,n){if(Object(r.f)(t))for(var o=0;o<t.length;o++)N({url:t[o]+"&t="+Object(r.c)(),method:"GET",onSucc:e,onError:n,onTimeout:n});else t&&N({url:t+"&t="+Object(r.c)(),method:"GET",onSucc:e,onError:n,onTimeout:n})},t.prototype.sendRequestViaDatas=function(t,e,n,o){if(Object(r.f)(e))for(var i=0;i<e.length;i++)N({url:t,method:"POST",onSucc:n,onError:o,onTimeout:o,data:e[i],postFormat:"JSON"});else e&&N({url:t,method:"POST",onSucc:n,onError:o,onTimeout:o,data:e,postFormat:"JSON"})},t.prototype.report=function(t,e,n,o){var r=t.getConfigs(),a=t.getMethods(),s=r.queueConfig;if(Object(i.b)("[common-"+n.name+"]",e),o&&(a[c.HEAD]||a[c.GET])){var u=t.transToURL(e,n);return this.isUrlOverLimit(u)?void this.sendRequestViaDatas(r.baseURL,t.buildData(e,{})):void this.sendRequestViaURls(u)}o&&this.sendRequestViaDatas(r.baseURL,t.buildData(e,{})),L.addOne(s,e,n)},t}()),U=new(function(){function t(){this.LSErrorFlag=0,this.LSTimeDiffDelay=0,this.LSTestModeFlag=0,this.errorFlag={set:this.errorSet,get:this.errorGet,clear:function(){}},this.testModeFlag={set:this.testSet,get:this.testGet,clear:this.testClear},this.timeDiffFlag={set:this.diffSet,get:this.diffGet,clear:function(){}}}return t.prototype.errorSet=function(t){this.LSErrorFlag=1},t.prototype.errorGet=function(){return 1===this.LSErrorFlag},t.prototype.testGet=function(){var t=+new Date,e=this.LSTestModeFlag;return 0!==e&&t-e<6048e5},t.prototype.testSet=function(){this.LSTestModeFlag=+new Date},t.prototype.testClear=function(){this.LSTestModeFlag=0},t.prototype.diffSet=function(){this.LSTimeDiffDelay=+new Date},t.prototype.diffGet=function(){var t=+new Date,e=this.LSTimeDiffDelay;return!(0===e||t-e>864e5)},t}()),K=new(function(){function t(){this.started=!1,this.LSLastPingTime=0,this.LSErrorFlag=1}return t.prototype.send=function(t){var e=this;N({url:t+"?v=3&t="+ +new Date+"&q=check",onSucc:function(){e.started=!1,clearInterval(e.intervalHandler),e.LSErrorFlag=0},method:"GET"})},t.prototype.start=function(t){var e=this;this.pingURL=t,this.started||(this.started=!0,clearInterval(this.intervalHandler),this.intervalHandler=setInterval((function(){var t=e.LSLastPingTime,n=Object(r.c)();0===t?e.LSLastPingTime=n:n>t+6e4&&(e.LSLastPingTime=n,e.send(e.pingURL))}),6e4))},t.prototype.stop=function(){this.intervalHandler&&(clearInterval(this.intervalHandler),this.intervalHandler=null)},t}()),W=n(7),H=n.n(W),V=U.errorFlag,G=U.testModeFlag,z=new(function(){function t(){var t=this;this.sendReporter=function(e,n){g.mergeQueueConfig,n.length&&N({onSucc:function(){G.clear(),K.stop(),L.successItems(g.mergeQueueConfig,n)},onError:function(e){V.set(g.cgiURL),t.dispatchOriginRequest(n),4===e&&ot.commonReport(2394321)},onTimeout:function(){t.dispatchOriginRequest(n),Object(r.c)()-Object(r.c)()<8e3&&ot.commonReport(2589015),V.set(g.cgiURL)},onTest:function(){G.set(),L.successItems(g.mergeQueueConfig,n)},timeout:1e4,url:g.cgiURL,data:t.buildData(n),method:"POST"})},this.initEvent()}return t.prototype.initEvent=function(){o.a.on("dispatchMerge",this.sendReporter)},t.prototype.getAdapterConfigByName=function(t){var e=bt.getAdapterByName(t);return e&&e.getConfigs()||{}},t.prototype.buildData=function(t){for(var e=[],n=0;n<t.length;n++)Object(i.b)("[merge-"+t[n].opts.name+"]",t[n].param),e.push({param:t[n].param,opts:t[n].opts});var o=JSON.stringify(e);return e=H.a.compressToBase64(o),e=encodeURIComponent(e),{v:"3",t:+new Date,q:e}},t.prototype.splitItemsBySourceKey=function(t){for(var e={},n=0;n<t.length;n++){var o=t[n],r=bt.getAdapterByName(o.opts.name).getSourceKey();e[r]||(e[r]=[]),e[r].push(o)}return e},t.prototype.sendOriginalRequest=function(t){for(var e=0;e<t.length;e++)bt.getAdapterByName(t[e].opts.name).commonReport(t[e].param,t[e].opts)},t.prototype.dispatchOriginRequest=function(t){var e=this.splitItemsBySourceKey(t);Object(r.k)(e,(function(t,e){var n=bt.getAdapterBySourceKey(t).getConfigs();o.a.trigger("dispatchTryCommon",n,e,g.mergeQueueConfig)}))},t.prototype.report=function(t,e,n){var o=t.getConfigs(),r=o.shouldMerge,i=o.reportInTestMode,a=!1;if(r?G.get()?("function"!=typeof r||r(e))&&("function"!=typeof i||i(e))||(a=!0):"function"!=typeof r||r(e)||(a=!0):a=!0,a)F.report(t,e,n,!1);else{var s=g.mergeQueueConfig;L.addOne(s,e,n)}},t}()),J=new(function(){function t(){}return t.prototype.report=function(t,e,n){Object(i.b)("[immediate-"+n.name+"]",e);var o=t.transToURL(e,n);if(o){var s=o+"&t="+Object(r.c)();if(!Object(a.a)({url:s})){t.getConfigs().queueConfig;var u=function(){t.report(e,n,!1)};N({url:s,method:"GET",onSucc:function(){},onError:u,onTimeout:u})}}},t}()),Q=function(){var t=this;this.adapterName=f.COMMON,this.transToURL=function(t,e){return""},this.buildData=function(t,e){return{}},this.resetConfig=function(e){t.configs?h||(Object(r.j)(t.configs,e),t.syncConfigToWorker()):Object(i.a)("找不到此适配器")},this.getConfigs=function(){return t.configs||{}},this.getMethods=function(){var e=t.configs.methods.toString(2);return e.length<4&&(e=new Array(4-e.length).fill("0").join("")+e),e.split("").map((function(t){return parseInt(t)}))},this.getSourceKey=function(){var e=t.getConfigs();return e.queueConfig&&e.queueConfig.sourceKey||""},this.report=function(e,n,o){void 0===n&&(n={}),void 0===o&&(o=!1),n.name=t.adapterName,s()&&m.adtSum(l.REPORT_TOTAL,1);try{s()&&!o?a.a.postMessageToWorker({type:"api",payload:{data:e,opts:n,isImmediately:o},opts:{reportType:"auto"}}):function(t,e,n,o){t.getConfigs();var r=t.getMethods();o&&r[c.BEACON]?J.report(t,e,n):g.enableMergeReport?z.report(t,e,n):F.report(t,e,n,o)}(t,e,n,o)}catch(t){Object(i.a)(t)}},this.commonReport=function(e,n,o){void 0===n&&(n={}),void 0===o&&(o=!1),n.name=t.adapterName;try{s()?a.a.postMessageToWorker({type:"api",payload:{data:e,opts:n,isImmediately:o},opts:{reportType:"common"}}):(A.onBeforeCommonReport(e,n,o),F.report(t,e,n,o))}catch(t){Object(i.a)(t)}},this.mergeReport=function(e,n){void 0===n&&(n={}),n.name=t.adapterName;try{s()?a.a.postMessageToWorker({type:"api",payload:{data:e,opts:n,isImmediately:!1},opts:{reportType:"merge"}}):(A.onBeforeMergeReport(e,n),z.report(t,e,n))}catch(t){Object(i.a)(t)}},this.apiRequestToWorker=function(t,e,n){a.a.postMessageToWorker({type:"apiWorker",payload:{data:t,opts:e},opts:{reportType:n}},!0)},this.syncConfigToWorker=function(){if(s()){var e=t.configs,n=e.baseURL,o=e.shouldMerge,r=e.reportInTestMode,i=e.queueConfig,u={baseURL:n,shouldMerge:"function"==typeof o?o():o,reportInTestMode:"function"==typeof r?r():r,queueConfig:{maxInBatch:i.maxInBatch,maxSize:i.maxSize}};a.a.postMessageToWorker({type:"adapterConfig",payload:u,opts:{adapterName:t.adapterName}})}}},X=new Q;function Z(t){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Y,$,tt=(Y=function(t,e){return(Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Y(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),et=new(function(t){function e(){var e=t.call(this)||this;return e.adapterName=f.HUATUO,e.configs={baseURL:"https://report.idqqimg.com/node_b/speedreport?",shouldMerge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},reportInTestMode:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},queueConfig:{sourceKey:"huatuo_queue_v3",pendingKey:"huatuo_pending_v3",maxInBatch:20,maxSize:10},methods:15,postFormat:"FORM-DATA"},e.transToURL=function(t,n){var o,i,a=t||[];"object"!==Z(t)||Object(r.f)(t)||(a=[t]);var s=[];if(!a.length)return[];for(var u in o=e.exractData(a))o.hasOwnProperty(u)&&(i={flag1:o[u].flag1,flag2:o[u].flag2,flag3:o[u].flag3,apn:n.envInfo.apn,appid:o[u].appid,platform:n.envInfo.platform},Object.assign(i,o[u].timingObj),s.push(e.configs.baseURL+Object(r.m)(i)));return s},e}return tt(e,t),e.prototype.exractData=function(t){var e=t||[],n=null,o="";if(e.length){n={};for(var r=0;r<e.length;r++)n[o=e[r].flag1+"_"+e[r].flag2+"_"+e[r].flag3+e[r].appid]||(n[o]={flag1:e[r].flag1,flag2:e[r].flag2,flag3:e[r].flag3,appid:e[r].appid,timingObj:{}}),n[o].timingObj[e[r].id]=e[r].timing}return n},e}(Q)),nt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ot=new(function(t){function e(){var e=t.call(this)||this;return e.adapterName=f.MONITOR,e.configs={baseURL:h?"https://docrp.weixin.qq.com/report/node_b/monitorreport?monitors=":"https://report.idqqimg.com/node_b/monitorreport?monitors=",shouldMerge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},reportInTestMode:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},queueConfig:{sourceKey:"monitor_queue_v3",pendingKey:"monitor_pending_v3",maxInBatch:100,maxSize:10},methods:15,postFormat:"FORM-DATA"},e.transToURL=function(t){var n=[];return"number"==typeof t?n.push(t):Object(r.f)(t)&&(n=t),n.length&&e.configs?e.configs.baseURL+"["+n+"]":""},e}return nt(e,t),e}(Q)),rt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),it=new(function(t){function e(){var e=t.call(this)||this;return e.adapterName=f.RETCODE,e.configs={baseURL:h?"https://docrp.weixin.qq.com/report/node_b/retcodereport?":"https://report.idqqimg.com/node_b/retcodereport?",shouldMerge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},reportInTestMode:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},queueConfig:{sourceKey:"retcode_queue_v3",pendingKey:"retcode_pending_v3",maxInBatch:20,maxSize:10},methods:15,postFormat:"FORM-DATA"},e.keyList=["domain","cgi","type","code","time","rate","uin","apn","device","signalStrength","expansion1","expansion2","expansion3","data","platform","appid"],e.transToURL=function(t,n){var o,i="",a=[];if(Object(r.f)(t))for(o=0;o<t.length;o++)a.push(e.extractData(t[o],o+1));else a.push(e.extractData(t,1));return a.length>0?(i=e.configs.baseURL+"key="+encodeURIComponent(e.keyList.join(",")),i+="&"+a.join("&")):i},e}return rt(e,t),e.prototype.extractData=function(t,e){for(var n=[],o=0;o<this.keyList.length;o++)n.push(e+"_"+(o+1)+"="+encodeURIComponent(t[this.keyList[o]]));if(n.length>0)return n.join("&")},e}(Q)),at=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),st=new(function(t){function e(){var e=t.call(this)||this;return e.adapterName=f.TDBANK,e.configs={baseURL:"https://report.idqqimg.com/node_b/tdbankreport?",shouldMerge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},reportInTestMode:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},queueConfig:{sourceKey:"tdbank_queue_v3",pendingKey:"tdbank_pending_v3",maxInBatch:20,maxSize:10},methods:15,postFormat:"FORM-DATA"},e.transToURL=function(t,n){var o,i,a,s=t||[],u=[],c={};if(Object(r.f)(s)){o=s.length;for(var f=0;f<o;f++)c[a=(i=s[f]).tdbank_table&&i.tdbank_busi_id?i.tdbank_table+"|"+i.tdbank_busi_id:i.table_id+"|"+i.busi_id]||(c[a]=[]),c[a].push(i);for(var p in c)c.hasOwnProperty(p)&&u.push(e.getItemURL(c[p],n));return u}return e.getItemURL([s],n)},e}return at(e,t),e.prototype.getItemURL=function(t,e){var n,o,i,a=[],s=[],u={},c={tdbank_busi_id:!0,tdbank_table:!0,busi_id:!0,table_id:!0};return function(){var e,n,r,f,p=1,l=[];for(e=0;e<t.length;e++)for(r in f=t[e],o=t[e].tdbank_table||t[e].table_id,i=t[e].tdbank_busi_id||t[e].busi_id,f)if(f.hasOwnProperty(r)){if(c[r])continue;if(u[r])continue;u[r]=p++,a.push(r)}for(e=0;e<t.length;e++){for(f=t[e],l=new Array(a.length),n=0;n<a.length;n++)l[n]=void 0===f[a[n]]?"":f[a[n]];s.push(l)}}(),t&&0!==t.length?(n={table_id:o,busi_id:i,fields:JSON.stringify(a),datas:JSON.stringify(s)},n=this.configs.baseURL+Object(r.m)(n)):""},e}(Q)),ut=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ct=function(){return(ct=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},ft=new(function(t){function e(){var e=t.call(this)||this;return e.adapterName=f.TDW,e.configs={baseURL:h?"https://docrp.weixin.qq.com/report/node_b/tdwreport?":"https://report.idqqimg.com/node_b/tdwreport?",shouldMerge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},reportInTestMode:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},queueConfig:{sourceKey:"tdw_queue_v3",pendingKey:"tdw_pending_v3",maxInBatch:20,maxSize:10},methods:15,postFormat:"FORM-DATA"},e.transToURL=function(t,n){var o,i,a=t||[],s=ct({timeField:"t"},n),u=[],c={};if(Object(r.f)(a)){o=a.length;for(var f=0;f<o;f++)c[(i=a[f]).table]||(c[i.table]=[]),c[i.table].push(i);for(var p in c)c.hasOwnProperty(p)&&u.push(e.getItemURL(c[p],p,s));return u}return e.getItemURL([a],a.table,s)},e}return ut(e,t),e.prototype.getItemURL=function(t,e,n){var o,i=[],a=[],s={},u={};return delete t.table,u[n.timeField]=!0,function(){var e,n,o,r,c=1,f=[];for(e=0;e<t.length;e++)for(o in r=t[e])if(r.hasOwnProperty(o)){if(u[o])continue;if(s[o])continue;s[o]=c++,i.push(o)}for(e=0;e<t.length;e++){for(r=t[e],f=new Array(i.length),n=0;n<i.length;n++)f[n]=void 0===r[i[n]]?"":r[i[n]];a.push(f)}}(),t&&0!==t.length?(o={table:e,fields:JSON.stringify(i),datas:JSON.stringify(a),pr_t:n.timeField},o=this.configs.baseURL+Object(r.m)(o)):""},e}(Q)),pt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),lt=new(function(t){function e(){var e=t.call(this)||this;return e.adapterName=f.BEACON,e.configs={baseURL:"https://otheve.beacon.qq.com/analytics/upload?tp=js",shouldMerge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},reportInTestMode:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},queueConfig:{sourceKey:"beacon_queue_v3",pendingKey:"beacon_pending_v3",maxInBatch:20,maxSize:10},methods:4,postFormat:"JSON"},e.buildData=function(t,e){var n;if(Object(r.f)(t)){var o=t;if(o.length<2)return o;for(var i={},a=0;a<o.length;a++){var s=o[a],u=s.appkey;i[u]?(n=i[u].msgs[0].data.events).push.apply(n,s.msgs[0].data.events):i[u]=s}return Object.keys(i).map((function(t){return i[t]}))}return[t]},e}return pt(e,t),e}(Q)),dt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();!function(t){t.STATUS="status",t.VALUE="value"}($||($={}));var ht,gt,yt,mt,vt=new(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.adapterName=f.ZZS,e.configs={baseURL:h?"https://docrp.weixin.qq.com/report/node_b/zzsreport":"https://report.idqqimg.com/node_b/zzsreport",shouldMerge:function(){return!1},reportInTestMode:function(){return!1},queueConfig:{sourceKey:"zzs_queue_v3",pendingKey:"zzs_pending_v3",maxInBatch:100,maxSize:100},methods:4,postFormat:"JSON"},e.buildData=function(t){var n,o,i,a,s,u,c,f=t;return Object(r.f)(t)||(f=[t]),{domain:null===(n=f[0])||void 0===n?void 0:n.domain,tenant:null===(o=f[0])||void 0===o?void 0:o.tenant,third:null===(i=f[0])||void 0===i?void 0:i.third,platform:null===(a=f[0])||void 0===a?void 0:a.platform,source:null===(s=f[0])||void 0===s?void 0:s.source,version:null===(u=f[0])||void 0===u?void 0:u.version,env:null===(c=f[0])||void 0===c?void 0:c.env,datas:f.map((function(t){var n,o=e.getDataFieldsWithType(t.type).map((function(e){var n;return null!==(n=t[e])&&void 0!==n?n:""})),r=[null!==(n=t.errmsg)&&void 0!==n?n:""];return t.dimensions&&(r=r.concat(t.dimensions)),o.push(r),o}))}},e}return dt(e,t),e.prototype.getDataFieldsWithType=function(t){switch(t){case $.VALUE:return["project","type","attrid","value"];case $.STATUS:default:return["project","type","attrid","status"]}},e}(Q)),bt=new(function(){function t(){}return t.prototype.getAdapterByName=function(t){switch(t){case f.HUATUO:return et;case f.MONITOR:return ot;case f.RETCODE:return it;case f.TDBANK:return st;case f.TDW:return ft;case f.BEACON:return lt;case f.ZZS:return vt;default:return X}},t.prototype.getAdapterBySourceKey=function(t){switch(t){case et.configs.queueConfig.sourceKey:return et;case ot.configs.queueConfig.sourceKey:return ot;case it.configs.queueConfig.sourceKey:return it;case st.configs.queueConfig.sourceKey:return st;case ft.configs.queueConfig.sourceKey:return ft;case lt.configs.queueConfig.sourceKey:return lt;case vt.configs.queueConfig.sourceKey:return vt;default:return X}},t}()),Ot=0;function Tt(t){var e=Object(r.c)()-gt;if(gt&&e>ht.holdTime||t){if(Ot>=ht.maxReport)return;if(t?Object(i.b)("卡顿上报，主线程超时没有回包，要求回包时间："+ht.holdTime+"ms"):Object(i.b)("卡顿上报，worker 通信耗时："+e),Ot++,ht.monitor&&ot.report(ht.monitor,{}),ht.tdw){var n={};n.table=ht.tdw.table,n[ht.tdw.key]=e,Object(r.l)(n,ht.tdw),ft.report(n,{})}Ot===ht.maxReport&&clearInterval(yt)}}var Dt=function(t,e){if(e.init)return ht=t,void(yt=setInterval((function(){gt=Object(r.c)(),mt=setTimeout((function(){Tt(!0)}),ht.holdTime),St.postMessageToMain({type:"jank"})}),1e3*ht.interval));e.stop?clearInterval(yt):(clearTimeout(mt),Tt())},wt=function(){function t(){var t=this;this.worker=self,this.postMessageToMain=function(e){t.worker.postMessage(e)},this.receiveMessageFromMain=function(e){for(var n,o=(n=t.isNativeMP?e:e.data).length,r=0;r<o;r++){var i=n[r];t.handleMessageFromMain(i)}},this.handleMessageFromMain=function(e){var n=e.type,r=e.payload,i=e.opts;switch(n){case"api":t.handleMessageFromAPI(r,i);break;case"config":t.handleMessageFromConfig(r,i);break;case"adapterConfig":t.handleMessageFromAdapterConfig(r,i);break;case"hooks":t.handleMessageFromHooks(r,i);break;case"online":o.b.trigger("workerOnline",r);break;case"offline":o.b.trigger("workerOffline",r);break;case"apiWorker":t.handleMessageFromAPIWorker(r,i);break;default:o.b.trigger(e.type,e)}},this.handleMessageFromAPI=function(t,e){var n=e&&e.reportType||"auto",o=t&&t.opts&&t.opts.name;if(o){var r=bt.getAdapterByName(o),i=t.data,a=t.opts,s=t.isImmediately;switch(n){case"auto":r.report(i,a,s);break;case"common":r.commonReport(i,a,s);break;case"merge":r.mergeReport(i,a)}}},this.handleMessageFromHooks=function(t,e){"add"===t.action?A.addHooks(t.name,(function(){})):"remove"===t.action&&A.removeHooks(t.name,(function(){}))},this.handleMessageFromConfig=function(t,e){g.reset(t)},this.handleMessageFromAdapterConfig=function(t,e){var n=e&&e.adapterName;n&&bt.getAdapterByName(n).resetConfig(t)},this.handleMessageFromAPIWorker=function(t,e){e&&"jank"===e.reportType&&Dt(t.data,t.opts)},this.worker?(this.isNativeMP=Object(r.g)(),this.init()):Object(i.a)("初始化 Worker 出错")}return t.prototype.init=function(){self.onmessage=this.receiveMessageFromMain,self.onmessageerror=function(t){Object(i.a)(t)}},t}(),St=e.default=new wt}])}]);',n.p+"fa4a501f6ea101655bd2.worker.js")}},function(t,e,n){n.r(e);var r=n(13);n.d(e,"monitor",(function(){return r.c})),n.d(e,"retcode",(function(){return r.d})),n.d(e,"tdbank",(function(){return r.e})),n.d(e,"tdw",(function(){return r.f})),n.d(e,"zzs",(function(){return r.g})),n.d(e,"huatuo",(function(){return r.b})),n.d(e,"AlloyReport",(function(){return r.a}))},function(t,e,n){(function(t){try{!function(){if(t&&t.process&&t.process.argv&&t.process.argv.length){var e=t.process.argv,n=e&&e[0]&&e[0].toLocaleLowerCase&&e[0].toLocaleLowerCase();n&&-1!==n.indexOf("node")&&(t.isNodePlatform=!0,t.window=null)}}()}catch(t){console.log("nodePolyfill error",t)}}).call(this,n(14))},function(t,e){"function"!=typeof Object.assign&&(Object.assign=function(t){if(!t)throw new TypeError("Cannot convert undefined or null to object");t=Object(t);for(var e=1;e<arguments.length;e++){var n=arguments[e];if(n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t})},function(t,e){},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],f=!1,l=-1;function p(){f&&u&&(f=!1,u.length?c=u.concat(c):l=-1,c.length&&d())}function d(){if(!f){var t=s(p);f=!0;for(var e=c.length;e;){for(u=c,c=[];++l<e;)u&&u[l].run();l=-1,e=c.length}u=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function g(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new h(t,e)),1!==c.length||f||s(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){var r=window.URL||window.webkitURL;t.exports=function(t,e){try{try{var n;try{(n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(t),n=n.getBlob()}catch(e){n=new Blob([t])}return new Worker(r.createObjectURL(n))}catch(e){return new Worker("data:application/javascript,"+encodeURIComponent(t))}}catch(t){if(!e)throw Error("Inline worker is not supported");return new Worker(e)}}},function(t,e,n){(function(t){!function(){var e;function n(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}var r="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},o="undefined"!=typeof window&&window===this?this:void 0!==t&&null!=t?t:this;function i(){i=function(){},o.Symbol||(o.Symbol=c)}function a(t,e){this.s=t,r(this,"description",{configurable:!0,writable:!0,value:e})}a.prototype.toString=function(){return this.s};var s,u,c=(s=0,function t(e){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new a("jscomp_symbol_"+(e||"")+"_"+s++,e)});function f(){i();var t=o.Symbol.iterator;t||(t=o.Symbol.iterator=o.Symbol("Symbol.iterator")),"function"!=typeof Array.prototype[t]&&r(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return function(t){return f(),(t={next:t})[o.Symbol.iterator]=function(){return this},t}(n(this))}}),f=function(){}}function l(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:n(t)}}if("function"==typeof Object.setPrototypeOf)u=Object.setPrototypeOf;else{var p;t:{var d={};try{d.__proto__={v:!0},p=d.v;break t}catch(t){}p=!1}u=p?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var h=u;function g(){this.h=!1,this.c=null,this.o=void 0,this.b=1,this.m=this.w=0,this.g=null}function m(t){if(t.h)throw new TypeError("Generator is already running");t.h=!0}function v(t,e,n){return t.b=n,{value:e}}function y(t){for(var e in this.C=t,this.l=[],t)this.l.push(e);this.l.reverse()}function b(t){this.a=new g,this.D=t}function w(t,e,n,r){try{var o=e.call(t.a.c,n);if(!(o instanceof Object))throw new TypeError("Iterator result "+o+" is not an object");if(!o.done)return t.a.h=!1,o;var i=o.value}catch(e){return t.a.c=null,t.a.j(e),O(t)}return t.a.c=null,r.call(t.a,i),O(t)}function O(t){for(;t.a.b;)try{var e=t.D(t.a);if(e)return t.a.h=!1,{value:e.value,done:!1}}catch(e){t.a.o=void 0,t.a.j(e)}if(t.a.h=!1,t.a.g){if(e=t.a.g,t.a.g=null,e.B)throw e.A;return{value:e.return,done:!0}}return{value:void 0,done:!0}}function T(t){this.next=function(e){return t.i(e)},this.throw=function(e){return t.j(e)},this.return=function(e){return function(t,e){m(t.a);var n=t.a.c;return n?w(t,"return"in n?n.return:function(t){return{value:t,done:!0}},e,t.a.return):(t.a.return(e),O(t))}(t,e)},f(),this[Symbol.iterator]=function(){return this}}function S(t,e){var n=new T(new b(e));return h&&h(n,t.prototype),n}if(g.prototype.i=function(t){this.o=t},g.prototype.j=function(t){this.g={A:t,B:!0},this.b=this.w||this.m},g.prototype.return=function(t){this.g={return:t},this.b=this.m},b.prototype.i=function(t){return m(this.a),this.a.c?w(this,this.a.c.next,t,this.a.i):(this.a.i(t),O(this))},b.prototype.j=function(t){return m(this.a),this.a.c?w(this,this.a.c.throw,t,this.a.i):(this.a.j(t),O(this))},"undefined"!=typeof Blob&&("undefined"==typeof FormData||!FormData.prototype.keys)){var D=function(t,e){for(var n=0;n<t.length;n++)e(t[n])},x=function(t,e,n){return e instanceof Blob?[String(t),e,void 0!==n?n+"":"string"==typeof e.name?e.name:"blob"]:[String(t),String(e)]},R=function(t,e){if(t.length<e)throw new TypeError(e+" argument required, but only "+t.length+" present.")},I=function(t){var e=l(t);return t=e.next().value,e=e.next().value,t instanceof Blob&&(t=new File([t],e,{type:t.type,lastModified:t.lastModified})),t},j="object"==("undefined"==typeof window?"undefined":et(window))?window:"object"==("undefined"==typeof self?"undefined":et(self))?self:this,_=j.FormData,E=j.XMLHttpRequest&&j.XMLHttpRequest.prototype.send,C=j.Request&&j.fetch,A=j.navigator&&j.navigator.sendBeacon;i();var k=j.Symbol&&Symbol.toStringTag;k&&(Blob.prototype[k]||(Blob.prototype[k]="Blob"),"File"in j&&!File.prototype[k]&&(File.prototype[k]="File"));try{new File([],"")}catch(t){j.File=function(t,e,n){return t=new Blob(t,n),n=n&&void 0!==n.lastModified?new Date(n.lastModified):new Date,Object.defineProperties(t,{name:{value:e},lastModifiedDate:{value:n},lastModified:{value:+n},toString:{value:function(){return"[object File]"}}}),k&&Object.defineProperty(t,k,{value:"File"}),t}}i(),f();var P=function(t){if(this.f=Object.create(null),!t)return this;var e=this;D(t.elements,(function(t){if(t.name&&!t.disabled&&"submit"!==t.type&&"button"!==t.type)if("file"===t.type){var n=t.files&&t.files.length?t.files:[new File([],"",{type:"application/octet-stream"})];D(n,(function(n){e.append(t.name,n)}))}else"select-multiple"===t.type||"select-one"===t.type?D(t.options,(function(n){!n.disabled&&n.selected&&e.append(t.name,n.value)})):"checkbox"===t.type||"radio"===t.type?t.checked&&e.append(t.name,t.value):(n="textarea"===t.type?t.value.replace(/\r\n/g,"\n").replace(/\n/g,"\r\n"):t.value,e.append(t.name,n))}))};if((e=P.prototype).append=function(t,e,n){R(arguments,2);var r=l(x.apply(null,arguments));t=r.next().value,e=r.next().value,n=r.next().value,(r=this.f)[t]||(r[t]=[]),r[t].push([e,n])},e.delete=function(t){R(arguments,1),delete this.f[String(t)]},e.entries=function t(){var e,n,r,o,i,a,s=this;return S(t,(function(t){switch(t.b){case 1:e=s.f,r=new y(e);case 2:var u;t:{for(u=r;0<u.l.length;){var c=u.l.pop();if(c in u.C){u=c;break t}}u=null}if(null==(n=u)){t.b=0;break}o=l(e[n]),i=o.next();case 5:if(i.done){t.b=2;break}return a=i.value,v(t,[n,I(a)],6);case 6:i=o.next(),t.b=5}}))},e.forEach=function(t,e){R(arguments,1);for(var n=l(this),r=n.next();!r.done;r=n.next()){var o=l(r.value);r=o.next().value,o=o.next().value,t.call(e,o,r,this)}},e.get=function(t){R(arguments,1);var e=this.f;return e[t=String(t)]?I(e[t][0]):null},e.getAll=function(t){return R(arguments,1),(this.f[String(t)]||[]).map(I)},e.has=function(t){return R(arguments,1),String(t)in this.f},e.keys=function t(){var e,n,r,o=this;return S(t,(function(t){if(1==t.b&&(e=l(o),n=e.next()),3!=t.b)return n.done?void(t.b=0):(r=n.value,v(t,l(r).next().value,3));n=e.next(),t.b=2}))},e.set=function(t,e,n){R(arguments,2);var r=x.apply(null,arguments);this.f[r[0]]=[[r[1],r[2]]]},e.values=function t(){var e,n,r,o,i=this;return S(t,(function(t){if(1==t.b&&(e=l(i),n=e.next()),3!=t.b)return n.done?void(t.b=0):(r=n.value,(o=l(r)).next(),v(t,o.next().value,3));n=e.next(),t.b=2}))},P.prototype._asNative=function(){for(var t=new _,e=l(this),n=e.next();!n.done;n=e.next()){var r=l(n.value);n=r.next().value,r=r.next().value,t.append(n,r)}return t},P.prototype._blob=function(){for(var t="----formdata-polyfill-"+Math.random(),e=[],n=l(this),r=n.next();!r.done;r=n.next()){var o=l(r.value);r=o.next().value,o=o.next().value,e.push("--"+t+"\r\n"),o instanceof Blob?e.push('Content-Disposition: form-data; name="'+r+'"; filename="'+o.name+'"\r\n',"Content-Type: "+(o.type||"application/octet-stream")+"\r\n\r\n",o,"\r\n"):e.push('Content-Disposition: form-data; name="'+r+'"\r\n\r\n'+o+"\r\n")}return e.push("--"+t+"--"),new Blob(e,{type:"multipart/form-data; boundary="+t})},P.prototype[Symbol.iterator]=function(){return this.entries()},P.prototype.toString=function(){return"[object FormData]"},k&&(P.prototype[k]="FormData"),E){var M=j.XMLHttpRequest.prototype.setRequestHeader;j.XMLHttpRequest.prototype.setRequestHeader=function(t,e){M.call(this,t,e),"content-type"===t.toLowerCase()&&(this.u=!0)},j.XMLHttpRequest.prototype.send=function(t){t instanceof P?(t=t._blob(),this.u||this.setRequestHeader("Content-Type",t.type),E.call(this,t)):E.call(this,t)}}if(C){var L=j.fetch;j.fetch=function(t,e){return e&&e.body&&e.body instanceof P&&(e.body=e.body._blob()),L.call(this,t,e)}}A&&(j.navigator.sendBeacon=function(t,e){return e instanceof P&&(e=e._asNative()),A.call(this,t,e)}),j.FormData=P}}()}).call(this,n(14))}])}(tt);var rt=console.log;function ot(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];rt.apply(void 0,G(["[Doc-Report]:"],t,!1))}function it(t,e,n){var r=new XMLHttpRequest;r.withCredentials=!0,r.open(e,t),r.setRequestHeader("content-type","application/x-www-form-urlencoded"),r.setRequestHeader("accept","application/json, text/plain, */*"),r.send(function(t){var e="";for(var n in t)if(t[n]instanceof Array)for(var r in t[n])void 0!==r&&(e+="".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(t[n][r]),"&"));else e+="".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(t[n]),"&");return e.slice(0,-1)}(n))}function at(){return!(!Q()||!r("tdw_panel"))}function st(t,e){return new Promise((function(n){var r=document.createElement("script");r.async=!0,r.src=t,r.crossOrigin="anonymous",r.setAttribute("retry-when-error","true"),r.onload=function(){var t=window[e];n(t)},(document.head||document.body).appendChild(r)}))}var ut,ct,ft,lt,pt=document.createElement("ul"),dt=1;function ht(t,e){void 0===t&&(t={});var n=Object.assign({},Y());return nt(n,t),function(t,e){if(at()){ut=JSON.stringify(t,null,4);var n=document.createElement("li");n.innerText="第 ".concat(dt," 条：").concat(JSON.stringify(e,null,4)),pt.prepend(n),dt+=1}}(n,t),(null==e?void 0:e.showLog)?ot(n):function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];(window._tencent_doc_report_show_log||r("alloy_report_debug")||r("alloy-report-debug")||r("showLog"))&&ot(t)}(n),tt.exports.tdw(n,null==e?void 0:e.immediate)}at()&&Promise.all([(ct="https://tencent-doc.cdn-go.cn/doc-report/85fafc17/jspanel.min.css",new Promise((function(t){var e=document.createElement("link");e.href=ct,e.rel="stylesheet",e.onload=function(){t()},(document.head||document.body).appendChild(e)}))),st("https://tencent-doc.cdn-go.cn/doc-report/85fafc17/jspanel.min.js","jsPanel")]).then((function(){var t,e,n={bgContent:"#fff",colorHeader:"#1e6fff",colorContent:"#".concat(window.jsPanel.colorNames.gray700),border:"thin #1e6fff solid"},r=window.jsPanel.create({content:(t=document.createElement("ul"),e=document.createElement("li"),e.innerText=ut,t.appendChild(e),t),theme:n,headerTitle:"必报字段（上报库默认的字段）",contentSize:{width:.6*window.innerWidth,height:.6*window.innerHeight},contentOverflow:"scroll"}),o=window.jsPanel.create({id:"businessPanel",content:pt,theme:n,headerTitle:"腾讯文档日志流水",contentSize:{width:.6*window.innerWidth,height:.6*window.innerHeight},contentOverflow:"scroll",position:"center 50 50"});r.minimize(),o.minimize(),st("https://tencent-doc.cdn-go.cn/doc-report/latest/jspanel.contextmenu.min.js",""),setTimeout((function(){window.jsPanel.contextmenu.create({target:"#businessPanel",content:'<div class="contextmenu1">\n            <a href="#"><i class="fad fa-paste fa-fw"></i><div style=\'color:#1e6fff;text-align:center\'>清空数据</div></a>\n        </div>',contentSize:"auto auto",closeOnMouseleave:!1,callback:function(t){t.querySelectorAll(".contextmenu1 a").forEach((function(t){t.addEventListener("click",(function(t){t.preventDefault(),pt.innerHTML=""}))}))}})}),1e3)})),Z(),function(t){t[t.OSS=1]="OSS"}(ft||(ft={})),function(t){t[t.WEDOC=1]="WEDOC",t[t.QQMAIL=2]="QQMAIL"}(lt||(lt={}));var gt,mt,vt=/^(logid|itemname|xmuin|value|sublogid)$/i,yt={wedocs:{logid:24317,expand:["CropID","DocID","Channel1"]},edit:{logid:24316,expand:["CropID","DocID"]},personal:{logid:24315,expand:["CropID","DocID","Channel1","Channel2","Extra1","Extra2"]},wxwork:{logid:24885,expand:["CropID","DocID","Channel1","Channel2","Extra1","Extra2","Extra3","Extra4","Extra5"]}},bt=function(){return window.clientVars||{}},wt=function(){var t=this;this.url="/info/report",this.delayLogList=[],this.timer=null,this.inited=!1,this.init=function(e){t.corpId=e.corpId,t.docId=e.docId,t.channel=e.channel||lt.WEDOC,t.inited=!0},this.oss=function(e,n){void 0===n&&(n=!0);try{t.report(ft.OSS,e,n)}catch(t){console.error("KVR OSS error",t)}},this.report=function(e,n,r){var o,i,a;if(y){if(!t.inited){var s=null===(i=null===(o=bt())||void 0===o?void 0:o.userInfo)||void 0===i?void 0:i.corp_id,u=null===(a=bt())||void 0===a?void 0:a.padId;if(!s||!u)return;t.init({corpId:s,docId:u})}n.biz=n.biz||"wedocs",r?t.delayLogList.push(n):t.doReport([n],e),!t.timer&&t.delayLogList.length>0&&(t.timer=setTimeout((function(){t.doReport(t.delayLogList,e),t.delayLogList=[]}),1e3))}},this.doReport=function(e,n){t.timer&&clearTimeout(t.timer),t.timer=null,it(t.url,"POST",{func:n,items:t.transformRequest(e)})},this.transformRequest=function(e){return e.map((function(e){var n={};if(Object.keys(e).forEach((function(t){vt.test(t)&&(n[t]=e[t]),n.value=n.value||1})),e.biz){var r=yt[e.biz];r&&(Array.isArray(r.expand)&&(n.expand=r.expand.map((function(n,r){return"CropID"!==n||e[n]||(e[n]=t.corpId),"DocID"!==n||e[n]||(e[n]=t.docId),"Channel1"===n&&"wedocs"===e.biz&&(e[n]=t.channel),e[n]||""})).join(",")),!n.logid&&r.logid&&(n.logid=r.logid),n.source=t.channel===lt.QQMAIL?"qqmail":"wecom")}return JSON.stringify(n)}))}},Ot=new wt,Tt=function(){function t(){}return Object.defineProperty(t.prototype,"domain",{get:function(){var t,e,n,r;return(null===(e=null===(t=window.AppConfig)||void 0===t?void 0:t.normal)||void 0===e?void 0:e.domain)||(null===(r=null===(n=window.AppConfig)||void 0===n?void 0:n.normal)||void 0===r?void 0:r.instance)||location.host},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tenant",{get:function(){var t,e,n;return(null===(t=window.clientVars)||void 0===t?void 0:t.creatorCorpId)?"".concat(null===(e=window.clientVars)||void 0===e?void 0:e.creatorCorpName,":").concat(null===(n=window.clientVars)||void 0===n?void 0:n.creatorCorpId):""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"third",{get:function(){return e("open_theme_id")||e("third_appid")||""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"platform",{get:function(){return h.isIPhone?"iPhone":h.isIPad?"iPad":h.isAndroidPad?"androidPad":h.isAndroidPhone?"androidPhone":h.isMac?"mac":h.isWindows?"windows":"other"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"source",{get:function(){for(var t=[[h.isWxMiniProgram,"wxMiniProgram"],[h.isQQMiniProgram,"qqMiniProgram"],[h.isWxWork,"wxWork"],[h.isChrome,"chrome"],[h.isSafari,"safari"],[h.isFirefox,"firefox"],[h.isChromiumEdge,"chromiumEdge"],[h.isQQBrowser,"qqBrowser"],[h.isTencentDocsApp,"tencentDocsApp"],[h.isPCTencentDocsClient,"pcTencentDocsClient"],[h.isWeiYunApp,"weiYunApp"],[h.isElectronTencentDocsClient,"electronTencentDocsClient"],[h.isWeChat,"weChat"],[h.isQQ,"qq"],[h.isTim,"tim"],[h.isWindowsUWP,"windowsUwp"]],e=0;e<t.length;e++)if(t[e][0])return t[e][1];return""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){var t;return null===(t=window.__DWS_INFO__)||void 0===t?void 0:t.releaseVersion},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"env",{get:function(){var t;return null===(t=window.__DWS_INFO__)||void 0===t?void 0:t.curEnvId},enumerable:!1,configurable:!0}),t}();function St(t,e,n){xt(H({type:"status"},t),e,n)}var Dt=!1;function xt(t,e,n){Dt||(!function(){gt=_()||"other";var t=new Tt;mt={domain:t.domain,tenant:t.tenant,third:t.third,platform:t.platform,source:t.source,version:t.version,env:t.env}}(),Dt=!0);var r=H(H({project:null!=n?n:gt},mt),t);return tt.exports.zzs(r,e)}var Rt=function(t,e,n,r){void 0===n&&(n=!0),void 0===r&&(r=!0),t.browserStr=R(),n&&It(t),r&&jt(t),e&&_t(e,t)},It=function(t){var e,n,r=t.errorCode,o=t.padType,i=t.type,a=void 0===i?"error":i;null===(n=null===(e=window.log)||void 0===e?void 0:e[a])||void 0===n||n.call(e,"".concat(o,"-").concat(r),t)};function jt(t){St({attrid:t.errorCode,status:1,project:"tip",errmsg:t.snackbarMsg,dimensions:[t.padType,t.type]})}function _t(t,e){var n,r=t.startSpan(e.errorCode,{attributes:(n={errorCode:e.errorCode,padType:e.padType,url:e.url,uid:e.uid,type:e.type,isLogin:e.isLogin,browserStr:e.browserStr,snackbarMsg:e.snackbarMsg,version:window.__globalReleaseVersion},n["http.host"]=location.host,n)});r.addEvent("other",{message:e.message,tipsCustom:"object"==typeof e.tipsCustom?JSON.stringify(e.tipsCustom):e.tipsCustom}),r.end()}var Et;!function(t){t[t.IDKEY=2]="IDKEY"}(Et||(Et={}));var Ct=new(function(){function t(){this.timer=null,this.delayLogList=[],this.delayReportTime=2}return t.prototype.report=function(t,e){var n=this;if(void 0===e&&(e={immediate:!1}),y)try{this.beforeReport(t),e.immediate?this.send([t]):this.delayLogList.push(t),!this.timer&&this.delayLogList.length>0&&(this.timer=setTimeout((function(){n.send(n.delayLogList),n.delayLogList=[],n.timer=null}),1e3*this.delayReportTime))}catch(t){console.log("report err",t)}},t.prototype.send=function(t){if(0!==t.length){var e=t.map((function(t){return JSON.stringify(t)}));this.sendReport(e)}},t.prototype.beforeReport=function(t){t.value||(t.value=1)},t.prototype.sendReport=function(t){it("/info/report","POST",{func:Et.IDKEY,items:t})},t}());var At=Object.freeze({__proto__:null,monitor:tt.exports.monitor,retcode:tt.exports.retcode,huatuo:tt.exports.huatuo,tdw:ht,tdwSingle:function(t,e){void 0===t&&(t={});var n=Object.assign({},Y());nt(n,t),e=e instanceof Array?e:[];var r={};for(var o in n)if(n.hasOwnProperty(o)){if(e.indexOf(o)>-1)continue;r[o]=n[o]}return ht(r,{immediate:!0})},get Channel(){return lt},KVRReporter:wt,KVR:Ot,zzsStatus:St,zzsValue:function(t,e,n){xt(H({type:"value"},t),e,n)},reportErrorCode:function(t,e){},tipReport:Rt,webLog:It,tip007:jt,tipOpentelemetryLog:_t,webLogAndEsReport:function(t,e,n){return void 0===e&&(e=!0),void 0===n&&(n=!0),Rt(t,void 0,e,n)},idkey:function(t,e,n,r){void 0===n&&(n=1),Ct.report({logid:t,sublogid:e,value:n},r)},LogPadType:{Sheet:"sheet",Backend:"backend",WxJsSdk:"WxJsSdk",Mqq:"Mqq",Fc:"fc",Sc:"sc",Ark:"ark",DC:"dc",Doc:"doc",BlankPage:"blankPage",Slide:"slide",PDF:"pdf",Form:"form",Scenario:"scenario",SmartSheet:"smartSheet"}}),kt={},Pt=function(t){Object.entries(t).forEach((function(t){var e=t[0],n=t[1];if("function"==typeof n)return kt[e]=Mt(n);kt[e]=n}))},Mt=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return t.apply(void 0,e)}catch(t){console.error(t);var r={};return r}}};return Pt($),Pt(At),kt}();
