!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var o in n)("object"==typeof exports?exports:t)[o]=n[o]}}(window,(function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=21)}([function(t,e,n){"use strict";(function(t){function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return s})),n.d(e,"m",(function(){return u})),n.d(e,"l",(function(){return c})),n.d(e,"p",(function(){return f})),n.d(e,"k",(function(){return p})),n.d(e,"i",(function(){return l})),n.d(e,"j",(function(){return d})),n.d(e,"g",(function(){return h})),n.d(e,"n",(function(){return g})),n.d(e,"q",(function(){return m})),n.d(e,"d",(function(){return y})),n.d(e,"h",(function(){return v})),n.d(e,"o",(function(){return b})),n.d(e,"f",(function(){return w})),n.d(e,"e",(function(){return T})),n.d(e,"r",(function(){return S}));var r="undefined"!=typeof window&&window&&window.navigator?window:null,i="undefined"!=typeof self&&self&&self.navigator?self:null,a=v()?qq||wx:null,s=r||i,u=r&&r.localStorage&&"function"==typeof r.localStorage.getItem?1:v()&&"function"==typeof a.getStorage?2:0,c="object"===("undefined"==typeof indexedDB?"undefined":o(indexedDB))&&"function"==typeof indexedDB.open;function f(t,e,n){for(var o in e)if(e.hasOwnProperty(o)){if(n&&-1!==n.indexOf(o))continue;var r=e[o];void 0!==r&&(t[o]=r)}}function p(t,e){return"string"==typeof t&&(!e||t.length===e)}function l(t){return"number"==typeof t}function d(t){return p(t)||l(t)}function h(t){if(!t)return!1;var e=t.constructor.toString().substring(9).indexOf("Array");return t&&e>-1&&e<=1}function g(t,e){for(var n in e)(r=e[n])&&"object"===o(r)&&!h(r)?g(t[n],e[n]):t[n]=e[n];var r}function m(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(encodeURIComponent(String(n))+"="+encodeURIComponent(String(t[n])));return e.join("&")}function y(){return(new Date).getTime()}function v(){return"object"===("undefined"==typeof qq?"undefined":o(qq))&&qq.canIUse?qq.canIUse("request"):!("object"!==("undefined"==typeof wx?"undefined":o(wx))||!wx.canIUse)&&wx.canIUse("request")}function b(t,e){for(var n=Object.keys(t),o=n.length,r=0;r<o;r++){var i=n[r];e(i,t[i])}}function O(t){return!!(s&&s.location&&s.location.search.indexOf(t)>0)}function w(){return O("alloy_report_debug")||O("alloy-report-debug")}function T(){return O("alloy_report_close")||O("alloy-report-close")}function S(t){for(var e=[],n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=n.length,r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*o)));return e.join("")}}).call(this,n(14))},function(t,e,n){"use strict";n.d(e,"c",(function(){return l})),n.d(e,"a",(function(){return d})),n.d(e,"d",(function(){return h})),n.d(e,"b",(function(){return g})),n.d(e,"e",(function(){return m}));var o=n(0),r=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o},i="[AlloyReport]",a=Object(o.f)(),s=console.log,u=console.error,c=console.warn,f=console.info,p=function(t,e){t.apply(void 0,r([i],e))},l=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a&&p(s,t)},d=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];u.apply(void 0,r([i],t))},h=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a&&p(c,t)},g=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a&&p(f,t)},m=function(t){a=t}},function(t,e,n){"use strict";(function(t,o){n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return f}));var r=n(19),i=n(0),a=n(9),s=new r.a,u=s.create("global"),c=s.create("hooks"),f=s.create("dispatch");!function(){if(i.b&&i.b.addEventListener){var e=function(){a.a&&a.a.postMessageToWorker&&a.a.postMessageToWorker({type:"beforeunload"},!0),u.trigger("beforeunload")};i.b.addEventListener("beforeunload",e),i.b.addEventListener("pagehide",e)}else t&&t.isNodePlatform&&o.on("beforeExit",(function(){u.trigger("beforeunload")}))}()}).call(this,n(14),n(25))},function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return u})),n.d(e,"b",(function(){return c})),n.d(e,"e",(function(){return f}));var o=n(1),r=n(9),i=n(0);function a(t,e){return f((function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(!i.b||!i.b.requestIdleCallback)return t.apply(void 0,n);i.b.requestIdleCallback((function(){try{return t.apply(void 0,n)}catch(t){e&&e(),Object(o.a)(t)}}),{timeout:5e3})}),e)}function s(){return c()&&!0}function u(){return!1}function c(){return!(!r.a||!r.a.worker)}function f(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return t.apply(void 0,n)}catch(t){e&&e(),Object(o.a)(t)}}}},function(t,e,n){"use strict";var o=n(0),r=n(3),i=n(9),a=n(1),s=n(11),u=function(){function t(){var t=this;this.configs={mergeQueueConfig:{sourceKey:"report_source_v2",pendingKey:"report_pending_v2",maxInBatch:5e4,maxSize:5e4},enableMergeReport:!0,cgiURL:s.a?"https://docrp.weixin.qq.com/report/node/":"https://report.idqqimg.com/node/report/",backupUrl:"https://report.idqqimg.com/node_b/",isLogPrint:Object(o.f)(),isCloseReport:Object(o.e)(),expiredTime:6048e5,supportOffline:!0,maxStoreReport:1e4,headRequest:!0,enableWorker:!0},this.closeLog=function(){t.configs.isLogPrint=!1,Object(a.e)(!1),t.syncConfigToWorker()},this.openLog=function(){t.configs.isLogPrint=!0,Object(a.e)(!0),t.syncConfigToWorker()},this.closeReport=function(){t.configs.isCloseReport=!0,t.syncConfigToWorker()},this.openReport=function(){t.configs.isCloseReport=!1,t.syncConfigToWorker()},this.enableMerge=function(){t.configs.enableMergeReport=!0,t.syncConfigToWorker()},this.disableMerge=function(){t.configs.enableMergeReport=!1,t.syncConfigToWorker()},this.disableWorker=function(){t.configs.enableWorker=!1,i.a.terminateWorker()},this.reset=function(e){s.a||(Object(o.n)(t.configs,e),Object(a.e)(t.configs.isLogPrint),t.syncConfigToWorker())},this.syncConfigToWorker=function(){if(Object(r.a)()){var e=JSON.parse(JSON.stringify(t.configs));i.a.postMessageToWorker({type:"config",payload:e})}}}return Object.defineProperty(t.prototype,"mergeQueueConfig",{get:function(){return this.configs.mergeQueueConfig},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enableMergeReport",{get:function(){return this.configs.enableMergeReport},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cgiURL",{get:function(){return this.configs.cgiURL},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLogPrint",{get:function(){return this.configs.isLogPrint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCloseReport",{get:function(){return this.configs.isCloseReport},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"expiredTime",{get:function(){return this.configs.expiredTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"supportOffline",{get:function(){return this.configs.supportOffline},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxStoreReport",{get:function(){return this.configs.maxStoreReport},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headRequest",{get:function(){return this.configs.headRequest},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enableWorker",{get:function(){return this.configs.enableWorker},enumerable:!0,configurable:!0}),t}();e.a=new u},function(t,e,n){"use strict";var o=["onReceiveReporter","onHanldeParams","onBeforeCommonReport","onBeforeMergeReport","onBeforeReportSend","onReportSenderError","onReportSenderSuccess","onReportSenderTimeout"],r=n(1),i=n(2),a=n(3),s=n(9),u=(n(17),function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o});e.a=new function(){var t=this;this.addHooks=function(e,n){"function"==typeof n?-1!==o.indexOf(e)?(i.c.on(e,n),t.syncHooksToWorker(e,"add")):Object(r.d)("不支持的钩子"):Object(r.d)("参数必须是函数")},this.removeHooks=function(e,n){i.c.remove(e,n),t.syncHooksToWorker(e,"remove")},this.execute=function(t,e){i.c.trigger.apply(i.c,u([t],e))},this.getExecuteFunction=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];i.c.getLength(t)&&i.c.trigger.apply(i.c,u([t],e))}},this.syncHooksToWorker=function(t,e){if(Object(a.a)()){var n={name:t,action:e};s.a.postMessageToWorker({type:"hooks",payload:n})}},this.onReceiveReporter=this.getExecuteFunction("onReceiveReporter"),this.onHanldeParams=this.getExecuteFunction("onHanldeParams"),this.onBeforeCommonReport=this.getExecuteFunction("onBeforeCommonReport"),this.onBeforeMergeReport=this.getExecuteFunction("onBeforeMergeReport"),this.onBeforeReportSend=this.getExecuteFunction("onBeforeReportSend"),this.onReportSenderError=this.getExecuteFunction("onReportSenderError"),this.onReportSenderSuccess=this.getExecuteFunction("onReportSenderSuccess"),this.onReportSenderTimeout=this.getExecuteFunction("onReportSenderTimeout")}},function(t,e,n){"use strict";var o,r,i;!function(t){t[t.NO_WORKER=35056324]="NO_WORKER",t[t.NO_INDEDEDDB=35056325]="NO_INDEDEDDB",t[t.WORKER_FAIL=34981047]="WORKER_FAIL",t[t.SDK_LOAD=34980701]="SDK_LOAD",t[t.INDEDEDDB_OPEN_FAIL=34981048]="INDEDEDDB_OPEN_FAIL",t[t.INDEDEDDB_OVER_LIMIT=34981049]="INDEDEDDB_OVER_LIMIT",t[t.INDEDEDDB_OVER_TIME=34986191]="INDEDEDDB_OVER_TIME",t[t.REPORT_NONE=34987578]="REPORT_NONE"}(o||(o={})),function(t){t.INLINE_LOAD_COST="inline-load-cost",t.SDK_LOAD_COST="sdk-load-cost",t.REPORT_TOTAL="report-total",t.REPORT_FAIL="report-fail",t.REPORT_OFFLINE="report-offline",t.REPORT_ONEXIT="report-onexit"}(r||(r={})),function(t){t[t.SUM=1]="SUM",t[t.AVERAGE=2]="AVERAGE"}(i||(i={}));var a=n(2),s=n(1);n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return r}));var u=function(){return(u=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},c=function(){function t(){var t=this;this.projectID=64,this.pageName="sdk-inside",this.dataDBKey="ALLOYREPORT_REPORT_INSIDE",this.getLastInsideDatas=function(){var e=[],n=[],o=window.localStorage&&window.localStorage.getItem(t.dataDBKey);if(o)try{(o=JSON.parse(o))&&(e=o.monitor,n=(n=o.adt).map((function(e){return u({projectid:t.projectID,pagename:t.pageName},e)}))),window.localStorage.removeItem(t.dataDBKey)}catch(t){}return{monitor:e,adt:n}},this.saveInsideDatas=function(){var e,n;if(window&&window.localStorage){var o=window.localStorage.getItem(t.dataDBKey);if(o)try{o=JSON.parse(o)}catch(t){Object(s.a)(t)}else o={};var r=o.monitor,i=void 0===r?[]:r,a=o.adt,u=void 0===a?[]:a;if((e=t.monitorID).push.apply(e,i),(n=t.adtDatas).push.apply(n,u),t.monitorID.length||t.adtDatas.length){var c=JSON.stringify({monitor:t.monitorID,adt:t.adtDatas});window.localStorage.setItem(t.dataDBKey,c),t.monitorID=[],t.adtDatas=[]}}},this.adtDatas=[],this.monitorID=[],this.pointIDValues={},this.isMainHandledExit=!1,this.initEvent(),this.doResourceReport(),this.doReceiveNoneReport()}return t.prototype.monitor=function(t){this.monitorID.push(t)},t.prototype.adt=function(t,e){this.adtDatas.push({pointid:t,pointvalue:e})},t.prototype.adtSum=function(t,e){this.pointIDValues[t]||(this.pointIDValues[t]=[0,0,i.SUM]),this.pointIDValues[t][0]+=e,this.pointIDValues[t][1]+=1},t.prototype.adtAverage=function(t,e){this.pointIDValues[t]||(this.pointIDValues[t]=[0,0,i.AVERAGE]),this.pointIDValues[t][0]+=e,this.pointIDValues[t][1]+=1},t.prototype.mergeIDValuesToAdt=function(){for(var t=Object.keys(this.pointIDValues),e=0;e<t.length;e++){var n=t[e],o=this.pointIDValues[n],r=0;o[2]===i.SUM?r=o[0]:o[2]===i.AVERAGE&&(r=o[0]/o[1]),this.adtDatas.push({pointid:n,pointvalue:r})}},t.prototype.syncDatasToMainThread=function(){this.mergeIDValuesToAdt();var t={monitor:this.monitorID,adt:this.adtDatas};self.postMessage({type:"reportInside",datas:t})},t.prototype.initEvent=function(){var t=this;a.b.on("beforeunload",(function(){t.isMainHandledExit=!0,t.mergeIDValuesToAdt(),t.saveInsideDatas()})),a.b.on("reportInside",(function(e){var n,o,r=e.datas,i=void 0===r?{}:r;t.mergeIDValuesToAdt();var a=i.monitor,s=i.adt;(n=t.monitorID).push.apply(n,a),(o=t.adtDatas).push.apply(o,s),t.saveInsideDatas()}))},t.prototype.doResourceReport=function(){var t=window&&(window.performance||window.webkitPerformance||window.msPerformance)||null,e=null;if(t&&t.getEntries?e=t.getEntries():t&&t.getEntriesByType&&(e=t.getEntriesByType("resource")),e)for(var n=e.length,o=0;o<n;o++){var i=e[o],a=i.name,s=i.duration,u=i.initiatorType;"script"===(u=u&&u.toLocaleLowerCase&&u.toLocaleLowerCase())&&(s=parseFloat(s.toFixed(2)),-1!==a.indexOf("alloyreport.inline.js")?this.adt(r.INLINE_LOAD_COST,s):-1!==a.indexOf("alloyreport.sdk.js")&&this.adt(r.SDK_LOAD_COST,s))}},t.prototype.doReceiveNoneReport=function(){var t=this;setTimeout((function(){t.pointIDValues[r.REPORT_TOTAL]||t.monitor(o.REPORT_NONE)}),6e4)},t}();e.c=new c},function(t,e,n){"use strict";var o,r,i=n(0),a=n(3),s=n(4);!function(t){t[t.GET=0]="GET",t[t.POST=1]="POST",t[t.HEAD=2]="HEAD",t[t.BEACON=3]="BEACON"}(o||(o={})),function(t){t.HUATUO="huatuo",t.MONITOR="monitor",t.RETCODE="retcode",t.TDBANK="tdbank",t.TDW="tdw",t.COMMON="common",t.BEACON="beacon",t.ZZS="zzs"}(r||(r={}));var u,c,f=n(1),p=function(){function t(){this.MemStore={},this.isWxStorage=2===i.m}return t.prototype.set=function(t,e){if(i.m)try{return this.isWxStorage?i.c&&i.c.setStorageSync(t,e):i.b&&i.b.localStorage.setItem(t,JSON.stringify(e)),!0}catch(t){}return!1},t.prototype.get=function(t,e){var n;if(i.m)try{this.isWxStorage?n=i.c&&i.c.getStorageSync(t):(n=i.b&&i.b.localStorage.getItem(t)).length>512e3?(n=e,Object(f.d)("警告：调用频率过高，部分上报数据已丢失")):n=JSON.parse(n)}catch(t){}return n||(n=e,e&&this.set(t,n)),n},t}(),l=n(2),d=n(16),h=n(6),g=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{u(o.next(t))}catch(t){i(t)}}function s(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((o=o.apply(t,e||[])).next())}))},m=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},y=function(){function t(){var t=this;this.databaseName="AlloyReport-DB",this.tableName="AlloyReport-Table",this.expiredTime=Object(i.d)()-s.a.expiredTime,this.tsRangeExpired=IDBKeyRange.upperBound(this.expiredTime,!0),this.tsRangeNotExpired=IDBKeyRange.lowerBound(this.expiredTime,!1),this.statistic={},this.readonly="readonly",this.readwrite="readwrite",this.addDataCache=[],this.overLimitReport=!1,this.dbDataCache={},this.addBatch=function(){return g(t,void 0,void 0,(function(){var t=this;return m(this,(function(e){return g(t,void 0,void 0,(function(){var t,e,n,o,r,i=this;return m(this,(function(a){switch(a.label){case 0:return[4,this.getDB()];case 1:return t=a.sent(),e=t.transaction(this.tableName,this.readwrite),n=e.objectStore(this.tableName),o=this.addDataCache,this.addDataCache=[],r=o.map((function(t){return new Promise((function(e){var o=t.key,r=t.data,a=t.tryTimes,s=r.ts,u=n.add({key:o,data:r,tryTimes:0,ts:s});u.onsuccess=function(t){var n=t.target.result;i.setStatistic(o,n,s,a,r),e(!0)},u.onerror=function(t){Object(f.a)(t),e(!1)}}))})),Promise.all(r).then((function(){2===i.initedStatistic&&l.a.trigger("indexedDBDispatch",i.statistic)})).catch((function(t){Object(f.a)(t)})),[2]}}))})),[2]}))}))},this.handleFailByIDs=function(e,n){return g(t,void 0,void 0,(function(){var t,o,r,a=this;return m(this,(function(s){return(t=this.statistic[e])?(o=[],r=[],Object(i.o)(t,(function(t,i){var s=parseInt(t);if(-1!==n.indexOf(s)){var u=i[0],c=i[1];!c||c<1?(o.push(s),a.setStatistic(e,s,u,1)):(r.push(s),delete a.statistic[e][s])}})),this.query("id",this.readwrite,void 0,null,(function(t,e,n){-1!==r.indexOf(t.id)?e.delete(n.primaryKey):-1!==o.indexOf(t.id)&&e.put({id:t.id,key:t.key,data:t.data,tryTimes:1,ts:t.ts})})).then((function(){setTimeout((function(){l.a.trigger("indexedDBDispatch",a.statistic,e)}),1e3*Math.floor(120*Math.random()+30))})),h.c.adtSum(h.a.REPORT_FAIL,r.length),[2]):[2]}))}))},this.deleteByIDs=function(e){return g(t,void 0,void 0,(function(){var t,n,o,r,i,a,s,u;return m(this,(function(c){switch(c.label){case 0:for(t=Object.keys(this.statistic),u=0;u<t.length;u++)for(n=t[u],o=0;o<e.length;o++)r=e[o],delete this.statistic[n][r];return[4,this.getDB()];case 1:for(i=c.sent(),a=i.transaction(this.tableName,this.readwrite),s=a.objectStore(this.tableName),u=0;u<e.length;u++)s.delete(e[u]);return[2]}}))}))},this.initIndexedDB(),l.a.on("dispatchSuccessID",this.deleteByIDs),l.a.on("dispatchFailID",this.handleFailByIDs)}return t.prototype.add=function(t){return g(this,void 0,void 0,(function(){return m(this,(function(e){return this.addDataCache.push(t),Object(d.a)("dbAddBatch",this.addBatch,100),[2]}))}))},t.prototype.queryByIDs=function(t){return g(this,void 0,void 0,(function(){var e,n,o,r;return m(this,(function(i){for(e=[],n=!0,o=0;o<t.length;o++){if(!(r=this.dbDataCache[t[o]])){n=!1;break}e.push(r)}return n?[2,Promise.resolve(e)]:[2,this.query("id",this.readonly,void 0,(function(e){return-1!==t.indexOf(e.id)}))]}))}))},t.prototype.getStatistic=function(){return this.statistic},t.prototype.query=function(t,e,n,o,r){return g(this,void 0,void 0,(function(){var i=this;return m(this,(function(a){return[2,new Promise((function(a,s){return g(i,void 0,void 0,(function(){var i,s,u,c,p;return m(this,(function(l){switch(l.label){case 0:return[4,this.getDB()];case 1:return i=l.sent(),s=i.transaction(this.tableName,e),u=s.objectStore(this.tableName),c=u.index(t).openCursor(n),p=[],c.onsuccess=function(t){var e=c.result;e?(o&&o(e.value),p.push(e.value),r&&r(e.value,u,e),e.continue()):a(p)},c.onerror=function(t){Object(f.a)(t),a(t)},[2]}}))}))}))]}))}))},t.prototype.getDB=function(){return this.cacheGetDBPromise?this.cacheGetDBPromise:this.db?this.db:(this.cacheGetDBPromise=this.initIndexedDB(),this.cacheGetDBPromise)},t.prototype.initIndexedDB=function(){var t=this;return new Promise((function(e){var n=indexedDB.open(t.databaseName);n.onerror=function(t){h.c.monitor(h.b.INDEDEDDB_OPEN_FAIL),Object(f.a)("打开 indexdb 失败。",t)},n.onsuccess=function(n){t.db=n.target.result,Object(f.b)("打开 indexdb 成功"),t.initStatistic(),e(t.db)},n.onupgradeneeded=function(e){var n=e.target.result;if(!n.objectStoreNames.contains(t.databaseName)){var o=n.createObjectStore(t.tableName,{keyPath:"id",autoIncrement:!0});o.createIndex("key","key",{unique:!1}),o.createIndex("tryTimes","tryTimes",{unique:!1}),o.createIndex("ts","ts",{unique:!1}),o.createIndex("id","id",{unique:!1})}}}))},t.prototype.setStatistic=function(t,e,n,o,r){this.statistic[t]||(this.statistic[t]={});var i=this.statistic[t];if(i[e]=[n,o],r){this.dbDataCache[e]={id:e,key:t,data:r,tryTimes:o,ts:n};var a=Object.keys(this.dbDataCache);if(a.length>50){a.sort();for(var u=a.slice(0,a.length-50).map((function(t){return parseInt(t)})),c=0;c<u.length;c++)delete this.dbDataCache[u[c]]}}else delete this.dbDataCache[e];var f=Object.keys(i),p=f.length,l=s.a.maxStoreReport;p>l&&(f.sort(),u=f.slice(0,p-l).map((function(t){return parseInt(t)})),this.deleteByIDs(u),this.overLimitReport||(this.overLimitReport=!0,h.c.monitor(h.b.INDEDEDDB_OVER_LIMIT)))},t.prototype.initStatistic=function(){var t=this;this.initedStatistic||(this.initedStatistic=1,this.query("ts",this.readonly,this.tsRangeNotExpired,null,(function(e){var n=e.id,o=e.ts,r=e.tryTimes,i=e.key;t.setStatistic(i,n,o,r)})).then((function(){t.initedStatistic=2,l.a.trigger("indexedDBDispatch",t.statistic,null)})).catch((function(){t.initedStatistic=2,l.a.trigger("indexedDBDispatch",t.statistic,null)})),this.deleteExpiredReporter())},t.prototype.deleteExpiredReporter=function(){return g(this,void 0,Promise,(function(){var t,e=this;return m(this,(function(n){return t=0,[2,new Promise((function(n,o){return g(e,void 0,void 0,(function(){var e,o,r,i;return m(this,(function(a){switch(a.label){case 0:return[4,this.getDB()];case 1:return e=a.sent(),o=e.transaction(this.tableName,this.readwrite),r=o.objectStore(this.tableName),(i=r.index("ts").openCursor(this.tsRangeExpired)).onsuccess=function(e){var o=i.result;o?(r.delete(o.primaryKey),o.continue(),t++):(t?(h.c.monitor(h.b.INDEDEDDB_OVER_TIME),Object(f.b)("过期上报数据已清除")):Object(f.b)("当前没有过期上报数据"),n())},i.onerror=function(t){Object(f.a)(t),n()},[2]}}))}))}))]}))}))},t}(),v=function(){var t=this;this.MemStore={},this.set=function(e,n){t.MemStore[e]=n},this.get=function(e,n){var o;return(o=t.MemStore[e])||(o=n,n&&t.set(e,o)),o},this.each=function(e){for(var n=t.MemStore,o=Object.keys(n),r=o.length,i=0;i<r;i++)e&&e(n[o[i]])}},b=new(function(){function t(){var t=this;this.isIndexedDB=!1,this.isLocalDB=!1,this.get=function(e,n){return t.isLocalDB?t.constDB.get(e,n):t.db.get(e,n)},this.set=function(e,n){return t.isLocalDB?t.constDB.set(e,n):t.db.set(e,n)},this.add=function(e){var n=t.constDB.add(e);return n.catch((function(t){Object(f.a)(t)})),n},this.queryByIDs=function(e){var n=t.constDB.queryByIDs(e);return n.catch((function(t){Object(f.a)(t)})),n},this.db=new v;try{Object(a.b)()&&Object(a.a)()||this.initConstDB()}catch(t){Object(f.a)(t)}}return t.prototype.initConstDB=function(){i.l?(this.constDB=new y,this.isIndexedDB=!0):i.m&&(this.constDB=new p,this.isLocalDB=!0),i.l||h.c.monitor(h.b.NO_INDEDEDDB)},t.prototype.getStatistic=function(){return this.constDB.getStatistic()},t}()),O=n(12),w=function(){return(w=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};!function(t){t[t.ALL=1]="ALL",t[t.PART=2]="PART"}(u||(u={})),function(t){t[t.ERROR=-1]="ERROR",t[t.ALL=1]="ALL",t[t.PART=2]="PART"}(c||(c={}));var T=function(){function t(){var t=this;this.lastAddToBatchTime={},this.storeConfig=new v,this.dispatchTimeIDs={},this.sentIDs=[],this.count=0,this.dispatchBatch=function(e,n){if(!s.a.supportOffline||O.a.getStatus()){var o=t.dispatchTimeIDs,r=Object(i.d)();if(n)clearTimeout(o[n]),r-t.lastAddToBatchTime[n]>2e3?(t.dispatchBatchBySourceKey(e,n,u.ALL),t.lastAddToBatchTime[n]=0):t.dispatchBatchBySourceKey(e,n,u.PART)===c.PART&&(o[n]=setTimeout((function(){t.dispatchBatch(b.getStatistic(),n)}),2e3));else for(var a=Object.keys(e),p=0;p<a.length;p++){var l=a[p];t.dispatchBatchBySourceKey(e,l,u.ALL),t.lastAddToBatchTime[l]=0}}else Object(f.b)("网络离线，暂停上报")},l.a.on("indexedDBDispatch",this.dispatchBatch),l.b.on("networkConnect",(function(){Object(f.b)("网络恢复，上报离线数据"),l.a.trigger("indexedDBDispatch",b.getStatistic(),null)}))}return t.prototype.addOne=function(t,e,n){var o=t.sourceKey,r=Object(i.d)();b.add({key:o,data:{ts:r+this.count,param:e,opts:n},tryTimes:0}),this.count++,this.lastAddToBatchTime[o]||(this.lastAddToBatchTime[o]=r)},t.prototype.successItems=function(t,e){var n=e.map((function(t){return t.id})),o=this.sentIDs.filter((function(t){return-1===n.indexOf(t)}));this.sentIDs=o,l.a.trigger("dispatchSuccessID",n)},t.prototype.failItems=function(t,e){var n=t.sourceKey,o=e.map((function(t){return t.id})),r=this.sentIDs.filter((function(t){return-1===o.indexOf(t)}));this.sentIDs=r,s.a.supportOffline&&!O.a.getStatus()||l.a.trigger("dispatchFailID",n,o)},t.prototype.getConfigBySourceKey=function(t){if(s.a.mergeQueueConfig.sourceKey===t)return s.a.mergeQueueConfig;var e=at.getAdapterBySourceKey(t);return e&&e.configs&&e.configs.queueConfig?e.configs.queueConfig:null},t.prototype.dispatchBatchBySourceKey=function(t,e,n){if(!t[e])return c.ERROR;var o=Object.keys(t[e]).map((function(t){return parseInt(t,10)})),r=(o=this.filterIDsBySent(o)).length;if(r<1)return c.ERROR;var i=this.getConfigBySourceKey(e);if(!i)return c.ERROR;var a=i.maxInBatch||10,s=c.ALL;if(n===u.PART){if(r<a)return c.PART;var f=r%a;s=0===f?c.ALL:c.PART,o.sort(),o=o.slice(0,r-f)}return this.dispatchBatchByIds(o,i,a),s},t.prototype.dispatchBatchByIds=function(t,e,n){var o=e.sourceKey;this.sentIDs=this.sentIDs.concat(t),b.queryByIDs(t).then((function(r){for(var i=[],a=0;a<r.length;a++){var u=r[a],c=u.data,f=u.id;-1!==t.indexOf(f)&&i.push(w(w({},c),{id:f}))}for(a=0;a<i.length;a+=n){var p=i.slice(a,a+n);o===s.a.mergeQueueConfig.sourceKey?l.a.trigger("dispatchMerge",e,p):l.a.trigger("dispatchCommon",e,p)}})).catch((function(t){Object(f.a)(t),Object(f.a)("从数据库取数据错误")}))},t.prototype.filterIDsBySent=function(t){var e=this.sentIDs;return t.filter((function(t){return-1===e.indexOf(t)}))},t}(),S=function(){function t(){this.storeConfig=new v,this.addTimeIDs={},this.dispatchTimeIDs={},this.lastAddToBatchTime={},this.batchCache={},this.counter=0}return t.prototype.addOne=function(t,e,n){e&&this.addToBatch(t,e,n)},t.prototype.successItems=function(t,e){for(var n=t.pendingKey,o=t.sourceKey,r=b.get(n,[]),i=b.get(o,[]),a=[],s=[],u=e.map((function(t){return t.ts})),c=r.length-1;c>=0;c--)-1===u.indexOf(r[c].ts)&&s.push(r[c]);for(c=i.length-1;c>=0;c--)-1===u.indexOf(i[c].ts)&&a.push(i[c]);r.length!==s.length&&b.set(n,s),i.length!==a.length&&b.set(o,a)},t.prototype.failItems=function(t,e){for(var n=t.pendingKey,o=t.sourceKey,r=b.get(n,[]),i=b.get(o,[]),a=[],u=[],c=e.map((function(t){return t.ts})),f=r.length-1;f>=0;f--){var p=r[f];-1!==c.indexOf(p.ts)?(!p.tryTimes||p.tryTimes<1||s.a.supportOffline&&!O.a.getStatus())&&(p.tryTimes=1,a.push(p)):u.push(p)}r.length!==u.length&&b.set(n,u),i.length!==a.length&&b.set(o,a);var l=i.length+r.length-(u.length+a.length);h.c.adtSum(h.a.REPORT_FAIL,l)},t.prototype.addToBatch=function(t,e,n){var o=this,r=(this.storeConfig,this.addTimeIDs),a=this.lastAddToBatchTime,s=this.batchCache,u=t.sourceKey,c=Object(i.d)();if(clearTimeout(r[u]),s[u]||(s[u]=[]),a[u]&&c-a[u]<50)return e&&(s[u].push({ts:c+this.counter,param:e,opts:n}),this.counter+=1),void(r[u]=setTimeout((function(){o.addToBatch(t,null,{})}),10));var f=b.get(u,[]);this.storeConfig.set(u,t),f||(f=[]),e&&f.push({id:c+this.counter,param:e,opts:n}),s[u].length&&(f=f.concat(s[u])),s[u]=[],a[u]=c,b.set(u,f),this.dispatchBatch(t,f)},t.prototype.dispatchBatch=function(t,e){var n=this;if(!s.a.supportOffline||O.a.getStatus()){var o=this.dispatchTimeIDs,r=t.sourceKey,a=t.pendingKey,u=t.maxInBatch,c=void 0===u?10:u,p=0;if(c<1&&(c=10),clearTimeout(o[r]),e.length>0)if(e.length>=c?p=c:Object(i.d)()-this.lastAddToBatchTime[r]>2e3&&(p=e.length),0!==p){for(var d=b.get(a,[]),h=[],g=0;g<p;g++)e[g].startTime=Object(i.d)(),h.push(e[g]),d.push(e[g]);var m=e.slice(p);b.set(t.sourceKey,m),b.set(t.pendingKey,d),r===s.a.mergeQueueConfig.sourceKey?l.a.trigger("dispatchMerge",t,h):l.a.trigger("dispatchCommon",t,h),m.length>=c&&this.dispatchBatch(t,m)}else o[r]=setTimeout((function(){n.dispatchBatch(t,e)}),2e3)}else Object(f.b)("网络离线，暂停上报")},t}(),D=new(function(){function t(){b.isIndexedDB?this.queueInstance=new T:this.queueInstance=new S}return t.prototype.addOne=function(t,e,n){this.queueInstance.addOne(t,e,n),s.a.supportOffline&&!O.a.getStatus()&&h.c.adtSum(h.a.REPORT_OFFLINE,1)},t.prototype.successItems=function(t,e){this.queueInstance.successItems(t,e)},t.prototype.failItems=function(t,e){this.queueInstance.failItems(t,e)},t}()),R=n(10),j=new(function(){function t(){var t=this;this.sendReporter=function(e,n,r){if(0!==n.length){for(var i=[],a="",s=0;s<n.length;s++){var u=n[s],c=u.param,f=u.opts;i.push(c),a=f.name}var p=at.getAdapterByName(a),l=p.getConfigs(),d=p.getMethods(),h=function(){r?D.successItems(r,n):D.successItems(e,n)},g=function(){r?D.failItems(r,n):D.failItems(e,n)};if(d[o.HEAD]||d[o.GET]){var m=p.transToURL(i,n[0].opts);if(t.isUrlOverLimit(m))return void t.sendRequestViaDatas(l.baseURL,p.buildData(i,{}),h,g);t.sendRequestViaURls(m,h,g)}else t.sendRequestViaDatas(l.baseURL,p.buildData(i,{}),h,g)}},this.initEvent()}return t.prototype.initEvent=function(){l.a.on("dispatchCommon",this.sendReporter),l.a.on("dispatchTryCommon",this.sendReporter)},t.prototype.isUrlOverLimit=function(t){return(Array.isArray(t)?t:[t]).some((function(t){return t.length>2e3}))},t.prototype.sendRequestViaURls=function(t,e,n){if(Object(i.g)(t))for(var o=0;o<t.length;o++)Object(R.a)({url:t[o]+"&t="+Object(i.d)(),method:"GET",onSucc:e,onError:n,onTimeout:n});else t&&Object(R.a)({url:t+"&t="+Object(i.d)(),method:"GET",onSucc:e,onError:n,onTimeout:n})},t.prototype.sendRequestViaDatas=function(t,e,n,o){if(Object(i.g)(e))for(var r=0;r<e.length;r++)Object(R.a)({url:t,method:"POST",onSucc:n,onError:o,onTimeout:o,data:e[r],postFormat:"JSON"});else e&&Object(R.a)({url:t,method:"POST",onSucc:n,onError:o,onTimeout:o,data:e,postFormat:"JSON"})},t.prototype.report=function(t,e,n,r){var i=t.getConfigs(),a=t.getMethods(),s=i.queueConfig;if(Object(f.b)("[common-"+n.name+"]",e),r&&(a[o.HEAD]||a[o.GET])){var u=t.transToURL(e,n);return this.isUrlOverLimit(u)?void this.sendRequestViaDatas(i.baseURL,t.buildData(e,{})):void this.sendRequestViaURls(u)}r&&this.sendRequestViaDatas(i.baseURL,t.buildData(e,{})),D.addOne(s,e,n)},t}()),I=new(function(){function t(){this.LSErrorFlag=0,this.LSTimeDiffDelay=0,this.LSTestModeFlag=0,this.errorFlag={set:this.errorSet,get:this.errorGet,clear:function(){}},this.testModeFlag={set:this.testSet,get:this.testGet,clear:this.testClear},this.timeDiffFlag={set:this.diffSet,get:this.diffGet,clear:function(){}}}return t.prototype.errorSet=function(t){this.LSErrorFlag=1},t.prototype.errorGet=function(){return 1===this.LSErrorFlag},t.prototype.testGet=function(){var t=+new Date,e=this.LSTestModeFlag;return 0!==e&&t-e<6048e5},t.prototype.testSet=function(){this.LSTestModeFlag=+new Date},t.prototype.testClear=function(){this.LSTestModeFlag=0},t.prototype.diffSet=function(){this.LSTimeDiffDelay=+new Date},t.prototype.diffGet=function(){var t=+new Date,e=this.LSTimeDiffDelay;return!(0===e||t-e>864e5)},t}()),_=new(function(){function t(){this.started=!1,this.LSLastPingTime=0,this.LSErrorFlag=1}return t.prototype.send=function(t){var e=this;Object(R.a)({url:t+"?v=3&t="+ +new Date+"&q=check",onSucc:function(){e.started=!1,clearInterval(e.intervalHandler),e.LSErrorFlag=0},method:"GET"})},t.prototype.start=function(t){var e=this;this.pingURL=t,this.started||(this.started=!0,clearInterval(this.intervalHandler),this.intervalHandler=setInterval((function(){var t=e.LSLastPingTime,n=Object(i.d)();0===t?e.LSLastPingTime=n:n>t+6e4&&(e.LSLastPingTime=n,e.send(e.pingURL))}),6e4))},t.prototype.stop=function(){this.intervalHandler&&(clearInterval(this.intervalHandler),this.intervalHandler=null)},t}()),E=n(15),x=n.n(E),C=I.errorFlag,L=I.testModeFlag,B=new(function(){function t(){var t=this;this.sendReporter=function(e,n){s.a.mergeQueueConfig,n.length&&Object(R.a)({onSucc:function(){L.clear(),_.stop(),D.successItems(s.a.mergeQueueConfig,n)},onError:function(e){C.set(s.a.cgiURL),t.dispatchOriginRequest(n),4===e&&G.commonReport(2394321)},onTimeout:function(){t.dispatchOriginRequest(n),Object(i.d)()-Object(i.d)()<8e3&&G.commonReport(2589015),C.set(s.a.cgiURL)},onTest:function(){L.set(),D.successItems(s.a.mergeQueueConfig,n)},timeout:1e4,url:s.a.cgiURL,data:t.buildData(n),method:"POST"})},this.initEvent()}return t.prototype.initEvent=function(){l.a.on("dispatchMerge",this.sendReporter)},t.prototype.getAdapterConfigByName=function(t){var e=at.getAdapterByName(t);return e&&e.getConfigs()||{}},t.prototype.buildData=function(t){for(var e=[],n=0;n<t.length;n++)Object(f.b)("[merge-"+t[n].opts.name+"]",t[n].param),e.push({param:t[n].param,opts:t[n].opts});var o=JSON.stringify(e);return e=x.a.compressToBase64(o),e=encodeURIComponent(e),{v:"3",t:+new Date,q:e}},t.prototype.splitItemsBySourceKey=function(t){for(var e={},n=0;n<t.length;n++){var o=t[n],r=at.getAdapterByName(o.opts.name).getSourceKey();e[r]||(e[r]=[]),e[r].push(o)}return e},t.prototype.sendOriginalRequest=function(t){for(var e=0;e<t.length;e++)at.getAdapterByName(t[e].opts.name).commonReport(t[e].param,t[e].opts)},t.prototype.dispatchOriginRequest=function(t){var e=this.splitItemsBySourceKey(t);Object(i.o)(e,(function(t,e){var n=at.getAdapterBySourceKey(t).getConfigs();l.a.trigger("dispatchTryCommon",n,e,s.a.mergeQueueConfig)}))},t.prototype.report=function(t,e,n){var o=t.getConfigs(),r=o.shouldMerge,i=o.reportInTestMode,a=!1;if(r?L.get()?("function"!=typeof r||r(e))&&("function"!=typeof i||i(e))||(a=!0):"function"!=typeof r||r(e)||(a=!0):a=!0,a)j.report(t,e,n,!1);else{var u=s.a.mergeQueueConfig;D.addOne(u,e,n)}},t}()),k=new(function(){function t(){}return t.prototype.report=function(t,e,n){Object(f.b)("[immediate-"+n.name+"]",e);var o=t.transToURL(e,n);if(o){var r=o+"&t="+Object(i.d)();if(!Object(R.b)({url:r})){t.getConfigs().queueConfig;var a=function(){t.report(e,n,!1)};Object(R.a)({url:r,method:"GET",onSucc:function(){},onError:a,onTimeout:a})}}},t}()),A=function(t,e,n,r){t.getConfigs();var i=t.getMethods();r&&i[o.BEACON]?k.report(t,e,n):s.a.enableMergeReport?B.report(t,e,n):j.report(t,e,n,r)},M=n(5),P=n(9),q=n(11),N=function(){var t=this;this.adapterName=r.COMMON,this.transToURL=function(t,e){return""},this.buildData=function(t,e){return{}},this.resetConfig=function(e){t.configs?q.a||(Object(i.n)(t.configs,e),t.syncConfigToWorker()):Object(f.a)("找不到此适配器")},this.getConfigs=function(){return t.configs||{}},this.getMethods=function(){var e=t.configs.methods.toString(2);return e.length<4&&(e=new Array(4-e.length).fill("0").join("")+e),e.split("").map((function(t){return parseInt(t)}))},this.getSourceKey=function(){var e=t.getConfigs();return e.queueConfig&&e.queueConfig.sourceKey||""},this.report=function(e,n,o){void 0===n&&(n={}),void 0===o&&(o=!1),n.name=t.adapterName,Object(a.a)()&&h.c.adtSum(h.a.REPORT_TOTAL,1);try{Object(a.a)()&&!o?P.a.postMessageToWorker({type:"api",payload:{data:e,opts:n,isImmediately:o},opts:{reportType:"auto"}}):A(t,e,n,o)}catch(t){Object(f.a)(t)}},this.commonReport=function(e,n,o){void 0===n&&(n={}),void 0===o&&(o=!1),n.name=t.adapterName;try{Object(a.a)()?P.a.postMessageToWorker({type:"api",payload:{data:e,opts:n,isImmediately:o},opts:{reportType:"common"}}):(M.a.onBeforeCommonReport(e,n,o),j.report(t,e,n,o))}catch(t){Object(f.a)(t)}},this.mergeReport=function(e,n){void 0===n&&(n={}),n.name=t.adapterName;try{Object(a.a)()?P.a.postMessageToWorker({type:"api",payload:{data:e,opts:n,isImmediately:!1},opts:{reportType:"merge"}}):(M.a.onBeforeMergeReport(e,n),B.report(t,e,n))}catch(t){Object(f.a)(t)}},this.apiRequestToWorker=function(t,e,n){P.a.postMessageToWorker({type:"apiWorker",payload:{data:t,opts:e},opts:{reportType:n}},!0)},this.syncConfigToWorker=function(){if(Object(a.a)()){var e=t.configs,n=e.baseURL,o=e.shouldMerge,r=e.reportInTestMode,i=e.queueConfig,s={baseURL:n,shouldMerge:"function"==typeof o?o():o,reportInTestMode:"function"==typeof r?r():r,queueConfig:{maxInBatch:i.maxInBatch,maxSize:i.maxSize}};P.a.postMessageToWorker({type:"adapterConfig",payload:s,opts:{adapterName:t.adapterName}})}}},F=new N;function U(t){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var W,K,Q=(W=function(t,e){return(W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}W(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),H=new(function(t){function e(){var e=t.call(this)||this;return e.adapterName=r.HUATUO,e.configs={baseURL:"https://report.idqqimg.com/node_b/speedreport?",shouldMerge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},reportInTestMode:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},queueConfig:{sourceKey:"huatuo_queue_v3",pendingKey:"huatuo_pending_v3",maxInBatch:20,maxSize:10},methods:15,postFormat:"FORM-DATA"},e.transToURL=function(t,n){var o,r,a=t||[];"object"!==U(t)||Object(i.g)(t)||(a=[t]);var s=[];if(!a.length)return[];for(var u in o=e.exractData(a))o.hasOwnProperty(u)&&(r={flag1:o[u].flag1,flag2:o[u].flag2,flag3:o[u].flag3,apn:n.envInfo.apn,appid:o[u].appid,platform:n.envInfo.platform},Object.assign(r,o[u].timingObj),s.push(e.configs.baseURL+Object(i.q)(r)));return s},e}return Q(e,t),e.prototype.exractData=function(t){var e=t||[],n=null,o="";if(e.length){n={};for(var r=0;r<e.length;r++)n[o=e[r].flag1+"_"+e[r].flag2+"_"+e[r].flag3+e[r].appid]||(n[o]={flag1:e[r].flag1,flag2:e[r].flag2,flag3:e[r].flag3,appid:e[r].appid,timingObj:{}}),n[o].timingObj[e[r].id]=e[r].timing}return n},e}(N)),V=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),G=new(function(t){function e(){var e=t.call(this)||this;return e.adapterName=r.MONITOR,e.configs={baseURL:q.a?"https://docrp.weixin.qq.com/report/node_b/monitorreport?monitors=":"https://report.idqqimg.com/node_b/monitorreport?monitors=",shouldMerge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},reportInTestMode:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},queueConfig:{sourceKey:"monitor_queue_v3",pendingKey:"monitor_pending_v3",maxInBatch:100,maxSize:10},methods:15,postFormat:"FORM-DATA"},e.transToURL=function(t){var n=[];return"number"==typeof t?n.push(t):Object(i.g)(t)&&(n=t),n.length&&e.configs?e.configs.baseURL+"["+n+"]":""},e}return V(e,t),e}(N)),z=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),J=new(function(t){function e(){var e=t.call(this)||this;return e.adapterName=r.RETCODE,e.configs={baseURL:q.a?"https://docrp.weixin.qq.com/report/node_b/retcodereport?":"https://report.idqqimg.com/node_b/retcodereport?",shouldMerge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},reportInTestMode:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},queueConfig:{sourceKey:"retcode_queue_v3",pendingKey:"retcode_pending_v3",maxInBatch:20,maxSize:10},methods:15,postFormat:"FORM-DATA"},e.keyList=["domain","cgi","type","code","time","rate","uin","apn","device","signalStrength","expansion1","expansion2","expansion3","data","platform","appid"],e.transToURL=function(t,n){var o,r="",a=[];if(Object(i.g)(t))for(o=0;o<t.length;o++)a.push(e.extractData(t[o],o+1));else a.push(e.extractData(t,1));return a.length>0?(r=e.configs.baseURL+"key="+encodeURIComponent(e.keyList.join(",")),r+="&"+a.join("&")):r},e}return z(e,t),e.prototype.extractData=function(t,e){for(var n=[],o=0;o<this.keyList.length;o++)n.push(e+"_"+(o+1)+"="+encodeURIComponent(t[this.keyList[o]]));if(n.length>0)return n.join("&")},e}(N)),X=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Z=new(function(t){function e(){var e=t.call(this)||this;return e.adapterName=r.TDBANK,e.configs={baseURL:"https://report.idqqimg.com/node_b/tdbankreport?",shouldMerge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},reportInTestMode:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},queueConfig:{sourceKey:"tdbank_queue_v3",pendingKey:"tdbank_pending_v3",maxInBatch:20,maxSize:10},methods:15,postFormat:"FORM-DATA"},e.transToURL=function(t,n){var o,r,a,s=t||[],u=[],c={};if(Object(i.g)(s)){o=s.length;for(var f=0;f<o;f++)c[a=(r=s[f]).tdbank_table&&r.tdbank_busi_id?r.tdbank_table+"|"+r.tdbank_busi_id:r.table_id+"|"+r.busi_id]||(c[a]=[]),c[a].push(r);for(var p in c)c.hasOwnProperty(p)&&u.push(e.getItemURL(c[p],n));return u}return e.getItemURL([s],n)},e}return X(e,t),e.prototype.getItemURL=function(t,e){var n,o,r,a=[],s=[],u={},c={tdbank_busi_id:!0,tdbank_table:!0,busi_id:!0,table_id:!0};return function(){var e,n,i,f,p=1,l=[];for(e=0;e<t.length;e++)for(i in f=t[e],o=t[e].tdbank_table||t[e].table_id,r=t[e].tdbank_busi_id||t[e].busi_id,f)if(f.hasOwnProperty(i)){if(c[i])continue;if(u[i])continue;u[i]=p++,a.push(i)}for(e=0;e<t.length;e++){for(f=t[e],l=new Array(a.length),n=0;n<a.length;n++)l[n]=void 0===f[a[n]]?"":f[a[n]];s.push(l)}}(),t&&0!==t.length?(n={table_id:o,busi_id:r,fields:JSON.stringify(a),datas:JSON.stringify(s)},n=this.configs.baseURL+Object(i.q)(n)):""},e}(N)),Y=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),$=function(){return($=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},tt=new(function(t){function e(){var e=t.call(this)||this;return e.adapterName=r.TDW,e.configs={baseURL:q.a?"https://docrp.weixin.qq.com/report/node_b/tdwreport?":"https://report.idqqimg.com/node_b/tdwreport?",shouldMerge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},reportInTestMode:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},queueConfig:{sourceKey:"tdw_queue_v3",pendingKey:"tdw_pending_v3",maxInBatch:20,maxSize:10},methods:15,postFormat:"FORM-DATA"},e.transToURL=function(t,n){var o,r,a=t||[],s=$({timeField:"t"},n),u=[],c={};if(Object(i.g)(a)){o=a.length;for(var f=0;f<o;f++)c[(r=a[f]).table]||(c[r.table]=[]),c[r.table].push(r);for(var p in c)c.hasOwnProperty(p)&&u.push(e.getItemURL(c[p],p,s));return u}return e.getItemURL([a],a.table,s)},e}return Y(e,t),e.prototype.getItemURL=function(t,e,n){var o,r=[],a=[],s={},u={};return delete t.table,u[n.timeField]=!0,function(){var e,n,o,i,c=1,f=[];for(e=0;e<t.length;e++)for(o in i=t[e])if(i.hasOwnProperty(o)){if(u[o])continue;if(s[o])continue;s[o]=c++,r.push(o)}for(e=0;e<t.length;e++){for(i=t[e],f=new Array(r.length),n=0;n<r.length;n++)f[n]=void 0===i[r[n]]?"":i[r[n]];a.push(f)}}(),t&&0!==t.length?(o={table:e,fields:JSON.stringify(r),datas:JSON.stringify(a),pr_t:n.timeField},o=this.configs.baseURL+Object(i.q)(o)):""},e}(N)),et=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),nt=new(function(t){function e(){var e=t.call(this)||this;return e.adapterName=r.BEACON,e.configs={baseURL:"https://otheve.beacon.qq.com/analytics/upload?tp=js",shouldMerge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},reportInTestMode:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},queueConfig:{sourceKey:"beacon_queue_v3",pendingKey:"beacon_pending_v3",maxInBatch:20,maxSize:10},methods:4,postFormat:"JSON"},e.buildData=function(t,e){var n;if(Object(i.g)(t)){var o=t;if(o.length<2)return o;for(var r={},a=0;a<o.length;a++){var s=o[a],u=s.appkey;r[u]?(n=r[u].msgs[0].data.events).push.apply(n,s.msgs[0].data.events):r[u]=s}return Object.keys(r).map((function(t){return r[t]}))}return[t]},e}return et(e,t),e}(N)),ot=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();!function(t){t.STATUS="status",t.VALUE="value"}(K||(K={}));var rt=new(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.adapterName=r.ZZS,e.configs={baseURL:q.a?"https://docrp.weixin.qq.com/report/node_b/zzsreport":"https://report.idqqimg.com/node_b/zzsreport",shouldMerge:function(){return!1},reportInTestMode:function(){return!1},queueConfig:{sourceKey:"zzs_queue_v3",pendingKey:"zzs_pending_v3",maxInBatch:100,maxSize:100},methods:4,postFormat:"JSON"},e.buildData=function(t){var n,o,r,a,s,u,c,f=t;return Object(i.g)(t)||(f=[t]),{domain:null===(n=f[0])||void 0===n?void 0:n.domain,tenant:null===(o=f[0])||void 0===o?void 0:o.tenant,third:null===(r=f[0])||void 0===r?void 0:r.third,platform:null===(a=f[0])||void 0===a?void 0:a.platform,source:null===(s=f[0])||void 0===s?void 0:s.source,version:null===(u=f[0])||void 0===u?void 0:u.version,env:null===(c=f[0])||void 0===c?void 0:c.env,datas:f.map((function(t){var n,o=e.getDataFieldsWithType(t.type).map((function(e){var n;return null!=(n=t[e])?n:""})),r=[(n=t.errmsg,null!=n?n:"")];return t.dimensions&&(r=r.concat(t.dimensions)),o.push(r),o}))}},e}return ot(e,t),e.prototype.getDataFieldsWithType=function(t){switch(t){case K.VALUE:return["project","type","attrid","value"];case K.STATUS:default:return["project","type","attrid","status"]}},e}(N));n.d(e,"d",(function(){return H})),n.d(e,"e",(function(){return G})),n.d(e,"f",(function(){return J})),n.d(e,"g",(function(){return Z})),n.d(e,"h",(function(){return tt})),n.d(e,"b",(function(){return F})),n.d(e,"a",(function(){return nt})),n.d(e,"i",(function(){return rt}));var it=function(){function t(){}return t.prototype.getAdapterByName=function(t){switch(t){case r.HUATUO:return H;case r.MONITOR:return G;case r.RETCODE:return J;case r.TDBANK:return Z;case r.TDW:return tt;case r.BEACON:return nt;case r.ZZS:return rt;default:return F}},t.prototype.getAdapterBySourceKey=function(t){switch(t){case H.configs.queueConfig.sourceKey:return H;case G.configs.queueConfig.sourceKey:return G;case J.configs.queueConfig.sourceKey:return J;case Z.configs.queueConfig.sourceKey:return Z;case tt.configs.queueConfig.sourceKey:return tt;case nt.configs.queueConfig.sourceKey:return nt;case rt.configs.queueConfig.sourceKey:return rt;default:return F}},t}(),at=e.c=new it},function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r,i=new(function(){function t(){this.ua=navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase()||"",this.href=location&&location.href||"",this.wxUrlContainStr="__wxjs_environment=miniprogram",this.qqUrlContainStr="__wxjs_environment=qqminiprogram",this.ie=/rv:([\d.]+)\) like gecko/.test(this.ua)||/msie ([\d.]+)/.test(this.ua)||/Trident/.test(this.ua),this.chrome=/chrome\/([\d.]+)/.test(this.ua),this.opera=/opera/.test(this.ua),this.safari=/webkit/.test(this.ua),this.firefox=/firefox/.test(this.ua)&&!/(compatible|webkit)/.test(this.ua),this.edge=/edge/.test(this.ua),this.edgeChromium=this.chrome&&this.edge,this.isPad=/(ipad)/i.test(this.ua),this.isMobile=/(mobile)/i.test(this.ua)&&!this.isPad,this.isMac=/Mac OS X/i.test(this.ua)&&!this.isMobile,this.isAndroid=/android|adr/i.test(this.ua),this.isIOS=/(iphone|ipad|ipod)/.test(this.ua),this.isWindowStore=/MSAppHost/i.test(this.ua),this.isPCQQBrowser=!this.isMobile&&/QQBrowser/i.test(this.ua)&&!/QBCore/i.test(this.ua),this.isMobileQQBrowser=this.isMobile&&/MQQBrowser/i.test(this.ua)&&!/TBS/i.test(this.ua),this.isQQBrowser=this.isMobile?this.isMobileQQBrowser:this.isPCQQBrowser,this.isWxMiniProgram=this.href.indexOf(this.wxUrlContainStr)>-1||/MicroMessenger/i.test(this.ua)&&/miniProgram/i.test(this.ua),this.isQQMiniProgram=this.href.indexOf(this.qqUrlContainStr)>-1||/QQ/i.test(this.ua)&&/MiniApp/i.test(this.ua),this.isMiniProgram=this.isWxMiniProgram||this.isQQMiniProgram,this.isWxWork=/(wxwork)/i.test(this.ua),this.isWeWork=this.isWxWork,this.isWeChat=/MicroMessenger/i.test(this.ua)&&!this.isWxWork&&!this.isWxMiniProgram,this.isWechat=this.isWeChat,this.isTim=/TIM/i.test(this.ua),this.isQQ=/QQ/i.test(this.ua)&&!this.isWxWork&&!this.isWeChat&&!this.isQQBrowser&&!this.isTim&&!this.isQQMiniProgram,this.isTimOrQQ=this.isTim||this.isQQ,this.isTimOrQQFamily=this.isTim||/QQ/i.test(this.ua),this.isPCTim=/QBCore/i.test(this.ua)&&/TIM2.0/i.test(this.ua),this.isWindowPlatform=/(win64|wow64|win32|wow32)/i.test(this.ua),this.isQQNativeMiniProgram="object"===("undefined"==typeof wx?"undefined":o(wx))&&"function"==typeof wx.canIUse&&wx.canIUse("request"),this.isWxNativeMiniProgram=!this.isQQNativeMiniProgram&&"object"===("undefined"==typeof qq?"undefined":o(qq))&&"function"==typeof qq.canIUse&&qq.canIUse("request"),this.isNativeMiniProgram=this.isQQNativeMiniProgram||this.isWxNativeMiniProgram}return Object.defineProperty(t.prototype,"browser",{get:function(){return{isIE:this.ie,isChrome:this.chrome,isOpera:this.opera,isSafari:this.safari,isFirefox:this.firefox,isEdge:this.edge,isEdgeChromium:this.edgeChromium,isPCQQBrowser:this.isPCQQBrowser,isMobileQQBrowser:this.isMobileQQBrowser,isQQBrowser:this.isQQBrowser}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"platform",{get:function(){return{isPad:this.isPad,isMobile:this.isMobile,isMac:this.isMac,isAndroid:this.isAndroid,isIOS:this.isIOS,isWindow:this.isWindowPlatform}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"host",{get:function(){return{isWindowStore:this.isWindowStore,isWxMiniProgram:this.isWxMiniProgram,isQQMiniProgram:this.isQQMiniProgram,isMiniProgram:this.isMiniProgram,isQQNativeMiniProgram:!!this.isQQNativeMiniProgram,isWxNativeMiniProgram:!!this.isWxNativeMiniProgram,isNativeMiniProgram:!!this.isNativeMiniProgram,isWxWork:this.isWxWork,isWeWork:this.isWeWork,isWeChat:this.isWeChat,isWechat:this.isWechat,isTim:this.isTim,isQQ:this.isQQ,isTimOrQQ:this.isTimOrQQ,isTimOrQQFamily:this.isTimOrQQFamily,isPCTim:this.isPCTim}},enumerable:!0,configurable:!0}),t}()),a="undefined"==typeof window,s=new(function(){function t(){this.lastCookie="",this.lastCookieObj={},this.platformCache="",this.browserCache="",this.networkGot=!1,this.networkRet="-1"}return Object.defineProperty(t.prototype,"uin",{get:function(){var t=this.getCookie("uin")||"";return"o0"===t.slice(0,2)?t.slice(2):"o"===t.slice(0,1)?t.slice(1):t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"networkType",{get:function(){var t=this;if(a||this.networkGot)return this.networkRet;var e=window&&window.mqq;return e&&e.device&&e.device.getNetworkType&&e.support("mqq.device.getNetworkType")&&e.device.getNetworkType((function(e){t.networkRet=e})),this.networkGot=!0,this.networkRet},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"platform",{get:function(){if(a||this.platformCache)return this.platformCache;var t=window&&window.navigator&&window.navigator.userAgent||"";t=t.toLocaleLowerCase();var e="unknown";return/android|adr/i.test(t)?e="android":/(iphone|ipad|ipod)/i.test(t)?e="ios":/(mobile)/i.test(t)?e="mobile":t&&(e="pc"),this.platformCache=e,e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"browser",{get:function(){if(a||this.browserCache)return this.browserCache;var t=i.browser,e=(t.isIE?"IE":t.isChrome&&"Chrome")||t.isFirefox&&"Firefox"||t.isSafari&&"Safari"||t.isEdgeChromium&&"EdgeChromium"||t.isEdge&&"Edge"||"unknown";return this.browserCache=e,e},enumerable:!0,configurable:!0}),t.prototype.getCookie=function(t){if(a)return"";var e=document&&document.cookie||"";if(this.lastCookie&&this.lastCookie===e)return this.lastCookieObj[t]||"";this.lastCookie=e;for(var n=e.split(";"),o=n.length,r=0;r<o;r++){var i=n[r].trim().split("="),s=i[0],u=decodeURIComponent(i.slice(1).join("="));this.lastCookieObj[s]=u}return this.lastCookieObj[t]||""},t}()),u=n(7),c=n(5),f=n(0),p=n(3);!function(t){t.ACGI="acgi",t.ADT="adt",t.AST="ast",t.APM="apm",t.HUATUO="huatuo",t.MONITOR="monitor",t.PERFORMANCE="performance",t.RETCODE="retcode",t.TDBANK="tdbank",t.TDW="tdw",t.BEACON="beacon",t.ZZS="zzs"}(r||(r={}));var l,d=n(1);function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(){l={appid:0,flag1:0,flag2:0,flag3:0,speedTime:[]}}function m(t,e){void 0===e&&(e=!0);var n=["appid","flag2","flag2","flag3"].filter((function(e){return!t||!t[e]}));return!(n.length>0)||(e&&Object(d.a)("缺少必要参数:"+n.join(",")),!1)}var y=Object(p.d)((function(t,e){if(void 0===e&&(e=!1),c.a.onReceiveReporter(r.HUATUO,t,e),m(t)){if(void 0===t.speedTime)throw"没有测速信息";if(t.speedTime=function(t,e){var n=t.speedTime,o={};if(isNaN(+n)||(n=[+n]),void 0!==t.id&&1===n.length)return o[t.id]=n[0],delete t.id,o;if(n instanceof Array&&n.length){var r=!1;n[0]<1e12&&(r=!0);for(var i=0;i<n.length;i++)r?n[i]&&(o[i+1]=n[i]):0!==i&&n[i]&&(o[i]=n[i]-n[0])}else if("object"===h(n))for(var a in n)if(n.hasOwnProperty(a)){if(""+parseInt(a)!=""+a)throw"有个奇怪的东西混入speedTime里面了："+a;o[a]=n[a]}return o}(t),!Object.keys(t.speedTime).length)throw"解析 speedTime 参数错误";c.a.onHanldeParams(r.HUATUO,t);var n=t.speedTime;for(var o in n)u.d.report({flag1:t.flag1,flag2:t.flag2,flag3:t.flag3,timing:n[o],id:o,appid:t.appid},{envInfo:{platform:t.platform||s.platform,apn:t.apn||s.networkType}},e)}}));y.timeStart=function(t){g(),m(t)&&(l.appid=t.appid,l.flag1=t.flag1,l.flag2=t.flag2,l.flag3=t.flag3,l.speedTime=[],l.speedTime.push(Object(f.d)()))},y.time=function(){m(l)&&l.speedTime.push(Object(f.d)())},y.timeEnd=function(t){void 0===t&&(t=!1),m(l)&&(l.speedTime.push(Object(f.d)()),y(l,t),g())};var v=y,b=Object(p.d)((function(t,e){if(c.a.onReceiveReporter(r.MONITOR,t,e),"number"!=typeof t)return console.warn("invalid id");c.a.onHanldeParams(r.MONITOR,t),u.e.report(t,{},e)})),O=(window&&(window.performance||window.webkitPerformance||window.msPerformance)||{}).timing,w=void 0===O?null:O,T=[],S=Object(p.d)((function(t,e){c.a.onReceiveReporter(r.PERFORMANCE,t,e),w?(t.speedTime=function(){if(T.length)return T;var t=["navigationStart","unloadEventStart","unloadEventEnd","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"];w.domContentLoadedStart?t.splice(15,2,"domContentLoadedStart","domContentLoadedEnd"):w.domContentLoadedEventStart||t.splice(15,2,"domContentLoaded","domContentLoaded");for(var e=0,n=t.length;e<n;e++)T[e]=w[t[e]];return T}(),c.a.onHanldeParams(r.PERFORMANCE,t),v(t)):Object(d.c)("没有找到 performance timming 信息")})),D=Object(p.d)((function(t,e){c.a.onReceiveReporter(r.RETCODE,t,e);var n=function(t){if(!t||!t.url)return Object(d.c)("url 是必需参数"),!1;if(Math.random()<1/(t.rate||1))return!0;var e;try{e=decodeURIComponent(t.url)}catch(t){return!1}return!!/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/.test(e)&&null}(t);if(null===n)return n;var o={appid:t.appid||0,type:t.type||0,code:t.code||0,time:t.time||0,device:t.device||"",signalStrength:"",expansion1:t.expansion1||"",expansion2:t.expansion2||"",expansion3:t.expansion3||"",data:t.data||"",platform:t.platform||s.platform,rate:t.rate||1,uin:t.uin||0},i=RegExp.$4||"",a=RegExp.$5||"",f=RegExp.$6||"";return o.domain=i,o.cgi=a,t.includeSearch&&(o.cgi=a+f),o.apn=s.networkType,c.a.onHanldeParams(r.RETCODE,o),u.f.report(o,{},e),!0})),R=Object(p.d)((function(t,e){c.a.onReceiveReporter(r.TDBANK,t,e),t.uin||(t.uin=s.uin),c.a.onHanldeParams(r.TDBANK,t),u.g.report(t,{},e)})),j=0,I={},_=Object(p.d)((function(t,e,n){if(c.a.onReceiveReporter(r.TDW,t,e,n),!t)throw"params can not be null";var o=t.table||n||j;if(!o){try{var i=window&&window.location&&window.location.host;!i||"qqweb.qq.com"!==i&&-1===i.indexOf("qun.qq.com")||(o="dc00141")}catch(t){throw"not found host"}if(!o)throw"table can not be null"}t.table=o;var a={};Object(f.p)(a,I),Object(f.p)(a,t),a.uin||(a.uin=s.uin),c.a.onHanldeParams(r.TDW,a),u.h.report(a,{},e)}));_.setDefaultTable=function(t){j=t},_.setDefaultData=function(t){Object(f.p)(I,t)},_.clearDefaultData=function(){I={}};var E=_,x=n(2),C=!1,L={holdTime:1e3,interval:60,maxReport:10},B=Object(p.d)((function(t){if(C)Object(d.d)("已经初始化过卡顿上报了");else if(C=!0,t.monitor||t.tdw)if(Object(p.b)()){var e={};Object(f.p)(e,L),Object(f.p)(e,t),Object(f.i)(e.holdTime)&&Object(f.i)(e.interval)?(x.b.on("jankReceiveHeartBeat",(function(){u.b.apiRequestToWorker(e,{},"jank")})),u.b.apiRequestToWorker(e,{init:!0},"jank")):Object(d.a)("holdTime 或 interval 参数错误")}else Object(d.d)("worker 没有起来，不做卡顿监控");else Object(d.a)("缺少 monitor 或 tdw 参数")}));B.stop=function(){u.b.apiRequestToWorker({},{stop:!0},"jank")};var k=B,A=function(){function t(t){this.debugAppKey="LOGDEBUGKEY00001",this.isDebug=Object(f.f)(),this.defaultData={deviceId:"",initTime:"",language:"",pixel:"",sdkVersion:"3.1.43-web"},this.deviceID="",t?(Object(f.k)(t.appkey)||Object(d.a)("appKey 必须是 String"),this.appkey=t.appkey,this.versionCode=t.versionCode||"2.11.1",this.openid=t.openid||"openid",this.channelID=t.channelID||"channel",t.isDebug&&(this.isDebug=!0),this.initDefaultData()):Object(d.a)("缺少参数")}return t.prototype.onUserAction=function(t,e){this.report(t,e)},t.prototype.onDirectUserAction=function(t,e){this.report(t,e,!0)},t.prototype.getDeviceId=function(){return this.deviceID||(this.deviceID=f.b&&f.b.localStorage.getItem("AlloyReport-Beacon-Device")||"",this.deviceID||(this.deviceID=Object(f.r)(32),f.b&&f.b.localStorage.setItem("AlloyReport-Beacon-Device",this.deviceID))),this.deviceID},t.prototype.addAdditionalParams=function(){},t.prototype.reportPV=function(){},t.prototype.setOpenId=function(t){this.openid=t},t.prototype.report=function(t,e,n){if(Object(f.k)(t)){var o=Object(f.d)(),r={};for(var i in e)if(e.hasOwnProperty(i)){var a=e[i];if(!Object(f.j)(a))return void Object(d.a)("参数必须是 String 或 Number 类型");r[i]=a}var s=[{data:{id:"null1591619692845",pages:[],start:o,status:2,duration:n?0:3e3,events:[{id:t,name:t,start:o,count:1,params:r}]},type:2}],c={appkey:this.isDebug?this.debugAppKey:this.appkey,versionCode:this.versionCode,channelID:this.channelID,opid:this.openid,deviceId:this.defaultData.deviceId,initTime:this.defaultData.initTime,language:this.defaultData.language,pixel:this.defaultData.pixel,sdkVersion:this.defaultData.sdkVersion,msgs:s};u.a.report(c,{},n)}else Object(d.a)("eventCode 需要是 String 类型")},t.prototype.initDefaultData=function(){this.defaultData.sdkVersion="VERSION",this.defaultData.language=f.b&&f.b.navigator&&f.b.navigator.language||"",this.defaultData.initTime=String(Object(f.d)());var t=f.b&&f.b.screen||{},e=t.width,n=void 0===e?0:e,o=t.height,r=[n,void 0===o?0:o];f.b&&f.b.devicePixelRatio&&r.push(f.b.devicePixelRatio),this.defaultData.pixel=r.join("*"),this.defaultData.deviceId=this.getDeviceId()},t}(),M=Object(p.d)((function(t,e){if(c.a.onReceiveReporter(r.ZZS,t,e),"string"!=typeof t.attrid)return console.warn("invalid id");c.a.onHanldeParams(r.ZZS,t),u.i.report(t,{},e)}));n.d(e,"b",(function(){return v})),n.d(e,"d",(function(){return b})),n.d(e,"e",(function(){return S})),n.d(e,"f",(function(){return D})),n.d(e,"g",(function(){return R})),n.d(e,"h",(function(){return E})),n.d(e,"c",(function(){return k})),n.d(e,"a",(function(){return A})),n.d(e,"j",(function(){return M})),n.d(e,"i",(function(){return i}))},function(t,e,n){"use strict";var o=n(0),r=n(1),i=n(5),a=n(20),s=n.n(a),u=n(2),c=n(16),f=n(6),p=n(8),l=function(){function t(){var t=this;this.isNativeMP=Object(o.h)(),this.msgCache=[],this.postMessageCacheToWorker=function(){try{var e=t.msgCache;t.msgCache=[],t.worker&&t.worker.postMessage(e)}catch(t){Object(r.a)(t)}},this.receiveMessageFromWorker=function(e){var n,o=(n=t.isNativeMP?e:e.data).type,r=n.payload;switch(o){case"hooks":t.handleMessageFromWorker(r);break;case"jank":u.b.trigger("jankReceiveHeartBeat");break;default:u.b.trigger(n.type,n)}},this.handleMessageFromWorker=function(t){var e=t.args,n=t.name;i.a.execute(n,e)},this.postMessageToWorker=function(e,n){n?t.worker&&t.worker.postMessage([e]):(t.msgCache.push(e),Object(c.a)("msgToWorker",t.postMessageCacheToWorker,2e3,(function(){return t.msgCache.length>2e3})))},this.terminateWorker=function(){var e=t.worker;p.c.stop(),t.worker=null,e&&setTimeout((function(){e.terminate&&e.terminate()}),3e3)},this.notSupportWorker=!1}return t.prototype.init=function(){try{"function"==typeof Worker?this.worker=new s.a:(f.c.monitor(f.b.NO_WORKER),this.notSupportWorker=!0)}catch(t){Object(r.a)("创建 worker 线程失败")}this.worker&&(this.worker.onmessage=this.receiveMessageFromWorker),(!this.notSupportWorker&&!this.worker||this.worker&&!this.worker.onmessage)&&f.c.monitor(f.b.WORKER_FAIL)},t}();e.a=new l},function(t,e,n){"use strict";var o=n(4),r=(n(27),function(t){if(t.url){var e=new XMLHttpRequest;if(e){var n=t.method||"POST",r=!1;if(o.a.headRequest&&"GET"===n&&(-1===t.url.indexOf("report.idqqimg.com")&&-1===t.url.indexOf("report.url.cn")||(n="HEAD",r=!0)),e.onerror=function(){t.onError&&t.onError()},e.ontimeout=function(){t.onTimeout&&t.onTimeout()},e.onreadystatechange=function(){if(4===e.readyState){var n=e.status;200===n?function(){if(r)t.onSucc&&t.onSucc();else{var n=e.responseText;try{switch(JSON.parse(n).retcode){case 0:t.onSucc&&t.onSucc();break;case 1:t.onTest&&t.onTest();break;case 6:t.onTimeout&&t.onTimeout();break;default:t.onError&&t.onError(200)}}catch(e){t.onError&&t.onError(200)}}}():function(e){r?t.onError&&t.onError(e):202===e?t.onTest&&t.onTest():500===e?t.onTimeout&&t.onTimeout():t.onError&&t.onError(e)}(n)}},"POST"===n&&"JSON"!==t.postFormat){var i=new FormData;if(t.data)for(var a in t.data)t.data.hasOwnProperty(a)&&i.append(a,t.data[a]);e.open(n,t.url,!0),e.timeout=t.timeout||1e4,e.send(i)}else"POST"===n&&"JSON"===t.postFormat?(e.open(n,t.url,!0),e.timeout=t.timeout||1e4,e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.send(JSON.stringify(t.data))):(e.open(n,t.url,!0),e.timeout=t.timeout||1e4,e.send())}}}),i=(n(17),n(18),n(5)),a=n(1),s=n(0);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var c=function(t){if(!t.url)return!1;if("object"!==("undefined"==typeof window?"undefined":u(window))||!window.navigator||"function"!=typeof window.navigator.sendBeacon)return!1;try{return window.navigator.sendBeacon(t.url+"&fromSDKSendBeacon=true")}catch(t){Object(a.a)(t)}},f=n(3);function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.d(e,"b",(function(){return c}));var l=function(){return(l=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},d=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o},h=function(){},g=Object(f.e)((function(t){var e,n=l({},t),o=n.method,u=void 0===o?"GET":o;n.url.length>2e3&&(u="POST",n.method="POST"),i.a.onBeforeReportSend(n);var c,f=n.onSucc,g=void 0===f?h:f,m=n.onError,y=void 0===m?h:m,v=n.onTimeout,b=void 0===v?h:v;n.onSucc=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.a.onReportSenderSuccess.apply(i.a,d([n],t)),g.apply(void 0,t)},n.onError=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.a.onReportSenderError.apply(i.a,d([n],t)),y.apply(void 0,t)},n.onTimeout=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.a.onReportSenderTimeout.apply(i.a,d([n],t)),b.apply(void 0,t)};try{"object"===("undefined"==typeof wx?"undefined":p(wx))&&(null===(e=wx)||void 0===e?void 0:e.request)?(c=n).url&&(c.url.indexOf("https:")<0&&(c.url="https://"+c.url),wx.request({method:"GET",url:c.url,fail:function(t){var e=t.statusCode;c.onError&&c.onError(e)},header:{UseGet:"1"},complete:function(t){var e=t.statusCode;200===e?c.onSucc&&c.onSucc():202===e?c.onTest&&c.onTest():500===e?c.onTimeout&&c.onTimeout():c.onError&&c.onError(e)}})):s.b&&s.b.Image&&"GET"===u?function(t){var e,n,o={},r={};t.timeout=t.timeout||1e4,t.url&&(e=+new Date,o[e]=new Image,o[e].id=e,o[e].onerror=function(){var e=this.id;clearTimeout(r[e]),o[e]&&(o[e].onerror=null,o[e].onload=null),delete r[e],delete o[e],n&&+new Date-n<1e3?t.onTimeout&&t.onTimeout():t.onError&&t.onError()},o[e].onload=function(){var e=this.width,n=this.id;clearTimeout(r[n]),o[n]&&(o[n].onerror=null,o[n].onload=null),delete r[n],delete o[n],1===e?t.onSucc&&t.onSucc():6===e?t.onTest&&t.onTest():5===e?t.onTimeout&&t.onTimeout():t.onError&&t.onError(e)},new Date,o[e].src=t.url,r[e]=setTimeout((function(){o[e]&&(o[e].src=""),n=+new Date}),t.timeout))}(n):r(n)}catch(t){Object(a.a)(t)}}));e.a=g},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var o=["doc.weixin.qq.com","wecom-addon.tencentsuite.com"].includes(location.hostname)},function(t,e,n){"use strict";var o=n(2),r=n(0),i=n(3),a=n(9),s=function(){function t(){var t=this;this.status=1,this.isCustom=!1,this.getStatus=function(){return t.isCustom?t.status:r.a&&r.a.navigator?r.a.navigator.onLine:t.status},this.isOffline=function(){return!t.getStatus()},this.setOffline=function(){t.isCustom||(t.isCustom=!0,t.offEvent()),t.offlineListener()},this.setOnline=function(){t.isCustom||(t.isCustom=!0,t.offEvent()),t.onlineListener()},this.offlineListener=function(){Object(i.a)()?t.syncStatusToWorker(0):Object(i.c)()||t.handleOffLine()},this.onlineListener=function(){Object(i.a)()?t.syncStatusToWorker(1):Object(i.c)()||t.handleOnLine()},this.handleOffLine=function(e){e&&e.isCustom&&(t.isCustom=!0),t.status=0},this.handleOnLine=function(e){e&&e.isCustom&&(t.isCustom=!0),t.status||(t.status=1,Object(i.b)()&&Object(i.c)()?o.b.trigger("networkConnect"):Object(i.b)()||o.b.trigger("networkConnect"))},this.initEvent()}return t.prototype.initEvent=function(){r.b&&r.b.addEventListener&&(r.b.addEventListener("online",this.onlineListener),r.b.addEventListener("offline",this.offlineListener)),Object(i.c)()&&(o.b.on("workerOffline",this.handleOffLine),o.b.on("workerOnline",this.handleOnLine))},t.prototype.offEvent=function(){r.b&&r.b.removeEventListener&&(r.b.removeEventListener("online",this.onlineListener),r.b.removeEventListener("offline",this.offlineListener))},t.prototype.syncStatusToWorker=function(t){this.status=t,a.a.postMessageToWorker({type:t?"online":"offline",payload:{isCustom:this.isCustom}},!0)},t}();e.a=new s},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return d})),n(22),n(1),n(23),n(24),n(9);var o=n(4),r=n(8);n.d(e,"c",(function(){return r.d})),n.d(e,"d",(function(){return r.f})),n.d(e,"e",(function(){return r.g})),n.d(e,"f",(function(){return r.h})),n.d(e,"g",(function(){return r.j})),n.d(e,"b",(function(){return r.b}));var i=n(7),a=n(10),s=n(15),u=n.n(s),c=n(5),f=n(6),p=n(12);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var d=(new(function(){function e(){var e=this;this.report={isMain:!0,closeLog:o.a.closeLog,openLog:o.a.openLog,reset:o.a.reset,resetConfig:o.a.reset,closeReport:o.a.closeReport,openReport:o.a.openReport,enableMerge:o.a.enableMerge,disableMerge:o.a.disableMerge,disableWorker:o.a.disableWorker,reportSender:a.a,reportInside:f.c,huatuo:r.b,monitor:r.d,performance:r.e,retcode:r.f,tdbank:r.g,tdw:r.h,jank:r.c,Beacon:r.a,zzs:r.j,addHooks:c.a.addHooks,removeHooks:c.a.removeHooks,huatuoConfig:i.d.resetConfig,monitorConfig:i.e.resetConfig,retcodeConfig:i.f.resetConfig,tdbankConfig:i.g.resetConfig,tdwConfig:i.h.resetConfig,zzsConfig:i.i.resetConfig,utils:{compressToBase64:u.a.compressToBase64,decompressFromBase64:u.a.decompressFromBase64,userAgent:r.i},network:{isOffline:p.a.isOffline,setOffline:p.a.setOffline,setOnline:p.a.setOnline},version:"V3.1.51"},this.init=function(){window&&(window.AlloyReportNext?window.AlloyReportNext.isMain||Object.assign(window.AlloyReportNext,e.report):window.AlloyReportNext=e.report,window.AlloyReport||(window.AlloyReport=window.AlloyReportNext)),void 0!==t&&t.isNodePlatform},this.doInlineReport=function(){if("object"===("undefined"==typeof window?"undefined":l(window))){var t=function(){if(!window||!window.localStorage)return window.ALLOY_REPORT_NEXT;var t=window.localStorage.getItem("ALLOY_REPORT_NEXT");try{return t&&JSON.parse(t)}catch(t){return}}();t instanceof Array||(t=[]);for(var n=0;n<t.length;n++)try{var o=t[n].t.split("."),r=e.report[o[0]];if(!r)continue;if(o.length>1){var i=r&&r[o[1]];"function"==typeof i&&i.apply(window,t[n].d)}else r.apply(window,t[n].d)}catch(t){console.error(t)}window&&window.localStorage?window.localStorage.removeItem("ALLOY_REPORT_NEXT"):window.ALLOY_REPORT_NEXT=null}},this.doInsideReport=function(){for(var t=f.c.getLastInsideDatas(),e=t.monitor,n=t.adt,o=0;o<e.length;o++)Object(r.d)(e[o]);for(o=0;o<n.length;o++)Object(r.h)(n[o],!1,"dc05239")},this.init(),this.printBuildInfo(),this.doInlineReport(),this.doSDKLoadedReport(),this.doInsideReport(),setInterval((function(){e.doInlineReport()}),1e4)}return e.prototype.printBuildInfo=function(){},e.prototype.doSDKLoadedReport=function(){this.report.monitor(f.b.SDK_LOAD)},e}())).report}).call(this,n(14))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var o,r=function(){var t=String.fromCharCode,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",o={};function r(t,e){if(!o[t]){o[t]={};for(var n=0;n<t.length;n++)o[t][t.charAt(n)]=n}return o[t][e]}var i={compressToBase64:function(t){if(null==t)return"";var n=i._compress(t,6,(function(t){return e.charAt(t)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:i._decompress(t.length,32,(function(n){return r(e,t.charAt(n))}))},compressToUTF16:function(e){return null==e?"":i._compress(e,15,(function(e){return t(e+32)}))+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:i._decompress(t.length,16384,(function(e){return t.charCodeAt(e)-32}))},compressToUint8Array:function(t){for(var e=i.compress(t),n=new Uint8Array(2*e.length),o=0,r=e.length;o<r;o++){var a=e.charCodeAt(o);n[2*o]=a>>>8,n[2*o+1]=a%256}return n},decompressFromUint8Array:function(e){if(null==e)return i.decompress(e);for(var n=new Array(e.length/2),o=0,r=n.length;o<r;o++)n[o]=256*e[2*o]+e[2*o+1];var a=[];return n.forEach((function(e){a.push(t(e))})),i.decompress(a.join(""))},compressToEncodedURIComponent:function(t){return null==t?"":i._compress(t,6,(function(t){return n.charAt(t)}))},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),i._decompress(t.length,32,(function(e){return r(n,t.charAt(e))})))},compress:function(e){return i._compress(e,16,(function(e){return t(e)}))},_compress:function(t,e,n){if(null==t)return"";var o,r,i,a={},s={},u="",c="",f="",p=2,l=3,d=2,h=[],g=0,m=0;for(i=0;i<t.length;i+=1)if(u=t.charAt(i),Object.prototype.hasOwnProperty.call(a,u)||(a[u]=l++,s[u]=!0),c=f+u,Object.prototype.hasOwnProperty.call(a,c))f=c;else{if(Object.prototype.hasOwnProperty.call(s,f)){if(f.charCodeAt(0)<256){for(o=0;o<d;o++)g<<=1,m==e-1?(m=0,h.push(n(g)),g=0):m++;for(r=f.charCodeAt(0),o=0;o<8;o++)g=g<<1|1&r,m==e-1?(m=0,h.push(n(g)),g=0):m++,r>>=1}else{for(r=1,o=0;o<d;o++)g=g<<1|r,m==e-1?(m=0,h.push(n(g)),g=0):m++,r=0;for(r=f.charCodeAt(0),o=0;o<16;o++)g=g<<1|1&r,m==e-1?(m=0,h.push(n(g)),g=0):m++,r>>=1}0==--p&&(p=Math.pow(2,d),d++),delete s[f]}else for(r=a[f],o=0;o<d;o++)g=g<<1|1&r,m==e-1?(m=0,h.push(n(g)),g=0):m++,r>>=1;0==--p&&(p=Math.pow(2,d),d++),a[c]=l++,f=String(u)}if(""!==f){if(Object.prototype.hasOwnProperty.call(s,f)){if(f.charCodeAt(0)<256){for(o=0;o<d;o++)g<<=1,m==e-1?(m=0,h.push(n(g)),g=0):m++;for(r=f.charCodeAt(0),o=0;o<8;o++)g=g<<1|1&r,m==e-1?(m=0,h.push(n(g)),g=0):m++,r>>=1}else{for(r=1,o=0;o<d;o++)g=g<<1|r,m==e-1?(m=0,h.push(n(g)),g=0):m++,r=0;for(r=f.charCodeAt(0),o=0;o<16;o++)g=g<<1|1&r,m==e-1?(m=0,h.push(n(g)),g=0):m++,r>>=1}0==--p&&(p=Math.pow(2,d),d++),delete s[f]}else for(r=a[f],o=0;o<d;o++)g=g<<1|1&r,m==e-1?(m=0,h.push(n(g)),g=0):m++,r>>=1;0==--p&&(p=Math.pow(2,d),d++)}for(r=2,o=0;o<d;o++)g=g<<1|1&r,m==e-1?(m=0,h.push(n(g)),g=0):m++,r>>=1;for(;;){if(g<<=1,m==e-1){h.push(n(g));break}m++}return h.join("")},decompress:function(t){return null==t?"":""==t?null:i._decompress(t.length,32768,(function(e){return t.charCodeAt(e)}))},_decompress:function(e,n,o){var r,i,a,s,u,c,f,p=[],l=4,d=4,h=3,g="",m=[],y={val:o(0),position:n,index:1};for(r=0;r<3;r+=1)p[r]=r;for(a=0,u=Math.pow(2,2),c=1;c!=u;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=o(y.index++)),a|=(s>0?1:0)*c,c<<=1;switch(a){case 0:for(a=0,u=Math.pow(2,8),c=1;c!=u;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=o(y.index++)),a|=(s>0?1:0)*c,c<<=1;f=t(a);break;case 1:for(a=0,u=Math.pow(2,16),c=1;c!=u;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=o(y.index++)),a|=(s>0?1:0)*c,c<<=1;f=t(a);break;case 2:return""}for(p[3]=f,i=f,m.push(f);;){if(y.index>e)return"";for(a=0,u=Math.pow(2,h),c=1;c!=u;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=o(y.index++)),a|=(s>0?1:0)*c,c<<=1;switch(f=a){case 0:for(a=0,u=Math.pow(2,8),c=1;c!=u;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=o(y.index++)),a|=(s>0?1:0)*c,c<<=1;p[d++]=t(a),f=d-1,l--;break;case 1:for(a=0,u=Math.pow(2,16),c=1;c!=u;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=o(y.index++)),a|=(s>0?1:0)*c,c<<=1;p[d++]=t(a),f=d-1,l--;break;case 2:return m.join("")}if(0==l&&(l=Math.pow(2,h),h++),p[f])g=p[f];else{if(f!==d)return null;g=i+i.charAt(0)}m.push(g),p[d++]=i+g.charAt(0),i=g,0==--l&&(l=Math.pow(2,h),h++)}}};return i}();void 0===(o=function(){return r}.call(e,n,e,t))||(t.exports=o)},function(t,e,n){"use strict";var o=n(2),r=n(6),i={},a={},s=!1;o.b.on("beforeunload",(function(){var t=0;for(var e in s=!0,i)i.hasOwnProperty(e)&&(window.clearTimeout(a[e]),i[e](),t++);r.c.adtSum(r.a.REPORT_ONEXIT,t)})),e.a=function(t,e,n,o){if(i[t])return s&&(delete i[t],e()),void(o&&o()&&(delete i[t],e()));clearTimeout(a[t]),i[t]=e,a[t]=setTimeout((function(){delete i[t],e()}),n)}},function(t,e,n){},function(t,e){},function(t,e,n){"use strict";var o=n(1),r=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o};e.a=function(){var t=this;this.namespaceCache={},this.create=function(e){t.namespaceCache[e]||(t.namespaceCache[e]={});var n=t.namespaceCache[e];return{on:function(e,o){t.on(n,e,o)},trigger:function(e){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];t.trigger.apply(t,r([n,e],o))},remove:function(e,o){t.remove(n,e,o)},getLength:function(e){return t.getLength(n,e)}}},this.on=function(t,e,n){e&&"function"==typeof n&&(void 0===t[e]&&(t[e]=[]),t[e].push(n))},this.trigger=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(e&&t[e])for(var i=t[e],a=0;a<i.length;a++)try{i[a].apply(i,n)}catch(t){Object(o.a)(t)}},this.remove=function(t,e,n){if(e&&t[e]){for(var o=t[e],r=-1,i=0;i<o.length;i++)o[i]===n&&(r=i);1!==r&&o.splice(r,1)}},this.getLength=function(t,e){return e&&t[e]?t[e].length:0}}},function(t,e,n){t.exports=function(){return n(26)('!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){self,t.exports=function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=10)}([function(t,e,n){"use strict";(function(t){function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return s})),n.d(e,"i",(function(){return u})),n.d(e,"h",(function(){return c})),n.d(e,"l",(function(){return f})),n.d(e,"f",(function(){return p})),n.d(e,"j",(function(){return l})),n.d(e,"m",(function(){return d})),n.d(e,"c",(function(){return h})),n.d(e,"g",(function(){return g})),n.d(e,"k",(function(){return y})),n.d(e,"e",(function(){return v})),n.d(e,"d",(function(){return b}));var r="undefined"!=typeof window&&window&&window.navigator?window:null,i="undefined"!=typeof self&&self&&self.navigator?self:null,a=g()?qq||wx:null,s=r||i,u=r&&r.localStorage&&"function"==typeof r.localStorage.getItem?1:g()&&"function"==typeof a.getStorage?2:0,c="object"===("undefined"==typeof indexedDB?"undefined":o(indexedDB))&&"function"==typeof indexedDB.open;function f(t,e,n){for(var o in e)if(e.hasOwnProperty(o)){if(n&&-1!==n.indexOf(o))continue;var r=e[o];void 0!==r&&(t[o]=r)}}function p(t){if(!t)return!1;var e=t.constructor.toString().substring(9).indexOf("Array");return t&&e>-1&&e<=1}function l(t,e){for(var n in e)(r=e[n])&&"object"===o(r)&&!p(r)?l(t[n],e[n]):t[n]=e[n];var r}function d(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(encodeURIComponent(String(n))+"="+encodeURIComponent(String(t[n])));return e.join("&")}function h(){return(new Date).getTime()}function g(){return"object"===("undefined"==typeof qq?"undefined":o(qq))&&qq.canIUse?qq.canIUse("request"):!("object"!==("undefined"==typeof wx?"undefined":o(wx))||!wx.canIUse)&&wx.canIUse("request")}function y(t,e){for(var n=Object.keys(t),o=n.length,r=0;r<o;r++){var i=n[r];e(i,t[i])}}function m(t){return!!(s&&s.location&&s.location.search.indexOf(t)>0)}function v(){return m("alloy_report_debug")||m("alloy-report-debug")}function b(){return m("alloy_report_close")||m("alloy-report-close")}}).call(this,n(4))},function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"c",(function(){return l})),n.d(e,"b",(function(){return d})),n.d(e,"d",(function(){return h}));var o=n(0),r=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o},i="[AlloyReport-Worker]",a=Object(o.e)(),s=(console.log,console.error),u=console.warn,c=console.info,f=function(t,e){t.apply(void 0,r([i],e))},p=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.apply(void 0,r([i],t))},l=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a&&f(u,t)},d=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a&&f(c,t)},h=function(t){a=t}},function(t,e,n){"use strict";(function(t,o){n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return f}));var r=n(6),i=n(0),a=n(3),s=new r.a,u=s.create("global"),c=s.create("hooks"),f=s.create("dispatch");!function(){if(i.b&&i.b.addEventListener){var e=function(){a.a&&a.a.postMessageToWorker&&a.a.postMessageToWorker({type:"beforeunload"},!0),u.trigger("beforeunload")};i.b.addEventListener("beforeunload",e),i.b.addEventListener("pagehide",e)}else t&&t.isNodePlatform&&o.on("beforeExit",(function(){u.trigger("beforeunload")}))}()}).call(this,n(4),n(8))},function(t,e,n){"use strict";e.a={}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){},function(t,e,n){"use strict";var o=n(1),r=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o};e.a=function(){var t=this;this.namespaceCache={},this.create=function(e){t.namespaceCache[e]||(t.namespaceCache[e]={});var n=t.namespaceCache[e];return{on:function(e,o){t.on(n,e,o)},trigger:function(e){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];t.trigger.apply(t,r([n,e],o))},remove:function(e,o){t.remove(n,e,o)},getLength:function(e){return t.getLength(n,e)}}},this.on=function(t,e,n){e&&"function"==typeof n&&(void 0===t[e]&&(t[e]=[]),t[e].push(n))},this.trigger=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(e&&t[e])for(var i=t[e],a=0;a<i.length;a++)try{i[a].apply(i,n)}catch(t){Object(o.a)(t)}},this.remove=function(t,e,n){if(e&&t[e]){for(var o=t[e],r=-1,i=0;i<o.length;i++)o[i]===n&&(r=i);1!==r&&o.splice(r,1)}},this.getLength=function(t,e){return e&&t[e]?t[e].length:0}}},function(t,e,n){var o,r=function(){var t=String.fromCharCode,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",o={};function r(t,e){if(!o[t]){o[t]={};for(var n=0;n<t.length;n++)o[t][t.charAt(n)]=n}return o[t][e]}var i={compressToBase64:function(t){if(null==t)return"";var n=i._compress(t,6,(function(t){return e.charAt(t)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:i._decompress(t.length,32,(function(n){return r(e,t.charAt(n))}))},compressToUTF16:function(e){return null==e?"":i._compress(e,15,(function(e){return t(e+32)}))+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:i._decompress(t.length,16384,(function(e){return t.charCodeAt(e)-32}))},compressToUint8Array:function(t){for(var e=i.compress(t),n=new Uint8Array(2*e.length),o=0,r=e.length;o<r;o++){var a=e.charCodeAt(o);n[2*o]=a>>>8,n[2*o+1]=a%256}return n},decompressFromUint8Array:function(e){if(null==e)return i.decompress(e);for(var n=new Array(e.length/2),o=0,r=n.length;o<r;o++)n[o]=256*e[2*o]+e[2*o+1];var a=[];return n.forEach((function(e){a.push(t(e))})),i.decompress(a.join(""))},compressToEncodedURIComponent:function(t){return null==t?"":i._compress(t,6,(function(t){return n.charAt(t)}))},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),i._decompress(t.length,32,(function(e){return r(n,t.charAt(e))})))},compress:function(e){return i._compress(e,16,(function(e){return t(e)}))},_compress:function(t,e,n){if(null==t)return"";var o,r,i,a={},s={},u="",c="",f="",p=2,l=3,d=2,h=[],g=0,y=0;for(i=0;i<t.length;i+=1)if(u=t.charAt(i),Object.prototype.hasOwnProperty.call(a,u)||(a[u]=l++,s[u]=!0),c=f+u,Object.prototype.hasOwnProperty.call(a,c))f=c;else{if(Object.prototype.hasOwnProperty.call(s,f)){if(f.charCodeAt(0)<256){for(o=0;o<d;o++)g<<=1,y==e-1?(y=0,h.push(n(g)),g=0):y++;for(r=f.charCodeAt(0),o=0;o<8;o++)g=g<<1|1&r,y==e-1?(y=0,h.push(n(g)),g=0):y++,r>>=1}else{for(r=1,o=0;o<d;o++)g=g<<1|r,y==e-1?(y=0,h.push(n(g)),g=0):y++,r=0;for(r=f.charCodeAt(0),o=0;o<16;o++)g=g<<1|1&r,y==e-1?(y=0,h.push(n(g)),g=0):y++,r>>=1}0==--p&&(p=Math.pow(2,d),d++),delete s[f]}else for(r=a[f],o=0;o<d;o++)g=g<<1|1&r,y==e-1?(y=0,h.push(n(g)),g=0):y++,r>>=1;0==--p&&(p=Math.pow(2,d),d++),a[c]=l++,f=String(u)}if(""!==f){if(Object.prototype.hasOwnProperty.call(s,f)){if(f.charCodeAt(0)<256){for(o=0;o<d;o++)g<<=1,y==e-1?(y=0,h.push(n(g)),g=0):y++;for(r=f.charCodeAt(0),o=0;o<8;o++)g=g<<1|1&r,y==e-1?(y=0,h.push(n(g)),g=0):y++,r>>=1}else{for(r=1,o=0;o<d;o++)g=g<<1|r,y==e-1?(y=0,h.push(n(g)),g=0):y++,r=0;for(r=f.charCodeAt(0),o=0;o<16;o++)g=g<<1|1&r,y==e-1?(y=0,h.push(n(g)),g=0):y++,r>>=1}0==--p&&(p=Math.pow(2,d),d++),delete s[f]}else for(r=a[f],o=0;o<d;o++)g=g<<1|1&r,y==e-1?(y=0,h.push(n(g)),g=0):y++,r>>=1;0==--p&&(p=Math.pow(2,d),d++)}for(r=2,o=0;o<d;o++)g=g<<1|1&r,y==e-1?(y=0,h.push(n(g)),g=0):y++,r>>=1;for(;;){if(g<<=1,y==e-1){h.push(n(g));break}y++}return h.join("")},decompress:function(t){return null==t?"":""==t?null:i._decompress(t.length,32768,(function(e){return t.charCodeAt(e)}))},_decompress:function(e,n,o){var r,i,a,s,u,c,f,p=[],l=4,d=4,h=3,g="",y=[],m={val:o(0),position:n,index:1};for(r=0;r<3;r+=1)p[r]=r;for(a=0,u=Math.pow(2,2),c=1;c!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=o(m.index++)),a|=(s>0?1:0)*c,c<<=1;switch(a){case 0:for(a=0,u=Math.pow(2,8),c=1;c!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=o(m.index++)),a|=(s>0?1:0)*c,c<<=1;f=t(a);break;case 1:for(a=0,u=Math.pow(2,16),c=1;c!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=o(m.index++)),a|=(s>0?1:0)*c,c<<=1;f=t(a);break;case 2:return""}for(p[3]=f,i=f,y.push(f);;){if(m.index>e)return"";for(a=0,u=Math.pow(2,h),c=1;c!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=o(m.index++)),a|=(s>0?1:0)*c,c<<=1;switch(f=a){case 0:for(a=0,u=Math.pow(2,8),c=1;c!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=o(m.index++)),a|=(s>0?1:0)*c,c<<=1;p[d++]=t(a),f=d-1,l--;break;case 1:for(a=0,u=Math.pow(2,16),c=1;c!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=o(m.index++)),a|=(s>0?1:0)*c,c<<=1;p[d++]=t(a),f=d-1,l--;break;case 2:return y.join("")}if(0==l&&(l=Math.pow(2,h),h++),p[f])g=p[f];else{if(f!==d)return null;g=i+i.charAt(0)}y.push(g),p[d++]=i+g.charAt(0),i=g,0==--l&&(l=Math.pow(2,h),h++)}}};return i}();void 0===(o=function(){return r}.call(e,n,e,t))||(t.exports=o)},function(t,e){var n,o,r=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(t){o=a}}();var u,c=[],f=!1,p=-1;function l(){f&&u&&(f=!1,u.length?c=u.concat(c):p=-1,c.length&&d())}function d(){if(!f){var t=s(l);f=!0;for(var e=c.length;e;){for(u=c,c=[];++p<e;)u&&u[p].run();p=-1,e=c.length}u=null,f=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function g(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new h(t,e)),1!==c.length||f||s(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,n){(function(t){!function(){var e;function n(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}var o="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},r="undefined"!=typeof window&&window===this?this:void 0!==t&&null!=t?t:this;function i(){i=function(){},r.Symbol||(r.Symbol=c)}function a(t,e){this.s=t,o(this,"description",{configurable:!0,writable:!0,value:e})}a.prototype.toString=function(){return this.s};var s,u,c=(s=0,function t(e){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new a("jscomp_symbol_"+(e||"")+"_"+s++,e)});function f(){i();var t=r.Symbol.iterator;t||(t=r.Symbol.iterator=r.Symbol("Symbol.iterator")),"function"!=typeof Array.prototype[t]&&o(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return function(t){return f(),(t={next:t})[r.Symbol.iterator]=function(){return this},t}(n(this))}}),f=function(){}}function p(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:n(t)}}if("function"==typeof Object.setPrototypeOf)u=Object.setPrototypeOf;else{var l;t:{var d={};try{d.__proto__={v:!0},l=d.v;break t}catch(t){}l=!1}u=l?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var h=u;function g(){this.h=!1,this.c=null,this.o=void 0,this.b=1,this.m=this.w=0,this.g=null}function y(t){if(t.h)throw new TypeError("Generator is already running");t.h=!0}function m(t,e,n){return t.b=n,{value:e}}function v(t){for(var e in this.C=t,this.l=[],t)this.l.push(e);this.l.reverse()}function b(t){this.a=new g,this.D=t}function O(t,e,n,o){try{var r=e.call(t.a.c,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return t.a.h=!1,r;var i=r.value}catch(e){return t.a.c=null,t.a.j(e),T(t)}return t.a.c=null,o.call(t.a,i),T(t)}function T(t){for(;t.a.b;)try{var e=t.D(t.a);if(e)return t.a.h=!1,{value:e.value,done:!1}}catch(e){t.a.o=void 0,t.a.j(e)}if(t.a.h=!1,t.a.g){if(e=t.a.g,t.a.g=null,e.B)throw e.A;return{value:e.return,done:!0}}return{value:void 0,done:!0}}function D(t){this.next=function(e){return t.i(e)},this.throw=function(e){return t.j(e)},this.return=function(e){return function(t,e){y(t.a);var n=t.a.c;return n?O(t,"return"in n?n.return:function(t){return{value:t,done:!0}},e,t.a.return):(t.a.return(e),T(t))}(t,e)},f(),this[Symbol.iterator]=function(){return this}}function S(t,e){var n=new D(new b(e));return h&&h(n,t.prototype),n}if(g.prototype.i=function(t){this.o=t},g.prototype.j=function(t){this.g={A:t,B:!0},this.b=this.w||this.m},g.prototype.return=function(t){this.g={return:t},this.b=this.m},b.prototype.i=function(t){return y(this.a),this.a.c?O(this,this.a.c.next,t,this.a.i):(this.a.i(t),T(this))},b.prototype.j=function(t){return y(this.a),this.a.c?O(this,this.a.c.throw,t,this.a.i):(this.a.j(t),T(this))},"undefined"!=typeof Blob&&("undefined"==typeof FormData||!FormData.prototype.keys)){var w=function(t,e){for(var n=0;n<t.length;n++)e(t[n])},R=function(t,e,n){return e instanceof Blob?[String(t),e,void 0!==n?n+"":"string"==typeof e.name?e.name:"blob"]:[String(t),String(e)]},_=function(t,e){if(t.length<e)throw new TypeError(e+" argument required, but only "+t.length+" present.")},I=function(t){var e=p(t);return t=e.next().value,e=e.next().value,t instanceof Blob&&(t=new File([t],e,{type:t.type,lastModified:t.lastModified})),t},j="object"==typeof window?window:"object"==typeof self?self:this,E=j.FormData,x=j.XMLHttpRequest&&j.XMLHttpRequest.prototype.send,L=j.Request&&j.fetch,B=j.navigator&&j.navigator.sendBeacon;i();var C=j.Symbol&&Symbol.toStringTag;C&&(Blob.prototype[C]||(Blob.prototype[C]="Blob"),"File"in j&&!File.prototype[C]&&(File.prototype[C]="File"));try{new File([],"")}catch(t){j.File=function(t,e,n){return t=new Blob(t,n),n=n&&void 0!==n.lastModified?new Date(n.lastModified):new Date,Object.defineProperties(t,{name:{value:e},lastModifiedDate:{value:n},lastModified:{value:+n},toString:{value:function(){return"[object File]"}}}),C&&Object.defineProperty(t,C,{value:"File"}),t}}i(),f();var A=function(t){if(this.f=Object.create(null),!t)return this;var e=this;w(t.elements,(function(t){if(t.name&&!t.disabled&&"submit"!==t.type&&"button"!==t.type)if("file"===t.type){var n=t.files&&t.files.length?t.files:[new File([],"",{type:"application/octet-stream"})];w(n,(function(n){e.append(t.name,n)}))}else"select-multiple"===t.type||"select-one"===t.type?w(t.options,(function(n){!n.disabled&&n.selected&&e.append(t.name,n.value)})):"checkbox"===t.type||"radio"===t.type?t.checked&&e.append(t.name,t.value):(n="textarea"===t.type?t.value.replace(/\\r\\n/g,"\\n").replace(/\\n/g,"\\r\\n"):t.value,e.append(t.name,n))}))};if((e=A.prototype).append=function(t,e,n){_(arguments,2);var o=p(R.apply(null,arguments));t=o.next().value,e=o.next().value,n=o.next().value,(o=this.f)[t]||(o[t]=[]),o[t].push([e,n])},e.delete=function(t){_(arguments,1),delete this.f[String(t)]},e.entries=function t(){var e,n,o,r,i,a,s=this;return S(t,(function(t){switch(t.b){case 1:e=s.f,o=new v(e);case 2:var u;t:{for(u=o;0<u.l.length;){var c=u.l.pop();if(c in u.C){u=c;break t}}u=null}if(null==(n=u)){t.b=0;break}r=p(e[n]),i=r.next();case 5:if(i.done){t.b=2;break}return a=i.value,m(t,[n,I(a)],6);case 6:i=r.next(),t.b=5}}))},e.forEach=function(t,e){_(arguments,1);for(var n=p(this),o=n.next();!o.done;o=n.next()){var r=p(o.value);o=r.next().value,r=r.next().value,t.call(e,r,o,this)}},e.get=function(t){_(arguments,1);var e=this.f;return e[t=String(t)]?I(e[t][0]):null},e.getAll=function(t){return _(arguments,1),(this.f[String(t)]||[]).map(I)},e.has=function(t){return _(arguments,1),String(t)in this.f},e.keys=function t(){var e,n,o,r=this;return S(t,(function(t){if(1==t.b&&(e=p(r),n=e.next()),3!=t.b)return n.done?void(t.b=0):(o=n.value,m(t,p(o).next().value,3));n=e.next(),t.b=2}))},e.set=function(t,e,n){_(arguments,2);var o=R.apply(null,arguments);this.f[o[0]]=[[o[1],o[2]]]},e.values=function t(){var e,n,o,r,i=this;return S(t,(function(t){if(1==t.b&&(e=p(i),n=e.next()),3!=t.b)return n.done?void(t.b=0):(o=n.value,(r=p(o)).next(),m(t,r.next().value,3));n=e.next(),t.b=2}))},A.prototype._asNative=function(){for(var t=new E,e=p(this),n=e.next();!n.done;n=e.next()){var o=p(n.value);n=o.next().value,o=o.next().value,t.append(n,o)}return t},A.prototype._blob=function(){for(var t="----formdata-polyfill-"+Math.random(),e=[],n=p(this),o=n.next();!o.done;o=n.next()){var r=p(o.value);o=r.next().value,r=r.next().value,e.push("--"+t+"\\r\\n"),r instanceof Blob?e.push(\'Content-Disposition: form-data; name="\'+o+\'"; filename="\'+r.name+\'"\\r\\n\',"Content-Type: "+(r.type||"application/octet-stream")+"\\r\\n\\r\\n",r,"\\r\\n"):e.push(\'Content-Disposition: form-data; name="\'+o+\'"\\r\\n\\r\\n\'+r+"\\r\\n")}return e.push("--"+t+"--"),new Blob(e,{type:"multipart/form-data; boundary="+t})},A.prototype[Symbol.iterator]=function(){return this.entries()},A.prototype.toString=function(){return"[object FormData]"},C&&(A.prototype[C]="FormData"),x){var M=j.XMLHttpRequest.prototype.setRequestHeader;j.XMLHttpRequest.prototype.setRequestHeader=function(t,e){M.call(this,t,e),"content-type"===t.toLowerCase()&&(this.u=!0)},j.XMLHttpRequest.prototype.send=function(t){t instanceof A?(t=t._blob(),this.u||this.setRequestHeader("Content-Type",t.type),x.call(this,t)):x.call(this,t)}}if(L){var k=j.fetch;j.fetch=function(t,e){return e&&e.body&&e.body instanceof A&&(e.body=e.body._blob()),k.call(this,t,e)}}B&&(j.navigator.sendBeacon=function(t,e){return e instanceof A&&(e=e._asNative()),B.call(this,t,e)}),j.FormData=A}}()}).call(this,n(4))},function(t,e,n){"use strict";n.r(e);var o=n(2),r=n(0),i=n(1),a=n(3);function s(){return u()&&!1}function u(){return!(!a.a||!a.a.worker)}var c,f,p,l,d,h=["doc.weixin.qq.com","wecom-addon.tencentsuite.com"].includes(location.hostname),g=new(function(){function t(){var t=this;this.configs={mergeQueueConfig:{sourceKey:"report_source_v2",pendingKey:"report_pending_v2",maxInBatch:5e4,maxSize:5e4},enableMergeReport:!0,cgiURL:h?"https://docrp.weixin.qq.com/report/node/":"https://report.idqqimg.com/node/report/",backupUrl:"https://report.idqqimg.com/node_b/",isLogPrint:Object(r.e)(),isCloseReport:Object(r.d)(),expiredTime:6048e5,supportOffline:!0,maxStoreReport:1e4,headRequest:!0,enableWorker:!0},this.closeLog=function(){t.configs.isLogPrint=!1,Object(i.d)(!1),t.syncConfigToWorker()},this.openLog=function(){t.configs.isLogPrint=!0,Object(i.d)(!0),t.syncConfigToWorker()},this.closeReport=function(){t.configs.isCloseReport=!0,t.syncConfigToWorker()},this.openReport=function(){t.configs.isCloseReport=!1,t.syncConfigToWorker()},this.enableMerge=function(){t.configs.enableMergeReport=!0,t.syncConfigToWorker()},this.disableMerge=function(){t.configs.enableMergeReport=!1,t.syncConfigToWorker()},this.disableWorker=function(){t.configs.enableWorker=!1,a.a.terminateWorker()},this.reset=function(e){h||(Object(r.j)(t.configs,e),Object(i.d)(t.configs.isLogPrint),t.syncConfigToWorker())},this.syncConfigToWorker=function(){if(s()){var e=JSON.parse(JSON.stringify(t.configs));a.a.postMessageToWorker({type:"config",payload:e})}}}return Object.defineProperty(t.prototype,"mergeQueueConfig",{get:function(){return this.configs.mergeQueueConfig},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enableMergeReport",{get:function(){return this.configs.enableMergeReport},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cgiURL",{get:function(){return this.configs.cgiURL},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLogPrint",{get:function(){return this.configs.isLogPrint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCloseReport",{get:function(){return this.configs.isCloseReport},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"expiredTime",{get:function(){return this.configs.expiredTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"supportOffline",{get:function(){return this.configs.supportOffline},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxStoreReport",{get:function(){return this.configs.maxStoreReport},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headRequest",{get:function(){return this.configs.headRequest},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enableWorker",{get:function(){return this.configs.enableWorker},enumerable:!0,configurable:!0}),t}());!function(t){t[t.GET=0]="GET",t[t.POST=1]="POST",t[t.HEAD=2]="HEAD",t[t.BEACON=3]="BEACON"}(c||(c={})),function(t){t.HUATUO="huatuo",t.MONITOR="monitor",t.RETCODE="retcode",t.TDBANK="tdbank",t.TDW="tdw",t.COMMON="common",t.BEACON="beacon",t.ZZS="zzs"}(f||(f={})),function(t){t[t.NO_WORKER=35056324]="NO_WORKER",t[t.NO_INDEDEDDB=35056325]="NO_INDEDEDDB",t[t.WORKER_FAIL=34981047]="WORKER_FAIL",t[t.SDK_LOAD=34980701]="SDK_LOAD",t[t.INDEDEDDB_OPEN_FAIL=34981048]="INDEDEDDB_OPEN_FAIL",t[t.INDEDEDDB_OVER_LIMIT=34981049]="INDEDEDDB_OVER_LIMIT",t[t.INDEDEDDB_OVER_TIME=34986191]="INDEDEDDB_OVER_TIME",t[t.REPORT_NONE=34987578]="REPORT_NONE"}(p||(p={})),function(t){t.INLINE_LOAD_COST="inline-load-cost",t.SDK_LOAD_COST="sdk-load-cost",t.REPORT_TOTAL="report-total",t.REPORT_FAIL="report-fail",t.REPORT_OFFLINE="report-offline",t.REPORT_ONEXIT="report-onexit"}(l||(l={})),function(t){t[t.SUM=1]="SUM",t[t.AVERAGE=2]="AVERAGE"}(d||(d={}));var y=function(){return(y=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},m=new(function(){function t(){var t=this;this.projectID=64,this.pageName="sdk-inside",this.dataDBKey="ALLOYREPORT_REPORT_INSIDE",this.getLastInsideDatas=function(){var e=[],n=[],o=window.localStorage&&window.localStorage.getItem(t.dataDBKey);if(o)try{(o=JSON.parse(o))&&(e=o.monitor,n=(n=o.adt).map((function(e){return y({projectid:t.projectID,pagename:t.pageName},e)}))),window.localStorage.removeItem(t.dataDBKey)}catch(t){}return{monitor:e,adt:n}},this.saveInsideDatas=function(){var e,n;if(window&&window.localStorage){var o=window.localStorage.getItem(t.dataDBKey);if(o)try{o=JSON.parse(o)}catch(t){Object(i.a)(t)}else o={};var r=o.monitor,a=void 0===r?[]:r,s=o.adt,u=void 0===s?[]:s;if((e=t.monitorID).push.apply(e,a),(n=t.adtDatas).push.apply(n,u),t.monitorID.length||t.adtDatas.length){var c=JSON.stringify({monitor:t.monitorID,adt:t.adtDatas});window.localStorage.setItem(t.dataDBKey,c),t.monitorID=[],t.adtDatas=[]}}},this.adtDatas=[],this.monitorID=[],this.pointIDValues={},this.isMainHandledExit=!1,this.initEvent(),this.doResourceReport(),this.doReceiveNoneReport()}return t.prototype.monitor=function(t){this.monitorID.push(t)},t.prototype.adt=function(t,e){this.adtDatas.push({pointid:t,pointvalue:e})},t.prototype.adtSum=function(t,e){this.pointIDValues[t]||(this.pointIDValues[t]=[0,0,d.SUM]),this.pointIDValues[t][0]+=e,this.pointIDValues[t][1]+=1},t.prototype.adtAverage=function(t,e){this.pointIDValues[t]||(this.pointIDValues[t]=[0,0,d.AVERAGE]),this.pointIDValues[t][0]+=e,this.pointIDValues[t][1]+=1},t.prototype.mergeIDValuesToAdt=function(){for(var t=Object.keys(this.pointIDValues),e=0;e<t.length;e++){var n=t[e],o=this.pointIDValues[n],r=0;o[2]===d.SUM?r=o[0]:o[2]===d.AVERAGE&&(r=o[0]/o[1]),this.adtDatas.push({pointid:n,pointvalue:r})}},t.prototype.syncDatasToMainThread=function(){this.mergeIDValuesToAdt();var t={monitor:this.monitorID,adt:this.adtDatas};self.postMessage({type:"reportInside",datas:t})},t.prototype.initEvent=function(){var t=this;o.b.on("beforeunload",(function(){t.syncDatasToMainThread()}))},t.prototype.doResourceReport=function(){},t.prototype.doReceiveNoneReport=function(){},t}()),v={},b={},O=!1;o.b.on("beforeunload",(function(){var t=0;for(var e in O=!0,v)v.hasOwnProperty(e)&&(window.clearTimeout(b[e]),v[e](),t++);m.adtSum(l.REPORT_ONEXIT,t)}));var T,D,S=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{u(o.next(t))}catch(t){i(t)}}function s(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((o=o.apply(t,e||[])).next())}))},w=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},R=function(){function t(){var t=this;this.databaseName="AlloyReport-DB",this.tableName="AlloyReport-Table",this.expiredTime=Object(r.c)()-g.expiredTime,this.tsRangeExpired=IDBKeyRange.upperBound(this.expiredTime,!0),this.tsRangeNotExpired=IDBKeyRange.lowerBound(this.expiredTime,!1),this.statistic={},this.readonly="readonly",this.readwrite="readwrite",this.addDataCache=[],this.overLimitReport=!1,this.dbDataCache={},this.addBatch=function(){return S(t,void 0,void 0,(function(){var t=this;return w(this,(function(e){return S(t,void 0,void 0,(function(){var t,e,n,r,a,s=this;return w(this,(function(u){switch(u.label){case 0:return[4,this.getDB()];case 1:return t=u.sent(),e=t.transaction(this.tableName,this.readwrite),n=e.objectStore(this.tableName),r=this.addDataCache,this.addDataCache=[],a=r.map((function(t){return new Promise((function(e){var o=t.key,r=t.data,a=t.tryTimes,u=r.ts,c=n.add({key:o,data:r,tryTimes:0,ts:u});c.onsuccess=function(t){var n=t.target.result;s.setStatistic(o,n,u,a,r),e(!0)},c.onerror=function(t){Object(i.a)(t),e(!1)}}))})),Promise.all(a).then((function(){2===s.initedStatistic&&o.a.trigger("indexedDBDispatch",s.statistic)})).catch((function(t){Object(i.a)(t)})),[2]}}))})),[2]}))}))},this.handleFailByIDs=function(e,n){return S(t,void 0,void 0,(function(){var t,i,a,s=this;return w(this,(function(u){return(t=this.statistic[e])?(i=[],a=[],Object(r.k)(t,(function(t,o){var r=parseInt(t);if(-1!==n.indexOf(r)){var u=o[0],c=o[1];!c||c<1?(i.push(r),s.setStatistic(e,r,u,1)):(a.push(r),delete s.statistic[e][r])}})),this.query("id",this.readwrite,void 0,null,(function(t,e,n){-1!==a.indexOf(t.id)?e.delete(n.primaryKey):-1!==i.indexOf(t.id)&&e.put({id:t.id,key:t.key,data:t.data,tryTimes:1,ts:t.ts})})).then((function(){setTimeout((function(){o.a.trigger("indexedDBDispatch",s.statistic,e)}),1e3*Math.floor(120*Math.random()+30))})),m.adtSum(l.REPORT_FAIL,a.length),[2]):[2]}))}))},this.deleteByIDs=function(e){return S(t,void 0,void 0,(function(){var t,n,o,r,i,a,s,u;return w(this,(function(c){switch(c.label){case 0:for(t=Object.keys(this.statistic),u=0;u<t.length;u++)for(n=t[u],o=0;o<e.length;o++)r=e[o],delete this.statistic[n][r];return[4,this.getDB()];case 1:for(i=c.sent(),a=i.transaction(this.tableName,this.readwrite),s=a.objectStore(this.tableName),u=0;u<e.length;u++)s.delete(e[u]);return[2]}}))}))},this.initIndexedDB(),o.a.on("dispatchSuccessID",this.deleteByIDs),o.a.on("dispatchFailID",this.handleFailByIDs)}return t.prototype.add=function(t){return S(this,void 0,void 0,(function(){return w(this,(function(e){return this.addDataCache.push(t),function(t,e,n,o){if(v[t])return O&&(delete v[t],e()),void(o&&o()&&(delete v[t],e()));clearTimeout(b[t]),v[t]=e,b[t]=setTimeout((function(){delete v[t],e()}),n)}("dbAddBatch",this.addBatch,100),[2]}))}))},t.prototype.queryByIDs=function(t){return S(this,void 0,void 0,(function(){var e,n,o,r;return w(this,(function(i){for(e=[],n=!0,o=0;o<t.length;o++){if(!(r=this.dbDataCache[t[o]])){n=!1;break}e.push(r)}return n?[2,Promise.resolve(e)]:[2,this.query("id",this.readonly,void 0,(function(e){return-1!==t.indexOf(e.id)}))]}))}))},t.prototype.getStatistic=function(){return this.statistic},t.prototype.query=function(t,e,n,o,r){return S(this,void 0,void 0,(function(){var a=this;return w(this,(function(s){return[2,new Promise((function(s,u){return S(a,void 0,void 0,(function(){var a,u,c,f,p;return w(this,(function(l){switch(l.label){case 0:return[4,this.getDB()];case 1:return a=l.sent(),u=a.transaction(this.tableName,e),c=u.objectStore(this.tableName),f=c.index(t).openCursor(n),p=[],f.onsuccess=function(t){var e=f.result;e?(o&&o(e.value),p.push(e.value),r&&r(e.value,c,e),e.continue()):s(p)},f.onerror=function(t){Object(i.a)(t),s(t)},[2]}}))}))}))]}))}))},t.prototype.getDB=function(){return this.cacheGetDBPromise?this.cacheGetDBPromise:this.db?this.db:(this.cacheGetDBPromise=this.initIndexedDB(),this.cacheGetDBPromise)},t.prototype.initIndexedDB=function(){var t=this;return new Promise((function(e){var n=indexedDB.open(t.databaseName);n.onerror=function(t){m.monitor(p.INDEDEDDB_OPEN_FAIL),Object(i.a)("打开 indexdb 失败。",t)},n.onsuccess=function(n){t.db=n.target.result,Object(i.b)("打开 indexdb 成功"),t.initStatistic(),e(t.db)},n.onupgradeneeded=function(e){var n=e.target.result;if(!n.objectStoreNames.contains(t.databaseName)){var o=n.createObjectStore(t.tableName,{keyPath:"id",autoIncrement:!0});o.createIndex("key","key",{unique:!1}),o.createIndex("tryTimes","tryTimes",{unique:!1}),o.createIndex("ts","ts",{unique:!1}),o.createIndex("id","id",{unique:!1})}}}))},t.prototype.setStatistic=function(t,e,n,o,r){this.statistic[t]||(this.statistic[t]={});var i=this.statistic[t];if(i[e]=[n,o],r){this.dbDataCache[e]={id:e,key:t,data:r,tryTimes:o,ts:n};var a=Object.keys(this.dbDataCache);if(a.length>50){a.sort();for(var s=a.slice(0,a.length-50).map((function(t){return parseInt(t)})),u=0;u<s.length;u++)delete this.dbDataCache[s[u]]}}else delete this.dbDataCache[e];var c=Object.keys(i),f=c.length,l=g.maxStoreReport;f>l&&(c.sort(),s=c.slice(0,f-l).map((function(t){return parseInt(t)})),this.deleteByIDs(s),this.overLimitReport||(this.overLimitReport=!0,m.monitor(p.INDEDEDDB_OVER_LIMIT)))},t.prototype.initStatistic=function(){var t=this;this.initedStatistic||(this.initedStatistic=1,this.query("ts",this.readonly,this.tsRangeNotExpired,null,(function(e){var n=e.id,o=e.ts,r=e.tryTimes,i=e.key;t.setStatistic(i,n,o,r)})).then((function(){t.initedStatistic=2,o.a.trigger("indexedDBDispatch",t.statistic,null)})).catch((function(){t.initedStatistic=2,o.a.trigger("indexedDBDispatch",t.statistic,null)})),this.deleteExpiredReporter())},t.prototype.deleteExpiredReporter=function(){return S(this,void 0,Promise,(function(){var t,e=this;return w(this,(function(n){return t=0,[2,new Promise((function(n,o){return S(e,void 0,void 0,(function(){var e,o,r,a;return w(this,(function(s){switch(s.label){case 0:return[4,this.getDB()];case 1:return e=s.sent(),o=e.transaction(this.tableName,this.readwrite),r=o.objectStore(this.tableName),(a=r.index("ts").openCursor(this.tsRangeExpired)).onsuccess=function(e){var o=a.result;o?(r.delete(o.primaryKey),o.continue(),t++):(t?(m.monitor(p.INDEDEDDB_OVER_TIME),Object(i.b)("过期上报数据已清除")):Object(i.b)("当前没有过期上报数据"),n())},a.onerror=function(t){Object(i.a)(t),n()},[2]}}))}))}))]}))}))},t}(),_=function(){var t=this;this.MemStore={},this.set=function(e,n){t.MemStore[e]=n},this.get=function(e,n){var o;return(o=t.MemStore[e])||(o=n,n&&t.set(e,o)),o},this.each=function(e){for(var n=t.MemStore,o=Object.keys(n),r=o.length,i=0;i<r;i++)e&&e(n[o[i]])}},I=new(function(){function t(){var t=this;this.isIndexedDB=!1,this.isLocalDB=!1,this.get=function(e,n){return t.isLocalDB?t.constDB.get(e,n):t.db.get(e,n)},this.set=function(e,n){return t.isLocalDB?t.constDB.set(e,n):t.db.set(e,n)},this.add=function(e){var n=t.constDB.add(e);return n.catch((function(t){Object(i.a)(t)})),n},this.queryByIDs=function(e){var n=t.constDB.queryByIDs(e);return n.catch((function(t){Object(i.a)(t)})),n},this.db=new _;try{u()&&s()||this.initConstDB()}catch(t){Object(i.a)(t)}}return t.prototype.initConstDB=function(){r.h?(this.constDB=new R,this.isIndexedDB=!0):r.i&&(this.constDB=new a.a,this.isLocalDB=!0),r.h||m.monitor(p.NO_INDEDEDDB)},t.prototype.getStatistic=function(){return this.constDB.getStatistic()},t}()),j=new(function(){function t(){var t=this;this.status=1,this.isCustom=!1,this.getStatus=function(){return t.isCustom?t.status:r.a&&r.a.navigator?r.a.navigator.onLine:t.status},this.isOffline=function(){return!t.getStatus()},this.setOffline=function(){t.isCustom||(t.isCustom=!0,t.offEvent()),t.offlineListener()},this.setOnline=function(){t.isCustom||(t.isCustom=!0,t.offEvent()),t.onlineListener()},this.offlineListener=function(){s()&&t.syncStatusToWorker(0)},this.onlineListener=function(){s()&&t.syncStatusToWorker(1)},this.handleOffLine=function(e){e&&e.isCustom&&(t.isCustom=!0),t.status=0},this.handleOnLine=function(e){e&&e.isCustom&&(t.isCustom=!0),t.status||(t.status=1,u()?o.b.trigger("networkConnect"):u()||o.b.trigger("networkConnect"))},this.initEvent()}return t.prototype.initEvent=function(){r.b&&r.b.addEventListener&&(r.b.addEventListener("online",this.onlineListener),r.b.addEventListener("offline",this.offlineListener)),o.b.on("workerOffline",this.handleOffLine),o.b.on("workerOnline",this.handleOnLine)},t.prototype.offEvent=function(){r.b&&r.b.removeEventListener&&(r.b.removeEventListener("online",this.onlineListener),r.b.removeEventListener("offline",this.offlineListener))},t.prototype.syncStatusToWorker=function(t){this.status=t,a.a.postMessageToWorker({type:t?"online":"offline",payload:{isCustom:this.isCustom}},!0)},t}()),E=function(){return(E=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};!function(t){t[t.ALL=1]="ALL",t[t.PART=2]="PART"}(T||(T={})),function(t){t[t.ERROR=-1]="ERROR",t[t.ALL=1]="ALL",t[t.PART=2]="PART"}(D||(D={}));var x=function(){function t(){var t=this;this.lastAddToBatchTime={},this.storeConfig=new _,this.dispatchTimeIDs={},this.sentIDs=[],this.count=0,this.dispatchBatch=function(e,n){if(!g.supportOffline||j.getStatus()){var o=t.dispatchTimeIDs,a=Object(r.c)();if(n)clearTimeout(o[n]),a-t.lastAddToBatchTime[n]>2e3?(t.dispatchBatchBySourceKey(e,n,T.ALL),t.lastAddToBatchTime[n]=0):t.dispatchBatchBySourceKey(e,n,T.PART)===D.PART&&(o[n]=setTimeout((function(){t.dispatchBatch(I.getStatistic(),n)}),2e3));else for(var s=Object.keys(e),u=0;u<s.length;u++){var c=s[u];t.dispatchBatchBySourceKey(e,c,T.ALL),t.lastAddToBatchTime[c]=0}}else Object(i.b)("网络离线，暂停上报")},o.a.on("indexedDBDispatch",this.dispatchBatch),o.b.on("networkConnect",(function(){Object(i.b)("网络恢复，上报离线数据"),o.a.trigger("indexedDBDispatch",I.getStatistic(),null)}))}return t.prototype.addOne=function(t,e,n){var o=t.sourceKey,i=Object(r.c)();I.add({key:o,data:{ts:i+this.count,param:e,opts:n},tryTimes:0}),this.count++,this.lastAddToBatchTime[o]||(this.lastAddToBatchTime[o]=i)},t.prototype.successItems=function(t,e){var n=e.map((function(t){return t.id})),r=this.sentIDs.filter((function(t){return-1===n.indexOf(t)}));this.sentIDs=r,o.a.trigger("dispatchSuccessID",n)},t.prototype.failItems=function(t,e){var n=t.sourceKey,r=e.map((function(t){return t.id})),i=this.sentIDs.filter((function(t){return-1===r.indexOf(t)}));this.sentIDs=i,g.supportOffline&&!j.getStatus()||o.a.trigger("dispatchFailID",n,r)},t.prototype.getConfigBySourceKey=function(t){if(g.mergeQueueConfig.sourceKey===t)return g.mergeQueueConfig;var e=bt.getAdapterBySourceKey(t);return e&&e.configs&&e.configs.queueConfig?e.configs.queueConfig:null},t.prototype.dispatchBatchBySourceKey=function(t,e,n){if(!t[e])return D.ERROR;var o=Object.keys(t[e]).map((function(t){return parseInt(t,10)})),r=(o=this.filterIDsBySent(o)).length;if(r<1)return D.ERROR;var i=this.getConfigBySourceKey(e);if(!i)return D.ERROR;var a=i.maxInBatch||10,s=D.ALL;if(n===T.PART){if(r<a)return D.PART;var u=r%a;s=0===u?D.ALL:D.PART,o.sort(),o=o.slice(0,r-u)}return this.dispatchBatchByIds(o,i,a),s},t.prototype.dispatchBatchByIds=function(t,e,n){var r=e.sourceKey;this.sentIDs=this.sentIDs.concat(t),I.queryByIDs(t).then((function(i){for(var a=[],s=0;s<i.length;s++){var u=i[s],c=u.data,f=u.id;-1!==t.indexOf(f)&&a.push(E(E({},c),{id:f}))}for(s=0;s<a.length;s+=n){var p=a.slice(s,s+n);r===g.mergeQueueConfig.sourceKey?o.a.trigger("dispatchMerge",e,p):o.a.trigger("dispatchCommon",e,p)}})).catch((function(t){Object(i.a)(t),Object(i.a)("从数据库取数据错误")}))},t.prototype.filterIDsBySent=function(t){var e=this.sentIDs;return t.filter((function(t){return-1===e.indexOf(t)}))},t}(),L=new(function(){function t(){I.isIndexedDB?this.queueInstance=new x:this.queueInstance=new a.a}return t.prototype.addOne=function(t,e,n){this.queueInstance.addOne(t,e,n),g.supportOffline&&!j.getStatus()&&m.adtSum(l.REPORT_OFFLINE,1)},t.prototype.successItems=function(t,e){this.queueInstance.successItems(t,e)},t.prototype.failItems=function(t,e){this.queueInstance.failItems(t,e)},t}()),B=(n(9),function(t){if(t.url){var e=new XMLHttpRequest;if(e){var n=t.method||"POST",o=!1;if(g.headRequest&&"GET"===n&&(-1===t.url.indexOf("report.idqqimg.com")&&-1===t.url.indexOf("report.url.cn")||(n="HEAD",o=!0)),e.onerror=function(){t.onError&&t.onError()},e.ontimeout=function(){t.onTimeout&&t.onTimeout()},e.onreadystatechange=function(){if(4===e.readyState){var n=e.status;200===n?function(){if(o)t.onSucc&&t.onSucc();else{var n=e.responseText;try{switch(JSON.parse(n).retcode){case 0:t.onSucc&&t.onSucc();break;case 1:t.onTest&&t.onTest();break;case 6:t.onTimeout&&t.onTimeout();break;default:t.onError&&t.onError(200)}}catch(e){t.onError&&t.onError(200)}}}():function(e){o?t.onError&&t.onError(e):202===e?t.onTest&&t.onTest():500===e?t.onTimeout&&t.onTimeout():t.onError&&t.onError(e)}(n)}},"POST"===n&&"JSON"!==t.postFormat){var r=new FormData;if(t.data)for(var i in t.data)t.data.hasOwnProperty(i)&&r.append(i,t.data[i]);e.open(n,t.url,!0),e.timeout=t.timeout||1e4,e.send(r)}else"POST"===n&&"JSON"===t.postFormat?(e.open(n,t.url,!0),e.timeout=t.timeout||1e4,e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.send(JSON.stringify(t.data))):(e.open(n,t.url,!0),e.timeout=t.timeout||1e4,e.send())}}}),C=(n(5),["onReceiveReporter","onHanldeParams","onBeforeCommonReport","onBeforeMergeReport","onBeforeReportSend","onReportSenderError","onReportSenderSuccess","onReportSenderTimeout"]),A=new function(){var t=this;this.addHooks=function(e,n){"function"==typeof n?-1!==C.indexOf(e)?(o.c.on(e,n),t.syncHooksToWorker(e,"add")):Object(i.c)("不支持的钩子"):Object(i.c)("参数必须是函数")},this.removeHooks=function(e,n){o.c.remove(e,n),t.syncHooksToWorker(e,"remove")},this.execute=function(t,e){o.c.trigger.apply(o.c,function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o}([t],e))},this.getExecuteFunction=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(o.c.getLength(t)){var r={type:"hooks",payload:{args:e,name:t}};try{var i=JSON.stringify(r);wt.postMessageToMain(JSON.parse(i))}catch(t){}}}},this.syncHooksToWorker=function(t,e){if(s()){var n={name:t,action:e};a.a.postMessageToWorker({type:"hooks",payload:n})}},this.onReceiveReporter=this.getExecuteFunction("onReceiveReporter"),this.onHanldeParams=this.getExecuteFunction("onHanldeParams"),this.onBeforeCommonReport=this.getExecuteFunction("onBeforeCommonReport"),this.onBeforeMergeReport=this.getExecuteFunction("onBeforeMergeReport"),this.onBeforeReportSend=this.getExecuteFunction("onBeforeReportSend"),this.onReportSenderError=this.getExecuteFunction("onReportSenderError"),this.onReportSenderSuccess=this.getExecuteFunction("onReportSenderSuccess"),this.onReportSenderTimeout=this.getExecuteFunction("onReportSenderTimeout")};function M(t){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var k=function(){return(k=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},P=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o},q=function(){},N=function(t,e){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];try{return t.apply(void 0,n)}catch(t){e&&e(),Object(i.a)(t)}}}((function(t){var e,n=k({},t),o=n.method,s=void 0===o?"GET":o;n.url.length>2e3&&(s="POST",n.method="POST"),A.onBeforeReportSend(n);var u=n.onSucc,c=void 0===u?q:u,f=n.onError,p=void 0===f?q:f,l=n.onTimeout,d=void 0===l?q:l;n.onSucc=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];A.onReportSenderSuccess.apply(A,P([n],t)),c.apply(void 0,t)},n.onError=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];A.onReportSenderError.apply(A,P([n],t)),p.apply(void 0,t)},n.onTimeout=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];A.onReportSenderTimeout.apply(A,P([n],t)),d.apply(void 0,t)};try{"object"===("undefined"==typeof wx?"undefined":M(wx))&&(null===(e=wx)||void 0===e?void 0:e.request)?Object(a.a)(n):r.b&&r.b.Image&&"GET"===s?Object(a.a)(n):B(n)}catch(t){Object(i.a)(t)}})),F=new(function(){function t(){var t=this;this.sendReporter=function(e,n,o){if(0!==n.length){for(var r=[],i="",a=0;a<n.length;a++){var s=n[a],u=s.param,f=s.opts;r.push(u),i=f.name}var p=bt.getAdapterByName(i),l=p.getConfigs(),d=p.getMethods(),h=function(){o?L.successItems(o,n):L.successItems(e,n)},g=function(){o?L.failItems(o,n):L.failItems(e,n)};if(d[c.HEAD]||d[c.GET]){var y=p.transToURL(r,n[0].opts);if(t.isUrlOverLimit(y))return void t.sendRequestViaDatas(l.baseURL,p.buildData(r,{}),h,g);t.sendRequestViaURls(y,h,g)}else t.sendRequestViaDatas(l.baseURL,p.buildData(r,{}),h,g)}},this.initEvent()}return t.prototype.initEvent=function(){o.a.on("dispatchCommon",this.sendReporter),o.a.on("dispatchTryCommon",this.sendReporter)},t.prototype.isUrlOverLimit=function(t){return(Array.isArray(t)?t:[t]).some((function(t){return t.length>2e3}))},t.prototype.sendRequestViaURls=function(t,e,n){if(Object(r.f)(t))for(var o=0;o<t.length;o++)N({url:t[o]+"&t="+Object(r.c)(),method:"GET",onSucc:e,onError:n,onTimeout:n});else t&&N({url:t+"&t="+Object(r.c)(),method:"GET",onSucc:e,onError:n,onTimeout:n})},t.prototype.sendRequestViaDatas=function(t,e,n,o){if(Object(r.f)(e))for(var i=0;i<e.length;i++)N({url:t,method:"POST",onSucc:n,onError:o,onTimeout:o,data:e[i],postFormat:"JSON"});else e&&N({url:t,method:"POST",onSucc:n,onError:o,onTimeout:o,data:e,postFormat:"JSON"})},t.prototype.report=function(t,e,n,o){var r=t.getConfigs(),a=t.getMethods(),s=r.queueConfig;if(Object(i.b)("[common-"+n.name+"]",e),o&&(a[c.HEAD]||a[c.GET])){var u=t.transToURL(e,n);return this.isUrlOverLimit(u)?void this.sendRequestViaDatas(r.baseURL,t.buildData(e,{})):void this.sendRequestViaURls(u)}o&&this.sendRequestViaDatas(r.baseURL,t.buildData(e,{})),L.addOne(s,e,n)},t}()),U=new(function(){function t(){this.LSErrorFlag=0,this.LSTimeDiffDelay=0,this.LSTestModeFlag=0,this.errorFlag={set:this.errorSet,get:this.errorGet,clear:function(){}},this.testModeFlag={set:this.testSet,get:this.testGet,clear:this.testClear},this.timeDiffFlag={set:this.diffSet,get:this.diffGet,clear:function(){}}}return t.prototype.errorSet=function(t){this.LSErrorFlag=1},t.prototype.errorGet=function(){return 1===this.LSErrorFlag},t.prototype.testGet=function(){var t=+new Date,e=this.LSTestModeFlag;return 0!==e&&t-e<6048e5},t.prototype.testSet=function(){this.LSTestModeFlag=+new Date},t.prototype.testClear=function(){this.LSTestModeFlag=0},t.prototype.diffSet=function(){this.LSTimeDiffDelay=+new Date},t.prototype.diffGet=function(){var t=+new Date,e=this.LSTimeDiffDelay;return!(0===e||t-e>864e5)},t}()),K=new(function(){function t(){this.started=!1,this.LSLastPingTime=0,this.LSErrorFlag=1}return t.prototype.send=function(t){var e=this;N({url:t+"?v=3&t="+ +new Date+"&q=check",onSucc:function(){e.started=!1,clearInterval(e.intervalHandler),e.LSErrorFlag=0},method:"GET"})},t.prototype.start=function(t){var e=this;this.pingURL=t,this.started||(this.started=!0,clearInterval(this.intervalHandler),this.intervalHandler=setInterval((function(){var t=e.LSLastPingTime,n=Object(r.c)();0===t?e.LSLastPingTime=n:n>t+6e4&&(e.LSLastPingTime=n,e.send(e.pingURL))}),6e4))},t.prototype.stop=function(){this.intervalHandler&&(clearInterval(this.intervalHandler),this.intervalHandler=null)},t}()),W=n(7),H=n.n(W),V=U.errorFlag,G=U.testModeFlag,z=new(function(){function t(){var t=this;this.sendReporter=function(e,n){g.mergeQueueConfig,n.length&&N({onSucc:function(){G.clear(),K.stop(),L.successItems(g.mergeQueueConfig,n)},onError:function(e){V.set(g.cgiURL),t.dispatchOriginRequest(n),4===e&&ot.commonReport(2394321)},onTimeout:function(){t.dispatchOriginRequest(n),Object(r.c)()-Object(r.c)()<8e3&&ot.commonReport(2589015),V.set(g.cgiURL)},onTest:function(){G.set(),L.successItems(g.mergeQueueConfig,n)},timeout:1e4,url:g.cgiURL,data:t.buildData(n),method:"POST"})},this.initEvent()}return t.prototype.initEvent=function(){o.a.on("dispatchMerge",this.sendReporter)},t.prototype.getAdapterConfigByName=function(t){var e=bt.getAdapterByName(t);return e&&e.getConfigs()||{}},t.prototype.buildData=function(t){for(var e=[],n=0;n<t.length;n++)Object(i.b)("[merge-"+t[n].opts.name+"]",t[n].param),e.push({param:t[n].param,opts:t[n].opts});var o=JSON.stringify(e);return e=H.a.compressToBase64(o),e=encodeURIComponent(e),{v:"3",t:+new Date,q:e}},t.prototype.splitItemsBySourceKey=function(t){for(var e={},n=0;n<t.length;n++){var o=t[n],r=bt.getAdapterByName(o.opts.name).getSourceKey();e[r]||(e[r]=[]),e[r].push(o)}return e},t.prototype.sendOriginalRequest=function(t){for(var e=0;e<t.length;e++)bt.getAdapterByName(t[e].opts.name).commonReport(t[e].param,t[e].opts)},t.prototype.dispatchOriginRequest=function(t){var e=this.splitItemsBySourceKey(t);Object(r.k)(e,(function(t,e){var n=bt.getAdapterBySourceKey(t).getConfigs();o.a.trigger("dispatchTryCommon",n,e,g.mergeQueueConfig)}))},t.prototype.report=function(t,e,n){var o=t.getConfigs(),r=o.shouldMerge,i=o.reportInTestMode,a=!1;if(r?G.get()?("function"!=typeof r||r(e))&&("function"!=typeof i||i(e))||(a=!0):"function"!=typeof r||r(e)||(a=!0):a=!0,a)F.report(t,e,n,!1);else{var s=g.mergeQueueConfig;L.addOne(s,e,n)}},t}()),J=new(function(){function t(){}return t.prototype.report=function(t,e,n){Object(i.b)("[immediate-"+n.name+"]",e);var o=t.transToURL(e,n);if(o){var s=o+"&t="+Object(r.c)();if(!Object(a.a)({url:s})){t.getConfigs().queueConfig;var u=function(){t.report(e,n,!1)};N({url:s,method:"GET",onSucc:function(){},onError:u,onTimeout:u})}}},t}()),Q=function(){var t=this;this.adapterName=f.COMMON,this.transToURL=function(t,e){return""},this.buildData=function(t,e){return{}},this.resetConfig=function(e){t.configs?h||(Object(r.j)(t.configs,e),t.syncConfigToWorker()):Object(i.a)("找不到此适配器")},this.getConfigs=function(){return t.configs||{}},this.getMethods=function(){var e=t.configs.methods.toString(2);return e.length<4&&(e=new Array(4-e.length).fill("0").join("")+e),e.split("").map((function(t){return parseInt(t)}))},this.getSourceKey=function(){var e=t.getConfigs();return e.queueConfig&&e.queueConfig.sourceKey||""},this.report=function(e,n,o){void 0===n&&(n={}),void 0===o&&(o=!1),n.name=t.adapterName,s()&&m.adtSum(l.REPORT_TOTAL,1);try{s()&&!o?a.a.postMessageToWorker({type:"api",payload:{data:e,opts:n,isImmediately:o},opts:{reportType:"auto"}}):function(t,e,n,o){t.getConfigs();var r=t.getMethods();o&&r[c.BEACON]?J.report(t,e,n):g.enableMergeReport?z.report(t,e,n):F.report(t,e,n,o)}(t,e,n,o)}catch(t){Object(i.a)(t)}},this.commonReport=function(e,n,o){void 0===n&&(n={}),void 0===o&&(o=!1),n.name=t.adapterName;try{s()?a.a.postMessageToWorker({type:"api",payload:{data:e,opts:n,isImmediately:o},opts:{reportType:"common"}}):(A.onBeforeCommonReport(e,n,o),F.report(t,e,n,o))}catch(t){Object(i.a)(t)}},this.mergeReport=function(e,n){void 0===n&&(n={}),n.name=t.adapterName;try{s()?a.a.postMessageToWorker({type:"api",payload:{data:e,opts:n,isImmediately:!1},opts:{reportType:"merge"}}):(A.onBeforeMergeReport(e,n),z.report(t,e,n))}catch(t){Object(i.a)(t)}},this.apiRequestToWorker=function(t,e,n){a.a.postMessageToWorker({type:"apiWorker",payload:{data:t,opts:e},opts:{reportType:n}},!0)},this.syncConfigToWorker=function(){if(s()){var e=t.configs,n=e.baseURL,o=e.shouldMerge,r=e.reportInTestMode,i=e.queueConfig,u={baseURL:n,shouldMerge:"function"==typeof o?o():o,reportInTestMode:"function"==typeof r?r():r,queueConfig:{maxInBatch:i.maxInBatch,maxSize:i.maxSize}};a.a.postMessageToWorker({type:"adapterConfig",payload:u,opts:{adapterName:t.adapterName}})}}},X=new Q;function Z(t){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Y,$,tt=(Y=function(t,e){return(Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Y(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),et=new(function(t){function e(){var e=t.call(this)||this;return e.adapterName=f.HUATUO,e.configs={baseURL:"https://report.idqqimg.com/node_b/speedreport?",shouldMerge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},reportInTestMode:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},queueConfig:{sourceKey:"huatuo_queue_v3",pendingKey:"huatuo_pending_v3",maxInBatch:20,maxSize:10},methods:15,postFormat:"FORM-DATA"},e.transToURL=function(t,n){var o,i,a=t||[];"object"!==Z(t)||Object(r.f)(t)||(a=[t]);var s=[];if(!a.length)return[];for(var u in o=e.exractData(a))o.hasOwnProperty(u)&&(i={flag1:o[u].flag1,flag2:o[u].flag2,flag3:o[u].flag3,apn:n.envInfo.apn,appid:o[u].appid,platform:n.envInfo.platform},Object.assign(i,o[u].timingObj),s.push(e.configs.baseURL+Object(r.m)(i)));return s},e}return tt(e,t),e.prototype.exractData=function(t){var e=t||[],n=null,o="";if(e.length){n={};for(var r=0;r<e.length;r++)n[o=e[r].flag1+"_"+e[r].flag2+"_"+e[r].flag3+e[r].appid]||(n[o]={flag1:e[r].flag1,flag2:e[r].flag2,flag3:e[r].flag3,appid:e[r].appid,timingObj:{}}),n[o].timingObj[e[r].id]=e[r].timing}return n},e}(Q)),nt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ot=new(function(t){function e(){var e=t.call(this)||this;return e.adapterName=f.MONITOR,e.configs={baseURL:h?"https://docrp.weixin.qq.com/report/node_b/monitorreport?monitors=":"https://report.idqqimg.com/node_b/monitorreport?monitors=",shouldMerge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},reportInTestMode:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},queueConfig:{sourceKey:"monitor_queue_v3",pendingKey:"monitor_pending_v3",maxInBatch:100,maxSize:10},methods:15,postFormat:"FORM-DATA"},e.transToURL=function(t){var n=[];return"number"==typeof t?n.push(t):Object(r.f)(t)&&(n=t),n.length&&e.configs?e.configs.baseURL+"["+n+"]":""},e}return nt(e,t),e}(Q)),rt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),it=new(function(t){function e(){var e=t.call(this)||this;return e.adapterName=f.RETCODE,e.configs={baseURL:h?"https://docrp.weixin.qq.com/report/node_b/retcodereport?":"https://report.idqqimg.com/node_b/retcodereport?",shouldMerge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},reportInTestMode:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},queueConfig:{sourceKey:"retcode_queue_v3",pendingKey:"retcode_pending_v3",maxInBatch:20,maxSize:10},methods:15,postFormat:"FORM-DATA"},e.keyList=["domain","cgi","type","code","time","rate","uin","apn","device","signalStrength","expansion1","expansion2","expansion3","data","platform","appid"],e.transToURL=function(t,n){var o,i="",a=[];if(Object(r.f)(t))for(o=0;o<t.length;o++)a.push(e.extractData(t[o],o+1));else a.push(e.extractData(t,1));return a.length>0?(i=e.configs.baseURL+"key="+encodeURIComponent(e.keyList.join(",")),i+="&"+a.join("&")):i},e}return rt(e,t),e.prototype.extractData=function(t,e){for(var n=[],o=0;o<this.keyList.length;o++)n.push(e+"_"+(o+1)+"="+encodeURIComponent(t[this.keyList[o]]));if(n.length>0)return n.join("&")},e}(Q)),at=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),st=new(function(t){function e(){var e=t.call(this)||this;return e.adapterName=f.TDBANK,e.configs={baseURL:"https://report.idqqimg.com/node_b/tdbankreport?",shouldMerge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},reportInTestMode:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},queueConfig:{sourceKey:"tdbank_queue_v3",pendingKey:"tdbank_pending_v3",maxInBatch:20,maxSize:10},methods:15,postFormat:"FORM-DATA"},e.transToURL=function(t,n){var o,i,a,s=t||[],u=[],c={};if(Object(r.f)(s)){o=s.length;for(var f=0;f<o;f++)c[a=(i=s[f]).tdbank_table&&i.tdbank_busi_id?i.tdbank_table+"|"+i.tdbank_busi_id:i.table_id+"|"+i.busi_id]||(c[a]=[]),c[a].push(i);for(var p in c)c.hasOwnProperty(p)&&u.push(e.getItemURL(c[p],n));return u}return e.getItemURL([s],n)},e}return at(e,t),e.prototype.getItemURL=function(t,e){var n,o,i,a=[],s=[],u={},c={tdbank_busi_id:!0,tdbank_table:!0,busi_id:!0,table_id:!0};return function(){var e,n,r,f,p=1,l=[];for(e=0;e<t.length;e++)for(r in f=t[e],o=t[e].tdbank_table||t[e].table_id,i=t[e].tdbank_busi_id||t[e].busi_id,f)if(f.hasOwnProperty(r)){if(c[r])continue;if(u[r])continue;u[r]=p++,a.push(r)}for(e=0;e<t.length;e++){for(f=t[e],l=new Array(a.length),n=0;n<a.length;n++)l[n]=void 0===f[a[n]]?"":f[a[n]];s.push(l)}}(),t&&0!==t.length?(n={table_id:o,busi_id:i,fields:JSON.stringify(a),datas:JSON.stringify(s)},n=this.configs.baseURL+Object(r.m)(n)):""},e}(Q)),ut=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ct=function(){return(ct=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},ft=new(function(t){function e(){var e=t.call(this)||this;return e.adapterName=f.TDW,e.configs={baseURL:h?"https://docrp.weixin.qq.com/report/node_b/tdwreport?":"https://report.idqqimg.com/node_b/tdwreport?",shouldMerge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},reportInTestMode:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},queueConfig:{sourceKey:"tdw_queue_v3",pendingKey:"tdw_pending_v3",maxInBatch:20,maxSize:10},methods:15,postFormat:"FORM-DATA"},e.transToURL=function(t,n){var o,i,a=t||[],s=ct({timeField:"t"},n),u=[],c={};if(Object(r.f)(a)){o=a.length;for(var f=0;f<o;f++)c[(i=a[f]).table]||(c[i.table]=[]),c[i.table].push(i);for(var p in c)c.hasOwnProperty(p)&&u.push(e.getItemURL(c[p],p,s));return u}return e.getItemURL([a],a.table,s)},e}return ut(e,t),e.prototype.getItemURL=function(t,e,n){var o,i=[],a=[],s={},u={};return delete t.table,u[n.timeField]=!0,function(){var e,n,o,r,c=1,f=[];for(e=0;e<t.length;e++)for(o in r=t[e])if(r.hasOwnProperty(o)){if(u[o])continue;if(s[o])continue;s[o]=c++,i.push(o)}for(e=0;e<t.length;e++){for(r=t[e],f=new Array(i.length),n=0;n<i.length;n++)f[n]=void 0===r[i[n]]?"":r[i[n]];a.push(f)}}(),t&&0!==t.length?(o={table:e,fields:JSON.stringify(i),datas:JSON.stringify(a),pr_t:n.timeField},o=this.configs.baseURL+Object(r.m)(o)):""},e}(Q)),pt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),lt=new(function(t){function e(){var e=t.call(this)||this;return e.adapterName=f.BEACON,e.configs={baseURL:"https://otheve.beacon.qq.com/analytics/upload?tp=js",shouldMerge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},reportInTestMode:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},queueConfig:{sourceKey:"beacon_queue_v3",pendingKey:"beacon_pending_v3",maxInBatch:20,maxSize:10},methods:4,postFormat:"JSON"},e.buildData=function(t,e){var n;if(Object(r.f)(t)){var o=t;if(o.length<2)return o;for(var i={},a=0;a<o.length;a++){var s=o[a],u=s.appkey;i[u]?(n=i[u].msgs[0].data.events).push.apply(n,s.msgs[0].data.events):i[u]=s}return Object.keys(i).map((function(t){return i[t]}))}return[t]},e}return pt(e,t),e}(Q)),dt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();!function(t){t.STATUS="status",t.VALUE="value"}($||($={}));var ht,gt,yt,mt,vt=new(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.adapterName=f.ZZS,e.configs={baseURL:h?"https://docrp.weixin.qq.com/report/node_b/zzsreport":"https://report.idqqimg.com/node_b/zzsreport",shouldMerge:function(){return!1},reportInTestMode:function(){return!1},queueConfig:{sourceKey:"zzs_queue_v3",pendingKey:"zzs_pending_v3",maxInBatch:100,maxSize:100},methods:4,postFormat:"JSON"},e.buildData=function(t){var n,o,i,a,s,u,c,f=t;return Object(r.f)(t)||(f=[t]),{domain:null===(n=f[0])||void 0===n?void 0:n.domain,tenant:null===(o=f[0])||void 0===o?void 0:o.tenant,third:null===(i=f[0])||void 0===i?void 0:i.third,platform:null===(a=f[0])||void 0===a?void 0:a.platform,source:null===(s=f[0])||void 0===s?void 0:s.source,version:null===(u=f[0])||void 0===u?void 0:u.version,env:null===(c=f[0])||void 0===c?void 0:c.env,datas:f.map((function(t){var n,o=e.getDataFieldsWithType(t.type).map((function(e){var n;return null!=(n=t[e])?n:""})),r=[(n=t.errmsg,null!=n?n:"")];return t.dimensions&&(r=r.concat(t.dimensions)),o.push(r),o}))}},e}return dt(e,t),e.prototype.getDataFieldsWithType=function(t){switch(t){case $.VALUE:return["project","type","attrid","value"];case $.STATUS:default:return["project","type","attrid","status"]}},e}(Q)),bt=new(function(){function t(){}return t.prototype.getAdapterByName=function(t){switch(t){case f.HUATUO:return et;case f.MONITOR:return ot;case f.RETCODE:return it;case f.TDBANK:return st;case f.TDW:return ft;case f.BEACON:return lt;case f.ZZS:return vt;default:return X}},t.prototype.getAdapterBySourceKey=function(t){switch(t){case et.configs.queueConfig.sourceKey:return et;case ot.configs.queueConfig.sourceKey:return ot;case it.configs.queueConfig.sourceKey:return it;case st.configs.queueConfig.sourceKey:return st;case ft.configs.queueConfig.sourceKey:return ft;case lt.configs.queueConfig.sourceKey:return lt;case vt.configs.queueConfig.sourceKey:return vt;default:return X}},t}()),Ot=0;function Tt(t){var e=Object(r.c)()-gt;if(gt&&e>ht.holdTime||t){if(Ot>=ht.maxReport)return;if(t?Object(i.b)("卡顿上报，主线程超时没有回包，要求回包时间："+ht.holdTime+"ms"):Object(i.b)("卡顿上报，worker 通信耗时："+e),Ot++,ht.monitor&&ot.report(ht.monitor,{}),ht.tdw){var n={};n.table=ht.tdw.table,n[ht.tdw.key]=e,Object(r.l)(n,ht.tdw),ft.report(n,{})}Ot===ht.maxReport&&clearInterval(yt)}}var Dt=function(t,e){if(e.init)return ht=t,void(yt=setInterval((function(){gt=Object(r.c)(),mt=setTimeout((function(){Tt(!0)}),ht.holdTime),wt.postMessageToMain({type:"jank"})}),1e3*ht.interval));e.stop?clearInterval(yt):(clearTimeout(mt),Tt())},St=function(){function t(){var t=this;this.worker=self,this.postMessageToMain=function(e){t.worker.postMessage(e)},this.receiveMessageFromMain=function(e){for(var n,o=(n=t.isNativeMP?e:e.data).length,r=0;r<o;r++){var i=n[r];t.handleMessageFromMain(i)}},this.handleMessageFromMain=function(e){var n=e.type,r=e.payload,i=e.opts;switch(n){case"api":t.handleMessageFromAPI(r,i);break;case"config":t.handleMessageFromConfig(r,i);break;case"adapterConfig":t.handleMessageFromAdapterConfig(r,i);break;case"hooks":t.handleMessageFromHooks(r,i);break;case"online":o.b.trigger("workerOnline",r);break;case"offline":o.b.trigger("workerOffline",r);break;case"apiWorker":t.handleMessageFromAPIWorker(r,i);break;default:o.b.trigger(e.type,e)}},this.handleMessageFromAPI=function(t,e){var n=e&&e.reportType||"auto",o=t&&t.opts&&t.opts.name;if(o){var r=bt.getAdapterByName(o),i=t.data,a=t.opts,s=t.isImmediately;switch(n){case"auto":r.report(i,a,s);break;case"common":r.commonReport(i,a,s);break;case"merge":r.mergeReport(i,a)}}},this.handleMessageFromHooks=function(t,e){"add"===t.action?A.addHooks(t.name,(function(){})):"remove"===t.action&&A.removeHooks(t.name,(function(){}))},this.handleMessageFromConfig=function(t,e){g.reset(t)},this.handleMessageFromAdapterConfig=function(t,e){var n=e&&e.adapterName;n&&bt.getAdapterByName(n).resetConfig(t)},this.handleMessageFromAPIWorker=function(t,e){e&&"jank"===e.reportType&&Dt(t.data,t.opts)},this.worker?(this.isNativeMP=Object(r.g)(),this.init()):Object(i.a)("初始化 Worker 出错")}return t.prototype.init=function(){self.onmessage=this.receiveMessageFromMain,self.onmessageerror=function(t){Object(i.a)(t)}},t}(),wt=e.default=new St}])}]);',n.p+"da1c9cccb1f2d79ed30a.worker.js")}},function(t,e,n){"use strict";n.r(e);var o=n(13);n.d(e,"monitor",(function(){return o.c})),n.d(e,"retcode",(function(){return o.d})),n.d(e,"tdbank",(function(){return o.e})),n.d(e,"tdw",(function(){return o.f})),n.d(e,"zzs",(function(){return o.g})),n.d(e,"huatuo",(function(){return o.b})),n.d(e,"AlloyReport",(function(){return o.a}))},function(t,e,n){(function(t){try{!function(){if(t&&t.process&&t.process.argv&&t.process.argv.length){var e=t.process.argv,n=e&&e[0]&&e[0].toLocaleLowerCase&&e[0].toLocaleLowerCase();n&&-1!==n.indexOf("node")&&(t.isNodePlatform=!0,t.window=null)}}()}catch(t){}}).call(this,n(14))},function(t,e){"function"!=typeof Object.assign&&(Object.assign=function(t){"use strict";if(!t)throw new TypeError("Cannot convert undefined or null to object");t=Object(t);for(var e=1;e<arguments.length;e++){var n=arguments[e];if(n)for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t})},function(t,e){},function(t,e){var n,o,r=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(t){o=a}}();var u,c=[],f=!1,p=-1;function l(){f&&u&&(f=!1,u.length?c=u.concat(c):p=-1,c.length&&d())}function d(){if(!f){var t=s(l);f=!0;for(var e=c.length;e;){for(u=c,c=[];++p<e;)u&&u[p].run();p=-1,e=c.length}u=null,f=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function g(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new h(t,e)),1!==c.length||f||s(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,n){"use strict";var o=window.URL||window.webkitURL;t.exports=function(t,e){try{try{var n;try{(n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(t),n=n.getBlob()}catch(e){n=new Blob([t])}return new Worker(o.createObjectURL(n))}catch(e){return new Worker("data:application/javascript,"+encodeURIComponent(t))}}catch(t){if(!e)throw Error("Inline worker is not supported");return new Worker(e)}}},function(t,e,n){(function(t){!function(){var e;function n(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}var o="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},r="undefined"!=typeof window&&window===this?this:void 0!==t&&null!=t?t:this;function i(){i=function(){},r.Symbol||(r.Symbol=c)}function a(t,e){this.s=t,o(this,"description",{configurable:!0,writable:!0,value:e})}a.prototype.toString=function(){return this.s};var s,u,c=(s=0,function t(e){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new a("jscomp_symbol_"+(e||"")+"_"+s++,e)});function f(){i();var t=r.Symbol.iterator;t||(t=r.Symbol.iterator=r.Symbol("Symbol.iterator")),"function"!=typeof Array.prototype[t]&&o(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return function(t){return f(),(t={next:t})[r.Symbol.iterator]=function(){return this},t}(n(this))}}),f=function(){}}function p(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:n(t)}}if("function"==typeof Object.setPrototypeOf)u=Object.setPrototypeOf;else{var l;t:{var d={};try{d.__proto__={v:!0},l=d.v;break t}catch(t){}l=!1}u=l?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var h=u;function g(){this.h=!1,this.c=null,this.o=void 0,this.b=1,this.m=this.w=0,this.g=null}function m(t){if(t.h)throw new TypeError("Generator is already running");t.h=!0}function y(t,e,n){return t.b=n,{value:e}}function v(t){for(var e in this.C=t,this.l=[],t)this.l.push(e);this.l.reverse()}function b(t){this.a=new g,this.D=t}function O(t,e,n,o){try{var r=e.call(t.a.c,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return t.a.h=!1,r;var i=r.value}catch(e){return t.a.c=null,t.a.j(e),w(t)}return t.a.c=null,o.call(t.a,i),w(t)}function w(t){for(;t.a.b;)try{var e=t.D(t.a);if(e)return t.a.h=!1,{value:e.value,done:!1}}catch(e){t.a.o=void 0,t.a.j(e)}if(t.a.h=!1,t.a.g){if(e=t.a.g,t.a.g=null,e.B)throw e.A;return{value:e.return,done:!0}}return{value:void 0,done:!0}}function T(t){this.next=function(e){return t.i(e)},this.throw=function(e){return t.j(e)},this.return=function(e){return function(t,e){m(t.a);var n=t.a.c;return n?O(t,"return"in n?n.return:function(t){return{value:t,done:!0}},e,t.a.return):(t.a.return(e),w(t))}(t,e)},f(),this[Symbol.iterator]=function(){return this}}function S(t,e){var n=new T(new b(e));return h&&h(n,t.prototype),n}if(g.prototype.i=function(t){this.o=t},g.prototype.j=function(t){this.g={A:t,B:!0},this.b=this.w||this.m},g.prototype.return=function(t){this.g={return:t},this.b=this.m},b.prototype.i=function(t){return m(this.a),this.a.c?O(this,this.a.c.next,t,this.a.i):(this.a.i(t),w(this))},b.prototype.j=function(t){return m(this.a),this.a.c?O(this,this.a.c.throw,t,this.a.i):(this.a.j(t),w(this))},"undefined"!=typeof Blob&&("undefined"==typeof FormData||!FormData.prototype.keys)){var D=function(t,e){for(var n=0;n<t.length;n++)e(t[n])},R=function(t,e,n){return e instanceof Blob?[String(t),e,void 0!==n?n+"":"string"==typeof e.name?e.name:"blob"]:[String(t),String(e)]},j=function(t,e){if(t.length<e)throw new TypeError(e+" argument required, but only "+t.length+" present.")},I=function(t){var e=p(t);return t=e.next().value,e=e.next().value,t instanceof Blob&&(t=new File([t],e,{type:t.type,lastModified:t.lastModified})),t},_="object"==typeof window?window:"object"==typeof self?self:this,E=_.FormData,x=_.XMLHttpRequest&&_.XMLHttpRequest.prototype.send,C=_.Request&&_.fetch,L=_.navigator&&_.navigator.sendBeacon;i();var B=_.Symbol&&Symbol.toStringTag;B&&(Blob.prototype[B]||(Blob.prototype[B]="Blob"),"File"in _&&!File.prototype[B]&&(File.prototype[B]="File"));try{new File([],"")}catch(t){_.File=function(t,e,n){return t=new Blob(t,n),n=n&&void 0!==n.lastModified?new Date(n.lastModified):new Date,Object.defineProperties(t,{name:{value:e},lastModifiedDate:{value:n},lastModified:{value:+n},toString:{value:function(){return"[object File]"}}}),B&&Object.defineProperty(t,B,{value:"File"}),t}}i(),f();var k=function(t){if(this.f=Object.create(null),!t)return this;var e=this;D(t.elements,(function(t){if(t.name&&!t.disabled&&"submit"!==t.type&&"button"!==t.type)if("file"===t.type){var n=t.files&&t.files.length?t.files:[new File([],"",{type:"application/octet-stream"})];D(n,(function(n){e.append(t.name,n)}))}else"select-multiple"===t.type||"select-one"===t.type?D(t.options,(function(n){!n.disabled&&n.selected&&e.append(t.name,n.value)})):"checkbox"===t.type||"radio"===t.type?t.checked&&e.append(t.name,t.value):(n="textarea"===t.type?t.value.replace(/\r\n/g,"\n").replace(/\n/g,"\r\n"):t.value,e.append(t.name,n))}))};if((e=k.prototype).append=function(t,e,n){j(arguments,2);var o=p(R.apply(null,arguments));t=o.next().value,e=o.next().value,n=o.next().value,(o=this.f)[t]||(o[t]=[]),o[t].push([e,n])},e.delete=function(t){j(arguments,1),delete this.f[String(t)]},e.entries=function t(){var e,n,o,r,i,a,s=this;return S(t,(function(t){switch(t.b){case 1:e=s.f,o=new v(e);case 2:var u;t:{for(u=o;0<u.l.length;){var c=u.l.pop();if(c in u.C){u=c;break t}}u=null}if(null==(n=u)){t.b=0;break}r=p(e[n]),i=r.next();case 5:if(i.done){t.b=2;break}return a=i.value,y(t,[n,I(a)],6);case 6:i=r.next(),t.b=5}}))},e.forEach=function(t,e){j(arguments,1);for(var n=p(this),o=n.next();!o.done;o=n.next()){var r=p(o.value);o=r.next().value,r=r.next().value,t.call(e,r,o,this)}},e.get=function(t){j(arguments,1);var e=this.f;return e[t=String(t)]?I(e[t][0]):null},e.getAll=function(t){return j(arguments,1),(this.f[String(t)]||[]).map(I)},e.has=function(t){return j(arguments,1),String(t)in this.f},e.keys=function t(){var e,n,o,r=this;return S(t,(function(t){if(1==t.b&&(e=p(r),n=e.next()),3!=t.b)return n.done?void(t.b=0):(o=n.value,y(t,p(o).next().value,3));n=e.next(),t.b=2}))},e.set=function(t,e,n){j(arguments,2);var o=R.apply(null,arguments);this.f[o[0]]=[[o[1],o[2]]]},e.values=function t(){var e,n,o,r,i=this;return S(t,(function(t){if(1==t.b&&(e=p(i),n=e.next()),3!=t.b)return n.done?void(t.b=0):(o=n.value,(r=p(o)).next(),y(t,r.next().value,3));n=e.next(),t.b=2}))},k.prototype._asNative=function(){for(var t=new E,e=p(this),n=e.next();!n.done;n=e.next()){var o=p(n.value);n=o.next().value,o=o.next().value,t.append(n,o)}return t},k.prototype._blob=function(){for(var t="----formdata-polyfill-"+Math.random(),e=[],n=p(this),o=n.next();!o.done;o=n.next()){var r=p(o.value);o=r.next().value,r=r.next().value,e.push("--"+t+"\r\n"),r instanceof Blob?e.push('Content-Disposition: form-data; name="'+o+'"; filename="'+r.name+'"\r\n',"Content-Type: "+(r.type||"application/octet-stream")+"\r\n\r\n",r,"\r\n"):e.push('Content-Disposition: form-data; name="'+o+'"\r\n\r\n'+r+"\r\n")}return e.push("--"+t+"--"),new Blob(e,{type:"multipart/form-data; boundary="+t})},k.prototype[Symbol.iterator]=function(){return this.entries()},k.prototype.toString=function(){return"[object FormData]"},B&&(k.prototype[B]="FormData"),x){var A=_.XMLHttpRequest.prototype.setRequestHeader;_.XMLHttpRequest.prototype.setRequestHeader=function(t,e){A.call(this,t,e),"content-type"===t.toLowerCase()&&(this.u=!0)},_.XMLHttpRequest.prototype.send=function(t){t instanceof k?(t=t._blob(),this.u||this.setRequestHeader("Content-Type",t.type),x.call(this,t)):x.call(this,t)}}if(C){var M=_.fetch;_.fetch=function(t,e){return e&&e.body&&e.body instanceof k&&(e.body=e.body._blob()),M.call(this,t,e)}}L&&(_.navigator.sendBeacon=function(t,e){return e instanceof k&&(e=e._asNative()),L.call(this,t,e)}),_.FormData=k}}()}).call(this,n(14))}])}));