self.window=self,window.jsExecStartTimeStamp=Date.now(),(self.webpackChunk_tencent_alloy_builder=self.webpackChunk_tencent_alloy_builder||[]).push([["vendors-node_modules_tencent_facade-config_dist_index_js"],{"../node_modules/@tencent/facade-config/dist/index.js":function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return F}});var n=r("../node_modules/@tencent/tab_js_sdk/dist/abt_jssdk.min.js");function o(e){return function(t,r){console[e](t,r)}}var i=o("info"),a=(o("warn"),o("error"));function s(e){return void 0===e&&(e={}),function(t,r,n){var o=n.value;return n.value=function(){for(var t,n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];try{t=o.apply(this,n),i('FACADE: "'+r+'" - '+(e.succMsg||"方法成功"),t)}catch(u){t=e.failValue,a('FACADE: "'+r+'" - '+(e.failMsg||"方法报错"),t)}return t},n}}var u="injection:paramtypes";function c(e){return void 0===e&&(e=[]),function(t){if(Reflect.hasOwnMetadata(u,t))return console.error("FACADE: Component Decorator Error"),t;var r=(Array.isArray(e)&&e.length?e:[]).map((function(e){return e.useService}));return Reflect.defineMetadata(u,r,t),t}}function f(e){return void 0===e&&(e=[]),function(t){if(Reflect.hasOwnMetadata(u,t))return console.error("FACADE: Service Decorator Error"),t;var r=Array.isArray(e)&&e.length?e:[];return Reflect.defineMetadata(u,r,t),t}}var l,p=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},d=function(){function e(){}return e.prototype.reportInfo=function(e,t){console.info(e,t)},e.prototype.reportWarn=function(e,t){console.warn(e,t)},e.prototype.reportError=function(e,t){console.error(e,t)},e=p([f()],e)}(),h=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},v=function(){function e(){}return e.prototype.getUid=function(){var e,t=window||{},r=t.global_multi_user,n=t.clientVars,o=null===r||void 0===r?void 0:r.uid;if(o)return o;var i=null===(e=null===n||void 0===n?void 0:n.userInfo)||void 0===e?void 0:e.uid;if(i)return i;var a=(null===n||void 0===n?void 0:n.tinyId)||(null===n||void 0===n?void 0:n.tinyid);return a||this.getCookie("uid")},e.prototype.getCookie=function(e){var t=new RegExp("(?:^|;+|\\s+)"+e+"=([^;]*)"),r="object"===typeof document&&document.cookie.match(t);return r?r[1]:""},e=h([f()],e)}(),g=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},y=function(){function e(){}return e.prototype.get=function(e){return JSON.parse(window.localStorage.getItem(e))},e.prototype.set=function(e,t){window.localStorage.setItem(e,JSON.stringify(t))},e.prototype.del=function(e){window.localStorage.removeItem(e)},e=g([f()],e)}(),m={appid:"170002",appkey:"afa2328c1739488edb7f5efb9cd604a2"},b={grayId:0,assignment:"default",layerCode:"0",params:{}},E=function(){return E=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},E.apply(this,arguments)},w=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},_=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},S=function(){function e(e,t,r){var o=this;this.reportService=e,this.tokenService=t,this.storageService=r,this._hasTabInit=!1,this.initTabSystem=function(e,t){if(o._hasTabInit)return n.setProfiles(e.profiles),void n.forceReload();n.init(E({timeout:2e3,onNetData:function(e){o.reportService.reportInfo("FACADE: [Tab.onNetData]:",e),t(e)},onInit:function(e){o.reportService.reportInfo("FACADE: [Tab.onInit]",e)},onFail:function(e){o.reportService.reportError("FACADE: [Tab.onFail]",e)}},e)),o._hasTabInit=!0}}return e.prototype.start=function(e,t){var r=E(E(E({},m),{guid:this.tokenService.getUid()}),e);this.reportService.reportInfo("FACADE: [TAB 初始化参数]~~",r),r.guid?(this._cachedAppId=r.appid,this.initTabSystem(r,t||function(){})):this.reportService.reportWarn("FACADE: [TAB guid为空不初始化实验, 防止实验随机分桶]~~",r)},e.prototype.getRemoteExp=function(e){return n.getExpByName(e)},e.prototype.getCachedExp=function(e){var t=this.storageService.get(this._cachedKeyOfExps);return(null===t||void 0===t?void 0:t[e])?t[e]:n.getCachedExpByName(e)},e.prototype.report=function(e){n.reportExpExpose(e)},Object.defineProperty(e.prototype,"_cachedKeyOfExps",{get:function(){return this._cachedAppId+"_default_experimentInfo"},enumerable:!1,configurable:!0}),w([s({succMsg:"获取缓存成功",failMsg:"获取缓存失败，使用fallback",failValue:b}),_("design:type",Function),_("design:paramtypes",[String]),_("design:returntype",Object)],e.prototype,"getCachedExp",null),e=w([c([{useService:d},{useService:v},{useService:y}]),_("design:paramtypes",[Object,Object,Object])],e)}(),O=r("../node_modules/@tencent/toggle-client-js/dist/toggle.es.js");!function(e){e.OPENED="true",e.CLOSED="false"}(l||(l={}));var x={productKey:"c5ba6204-b619-4b64-91c3-d93e5b1bd3f1",productEn:"TencentDoc",productId:"ba27e082-1819-4dde-bfae-8c2f93bb1d24",moduleId:"90",version:"1.0.0",debug:!1},T={dataset:{},datasetId:0,toggleValue:!1,versionId:0},I={id:0,name:"获取Toggle Features报错",value:l.CLOSED,version:"0"},A=function(){return A=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},A.apply(this,arguments)},D=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},R=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},P=function(){function e(e,t){this.reportService=e,this.tokenService=t}return e.prototype.isEnabled=function(e,t){return void 0===t&&(t=!1),!!this.instance.isEnabled(e,this.toggleContext,t)},e.prototype.getToggleResult=function(e,t){return void 0===t&&(t=!1),this.instance.isEnabledWithDataset(e,this.toggleContext,t)},e.prototype.on=function(e,t){this.instance.on(e,t||function(){})},e.prototype.getFeature=function(e){return this.instance.getFeature(e)},e.prototype.start=function(e,t){var r=this.prepareStartToggleParams(e),n=r.initEnv,o=r.context,i=r.toggleContext;this.toggleContext=i,this.instance=O.j2(n,o),this.instance?(this.instance.loadCache(),this.addDefaultListener(t||function(){})):this.reportService.reportError("FACADE: [Feature Toggle系统没有初始化成功]~~",this.instance)},e.prototype.addDefaultListener=function(e){var t=this;this.instance.on("ready",(function(r){e(r),t.reportService.reportInfo("FACADE: [Toggle.Ready]:",r)})),this.instance.on("warn",(function(e){t.reportService.reportWarn("FACADE: [Toggle.Warn]:",e)})),this.instance.on("error",(function(e){t.reportService.reportError("FACADE: [Toggle.Error]:",e)}))},e.prototype.prepareStartToggleParams=function(e){var t=A(A(A({},x),{userId:this.tokenService.getUid()}),e);this.reportService.reportWarn("FACADE: [Feature Toggle 初始化参数]~~",t);var r=t.productKey,n=t.productEn,o=t.productId,i=t.moduleId,a=t.userId,s=t.version,u=void 0===s?"0.0.0":s,c=t.debug;return{initEnv:void 0!==c&&c?O.mX:O.Lc,context:{productKey:r,productEn:n,productId:o,moduleId:i,version:u},toggleContext:(null===a||void 0===a?void 0:a.length)?{userId:a}:null}},D([s({succMsg:"[获取远端Toggle策略状态~~成功]",failMsg:"[获取远端Toggle策略状态~~失败]",failValue:!1}),R("design:type",Function),R("design:paramtypes",[String,Object]),R("design:returntype",Boolean)],e.prototype,"isEnabled",null),D([s({succMsg:"[获取远端Toggle策略结果~~成功]",failMsg:"[获取远端Toggle策略结果~~失败]",failValue:T}),R("design:type",Function),R("design:paramtypes",[String,Object]),R("design:returntype",Object)],e.prototype,"getToggleResult",null),D([s({succMsg:"[获取远端Toggle特性参数~~成功]",failMsg:"[获取远端Toggle特性参数~~失败]",failValue:I}),R("design:type",Function),R("design:paramtypes",[String]),R("design:returntype",Object)],e.prototype,"getFeature",null),e=D([c([{useService:d},{useService:v}]),R("design:paramtypes",[Object,Object])],e)}();function k(e){return function(t,r,n){var o=n.value;return n.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var s=null,u=(new Date).toString();try{s=o.apply(this,t)}catch(f){a(f)}var c=(new Date).toString();return i("关键字: "+e+' - 始于: "'+u+'", 止于: "'+c+'"','调用的是 "'+r+'" 方法'),s},n}}var C=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},j=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},L=function(){function e(e,t){this.tabExpComponent=e,this.toggleComponent=t}var t;return Object.defineProperty(e.prototype,"tab",{get:function(){return this.tabExpComponent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"toggle",{get:function(){return this.toggleComponent},enumerable:!1,configurable:!0}),e.prototype.initToggle=function(e,t){this.toggleComponent.start(e,t)},e.prototype.initTabExp=function(e,t){this.tabExpComponent.start(e,t)},C([k("Init Toggle"),j("design:type",Function),j("design:paramtypes",[Object,Function]),j("design:returntype",void 0)],e.prototype,"initToggle",null),C([k("Init TAB"),j("design:type",Function),j("design:paramtypes",[Object,Function]),j("design:returntype",void 0)],e.prototype,"initTabExp",null),e=C([(t=[{useComponent:S},{useComponent:P}],void 0===t&&(t=[]),function(e){if(Reflect.hasOwnMetadata(u,e))return console.error("FACADE: Module Decorator Error"),e;var r=(Array.isArray(t)&&t.length?t:[]).map((function(e){return e.useComponent}));return Reflect.defineMetadata(u,r,e),e}),j("design:paramtypes",[Object,Object])],e)}(),N=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},M=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},B=function(e){var t=Reflect.getMetadata(u,e).map((function(e){return(Reflect.getMetadata(u,e)||[]).length?B(e):new e}));return new(e.bind.apply(e,M([void 0],N(t))))},F=B(L)},"../node_modules/@tencent/tab_js_sdk/dist/abt_jssdk.min.js":function(e){
/*! For license information please see abt_jssdk.min.js.LICENSE */
window,e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=77)}([function(e,t,r){"use strict";r.d(t,"E",(function(){return n})),r.d(t,"D",(function(){return o})),r.d(t,"c",(function(){return i})),r.d(t,"b",(function(){return a})),r.d(t,"j",(function(){return s})),r.d(t,"d",(function(){return u})),r.d(t,"a",(function(){return c})),r.d(t,"k",(function(){return f})),r.d(t,"z",(function(){return l})),r.d(t,"A",(function(){return p})),r.d(t,"C",(function(){return d})),r.d(t,"f",(function(){return h})),r.d(t,"i",(function(){return v})),r.d(t,"g",(function(){return g})),r.d(t,"B",(function(){return y})),r.d(t,"e",(function(){return m})),r.d(t,"h",(function(){return b})),r.d(t,"o",(function(){return E})),r.d(t,"q",(function(){return w})),r.d(t,"n",(function(){return _})),r.d(t,"l",(function(){return S})),r.d(t,"p",(function(){return O})),r.d(t,"m",(function(){return x})),r.d(t,"r",(function(){return T})),r.d(t,"v",(function(){return I})),r.d(t,"u",(function(){return A})),r.d(t,"y",(function(){return D})),r.d(t,"x",(function(){return R})),r.d(t,"w",(function(){return P})),r.d(t,"t",(function(){return k})),r.d(t,"s",(function(){return C}));var n="https://tdata.ab.qq.com/",o="https://data.ab.qq.com/",i=2e3,a=1,s=1e5,u="default",c="default",f="JS0B558T33E4YJ",l="04800015034",p="6299336879",d="_noqb_guid",h="experimentInfo",v="strategy",g="expHitMap",y="userId",m=6e4,b=1e3,E="ROMA_PLATFORM",w="ROMA_RESOLUTION",_="ROMA_DEV_BRAND",S="ROMA_DEV_MODEL",O="ROMA_PLATFORM_VER",x="ROMA_OS_MODEL",T="ROMA_SDK_VERSION",I=1,A="initLocal",D="syncRemote",R="switchUser",P="reload",k="getExpByName",C="ERROR_INFO"},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t,r){var n=r(30)("wks"),o=r(23),i=r(1).Symbol,a="function"==typeof i;(e.exports=function(e){return n[e]||(n[e]=a&&i[e]||(a?i:o)("Symbol."+e))}).store=n},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.r(t),r.d(t,"Logger",(function(){return o})),r.d(t,"DefaultLogger",(function(){return i}));var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.method=console.log,this.level=2}var t,r,o;return t=e,(r=[{key:"setMethod",value:function(e){this.method=e}},{key:"setLevel",value:function(e){this.level=e}},{key:"debug",value:function(e){this.level<=0&&this.method(e)}},{key:"info",value:function(e){this.level<=1&&this.method(e)}},{key:"error",value:function(e,t){this.level<=2&&(this.method(e),t&&this.method(t))}}])&&n(t.prototype,r),o&&n(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}(),i=new o},function(e,t,r){var n=r(5);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,r){e.exports=!r(10)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,r){var n=r(4),o=r(51),i=r(37),a=Object.defineProperty;t.f=r(6)?Object.defineProperty:function(e,t,r){if(n(e),t=i(t,!0),n(r),o)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return a})),r.d(t,"d",(function(){return s})),r(19),r(27),r(17),r(18),r(28),r(29),r(101);var n=r(0);function o(e,t,r){return{expName:t,assignment:n.a,grayId:e||n.b,layerCode:r||n.d,params:new Map}}function i(e){var t="";return Object.keys(e).forEach((function(r){""!==t&&(t+="&"),t+="".concat(r,"=").concat(e[r])})),t}function a(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function s(e){if(e){var t="";return e.forEach((function(e){t+="".concat(e.grayId,"#")})),t}return""}},function(e,t,r){var n=r(1),o=r(13),i=r(11),a=r(23)("src"),s=r(83),u=(""+s).split("toString");r(12).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,r,s){var c="function"==typeof r;c&&(i(r,"name")||o(r,"name",t)),e[t]!==r&&(c&&(i(r,a)||o(r,a,e[t]?""+e[t]:u.join(String(t)))),e===n?e[t]=r:s?e[t]?e[t]=r:o(e,t,r):(delete e[t],o(e,t,r)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[a]||s.call(this)}))},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t){var r=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=r)},function(e,t,r){var n=r(7),o=r(31);e.exports=r(6)?function(e,t,r){return n.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){"use strict";r.r(t);var n=r(3);r.d(t,"Logger",(function(){return n.Logger})),r.d(t,"DefaultLogger",(function(){return n.DefaultLogger}));var o=r(35);r.d(t,"SDKEventHandler",(function(){return o.a}));var i=r(0);r.d(t,"testBaseUrl",(function(){return i.E})),r.d(t,"baseUrl",(function(){return i.D})),r.d(t,"DefaultHttpTimeout",(function(){return i.c})),r.d(t,"DefaultGrayId",(function(){return i.b})),r.d(t,"ServerDefaultGrayId",(function(){return i.j})),r.d(t,"DefaultLayerCode",(function(){return i.d})),r.d(t,"DefaultAssignment",(function(){return i.a})),r.d(t,"TABBeaconAppKey",(function(){return i.k})),r.d(t,"TabAttaAppKey",(function(){return i.z})),r.d(t,"TabAttaAppToken",(function(){return i.A})),r.d(t,"UserIdLocal",(function(){return i.C})),r.d(t,"ExpData",(function(){return i.f})),r.d(t,"SDKStrategy",(function(){return i.i})),r.d(t,"HitExpMap",(function(){return i.g})),r.d(t,"UserId",(function(){return i.B})),r.d(t,"DefaultUpdateTime",(function(){return i.e})),r.d(t,"MaxReportParamLen",(function(){return i.h})),r.d(t,"TAB_PROFILE_KEY_PLATFORM",(function(){return i.o})),r.d(t,"TAB_PROFILE_KEY_RESO",(function(){return i.q})),r.d(t,"TAB_PROFILE_KEY_PBRAND",(function(){return i.n})),r.d(t,"TAB_PROFILE_KEY_MODEL",(function(){return i.l})),r.d(t,"TAB_PROFILE_KEY_PLATFORM_VER",(function(){return i.p})),r.d(t,"TAB_PROFILE_KEY_OSMODEL",(function(){return i.m})),r.d(t,"TAB_PROFILE_KEY_SDKVER",(function(){return i.r})),r.d(t,"TAB_SDK_EVENT_RATE",(function(){return i.v})),r.d(t,"TAB_SDK_EVENT_INITLOCAL",(function(){return i.u})),r.d(t,"TAB_SDK_EVENT_SYNCREMOTE",(function(){return i.y})),r.d(t,"TAB_SDK_EVENT_SWITCH_USER",(function(){return i.x})),r.d(t,"TAB_SDK_EVENT_RELOAD",(function(){return i.w})),r.d(t,"TAB_SDK_EVENT_GET_EXP_BYNAME",(function(){return i.t})),r.d(t,"TAB_SDK_EVENT_ERROR_INFO",(function(){return i.s}));var a=r(60);for(var s in a)["default","Logger","DefaultLogger","SDKEventHandler","testBaseUrl","baseUrl","DefaultHttpTimeout","DefaultGrayId","ServerDefaultGrayId","DefaultLayerCode","DefaultAssignment","TABBeaconAppKey","TabAttaAppKey","TabAttaAppToken","UserIdLocal","ExpData","SDKStrategy","HitExpMap","UserId","DefaultUpdateTime","MaxReportParamLen","TAB_PROFILE_KEY_PLATFORM","TAB_PROFILE_KEY_RESO","TAB_PROFILE_KEY_PBRAND","TAB_PROFILE_KEY_MODEL","TAB_PROFILE_KEY_PLATFORM_VER","TAB_PROFILE_KEY_OSMODEL","TAB_PROFILE_KEY_SDKVER","TAB_SDK_EVENT_RATE","TAB_SDK_EVENT_INITLOCAL","TAB_SDK_EVENT_SYNCREMOTE","TAB_SDK_EVENT_SWITCH_USER","TAB_SDK_EVENT_RELOAD","TAB_SDK_EVENT_GET_EXP_BYNAME","TAB_SDK_EVENT_ERROR_INFO"].indexOf(s)<0&&function(e){r.d(t,e,(function(){return a[e]}))}(s);var u=r(61);for(var s in u)["default","Logger","DefaultLogger","SDKEventHandler","testBaseUrl","baseUrl","DefaultHttpTimeout","DefaultGrayId","ServerDefaultGrayId","DefaultLayerCode","DefaultAssignment","TABBeaconAppKey","TabAttaAppKey","TabAttaAppToken","UserIdLocal","ExpData","SDKStrategy","HitExpMap","UserId","DefaultUpdateTime","MaxReportParamLen","TAB_PROFILE_KEY_PLATFORM","TAB_PROFILE_KEY_RESO","TAB_PROFILE_KEY_PBRAND","TAB_PROFILE_KEY_MODEL","TAB_PROFILE_KEY_PLATFORM_VER","TAB_PROFILE_KEY_OSMODEL","TAB_PROFILE_KEY_SDKVER","TAB_SDK_EVENT_RATE","TAB_SDK_EVENT_INITLOCAL","TAB_SDK_EVENT_SYNCREMOTE","TAB_SDK_EVENT_SWITCH_USER","TAB_SDK_EVENT_RELOAD","TAB_SDK_EVENT_GET_EXP_BYNAME","TAB_SDK_EVENT_ERROR_INFO"].indexOf(s)<0&&function(e){r.d(t,e,(function(){return u[e]}))}(s);var c=r(62);for(var s in c)["default","Logger","DefaultLogger","SDKEventHandler","testBaseUrl","baseUrl","DefaultHttpTimeout","DefaultGrayId","ServerDefaultGrayId","DefaultLayerCode","DefaultAssignment","TABBeaconAppKey","TabAttaAppKey","TabAttaAppToken","UserIdLocal","ExpData","SDKStrategy","HitExpMap","UserId","DefaultUpdateTime","MaxReportParamLen","TAB_PROFILE_KEY_PLATFORM","TAB_PROFILE_KEY_RESO","TAB_PROFILE_KEY_PBRAND","TAB_PROFILE_KEY_MODEL","TAB_PROFILE_KEY_PLATFORM_VER","TAB_PROFILE_KEY_OSMODEL","TAB_PROFILE_KEY_SDKVER","TAB_SDK_EVENT_RATE","TAB_SDK_EVENT_INITLOCAL","TAB_SDK_EVENT_SYNCREMOTE","TAB_SDK_EVENT_SWITCH_USER","TAB_SDK_EVENT_RELOAD","TAB_SDK_EVENT_GET_EXP_BYNAME","TAB_SDK_EVENT_ERROR_INFO"].indexOf(s)<0&&function(e){r.d(t,e,(function(){return c[e]}))}(s);var f=r(63);r.d(t,"LocalLoader",(function(){return f.a}));var l=r(66);r.d(t,"RemoteLoader",(function(){return l.a}));var p=r(67);r.d(t,"EXP_EXPOSE_EVENT",(function(){return p.a})),r.d(t,"REPORT_KEY_EXPNAE",(function(){return p.d})),r.d(t,"REPORT_KEY_GRAYID",(function(){return p.f})),r.d(t,"REPORT_KEY_USERID",(function(){return p.m})),r.d(t,"REPORT_KEY_TABAPPID",(function(){return p.l})),r.d(t,"REPORT_KEY_SDKVER",(function(){return p.k})),r.d(t,"REPORT_KEY_FIRSTHIT",(function(){return p.e})),r.d(t,"REPORT_KEY_PLAT",(function(){return p.j})),r.d(t,"REPORT_KEY_UTYPE",(function(){return p.n})),r.d(t,"REPORT_KEY_LAYER",(function(){return p.g})),r.d(t,"REPORT_KEY_PERCENT",(function(){return p.i})),r.d(t,"REPORT_KEY_BUCKET",(function(){return p.b})),r.d(t,"REPORT_KEY_ENV",(function(){return p.c})),r.d(t,"REPORT_KEY_PARAMS",(function(){return p.h})),r.d(t,"TabReporter",(function(){return p.o}));var d=r(76);r.d(t,"TabSDK",(function(){return d.a}));var h=r(8);r.d(t,"defaultExp",(function(){return h.b})),r.d(t,"encodeParams",(function(){return h.c})),r.d(t,"createGuid",(function(){return h.a})),r.d(t,"generateExpIds",(function(){return h.d}))},function(e,t,r){var n=r(80),o=r(39);e.exports=function(e){return n(o(e))}},function(e,t,r){var n=r(32);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,r){"use strict";var n=r(46),o={};o[r(2)("toStringTag")]="z",o+""!="[object z]"&&r(9)(Object.prototype,"toString",(function(){return"[object "+n(this)+"]"}),!0)},function(e,t,r){"use strict";var n=r(93),o=r(55),i=r(24),a=r(15);e.exports=r(47)(Array,"Array",(function(e,t){this._t=a(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,o(1)):o(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])}),"values"),i.Arguments=i.Array,n("keys"),n("values"),n("entries")},function(e,t,r){"use strict";var n=r(78),o=r(57);e.exports=r(89)("Map",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=n.getEntry(o(this,"Map"),e);return t&&t.v},set:function(e,t){return n.def(o(this,"Map"),0===e?0:e,t)}},n,!0)},function(e,t,r){var n=r(52),o=r(42);e.exports=Object.keys||function(e){return n(e,o)}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t){e.exports=!1},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t){e.exports={}},function(e,t,r){var n=r(1),o=r(12),i=r(13),a=r(9),s=r(16),u=function(e,t,r){var c,f,l,p,d=e&u.F,h=e&u.G,v=e&u.S,g=e&u.P,y=e&u.B,m=h?n:v?n[t]||(n[t]={}):(n[t]||{}).prototype,b=h?o:o[t]||(o[t]={}),E=b.prototype||(b.prototype={});for(c in h&&(r=t),r)l=((f=!d&&m&&void 0!==m[c])?m:r)[c],p=y&&f?s(l,n):g&&"function"==typeof l?s(Function.call,l):l,m&&a(m,c,l,e&u.U),b[c]!=l&&i(b,c,p),g&&E[c]!=l&&(E[c]=l)};n.core=o,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,r){var n=r(7).f,o=r(11),i=r(2)("toStringTag");e.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},function(e,t,r){"use strict";var n=r(92)(!0);r(47)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})}))},function(e,t,r){for(var n=r(18),o=r(20),i=r(9),a=r(1),s=r(13),u=r(24),c=r(2),f=c("iterator"),l=c("toStringTag"),p=u.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=o(d),v=0;v<h.length;v++){var g,y=h[v],m=d[y],b=a[y],E=b&&b.prototype;if(E&&(E[f]||s(E,f,p),E[l]||s(E,l,y),u[y]=p,m))for(g in n)E[g]||i(E,g,n[g],!0)}},function(e,t,r){var n=r(48),o=r(20);r(100)("keys",(function(){return function(e){return o(n(e))}}))},function(e,t,r){var n=r(12),o=r(1),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:r(22)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,r){"use strict";var n,o,i,a,s=r(22),u=r(1),c=r(16),f=r(46),l=r(25),p=r(5),d=r(32),h=r(44),v=r(45),g=r(94),y=r(64).set,m=r(96)(),b=r(65),E=r(97),w=r(98),_=r(99),S=u.TypeError,O=u.process,x=O&&O.versions,T=x&&x.v8||"",I=u.Promise,A="process"==f(O),D=function(){},R=o=b.f,P=!!function(){try{var e=I.resolve(1),t=(e.constructor={})[r(2)("species")]=function(e){e(D,D)};return(A||"function"==typeof PromiseRejectionEvent)&&e.then(D)instanceof t&&0!==T.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(e){}}(),k=function(e){var t;return!(!p(e)||"function"!=typeof(t=e.then))&&t},C=function(e,t){if(!e._n){e._n=!0;var r=e._c;m((function(){for(var n=e._v,o=1==e._s,i=0,a=function(t){var r,i,a,s=o?t.ok:t.fail,u=t.resolve,c=t.reject,f=t.domain;try{s?(o||(2==e._h&&N(e),e._h=1),!0===s?r=n:(f&&f.enter(),r=s(n),f&&(f.exit(),a=!0)),r===t.promise?c(S("Promise-chain cycle")):(i=k(r))?i.call(r,u,c):u(r)):c(n)}catch(e){f&&!a&&f.exit(),c(e)}};r.length>i;)a(r[i++]);e._c=[],e._n=!1,t&&!e._h&&j(e)}))}},j=function(e){y.call(u,(function(){var t,r,n,o=e._v,i=L(e);if(i&&(t=E((function(){A?O.emit("unhandledRejection",o,e):(r=u.onunhandledrejection)?r({promise:e,reason:o}):(n=u.console)&&n.error&&n.error("Unhandled promise rejection",o)})),e._h=A||L(e)?2:1),e._a=void 0,i&&t.e)throw t.v}))},L=function(e){return 1!==e._h&&0===(e._a||e._c).length},N=function(e){y.call(u,(function(){var t;A?O.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})}))},M=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),C(t,!0))},B=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw S("Promise can't be resolved itself");(t=k(e))?m((function(){var n={_w:r,_d:!1};try{t.call(e,c(B,n,1),c(M,n,1))}catch(e){M.call(n,e)}})):(r._v=e,r._s=1,C(r,!1))}catch(e){M.call({_w:r,_d:!1},e)}}};P||(I=function(e){h(this,I,"Promise","_h"),d(e),n.call(this);try{e(c(B,this,1),c(M,this,1))}catch(e){M.call(this,e)}},(n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(43)(I.prototype,{then:function(e,t){var r=R(g(this,I));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=A?O.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&C(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new n;this.promise=e,this.resolve=c(B,e,1),this.reject=c(M,e,1)},b.f=R=function(e){return e===I||e===a?new i(e):o(e)}),l(l.G+l.W+l.F*!P,{Promise:I}),r(26)(I,"Promise"),r(56)("Promise"),a=r(12).Promise,l(l.S+l.F*!P,"Promise",{reject:function(e){var t=R(this);return(0,t.reject)(e),t.promise}}),l(l.S+l.F*(s||!P),"Promise",{resolve:function(e){return _(s&&this===a?I:this,e)}}),l(l.S+l.F*!(P&&r(58)((function(e){I.all(e).catch(D)}))),"Promise",{all:function(e){var t=this,r=R(t),n=r.resolve,o=r.reject,i=E((function(){var r=[],i=0,a=1;v(e,!1,(function(e){var s=i++,u=!1;r.push(void 0),a++,t.resolve(e).then((function(e){u||(u=!0,r[s]=e,--a||n(r))}),o)})),--a||n(r)}));return i.e&&o(i.v),r.promise},race:function(e){var t=this,r=R(t),n=r.reject,o=E((function(){v(e,!1,(function(e){t.resolve(e).then(r.resolve,n)}))}));return o.e&&n(o.v),r.promise}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openDatabase=t.isSupportIndexDB=t.getCurrentPageUrl=t.getSystemInfo=t.getCache=t.setCache=t.saveCookie=t.loadCookie=t.postPbReq=t.postReq=t.ajax=t.enhandsAjaxConifg=t.createReqData=t.createRequest=t.urlEncode=void 0;var n=r(3).DefaultLogger;function o(e){var t="";return Object.keys(e).forEach((function(r){""!==t&&(t+="&");var n=r+"="+encodeURIComponent(e[r]);t+=n})),t}function i(e,t,r,n,o,i){void 0===n&&(n=!1),void 0===i&&(i="text");var a=new XMLHttpRequest;return a.open(t,e),a.timeout=r&&r>0?r:3e3,a.withCredentials=!!n,i&&(a.responseType=i),o&&Object.keys(o).forEach((function(e){a.setRequestHeader(e,o[e])})),a}function a(e,t,r){return r?r(e,t):(e&&"application/x-www-form-urlencoded"===t["Content-Type"]?n=o(e):e&&"application/json;charset=UTF-8"===t["Content-Type"]&&(n=JSON.stringify(e)),n);var n}function s(e){return Object.assign({},{headers:{"Content-Type":"application/x-www-form-urlencoded"},credentials:!1,responseType:"text"},e)}function u(e){var t=s(e),r=t.url,o=t.methods,u=t.data,c=t.headers,f=t.timeout,l=t.credentials,p=t.responseType,d=t.createReqDataFn,h=t.callback;return new Promise((function(e,t){var s=i(r,o,f,l,c,p),v=a(u,c,d);s.onerror=function(e){return t(e)},s.onabort=function(e){return t(e)},s.ontimeout=function(e){return t(e)},s.onload=function(){if(200===s.status){if(h)return h(s,e,t);e(s.responseText)}else t(Error(String(s.status)))},n.debug(s),n.debug(v),"POST"===o&&v?s.send(v):s.send()}))}function c(e,t,r){var n=e.match(t);return n?{type:r,version:n[1]}:null}t.urlEncode=o,t.createRequest=i,t.createReqData=a,t.enhandsAjaxConifg=s,t.ajax=u,t.postReq=function(e,t,r){return u({url:e,methods:"POST",data:t,timeout:r,headers:{"Content-Type":"application/json;charset=UTF-8"}})},t.postPbReq=function(e,t,r,n,o){return u({url:e,methods:"POST",data:t,timeout:r,headers:{"Content-Type":"application/proto"},credentials:!1,responseType:"arraybuffer",createReqDataFn:n,callback:o})},t.loadCookie=function(e){try{var t=encodeURIComponent,r=decodeURIComponent,n=new RegExp("(?:^|; )"+t(e)+"=([^;]*)").exec(document.cookie);if(n)return r(n[1])}catch(e){}return null},t.saveCookie=function(e,t){try{var r=encodeURIComponent;if("[object Object]"!==t){var n=r(e)+"="+r(t);return document.cookie=n,!0}}catch(e){}return!1},t.setCache=function(e,t){return new Promise((function(r){window.localStorage.setItem(e,t),r()}))},t.getCache=function(e){return new Promise((function(t){t(window.localStorage.getItem(e))}))};var f={type:"Unknown",version:""};function l(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB}t.getSystemInfo=function(){var e=new Map;if(!window)return e;var t=function(){if(!navigator)return f;var e=navigator.userAgent.toLowerCase();return c(e,/rv:([\d.]+)\) like gecko/,"IE")||c(e,/msie ([\d.]+)/,"IE")||c(e,/edge\/([\d.]+)/,"EDGE")||c(e,/firefox\/([\d.]+)/,"Firefox")||c(e,/(?:opera|opr).([\d.]+)/,"Opera")||c(e,/qqbrowser\/([\d.]+)/,"QQBrowser")||c(e,/chrome\/([\d.]+)/,"Chrome")||c(e,/version\/([\d.]+).*safari/,"Safari")||f}(),r=t.type,n=t.version;return e.set("browserTp",r),e.set("browserVer",n),e.set("resolution",window.screen.width+"*"+window.screen.height),e.set("language",navigator.language||""),e.set("system",function(){if(!navigator)return"Unknown";if(-1!==navigator.platform.indexOf("Win"))return"Windows";if(-1!==navigator.platform.indexOf("Mac"))return"MacOS";if(-1!==navigator.platform.indexOf("X11"))return"UNIX";if(-1!==navigator.platform.indexOf("Linux"))return"Linux";var e=navigator.userAgent.toLowerCase();return-1!==e.indexOf("iphone")?"iPhone":-1!==e.indexOf("ipod")?"iPod":-1!==e.indexOf("ipad")?"iPad":-1!==e.indexOf("android")?"Android":"Unknown"}()),e.set("platform",navigator.platform),e},t.getCurrentPageUrl=function(){return window?window.location.href:""},t.isSupportIndexDB=l,t.openDatabase=function(e,t,r){if(l())return new Promise((function(n,o){var i=indexedDB.open(e,t);i.onerror=function(e){o(e)},i.onsuccess=function(e){n(e.target.result)},i.onupgradeneeded=function(e){var t=e.target.result;0===e.oldVersion&&t.createObjectStore(r,{keyPath:"compositeKey"})}}))}},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.d(t,"a",(function(){return o})),r(19),r(27),r(17),r(18),r(28);var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initAll()}var t,r,o;return t=e,(r=[{key:"registEventListener",value:function(e,t){if(!t)return!1;var r=this.eventListerners.get(e);return!!r&&(r.push(t),!0)}},{key:"onEvent",value:function(e,t){var r=this.eventListerners.get(e);r&&r.length>0&&r.forEach((function(e){e(t)}))}},{key:"clear",value:function(){this.initAll()}},{key:"initAll",value:function(){this.eventListerners=new Map,this.eventListerners.set(0,[]),this.eventListerners.set(1,[]),this.eventListerners.set(2,[]),this.eventListerners.set(3,[]),this.eventListerners.set(4,[])}}])&&n(t.prototype,r),o&&n(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,r){var n=r(5),o=r(1).document,i=n(o)&&n(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,r){var n=r(5);e.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if("function"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if(!t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,r){var n=r(4),o=r(79),i=r(42),a=r(41)("IE_PROTO"),s=function(){},u=function(){var e,t=r(36)("iframe"),n=i.length;for(t.style.display="none",r(54).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;n--;)delete u.prototype[i[n]];return u()};e.exports=Object.create||function(e,t){var r;return null!==e?(s.prototype=n(e),r=new s,s.prototype=null,r[a]=e):r=u(),void 0===t?r:o(r,t)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){var n=r(30)("keys"),o=r(23);e.exports=function(e){return n[e]||(n[e]=o(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,r){var n=r(9);e.exports=function(e,t,r){for(var o in t)n(e,o,t[o],r);return e}},function(e,t){e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},function(e,t,r){var n=r(16),o=r(84),i=r(85),a=r(4),s=r(53),u=r(86),c={},f={};(t=e.exports=function(e,t,r,l,p){var d,h,v,g,y=p?function(){return e}:u(e),m=n(r,l,t?2:1),b=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(i(y)){for(d=s(e.length);d>b;b++)if((g=t?m(a(h=e[b])[0],h[1]):m(e[b]))===c||g===f)return g}else for(v=y.call(e);!(h=v.next()).done;)if((g=o(v,m,h.value,t))===c||g===f)return g}).BREAK=c,t.RETURN=f},function(e,t,r){var n=r(21),o=r(2)("toStringTag"),i="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,r,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?r:i?n(t):"Object"==(a=n(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,r){"use strict";var n=r(22),o=r(25),i=r(9),a=r(13),s=r(24),u=r(87),c=r(26),f=r(88),l=r(2)("iterator"),p=!([].keys&&"next"in[].keys()),d=function(){return this};e.exports=function(e,t,r,h,v,g,y){u(r,t,h);var m,b,E,w=function(e){if(!p&&e in x)return x[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},_=t+" Iterator",S="values"==v,O=!1,x=e.prototype,T=x[l]||x["@@iterator"]||v&&x[v],I=T||w(v),A=v?S?w("entries"):I:void 0,D="Array"==t&&x.entries||T;if(D&&(E=f(D.call(new e)))!==Object.prototype&&E.next&&(c(E,_,!0),n||"function"==typeof E[l]||a(E,l,d)),S&&T&&"values"!==T.name&&(O=!0,I=function(){return T.call(this)}),n&&!y||!p&&!O&&x[l]||a(x,l,I),s[t]=I,s[_]=d,v)if(m={values:S?I:w("values"),keys:g?I:w("keys"),entries:A},y)for(b in m)b in x||i(x,b,m[b]);else o(o.P+o.F*(p||O),t,m);return m}},function(e,t,r){var n=r(39);e.exports=function(e){return Object(n(e))}},function(e,t,r){var n=r(23)("meta"),o=r(5),i=r(11),a=r(7).f,s=0,u=Object.isExtensible||function(){return!0},c=!r(10)((function(){return u(Object.preventExtensions({}))})),f=function(e){a(e,n,{value:{i:"O"+ ++s,w:{}}})},l=e.exports={KEY:n,NEED:!1,fastKey:function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,n)){if(!u(e))return"F";if(!t)return"E";f(e)}return e[n].i},getWeak:function(e,t){if(!i(e,n)){if(!u(e))return!0;if(!t)return!1;f(e)}return e[n].w},onFreeze:function(e){return c&&l.NEED&&u(e)&&!i(e,n)&&f(e),e}}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,r){e.exports=!r(6)&&!r(10)((function(){return 7!=Object.defineProperty(r(36)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,r){var n=r(11),o=r(15),i=r(81)(!1),a=r(41)("IE_PROTO");e.exports=function(e,t){var r,s=o(e),u=0,c=[];for(r in s)r!=a&&n(s,r)&&c.push(r);for(;t.length>u;)n(s,r=t[u++])&&(~i(c,r)||c.push(r));return c}},function(e,t,r){var n=r(40),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},function(e,t,r){var n=r(1).document;e.exports=n&&n.documentElement},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){"use strict";var n=r(1),o=r(7),i=r(6),a=r(2)("species");e.exports=function(e){var t=n[e];i&&t&&!t[a]&&o.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t,r){var n=r(5);e.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,r){var n=r(2)("iterator"),o=!1;try{var i=[7][n]();i.return=function(){o=!0},Array.from(i,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var i=[7],a=i[n]();a.next=function(){return{done:r=!0}},i[n]=function(){return a},e(i)}catch(e){}return r}},function(e,t,r){var n=r(50),o=r(31),i=r(15),a=r(37),s=r(11),u=r(51),c=Object.getOwnPropertyDescriptor;t.f=r(6)?c:function(e,t){if(e=i(e),t=a(t,!0),u)try{return c(e,t)}catch(e){}if(s(e,t))return o(!n.f.call(e,t),e[t])}},function(e,t){},function(e,t){},function(e,t){},function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r(19),r(27),r(17),r(18),r(28),r(33),r(29);var n=r(0);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(3).DefaultLogger,s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";o(this,e),this.identifier=t,this.storedData=new Map,this.defaultLoaders=[],this.defaultLoaders.push(this.loadExpData),this.defaultLoaders.push(this.loadStrategyData),this.defaultLoaders.push(this.loadHitExpMap)}var t,r,s;return t=e,(r=[{key:"saveUserId",value:function(e){var t=this;return new Promise((function(r){t.save("".concat(n.C),e),r()}))}},{key:"saveHitExpMap",value:function(e){var t=this;return new Promise((function(r,o){var i={};e.forEach((function(e,t){i[t]=e}));var a=JSON.stringify(i);t.save("".concat(t.identifier,"_").concat(n.g),a).then((function(){return r()})).catch((function(e){return o(e)}))}))}},{key:"saveStrategyData",value:function(e){var t=this;return new Promise((function(r,o){var i=JSON.stringify(e);t.save("".concat(t.identifier,"_").concat(n.i),i).then((function(){return r()})).catch((function(e){return o(e)}))}))}},{key:"saveExpData",value:function(e){var t=this;return new Promise((function(r,o){var i={};e.forEach((function(e,t){e.grayId!==n.b&&e.grayId!==n.j&&(i[t]=e)}));var a=JSON.stringify(i);t.save("".concat(t.identifier,"_").concat(n.f),a).then((function(){return r()})).catch((function(e){return o(e)}))}))}},{key:"loadUserId",value:function(){var e=this;return new Promise((function(t,r){e.load("".concat(n.C)).then((function(r){if(a.debug(r),!r)return t();e.storedData.set(n.B,r),t()})).catch((function(e){return r(e)}))}))}},{key:"loadExpData",value:function(){var e=this;return new Promise((function(t,r){e.load("".concat(e.identifier,"_").concat(n.f)).then((function(o){if(a.debug(o),o){var i=new Map;e.storedData.set(n.f,i);try{var s=JSON.parse(o);Object.keys(s).forEach((function(e){var t=s[e];i.set(e,t)})),t()}catch(e){r(e)}}else t()})).catch((function(e){return r(e)}))}))}},{key:"loadStrategyData",value:function(){var e=this;return new Promise((function(t,r){e.load("".concat(e.identifier,"_").concat(n.i)).then((function(o){if(a.debug(o),o)try{var i=JSON.parse(o);e.storedData.set(n.i,i),t()}catch(e){r(e)}else t()})).catch((function(e){return r(e)}))}))}},{key:"loadHitExpMap",value:function(){var e=this;return new Promise((function(t,r){e.load("".concat(e.identifier,"_").concat(n.g)).then((function(o){if(a.debug(o),o){var i=new Map;e.storedData.set(n.g,i);try{var s=JSON.parse(o);Object.keys(s).forEach((function(e){var t=parseInt(s[e],10);i.set(parseInt(e,10),t)})),t()}catch(e){r(e)}}else t()})).catch((function(e){return r(e)}))}))}},{key:"loadAllData",value:function(){var e=this;return new Promise((function(t,r){a.debug("loadAllData");var n=[];e.defaultLoaders.forEach((function(t){var r=t.call(e);n.push(r)})),Promise.all(n).then((function(){a.debug("loaddAllData success"),a.debug(e.storedData),t(e.storedData)})).catch((function(e){return r(e)}))}))}}])&&i(t.prototype,r),s&&i(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,r){var n,o,i,a=r(16),s=r(95),u=r(54),c=r(36),f=r(1),l=f.process,p=f.setImmediate,d=f.clearImmediate,h=f.MessageChannel,v=f.Dispatch,g=0,y={},m=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},b=function(e){m.call(e.data)};p&&d||(p=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return y[++g]=function(){s("function"==typeof e?e:Function(e),t)},n(g),g},d=function(e){delete y[e]},"process"==r(21)(l)?n=function(e){l.nextTick(a(m,e,1))}:v&&v.now?n=function(e){v.now(a(m,e,1))}:h?(i=(o=new h).port2,o.port1.onmessage=b,n=a(i.postMessage,i,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(n=function(e){f.postMessage(e+"","*")},f.addEventListener("message",b,!1)):n="onreadystatechange"in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),m.call(e)}}:function(e){setTimeout(a(m,e,1),0)}),e.exports={set:p,clear:d}},function(e,t,r){"use strict";var n=r(32);function o(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=n(t),this.reject=n(r)}e.exports.f=function(e){return new o(e)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r(17),r(33),r(19),r(27),r(18),r(28),r(29);var n=r(3),o=r(0);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=n.DefaultLogger,s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=t}var t,r,n;return t=e,(r=[{key:"loadData",value:function(e,t){var r=this;return new Promise((function(n,i){var s=r.store.userConfig,u="".concat(s.isTest?o.E:o.D,"wabt/get_gray_policy"),c={guid:s.guid,appid:s.appid,channel:s.channel,profiles:s.profiles};t&&(c.guid=t);var f=!1;e&&(c.expName=e,f=!0),s.layerCodes&&(c.layerCodes=s.layerCodes);var l=s.timeout||o.c;(f?r.reqWithTimeout(u,c,l):r.loadRemoteData(u,c,-1)).then((function(e){a.debug(e);try{var t=JSON.parse(e);if(0===t.code){var o=r.processData(t);n(o)}else i(Error("error http code"))}catch(e){i(e)}})).catch((function(e){i(e)}))}))}},{key:"processExpData",value:function(e){var t=new Map,r=e.data;return r?(Object.keys(r).forEach((function(e){var n=r[e],o={expName:n.expName,assignment:n.assignment,grayId:n.sGrayPolicyId,layerCode:e,params:n.params,percentage:n.percentage,bucket:n.bucket,isFirstHit:n.isFirstHit,endTime:n.endTime};t.set(e,o)})),t):t}},{key:"processStrategyData",value:function(e){var t=e.strategy;if(!t)return null;var r={refreshDuration:t.refreshDuration,enableReport:t.enableReport,reportType:t.reportType,attaId:t.reportConfig.id,attaToken:t.reportConfig.token,debug:t.debug,sdkReportRate:t.sdkReportRate};t.debug&&(r.debug=!0);var n=t.sdkReportRate;return"number"==typeof n&&n>=0&&n<=100&&(r.sdkReportRate=n),r}},{key:"processData",value:function(e){var t=new Map;try{var r=this.processExpData(e),n=this.processStrategyData(e);t.set(o.f,r),t.set(o.i,n)}catch(e){throw a.error("process net data failed",e),Error("error process data")}return t}},{key:"reqWithTimeout",value:function(e,t,r){var n=this;return new Promise((function(o,i){return a.debug("reqWithTimeout"),Promise.race([n.loadRemoteData(e,t,r),new Promise((function(e){setTimeout((function(){return e(new Error("request timeout"))}),r)}))]).then((function(e){return o(e)})).catch((function(e){return i(e)}))}))}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"d",(function(){return u})),r.d(t,"f",(function(){return c})),r.d(t,"m",(function(){return f})),r.d(t,"l",(function(){return l})),r.d(t,"k",(function(){return p})),r.d(t,"e",(function(){return d})),r.d(t,"j",(function(){return h})),r.d(t,"n",(function(){return v})),r.d(t,"g",(function(){return g})),r.d(t,"i",(function(){return y})),r.d(t,"b",(function(){return m})),r.d(t,"c",(function(){return b})),r.d(t,"h",(function(){return E})),r.d(t,"o",(function(){return w})),r(17),r(33),r(29);var n=r(0),o=r(8);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(3).DefaultLogger,s="rqd_expimpression",u="A149",c="A148",f="A70",l="A71",p="absdk_ver",d="is_first_hit",h="exp_platform",v="user_type",g="layer_code",y="exp_percentage",m="exp_bucket",b="exp_env",E="exp_params",w=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.memStore=t}var t,r,w;return t=e,(r=[{key:"reportExpExpose",value:function(e){return this.reportExpEvent(s,e)}},{key:"reportExpEvent",value:function(e,t){var r=this;return new Promise((function(i){if(!r.checkNeedReport(t))return i(!1);var s=r.memStore.userConfig,w=r.memStore.systemInfo,_={};_[u]=t.expName||"",_[c]=String(t.grayId),_[f]=s.guid||"",_[l]=s.appid||"",_[p]=r.memStore.version,_[d]=t.isFirstHit?"1":"0",_[h]=w.get("system")||"",_[v]="0",_[g]=t.layerCode,_[y]=t.percentage?String(t.percentage):"0",_[m]=t.bucket?String(t.bucket):"0",_[b]=s.isTest?"test":"formal";var S=Object(o.c)(t.params);S.length>n.h&&(S="".concat(S.substring(0,n.h),"..."));var O=s.profiles||{};return Object.keys(O).forEach((function(e){_[e]=O[e]})),_[E]=S,a.debug(S),r.reportEvent(e,_).then((function(){i(!0)})).catch((function(e){a.info("error report event ".concat(e.message)),i(!1)}))}))}},{key:"reportSDKEvent",value:function(e,t,r,n){var i=this;return new Promise((function(s){if(!i.checkSDKReport())return s(!1);var u=i.memStore.userConfig,c=i.memStore.systemInfo,d=i.memStore.expData,v={};null==n||n.forEach((function(e,t){v[t]=e}));var g=u.profiles||{};return Object.keys(g).forEach((function(e){v[e]=g[e]})),v.api_name=e,v.consumed_time=r,v.success_flag=t,v.gray_ids=Object(o.d)(d),v[l]=u.appid||"",v[f]=u.guid||"",v[p]=i.memStore.version,v[h]=c.get("ROMA_PLATFORM")||"",v[b]=u.isTest?"test":"formal",i.reportEvent("TabApiEvent",v).then((function(){s(!0)})).catch((function(e){a.error("error report event ".concat(e.message)),s(!1)}))}))}},{key:"checkNeedReport",value:function(e){return e.assignment!==n.a}},{key:"checkSDKReport",value:function(){var e=this.memStore.strategy;if(null==e?void 0:e.debug)return!0;var t=(null==e?void 0:e.sdkReportRate)||n.v,r=Math.ceil(100*Math.random());return a.debug("report api event with random ".concat(r," ").concat(t)),r<=t}}])&&i(t.prototype,r),w&&i(t,w),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,r){"use strict";var n=r(4);e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,r){t.f=r(2)},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){var n=r(52),o=r(42).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.TabJSSDK=void 0;var i=r(14),a=r(73),s=r(74),u=r(34),c=r(75),f=r(110),l=function(e){function t(t){return e.call(this,t,"1.0.23")||this}return o(t,e),t.prototype.initLoaderAndReporters=function(){var e,t,r=this.memStore.userConfig;this.lLoader=new a.JSLocalLoder(r.appid+"_"+this.memStore.name),this.rLoader=new s.JSRemoteLoader(this.memStore);var n=new c.TabJSBeaconReporter(this.memStore),o=new f.TabJSAttaReporter(this.memStore);(null===(e=this.memStore.userConfig)||void 0===e?void 0:e.defaultReporter)&&"atta"===(null===(t=this.memStore.userConfig)||void 0===t?void 0:t.defaultReporter)?this.reporter=o:this.reporter=n},t.prototype.initProfiles=function(){var e=this.memStore.userConfig,t=e.profiles||{};Object.keys(t).forEach((function(e){t[e]=String(t[e])})),t[i.TAB_PROFILE_KEY_PLATFORM]="jssdk";var r=this.memStore.systemInfo;t[i.TAB_PROFILE_KEY_RESO]=r.get("resolution")||"",t[i.TAB_PROFILE_KEY_MODEL]=r.get("platform")||"",t[i.TAB_PROFILE_KEY_OSMODEL]=r.get("system")||"",t.ROMA_BROWSER_MODEL=r.get("browserTp")||"",t.ROMA_BROWSER_VERSION=r.get("browserVer")||"",t[i.TAB_PROFILE_KEY_SDKVER]=this.memStore.version,e.profiles=t},t.prototype.initSystemInfo=function(){return u.getSystemInfo()},t.prototype.getParam=function(e,t){var r=null;return this.memStore.expData&&this.memStore.expData.forEach((function(t,n){for(var o=0,i=Object.keys(t.params);o<i.length;o++)if(i[o]===e){r=t.params[n];break}})),r||t},t.prototype.clearLocalstorage=function(){this.lLoader.clearLocalstorage()},t}(i.TabSDK);t.TabJSSDK=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.JSLocalLoder=void 0;var i=r(14),a=r(34),s=i.DefaultLogger,u=function(e){function t(t){var r=e.call(this,t)||this;return r.openDbPromise=a.openDatabase("tab_sdk_web",1,"tab_experiment"),r}return o(t,e),t.prototype.loadLocalstorage=function(e){return s.debug("get cache "+e),a.getCache(e)},t.prototype.saveLocalstorage=function(e,t){return s.debug("save cache "+e+" "+t),a.setCache(e,t)},t.prototype.load=function(e){return this.openDbPromise?this.openDbPromise.then((function(t){return new Promise((function(r,n){var o=t.transaction(["tab_experiment"],"readonly").objectStore("tab_experiment");try{var i=o.get(e);i.onerror=function(e){n(e)},i.onsuccess=function(e){var t=e.target.result;r(t?t.value:null)}}catch(e){n(e)}}))})):this.loadLocalstorage(e)},t.prototype.save=function(e,t){return this.openDbPromise?this.openDbPromise.then((function(r){return new Promise((function(n,o){var i=r.transaction(["tab_experiment"],"readwrite").objectStore("tab_experiment");try{var a=i.put({compositeKey:e,value:t});a.onerror=function(e){o(e)},a.onsuccess=function(){n()}}catch(e){o(e)}}))})):this.saveLocalstorage(e,t)},t.prototype.saveUserId=function(e){var t=this;return new Promise((function(r){a.saveCookie(i.UserIdLocal,e),t.save(""+i.UserIdLocal,e),r()}))},t.prototype.loadUserId=function(){var e=this;return new Promise((function(t,r){var n=a.loadCookie(i.UserIdLocal);return s.debug("got userid form cookie "+n),n?(e.storedData.set(i.UserId,n),t()):e.load(""+i.UserIdLocal).then((function(r){return s.debug(r),r?(e.storedData.set(i.UserId,r),t()):t()})).catch((function(e){return r(e)}))}))},t.prototype.clearLocalstorage=function(){try{[this.identifier+"_"+i.SDKStrategy,this.identifier+"_"+i.HitExpMap,this.identifier+"_"+i.ExpData].map((function(e){return window.localStorage.removeItem(e),null}))}catch(e){s.error("remove localstorage faild:",e)}},t}(i.LocalLoader);t.JSLocalLoder=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.JSRemoteLoader=void 0;var i=r(14),a=r(34),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.loadRemoteData=function(e,t,r){return a.postReq(e,t,r)},t}(i.RemoteLoader);t.JSRemoteLoader=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.TabJSBeaconReporter=void 0;var i=r(14),a=i.DefaultLogger,s=function(e){function t(t){var n=e.call(this,t)||this;try{var o=window.BeaconAction;a.info("load Beacon"),a.info(o),o||(a.info("load beacon from module"),o=r(108)),n.beaconSDK=new o({appkey:i.TABBeaconAppKey,onReportSuccess:function(){},onReportFail:function(){}})}catch(e){a.error("error init beacon sdk",e)}return n}return o(t,e),t.prototype.isOk=function(){return!!this.beaconSDK},t.prototype.reportEvent=function(e,t){var r=this;return new Promise((function(n){var o;(null===(o=r.beaconSDK)||void 0===o?void 0:o.onDirectUserAction)&&r.beaconSDK.onDirectUserAction(e,t),n()}))},t}(i.TabReporter);t.TabJSBeaconReporter=s},function(e,t,r){"use strict";r.d(t,"a",(function(){return h})),r(19),r(27),r(17),r(18),r(28),r(33),r(29),r(103);var n=r(3),o=r(0),i=r(8),a=r(35);function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u=n.DefaultLogger,c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.memStore=t}var t,r,n;return t=e,(r=[{key:"setLocalLoder",value:function(e){this.lLoader=e}},{key:"setExpHit",value:function(e){var t;u.debug("set exp hit ".concat(e));var r=this.memStore.hitExpMap;r.set(e,1),null===(t=this.lLoader)||void 0===t||t.saveHitExpMap(r)}},{key:"getIsFirstHit",value:function(e){return 1!==this.memStore.hitExpMap.get(e)}},{key:"updateIsFirstHit",value:function(){var e=this;this.memStore.expData&&this.memStore.expData.forEach((function(t){var r=t;e.getIsFirstHit(r.grayId)?r.isFirstHit=!0:r.isFirstHit=!1}))}}])&&s(t.prototype,r),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var d=n.DefaultLogger,h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";l(this,e),this.eventHandler=new a.a,this.memStore={name:t,version:r,initial:!1,isInit:!1,syncFinish:!1,hitExpMap:new Map},this.expHitHandler=new c(this.memStore)}var t,r,n;return t=e,(r=[{key:"registEventListener",value:function(e,t){return this.eventHandler.registEventListener(e,t)}},{key:"init",value:function(e){var t=this;return new Promise((function(r,n){if(!e)return d.error("no param config"),r(!1);if(!e.appid)return d.error("appid not set"),r(!1);if(t.memStore.userConfig=e,t.registCallback(),t.memStore.initial)return d.error("already initialized"),t.initFail("already initialized"),r(!1);t.memStore.initial=!0,e.isTest&&d.setLevel(0),t.initLoaderAndReporters(),t.expHitHandler.setLocalLoder(t.lLoader);try{var i=t.initSystemInfo();t.memStore.systemInfo=i}catch(e){d.info("error init systemInfo ".concat(e.message))}t.initProfiles(),e.guid||(d.info("guid not set"),t.lLoader.defaultLoaders.push(t.lLoader.loadUserId)),t.doInit().then((function(n){t.memStore.expData&&t.initLocalSuccess(),r(n),t.loadRemoteData().catch((function(e){d.info("error process remote data ".concat(e.message))}));var i=e.timeout||o.c;setTimeout((function(){t.memStore.initial&&(t.memStore.syncFinish||t.reportErrorEvent(o.y,"timeout"),t.initRemoteSuccess())}),i),e.disableRefresh||(d.info("start refresh timer"),t.initRefreshTimer())})).catch((function(e){t.initFail("init error ".concat(e.message)),n(e)}))}))}},{key:"setProfiles",value:function(e){var t=this.memStore.userConfig;if(t)if(e&&"object"===f(e)){var r=t.profiles||{};Object.keys(e).forEach((function(t){r[t]=String(e[t])})),t.profiles=r}else d.error("please set profiles uing object");else d.error("please init sdk first")}},{key:"clear",value:function(){this.memStore.initial=!1,this.memStore.isInit=!1,this.memStore.syncFinish=!1,this.memStore.expData=void 0,this.memStore.hitExpMap=new Map,this.memStore.strategy=void 0,this.eventHandler.clear(),this.timeInterval&&(clearInterval(this.timeInterval),this.timeInterval=null)}},{key:"switchUser",value:function(e,t){var r=this;return new Promise((function(n){var i=r.memStore.userConfig;if(i.guid===e)return d.info("same userid"),n(!1);var a=(new Date).getTime();d.debug("switch to new user ".concat(e)),d.debug(t||""),d.debug(i),i.guid=e,t&&(i.profiles=t,r.initProfiles()),r.loadRemoteData().then((function(){var e;r.eventHandler.onEvent(3),null===(e=r.reporter)||void 0===e||e.reportSDKEvent(o.x,!0,(new Date).getTime()-a),n(!0)})).catch((function(e){r.reportErrorEvent(o.x,e.message),n(!1)}))}))}},{key:"forceReload",value:function(){var e=this;return new Promise((function(t){var r=(new Date).getTime();e.loadRemoteData().then((function(){var n;e.eventHandler.onEvent(4),null===(n=e.reporter)||void 0===n||n.reportSDKEvent(o.w,!0,(new Date).getTime()-r),t(!0)})).catch((function(r){e.reportErrorEvent(o.w,r.message),t(!1)}))}))}},{key:"getAllExps",value:function(){this.expHitHandler.updateIsFirstHit();var e={};return this.memStore.expData&&this.memStore.expData.forEach((function(t,r){e[r]=t})),e}},{key:"getAllParams",value:function(){var e={};return this.memStore.expData&&this.memStore.expData.forEach((function(t){Object.keys(t.params).forEach((function(r){e[r]=t.params[r]}))})),e}},{key:"getExpById",value:function(e){for(var t=this.getAllExps(),r=0,n=Object.keys(t);r<n.length;r++){var o=t[n[r]];if(o.grayId===e)return o}return null}},{key:"getExpByIdAndReport",value:function(e){var t=this.getExpById(e);return t&&this.reportExpExpose(t),t}},{key:"getExpByLayerCode",value:function(e){for(var t=this.getAllExps(),r=0,n=Object.keys(t);r<n.length;r++){var o=t[n[r]];if(o.layerCode===e)return o}return Object(i.b)()}},{key:"getExpByLayerCodeAndReport",value:function(e){var t=this.getExpByLayerCode(e);return this.reportExpExpose(t),t}},{key:"getCachedExpByName",value:function(e){return this.findExpByName(e)}},{key:"getExpByName",value:function(e){var t=this;return new Promise((function(r){if(t.memStore.expData)r(t.findExpByName(e));else{var n=(new Date).getTime();t.loadRemoteData(e).then((function(){var i;r(t.findExpByName(e)),null===(i=t.reporter)||void 0===i||i.reportSDKEvent(o.t,!0,(new Date).getTime()-n)})).catch((function(i){var a;d.info(i.message),r(t.findExpByName(e)),null===(a=t.reporter)||void 0===a||a.reportSDKEvent(o.t,!1,(new Date).getTime()-n)}))}}))}},{key:"getTargetExpByName",value:function(e,t){var r=this;return new Promise((function(n,i){var a=(new Date).getTime();r.loadTargetRemoteData(e,t).then((function(e){var t;n(e),null===(t=r.reporter)||void 0===t||t.reportSDKEvent(o.t,!0,(new Date).getTime()-a)})).catch((function(e){var t;d.info(e.message),i(e),null===(t=r.reporter)||void 0===t||t.reportSDKEvent(o.t,!1,(new Date).getTime()-a)}))}))}},{key:"findExpByName",value:function(e){d.debug("finde exp by name ".concat(e));var t=this.getAllExps();d.debug(t);for(var r=0,n=Object.keys(t);r<n.length;r++){var o=t[n[r]];if(o.expName===e)return o}return Object(i.b)()}},{key:"getExpByNameAndReport",value:function(e){var t=this;return new Promise((function(r){t.getExpByName(e).then((function(e){d.info("getExpByNameAndReport get ".concat(e.grayId)),r(e),d.info("getExpByNameAndReport report expose for ".concat(e.grayId)),t.reportExpExpose(e)}))}))}},{key:"reportExpExpose",value:function(e){var t;try{null===(t=this.reporter)||void 0===t||t.reportExpExpose(e),this.expHitHandler.setExpHit(e.grayId)}catch(e){d.info(e.message)}}},{key:"reportExpEvent",value:function(e,t){var r;null===(r=this.reporter)||void 0===r||r.reportExpEvent(e,t)}},{key:"doInit",value:function(){var e=this;return new Promise((function(t){var r;(null===(r=e.memStore.userConfig)||void 0===r?void 0:r.disableLocalStorage)?Promise.all([e.lLoader.loadUserId(),e.lLoader.loadHitExpMap()]).then((function(){e.saveDataToMem(e.lLoader.storedData),t(!0)})):e.lLoader.loadAllData().then((function(r){var n;e.saveDataToMem(r),(null===(n=e.memStore.strategy)||void 0===n?void 0:n.debug)&&(d.setLevel(0),d.debug("debug is opened")),t(!0)})).catch((function(r){d.info("error init local data ".concat(r.message)),e.initFail("init error ".concat(r.message)),t(!1)}))}))}},{key:"saveDataToMem",value:function(e){e.get(o.f)&&(this.memStore.expData=e.get(o.f)),e.get(o.i)&&(this.memStore.strategy=e.get(o.i)),e.get(o.g)&&(this.memStore.hitExpMap=e.get(o.g));var t=this.memStore.userConfig;t.guid||(d.debug("no guid will load or create one"),e.get(o.B)?t.guid=e.get(o.B):(t.guid=Object(i.a)(),this.lLoader.saveUserId(t.guid))),this.expHitHandler.updateIsFirstHit()}},{key:"loadRemoteData",value:function(e){var t=this;return new Promise((function(r,n){var i=(new Date).getTime();t.rLoader.loadData(e).then((function(n){var a;d.debug(n),t.processRometeData(n,e),e||t.initRemoteSuccess();var s=(new Date).getTime()-i;null===(a=t.reporter)||void 0===a||a.reportSDKEvent(o.y,!0,s),r()})).catch((function(e){t.reportErrorEvent(o.y,e.message),n(e)}))}))}},{key:"loadTargetRemoteData",value:function(e,t){var r=this;return new Promise((function(n,i){var a=(new Date).getTime();r.rLoader.loadData(e,t).then((function(t){var i;d.debug(t);var s=t.get(o.f);d.debug(s),n(s.get(e));var u=(new Date).getTime()-a;null===(i=r.reporter)||void 0===i||i.reportSDKEvent(o.y,!0,u)})).catch((function(e){r.reportErrorEvent(o.y,e.message),i(e)}))}))}},{key:"processRometeData",value:function(e,t){var r,n,i,a=e.get(o.f),s=e.get(o.i);if(d.debug(a),d.debug(s),t){var u=a.get(t);u&&(null===(r=this.memStore.expData)||void 0===r||r.set(t,u))}else this.memStore.expData=a;this.memStore.strategy=s,this.memStore.refreshDataTime=(new Date).getTime(),this.expHitHandler.updateIsFirstHit(),!(null===(n=this.memStore.userConfig)||void 0===n?void 0:n.disableLocalStorage)&&this.memStore.expData&&(this.lLoader.saveExpData(this.memStore.expData),this.lLoader.saveStrategyData(s)),(null===(i=this.memStore.strategy)||void 0===i?void 0:i.debug)&&(d.setLevel(0),d.debug("debug is opened"))}},{key:"initRefreshTimer",value:function(){var e=this;this.timeInterval=setInterval((function(){e.loadRemoteDataTimer()}),o.e)}},{key:"loadRemoteDataTimer",value:function(){if(this.memStore.isInit&&void 0!==this.memStore.strategy){d.debug("refresh timer check");var e=this.memStore.refreshDataTime;if(e){var t=(new Date).getTime(),r=1e3*this.memStore.strategy.refreshDuration;if(d.debug("curTime: ".concat(t," -- updateTime: ").concat(e," --\n        diffTime: ").concat(t-e," -- refreshTime: ").concat(r)),t-e<r)return void d.debug("do not update this time")}this.loadRemoteData().catch((function(e){d.info("error process remote data ".concat(e.message))}))}else d.debug("isInit has not finished and ignore update this time")}},{key:"reportErrorEvent",value:function(e,t){var r,n=new Map;n.set(o.s,t),null===(r=this.reporter)||void 0===r||r.reportSDKEvent(e,!1,-1,n)}},{key:"initFail",value:function(e){this.reportErrorEvent(o.u,e||"unknown"),this.eventHandler.onEvent(0)}},{key:"initLocalSuccess",value:function(){var e;this.memStore.isInit||(this.memStore.isInit=!0,null===(e=this.reporter)||void 0===e||e.reportSDKEvent(o.u,!0,0),this.eventHandler.onEvent(1,this.getAllParams()))}},{key:"initRemoteSuccess",value:function(){this.initLocalSuccess(),this.memStore.syncFinish||(this.memStore.syncFinish=!0,this.eventHandler.onEvent(2,this.getAllParams()))}},{key:"registCallback",value:function(){var e=this.memStore.userConfig;e.onInit&&this.eventHandler.registEventListener(1,e.onInit),e.onNetData&&this.eventHandler.registEventListener(2,e.onNetData),e.onFail&&this.eventHandler.registEventListener(0,e.onFail)}}])&&p(t.prototype,r),n&&p(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.setLogLevel=t.clearLocalstorage=t.getParam=t.getAllParams=t.reportExpEvent=t.reportExpExpose=t.getTargetExpByName=t.getCachedExpByName=t.getExpByNameAndReport=t.getExpByName=t.getExpByLayerCodeAndReport=t.getExpByLayerCode=t.getExpByIdAndReport=t.getExpById=t.getAllExps=t.forceReload=t.switchUser=t.clear=t.setProfiles=t.init=t.getWabtInstance=void 0;var i=r(14),a=r(72);o(r(72),t),o(r(75),t),o(r(34),t),o(r(74),t),o(r(73),t);var s=i.DefaultLogger,u=new a.TabJSSDK,c=new Map;c.set("default",u),t.getWabtInstance=function(e){var t=c.get(e);return t||(t=new a.TabJSSDK(e),c.set(e,t)),t},t.init=function(e){return u.init(e)},t.setProfiles=function(e){u.setProfiles(e)},t.clear=function(){u.clear()},t.switchUser=function(e,t){return u.switchUser(e,t)},t.forceReload=function(){return u.forceReload()},t.getAllExps=function(){return u.getAllExps()},t.getExpById=function(e){return u.getExpById(e)},t.getExpByIdAndReport=function(e){return u.getExpByIdAndReport(e)},t.getExpByLayerCode=function(e){return u.getExpByLayerCode(e)},t.getExpByLayerCodeAndReport=function(e){return u.getExpByLayerCodeAndReport(e)},t.getExpByName=function(e){return u.getExpByName(e)},t.getExpByNameAndReport=function(e){return u.getExpByNameAndReport(e)},t.getCachedExpByName=function(e){return u.getCachedExpByName(e)},t.getTargetExpByName=function(e,t){return u.getTargetExpByName(e,t)},t.reportExpExpose=function(e){return u.reportExpExpose(e)},t.reportExpEvent=function(e,t){return u.reportExpEvent(e,t)},t.getAllParams=function(){return u.getAllParams()},t.getParam=function(e,t){return u.getParam(e,t)},t.clearLocalstorage=function(){u.clearLocalstorage()},t.setLogLevel=function(e){s.setLevel(e)}},function(e,t,r){"use strict";var n=r(7).f,o=r(38),i=r(43),a=r(16),s=r(44),u=r(45),c=r(47),f=r(55),l=r(56),p=r(6),d=r(49).fastKey,h=r(57),v=p?"_s":"size",g=function(e,t){var r,n=d(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,c){var f=e((function(e,n){s(e,f,t,"_i"),e._t=t,e._i=o(null),e._f=void 0,e._l=void 0,e[v]=0,null!=n&&u(n,r,e[c],e)}));return i(f.prototype,{clear:function(){for(var e=h(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var r=h(this,t),n=g(r,e);if(n){var o=n.n,i=n.p;delete r._i[n.i],n.r=!0,i&&(i.n=o),o&&(o.p=i),r._f==n&&(r._f=o),r._l==n&&(r._l=i),r[v]--}return!!n},forEach:function(e){h(this,t);for(var r,n=a(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!g(h(this,t),e)}}),p&&n(f.prototype,"size",{get:function(){return h(this,t)[v]}}),f},def:function(e,t,r){var n,o,i=g(e,t);return i?i.v=r:(e._l=i={i:o=d(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=i),n&&(n.n=i),e[v]++,"F"!==o&&(e._i[o]=i)),e},getEntry:g,setStrong:function(e,t,r){c(e,t,(function(e,r){this._t=h(e,t),this._k=r,this._l=void 0}),(function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?f(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,f(1))}),r?"entries":"values",!r,!0),l(t)}}},function(e,t,r){var n=r(7),o=r(4),i=r(20);e.exports=r(6)?Object.defineProperties:function(e,t){o(e);for(var r,a=i(t),s=a.length,u=0;s>u;)n.f(e,r=a[u++],t[r]);return e}},function(e,t,r){var n=r(21);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t,r){var n=r(15),o=r(53),i=r(82);e.exports=function(e){return function(t,r,a){var s,u=n(t),c=o(u.length),f=i(a,c);if(e&&r!=r){for(;c>f;)if((s=u[f++])!=s)return!0}else for(;c>f;f++)if((e||f in u)&&u[f]===r)return e||f||0;return!e&&-1}}},function(e,t,r){var n=r(40),o=Math.max,i=Math.min;e.exports=function(e,t){return(e=n(e))<0?o(e+t,0):i(e,t)}},function(e,t,r){e.exports=r(30)("native-function-to-string",Function.toString)},function(e,t,r){var n=r(4);e.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(t){var i=e.return;throw void 0!==i&&n(i.call(e)),t}}},function(e,t,r){var n=r(24),o=r(2)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||i[o]===e)}},function(e,t,r){var n=r(46),o=r(2)("iterator"),i=r(24);e.exports=r(12).getIteratorMethod=function(e){if(null!=e)return e[o]||e["@@iterator"]||i[n(e)]}},function(e,t,r){"use strict";var n=r(38),o=r(31),i=r(26),a={};r(13)(a,r(2)("iterator"),(function(){return this})),e.exports=function(e,t,r){e.prototype=n(a,{next:o(1,r)}),i(e,t+" Iterator")}},function(e,t,r){var n=r(11),o=r(48),i=r(41)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),n(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,r){"use strict";var n=r(1),o=r(25),i=r(9),a=r(43),s=r(49),u=r(45),c=r(44),f=r(5),l=r(10),p=r(58),d=r(26),h=r(90);e.exports=function(e,t,r,v,g,y){var m=n[e],b=m,E=g?"set":"add",w=b&&b.prototype,_={},S=function(e){var t=w[e];i(w,e,"delete"==e||"has"==e?function(e){return!(y&&!f(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return y&&!f(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,r){return t.call(this,0===e?0:e,r),this})};if("function"==typeof b&&(y||w.forEach&&!l((function(){(new b).entries().next()})))){var O=new b,x=O[E](y?{}:-0,1)!=O,T=l((function(){O.has(1)})),I=p((function(e){new b(e)})),A=!y&&l((function(){for(var e=new b,t=5;t--;)e[E](t,t);return!e.has(-0)}));I||((b=t((function(t,r){c(t,b,e);var n=h(new m,t,b);return null!=r&&u(r,g,n[E],n),n}))).prototype=w,w.constructor=b),(T||A)&&(S("delete"),S("has"),g&&S("get")),(A||x)&&S(E),y&&w.clear&&delete w.clear}else b=v.getConstructor(t,e,g,E),a(b.prototype,r),s.NEED=!0;return d(b,e),_[e]=b,o(o.G+o.W+o.F*(b!=m),_),y||v.setStrong(b,e,g),b}},function(e,t,r){var n=r(5),o=r(91).set;e.exports=function(e,t,r){var i,a=t.constructor;return a!==r&&"function"==typeof a&&(i=a.prototype)!==r.prototype&&n(i)&&o&&o(e,i),e}},function(e,t,r){var n=r(5),o=r(4),i=function(e,t){if(o(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{(n=r(16)(Function.call,r(59).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return i(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:i}},function(e,t,r){var n=r(40),o=r(39);e.exports=function(e){return function(t,r){var i,a,s=String(o(t)),u=n(r),c=s.length;return u<0||u>=c?e?"":void 0:(i=s.charCodeAt(u))<55296||i>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):i:e?s.slice(u,u+2):a-56320+(i-55296<<10)+65536}}},function(e,t,r){var n=r(2)("unscopables"),o=Array.prototype;null==o[n]&&r(13)(o,n,{}),e.exports=function(e){o[n][e]=!0}},function(e,t,r){var n=r(4),o=r(32),i=r(2)("species");e.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||null==(r=n(a)[i])?t:o(r)}},function(e,t){e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t,r){var n=r(1),o=r(64).set,i=n.MutationObserver||n.WebKitMutationObserver,a=n.process,s=n.Promise,u="process"==r(21)(a);e.exports=function(){var e,t,r,c=function(){var n,o;for(u&&(n=a.domain)&&n.exit();e;){o=e.fn,e=e.next;try{o()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(u)r=function(){a.nextTick(c)};else if(!i||n.navigator&&n.navigator.standalone)if(s&&s.resolve){var f=s.resolve(void 0);r=function(){f.then(c)}}else r=function(){o.call(n,c)};else{var l=!0,p=document.createTextNode("");new i(c).observe(p,{characterData:!0}),r=function(){p.data=l=!l}}return function(n){var o={fn:n,next:void 0};t&&(t.next=o),e||(e=o,r()),t=o}}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,r){var n=r(1).navigator;e.exports=n&&n.userAgent||""},function(e,t,r){var n=r(4),o=r(5),i=r(65);e.exports=function(e,t){if(n(e),o(t)&&t.constructor===e)return t;var r=i.f(e);return(0,r.resolve)(t),r.promise}},function(e,t,r){var n=r(25),o=r(12),i=r(10);e.exports=function(e,t){var r=(o.Object||{})[e]||Object[e],a={};a[e]=t(r),n(n.S+n.F*i((function(){r(1)})),"Object",a)}},function(e,t,r){"use strict";r(102);var n=r(4),o=r(68),i=r(6),a=/./.toString,s=function(e){r(9)(RegExp.prototype,"toString",e,!0)};r(10)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?s((function(){var e=n(this);return"/".concat(e.source,"/","flags"in e?e.flags:!i&&e instanceof RegExp?o.call(e):void 0)})):"toString"!=a.name&&s((function(){return a.call(this)}))},function(e,t,r){r(6)&&"g"!=/./g.flags&&r(7).f(RegExp.prototype,"flags",{configurable:!0,get:r(68)})},function(e,t,r){"use strict";var n=r(1),o=r(11),i=r(6),a=r(25),s=r(9),u=r(49).KEY,c=r(10),f=r(30),l=r(26),p=r(23),d=r(2),h=r(69),v=r(104),g=r(105),y=r(106),m=r(4),b=r(5),E=r(48),w=r(15),_=r(37),S=r(31),O=r(38),x=r(107),T=r(59),I=r(70),A=r(7),D=r(20),R=T.f,P=A.f,k=x.f,C=n.Symbol,j=n.JSON,L=j&&j.stringify,N=d("_hidden"),M=d("toPrimitive"),B={}.propertyIsEnumerable,F=f("symbol-registry"),K=f("symbols"),q=f("op-symbols"),U=Object.prototype,V="function"==typeof C&&!!I.f,J=n.QObject,H=!J||!J.prototype||!J.prototype.findChild,Y=i&&c((function(){return 7!=O(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=R(U,t);n&&delete U[t],P(e,t,r),n&&e!==U&&P(U,t,n)}:P,G=function(e){var t=K[e]=O(C.prototype);return t._k=e,t},W=V&&"symbol"==typeof C.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof C},z=function(e,t,r){return e===U&&z(q,t,r),m(e),t=_(t,!0),m(r),o(K,t)?(r.enumerable?(o(e,N)&&e[N][t]&&(e[N][t]=!1),r=O(r,{enumerable:S(0,!1)})):(o(e,N)||P(e,N,S(1,{})),e[N][t]=!0),Y(e,t,r)):P(e,t,r)},X=function(e,t){m(e);for(var r,n=g(t=w(t)),o=0,i=n.length;i>o;)z(e,r=n[o++],t[r]);return e},Q=function(e){var t=B.call(this,e=_(e,!0));return!(this===U&&o(K,e)&&!o(q,e))&&(!(t||!o(this,e)||!o(K,e)||o(this,N)&&this[N][e])||t)},$=function(e,t){if(e=w(e),t=_(t,!0),e!==U||!o(K,t)||o(q,t)){var r=R(e,t);return!r||!o(K,t)||o(e,N)&&e[N][t]||(r.enumerable=!0),r}},Z=function(e){for(var t,r=k(w(e)),n=[],i=0;r.length>i;)o(K,t=r[i++])||t==N||t==u||n.push(t);return n},ee=function(e){for(var t,r=e===U,n=k(r?q:w(e)),i=[],a=0;n.length>a;)!o(K,t=n[a++])||r&&!o(U,t)||i.push(K[t]);return i};V||(s((C=function(){if(this instanceof C)throw TypeError("Symbol is not a constructor!");var e=p(arguments.length>0?arguments[0]:void 0),t=function(r){this===U&&t.call(q,r),o(this,N)&&o(this[N],e)&&(this[N][e]=!1),Y(this,e,S(1,r))};return i&&H&&Y(U,e,{configurable:!0,set:t}),G(e)}).prototype,"toString",(function(){return this._k})),T.f=$,A.f=z,r(71).f=x.f=Z,r(50).f=Q,I.f=ee,i&&!r(22)&&s(U,"propertyIsEnumerable",Q,!0),h.f=function(e){return G(d(e))}),a(a.G+a.W+a.F*!V,{Symbol:C});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;te.length>re;)d(te[re++]);for(var ne=D(d.store),oe=0;ne.length>oe;)v(ne[oe++]);a(a.S+a.F*!V,"Symbol",{for:function(e){return o(F,e+="")?F[e]:F[e]=C(e)},keyFor:function(e){if(!W(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){H=!0},useSimple:function(){H=!1}}),a(a.S+a.F*!V,"Object",{create:function(e,t){return void 0===t?O(e):X(O(e),t)},defineProperty:z,defineProperties:X,getOwnPropertyDescriptor:$,getOwnPropertyNames:Z,getOwnPropertySymbols:ee});var ie=c((function(){I.f(1)}));a(a.S+a.F*ie,"Object",{getOwnPropertySymbols:function(e){return I.f(E(e))}}),j&&a(a.S+a.F*(!V||c((function(){var e=C();return"[null]"!=L([e])||"{}"!=L({a:e})||"{}"!=L(Object(e))}))),"JSON",{stringify:function(e){for(var t,r,n=[e],o=1;arguments.length>o;)n.push(arguments[o++]);if(r=t=n[1],(b(t)||void 0!==e)&&!W(e))return y(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!W(t))return t}),n[1]=t,L.apply(j,n)}}),C.prototype[M]||r(13)(C.prototype,M,C.prototype.valueOf),l(C,"Symbol"),l(Math,"Math",!0),l(n.JSON,"JSON",!0)},function(e,t,r){var n=r(1),o=r(12),i=r(22),a=r(69),s=r(7).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,r){var n=r(20),o=r(70),i=r(50);e.exports=function(e){var t=n(e),r=o.f;if(r)for(var a,s=r(e),u=i.f,c=0;s.length>c;)u.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,r){var n=r(21);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,r){var n=r(15),o=r(71).f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==i.call(e)?function(e){try{return o(e)}catch(e){return a.slice()}}(e):o(n(e))}},function(e,t,r){(function(t){e.exports=function(){"use strict";var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)},r=function(){return(r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function n(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))}function o(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var i="__BEACON_",a="__BEACON_deviceId",s="last_report_time",u="sending_event_ids",c="beacon_config",f="beacon_config_request_time",l=function(){function e(){var e=this;this.emit=function(t,r){if(e){var n,o=e.__EventsList[t];if(null==o?void 0:o.length){o=o.slice();for(var i=0;i<o.length;i++){n=o[i];try{var a=n.callback.apply(e,[r]);if(1===n.type&&e.remove(t,n.callback),!1===a)break}catch(e){throw e}}}return e}},this.__EventsList={}}return e.prototype.indexOf=function(e,t){for(var r=0;r<e.length;r++)if(e[r].callback===t)return r;return-1},e.prototype.on=function(e,t,r){if(void 0===r&&(r=0),this){var n=this.__EventsList[e];if(n||(n=this.__EventsList[e]=[]),-1===this.indexOf(n,t)){var o={name:e,type:r||0,callback:t};return n.push(o),this}return this}},e.prototype.one=function(e,t){this.on(e,t,1)},e.prototype.remove=function(e,t){if(this){var r=this.__EventsList[e];if(!r)return null;if(!t){try{delete this.__EventsList[e]}catch(e){}return null}if(r.length){var n=this.indexOf(r,t);r.splice(n,1)}return this}},e}();function p(e,t){for(var r={},n=0,o=Object.keys(e);n<o.length;n++){var i=o[n],a=e[i];if("string"==typeof a)r[d(i)]=d(a);else{if(t)throw new Error("value mast be string  !!!!");r[d(String(i))]=d(String(a))}}return r}function d(e){if("string"!=typeof e)return e;try{return e.replace(new RegExp("\\|","g"),"%7C").replace(new RegExp("\\&","g"),"%26").replace(new RegExp("\\=","g"),"%3D").replace(new RegExp("\\+","g"),"%2B")}catch(e){return""}}function h(e){return String(e.A99)+String(e.A100)}var v=function(){},g=function(){function e(e){var t=this;this.lifeCycle=new l,this.uploadJobQueue=[],this.additionalParams={},this.delayTime=0,this._normalLogPipeline=function(e){if(!e||!e.reduce||!e.length)throw new TypeError("createPipeline 方法需要传入至少有一个 pipe 的数组");return 1===e.length?function(t,r){e[0](t,r||v)}:e.reduce((function(e,t){return function(r,n){return void 0===n&&(n=v),e(r,(function(e){return null==t?void 0:t(e,n)}))}}))}([function(e){t.send({url:t.strategy.getUploadUrl(),data:e,method:"post",contentType:"application/json;charset=UTF-8"},(function(){var r=t.config.onReportSuccess;"function"==typeof r&&r(JSON.stringify(e.events))}),(function(){var r=t.config.onReportFail;"function"==typeof r&&r(JSON.stringify(e.events))}))}]),function(e,t){if(!e)throw t instanceof Error?t:new Error(t)}(Boolean(e.appkey),"appkey must be initial"),this.config=r({},e)}return e.prototype.onUserAction=function(e,t){this.preReport(e,t,!1)},e.prototype.onDirectUserAction=function(e,t){this.preReport(e,t,!0)},e.prototype.preReport=function(e,t,r){e?this.strategy.isEventUpOnOff()&&(this.strategy.isBlackEvent(e)||this.strategy.isSampleEvent(e)||this.onReport(e,t,r)):this.errorReport.reportError("602"," no eventCode")},e.prototype.addAdditionalParams=function(e){for(var t=0,r=Object.keys(e);t<r.length;t++){var n=r[t];this.additionalParams[n]=e[n]}},e.prototype.setChannelId=function(e){this.commonInfo.channelID=String(e)},e.prototype.setOpenId=function(e){this.commonInfo.openid=String(e)},e.prototype.setUnionid=function(e){this.commonInfo.unid=String(e)},e.prototype.getDeviceId=function(){return this.commonInfo.deviceId},e.prototype.getCommonInfo=function(){return this.commonInfo},e.prototype.removeSendingId=function(e){try{var t=JSON.parse(this.storage.getItem(u)),r=t.indexOf(e);-1!=r&&(t.splice(r,1),this.storage.setItem(u,JSON.stringify(t)))}catch(e){}},e}(),y=function(){function e(e,t,r,n){this.requestParams={},this.network=n,this.requestParams.attaid="00400014144",this.requestParams.token="6478159937",this.requestParams.product_id=e.appkey,this.requestParams.platform=r,this.requestParams.uin=t.deviceId,this.requestParams.model="",this.requestParams.os=r,this.requestParams.app_version=e.appVersion,this.requestParams.sdk_version=t.sdkVersion,this.requestParams.error_stack="",this.uploadUrl=e.isOversea?"https://htrace.wetvinfo.com/kv":"https://h.trace.qq.com/kv"}return e.prototype.reportError=function(e,t){this.requestParams._dc=Math.random(),this.requestParams.error_msg=t,this.requestParams.error_code=e,this.network.get(this.uploadUrl,{params:this.requestParams}).catch((function(e){}))},e}(),m=function(){function e(e,t,r,n){this.strategy={isEventUpOnOff:!0,httpsUploadUrl:"https://otheve.beacon.qq.com/analytics/v2_upload",requestInterval:30,blacklist:[],samplelist:[]},this.realSample={},this.appkey="",this.appkey=e.appkey,this.storage=r;try{var o=JSON.parse(this.storage.getItem(c));o&&this.processData(o)}catch(e){}e.isOversea&&(this.strategy.httpsUploadUrl="https://svibeacon.onezapp.com/analytics/v2_upload"),!e.isOversea&&this.needRequestConfig()&&this.requestConfig(e.appVersion,t,n)}return e.prototype.requestConfig=function(e,t,r){var n=this;this.storage.setItem(f,Date.now().toString()),r.post("https://oth.str.beacon.qq.com/trpc.beacon.configserver.BeaconConfigService/QueryConfig",{platformId:"undefined"==typeof wx?"3":"4",mainAppKey:this.appkey,appVersion:e,sdkVersion:t.sdkVersion,osVersion:t.userAgent,model:"",packageName:"",params:{A3:t.deviceId}}).then((function(e){if(0==e.data.ret)try{var t=JSON.parse(e.data.beaconConfig);t&&(n.processData(t),n.storage.setItem(c,e.data.beaconConfig))}catch(e){}else n.processData(null),n.storage.setItem(c,"")})).catch((function(e){}))},e.prototype.processData=function(e){var t,r,n,o,i;this.strategy.isEventUpOnOff=null!==(t=null==e?void 0:e.isEventUpOnOff)&&void 0!==t?t:this.strategy.isEventUpOnOff,this.strategy.httpsUploadUrl=null!==(r=null==e?void 0:e.httpsUploadUrl)&&void 0!==r?r:this.strategy.httpsUploadUrl,this.strategy.requestInterval=null!==(n=null==e?void 0:e.requestInterval)&&void 0!==n?n:this.strategy.requestInterval,this.strategy.blacklist=null!==(o=null==e?void 0:e.blacklist)&&void 0!==o?o:this.strategy.blacklist,this.strategy.samplelist=null!==(i=null==e?void 0:e.samplelist)&&void 0!==i?i:this.strategy.samplelist;for(var a=0,s=this.strategy.samplelist;a<s.length;a++){var u=s[a].split(",");2==u.length&&(this.realSample[u[0]]=u[1])}},e.prototype.needRequestConfig=function(){var e=Number(this.storage.getItem(f));return Date.now()-e>60*this.strategy.requestInterval*1e3},e.prototype.getUploadUrl=function(){return this.strategy.httpsUploadUrl+"?appkey="+this.appkey},e.prototype.isBlackEvent=function(e){return-1!=this.strategy.blacklist.indexOf(e)},e.prototype.isEventUpOnOff=function(){return this.strategy.isEventUpOnOff},e.prototype.isSampleEvent=function(e){return!!Object.prototype.hasOwnProperty.call(this.realSample,e)&&this.realSample[e]<Math.floor(Math.random()*Math.floor(1e4))},e}(),b="session_storage_key",E=function(){function e(e,t,r){this.beacon=r,this.storage=e,this.duration=t,this.appkey=r.config.appkey}return e.prototype.getSession=function(){var e=this.storage.getItem(b);if(!e)return this.createSession();var t="",r=0;try{var n=JSON.parse(e)||{sessionId:void 0,sessionStart:void 0};if(!n.sessionId||!n.sessionStart)return this.createSession();var o=Number(this.storage.getItem(s));if(Date.now()-o>this.duration)return this.createSession();t=n.sessionId,r=n.sessionStart}catch(e){}return{sessionId:t,sessionStart:r}},e.prototype.createSession=function(){var e=Date.now(),t={sessionId:this.appkey+"_"+e.toString(),sessionStart:e};this.storage.setItem(b,JSON.stringify(t)),this.storage.setItem(s,e.toString());var r="is_new_user",n=this.storage.getItem(r);return this.beacon.onDirectUserAction("rqd_applaunched",{A21:n?"N":"Y"}),this.storage.setItem(r,JSON.stringify(!1)),t},e}();function w(){var e=navigator.userAgent,t=e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1,r=e.indexOf("Edge")>-1&&!t,n=e.indexOf("Trident")>-1&&e.indexOf("rv:11.0")>-1;if(t){new RegExp("MSIE (\\d+\\.\\d+);").test(e);var o=parseFloat(RegExp.$1);return 7==o?7:8==o?8:9==o?9:10==o?10:6}return r?-2:n?11:-1}var _,S=function(){return(S=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},O=function(){function e(e,t){void 0===t&&(t={}),this.reportOptions={},this.config=e,this.reportOptions=t}return e.canUseDB=function(){return!!(null===window||void 0===window?void 0:window.indexedDB)},e.prototype.openDB=function(){var t=this;return new Promise((function(r,n){if(!e.canUseDB())return n({message:"当前不支持 indexeddb"});var o=t.config,i=o.name,a=o.version,s=o.stores,u=indexedDB.open(i,a);u.onsuccess=function(){t.db=u.result,r(),S({result:1,func:"open",params:JSON.stringify(t.config)},t.reportOptions)},u.onerror=function(e){var r,o;n(e),S({result:0,func:"open",params:JSON.stringify(t.config),error_msg:null===(o=null===(r=e.target)||void 0===r?void 0:r.error)||void 0===o?void 0:o.message},t.reportOptions)},u.onupgradeneeded=function(){t.db=u.result;try{null==s||s.forEach((function(e){t.createStore(e)}))}catch(e){S({result:0,func:"open",params:JSON.stringify(t.config),error_msg:e.message},t.reportOptions),n(e)}}}))},e.prototype.useStore=function(e){return this.storeName=e,this},e.prototype.deleteDB=function(){var e=this;return this.closeDB(),new Promise((function(t,r){var n=indexedDB.deleteDatabase(e.config.name);n.onsuccess=function(){return t()},n.onerror=r}))},e.prototype.closeDB=function(){var e;null===(e=this.db)||void 0===e||e.close(),this.db=null},e.prototype.getStoreCount=function(){var e=this;return new Promise((function(t,r){var n=e.getStore("readonly").count();n.onsuccess=function(){return t(n.result)},n.onerror=r}))},e.prototype.clearStore=function(){var e=this;return new Promise((function(t,r){var n=e.getStore("readwrite").clear();n.onsuccess=function(){return t()},n.onerror=r}))},e.prototype.add=function(e,t){var r=this;return new Promise((function(n,o){var i=r.getStore("readwrite").add(e,t);i.onsuccess=function(){n(i.result)},i.onerror=o}))},e.prototype.put=function(e,t){var r=this;return new Promise((function(n,o){var i=r.getStore("readwrite").put(e,t);i.onsuccess=function(){n(i.result)},i.onerror=o}))},e.prototype.getStoreAllData=function(){var e=this;return new Promise((function(t,r){var n=e.getStore("readonly").openCursor(),o=[];n.onsuccess=function(){var e;if(null===(e=n.result)||void 0===e?void 0:e.value){var r=n.result.value;o.push(r),n.result.continue()}else t(o)},n.onerror=r}))},e.prototype.getDataRangeByIndex=function(e,t,r,n,o){var i=this;return new Promise((function(a,s){var u=i.getStore().index(e),c=IDBKeyRange.bound(t,r,n,o),f=[],l=u.openCursor(c);l.onsuccess=function(){var e;(null===(e=null==l?void 0:l.result)||void 0===e?void 0:e.value)?(f.push(null==l?void 0:l.result.value),null==l||l.result.continue()):a(f)},l.onerror=s}))},e.prototype.removeDataByIndex=function(e,t,r,n,o){var i=this;return new Promise((function(a,s){var u=i.getStore("readwrite").index(e),c=IDBKeyRange.bound(t,r,n,o),f=u.openCursor(c),l=0;f.onsuccess=function(e){var t=e.target.result;t?(l+=1,t.delete(),t.continue()):a(l)},f.onerror=s}))},e.prototype.createStore=function(e){var t=e.name,r=e.indexes,n=void 0===r?[]:r,o=e.options;if(this.db){this.db.objectStoreNames.contains(t)&&this.db.deleteObjectStore(t);var i=this.db.createObjectStore(t,o);n.forEach((function(e){i.createIndex(e.indexName,e.keyPath,e.options)}))}},e.prototype.getStore=function(e){var t;return void 0===e&&(e="readonly"),null===(t=this.db)||void 0===t?void 0:t.transaction(this.storeName,e).objectStore(this.storeName)},e}(),x="event_table_v3",T="eventId",I=function(){function e(e){this.isReady=!1,this.taskQueue=Promise.resolve(),this.db=new O({name:"Beacon_"+e+"_V3",version:1,stores:[{name:x,options:{keyPath:T},indexes:[{indexName:T,keyPath:T,options:{unique:!0}}]}]}),this.open()}return e.prototype.getCount=function(){var e=this;return this.readyExec((function(){return e.db.getStoreCount()}))},e.prototype.setItem=function(e,t){var r=this;return this.readyExec((function(){return r.db.add({eventId:e,value:t})}))},e.prototype.getItem=function(e){return n(this,void 0,void 0,(function(){var t=this;return o(this,(function(r){return[2,this.readyExec((function(){return t.db.getDataRangeByIndex(T,e,e)}))]}))}))},e.prototype.removeItem=function(e){var t=this;return this.readyExec((function(){return t.db.removeDataByIndex(T,e,e)}))},e.prototype.updateItem=function(e,t){var r=this;return this.readyExec((function(){return r.db.put({eventId:e,value:t})}))},e.prototype.iterate=function(e){var t=this;return this.readyExec((function(){return t.db.getStoreAllData().then((function(t){t.forEach((function(t){e(t.value)}))}))}))},e.prototype.open=function(){return n(this,void 0,void 0,(function(){var e=this;return o(this,(function(t){switch(t.label){case 0:return this.taskQueue=this.taskQueue.then((function(){return e.db.openDB()})),[4,this.taskQueue];case 1:return t.sent(),this.isReady=!0,this.db.useStore(x),[2]}}))}))},e.prototype.readyExec=function(e){return this.isReady?e():(this.taskQueue=this.taskQueue.then((function(){return e()})),this.taskQueue)},e}(),A=function(){function e(e){this.keyObject={},this.storage=e}return e.prototype.getCount=function(){return this.storage.getStoreCount()},e.prototype.removeItem=function(e){this.storage.removeItem(e),delete this.keyObject[e]},e.prototype.setItem=function(e,t){var r=JSON.stringify(t);this.storage.setItem(e,r),this.keyObject[e]=t},e.prototype.iterate=function(e){for(var t=Object.keys(this.keyObject),r=0;r<t.length;r++){var n=this.storage.getItem(t[r]);e(JSON.parse(n))}},e}(),D=function(){function e(e,t){var r=this;this.dbEventCount=0,w()>0||!window.indexedDB||/X5Lite/.test(navigator.userAgent)?(this.store=new A(t),this.dbEventCount=this.store.getCount()):(this.store=new I(e),this.getCount().then((function(e){r.dbEventCount=e})))}return e.prototype.getCount=function(){return n(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.store.getCount()];case 1:return[2,e.sent()];case 2:return e.sent(),[2,Promise.reject()];case 3:return[2]}}))}))},e.prototype.insertEvent=function(e,t){return n(this,void 0,void 0,(function(){var r,n;return o(this,(function(o){switch(o.label){case 0:if(this.dbEventCount>=1e4)return[2,Promise.reject()];r=h(e.mapValue),o.label=1;case 1:return o.trys.push([1,3,,4]),this.dbEventCount++,[4,this.store.setItem(r,e)];case 2:return[2,o.sent()];case 3:return n=o.sent(),t&&t(n,e),this.dbEventCount--,[2,Promise.reject()];case 4:return[2]}}))}))},e.prototype.getEvents=function(){return n(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:e=[],t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.store.iterate((function(t){e.push(t)}))];case 2:case 3:return t.sent(),[2,Promise.all(e)];case 4:return[2]}}))}))},e.prototype.removeEvent=function(e){return n(this,void 0,void 0,(function(){var t;return o(this,(function(r){switch(r.label){case 0:t=h(e.mapValue),r.label=1;case 1:return r.trys.push([1,3,,4]),this.dbEventCount--,[4,this.store.removeItem(t)];case 2:return[2,r.sent()];case 3:return r.sent(),this.dbEventCount++,[2,Promise.reject()];case 4:return[2]}}))}))},e}(),R=function(){return(R=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function P(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function k(e,t){var r=[null,void 0,"",NaN].includes(e);if(t.isSkipEmpty&&r)return null;var n=!t.isSkipEmpty&&r?"":e;try{return t.encode?encodeURIComponent(n):n}catch(e){return null}}function C(e,t){void 0===t&&(t={encode:!0,isSkipEmpty:!1});var r=e.url,n=e.query,o=void 0===n?{}:n,i=e.hash,a=r.split("#"),s=a[0],u=a[1],c=void 0===u?"":u,f=s.split("?")[0],l=[],p=k(i||c,t),d=R(R({},function(e){var t=e.split("#"),r=t[0],n=t[1],o=void 0===n?"":n,i=r.split("?"),a=i[0],s=i[1],u=void 0===s?"":s,c=P(o),f=Object.create(null);return u.split("&").forEach((function(e){var t=e.split("="),r=t[0],n=t[1],o=void 0===n?"":n,i=P(r),a=P(o);null===i||null===a||""===i&&""===a||f[i]||(f[i]=a)})),{url:a,query:f,hash:c}}(r).query),o);return Object.keys(d).forEach((function(e){var r=k(e,t),n=k(d[e],t);null!==r&&null!==n&&l.push(r+"="+n)})),f+(l.length?"?"+l.join("&"):"")+(p?"#"+p:"")}function j(e,t){return new Promise((function(r,n){if(t&&document.querySelectorAll("script[data-tag="+t+"]").length)return r();var o=document.createElement("script"),i=R({type:"text/javascript",charset:"utf-8"},e);Object.keys(i).forEach((function(e){return function(e,t,r){if(e)return void 0===r?e.getAttribute(t):e.setAttribute(t,r)}(o,e,i[e])})),t&&(o.dataset.tag=t),o.onload=function(){return r()},o.onreadystatechange=function(){var e=o.readyState;["complete","loaded"].includes(e)&&(o.onreadystatechange=null,r())},o.onerror=n,document.body.appendChild(o)}))}!function(e){e[e.equal=0]="equal",e[e.low=-1]="low",e[e.high=1]="high"}(_||(_={}));var L=function(){return(L=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function N(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))}function M(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var B=function(){function e(){this.interceptors=[]}return e.prototype.use=function(e,t){return this.interceptors.push({resolved:e,rejected:t}),this.interceptors.length-1},e.prototype.traverse=function(e,t){void 0===t&&(t=!1);var r=Promise.resolve(e);return(t?Array.prototype.reduceRight:Array.prototype.reduce).call(this.interceptors,(function(e,t){if(t){var n=t.resolved,o=t.rejected;r=r.then(n,o)}return e}),""),r},e.prototype.eject=function(e){this.interceptors[e]&&(this.interceptors[e]=null)},e}(),F={defaults:{timeout:0,method:"GET",mode:"cors",redirect:"follow",credentials:"same-origin"},headers:{common:{Accept:"application/json, text/plain, */*"},POST:{"Content-Type":"application/x-www-form-urlencoded"},PUT:{"Content-Type":"application/x-www-form-urlencoded"},PATCH:{"Content-Type":"application/x-www-form-urlencoded"}},baseURL:"",polyfillUrl:"https://vm.gtimg.cn/comps/script/fetch.min.js",interceptors:{request:new B,response:new B}},K=/^([a-z][a-z\d+\-.]*:)?\/\//i,q=Object.prototype.toString;function U(e){return N(this,void 0,void 0,(function(){var t;return M(this,(function(r){switch(r.label){case 0:if(window.fetch)return[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,j({src:e})];case 2:return r.sent(),[3,4];case 3:throw t=r.sent(),function(e){if("undefined"!=typeof Image){var t=new Image(1,1),r=L({attaid:"0f400053130",token:"6552374442",comps:"@tencent/ovb-request",version:"1.1.18",ua:navigator.userAgent,url:location.href,_dc:Math.random()},e),n=Object.keys(r).map((function(e){return e+"="+encodeURIComponent(r[e])})).join("&");t.src="https://h.trace.qq.com/kv?"+n}}({func:"loadPolyfill",result:0,params:e,error_msg:t.message}),new Error("加载 polyfill "+e+" 失败: "+t.message);case 4:return[2]}}))}))}function V(e){return N(this,void 0,void 0,(function(){var t,r,n,o,i,a,s,u,c,f,l,p,d,h,v,g,y;return M(this,(function(m){switch(m.label){case 0:return t=F.baseURL,r=F.defaults,n=F.interceptors,[4,U(F.polyfillUrl)];case 1:return m.sent(),(o=L(L({},r),e)).headers||(o.headers=function(e){void 0===e&&(e="GET");var t=F.headers[e]||{};return L(L({},F.headers.common),t)}(o.method)),function(e){["Accept","Content-Type"].forEach((function(t){return r=t,void((n=e.headers)&&Object.keys(n).forEach((function(e){e!==r&&e.toUpperCase()===r.toUpperCase()&&(n[r]=n[e],delete n[e])})));var r,n})),function(e){if("[object Object]"!==q.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}(e.body)&&(e.body=JSON.stringify(e.body),e.headers&&(e.headers["Content-Type"]="application/json;charset=utf-8"))}(o),[4,n.request.traverse(o,!0)];case 2:if((i=m.sent())instanceof Error)throw i;return i.url=function(e,t){return!e||K.test(t)?t:e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,"")}(t,i.url),a=i.url,s=i.timeout,u=i.params,c=i.method,f=["GET","DELETE","OPTIONS","HEAD"].includes(void 0===c?"GET":c)&&!!u,l=f?C({url:a,query:u}):a,p=[],s&&!i.signal&&(v=new Promise((function(e){d=setTimeout((function(){e(new Error("timeout"))}),s)})),p.push(v),h=new AbortController,i.signal=h.signal),p.push(fetch(l,i).catch((function(e){return e}))),[4,Promise.race(p)];case 3:return g=m.sent(),d&&clearTimeout(d),[4,n.response.traverse(g)];case 4:if((y=m.sent())instanceof Error)throw null==h||h.abort(),y;return[2,y]}}))}))}var J=function(){function e(e){F.interceptors.request.use((function(t){var n=t.url,o=t.method,i=t.body,a=i;if(e.onReportBeforeSend){var s=e.onReportBeforeSend({url:n,method:o,data:i});a=(null==s?void 0:s.data)||null}if("GET"!==o&&!a)throw new Error("No data for sdk, cancel.");return r(r({},t),{body:a})}))}return e.prototype.get=function(e,t){return n(this,void 0,void 0,(function(){var n,i;return o(this,(function(o){switch(o.label){case 0:return[4,V(r({url:e},t))];case 1:return[4,(n=o.sent()).json()];case 2:return i=o.sent(),[2,Promise.resolve({data:i,status:n.status,statusText:n.statusText,headers:n.headers})]}}))}))},e.prototype.post=function(e,t,i){return n(this,void 0,void 0,(function(){var n,a;return o(this,(function(o){switch(o.label){case 0:return[4,V(r({url:e,body:t,method:"POST"},i))];case 1:return[4,(n=o.sent()).json()];case 2:return a=o.sent(),[2,Promise.resolve({data:a,status:n.status,statusText:n.statusText,headers:n.headers})]}}))}))},e}(),H=function(){function e(e){this.appkey=e}return e.prototype.getItem=function(e){try{return window.localStorage.getItem(this.getStoreKey(e))}catch(e){return""}},e.prototype.removeItem=function(e){try{window.localStorage.removeItem(this.getStoreKey(e))}catch(e){}},e.prototype.setItem=function(e,t){try{window.localStorage.setItem(this.getStoreKey(e),t)}catch(e){}},e.prototype.setSessionItem=function(e,t){try{window.sessionStorage.setItem(this.getStoreKey(e),t)}catch(e){}},e.prototype.getSessionItem=function(e){try{return window.sessionStorage.getItem(this.getStoreKey(e))}catch(e){return""}},e.prototype.getStoreKey=function(e){return i+this.appkey+"_"+e},e.prototype.createDeviceId=function(){try{var e=window.localStorage.getItem(a);return e||(e=function(e){for(var t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz0123456789",r="",n=0;n<32;n++)r+=t.charAt(Math.floor(Math.random()*t.length));return r}(),window.localStorage.setItem(a,e)),e}catch(e){return""}},e.prototype.clear=function(){try{for(var e=window.localStorage.length,t=0;t<e;t++){var r=window.localStorage.key(t);(null==r?void 0:r.substr(0,9))==i&&window.localStorage.removeItem(r)}}catch(e){}},e.prototype.getStoreCount=function(){var e=0;try{e=window.localStorage.length}catch(e){}return e},e}();"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t||"undefined"!=typeof self&&self;var Y=function(e){var t={exports:{}};return function(e,t){e.exports=function(){function e(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}var t,r=(function(e){e=function(e){var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(r){u=function(e,t,r){return e[t]=r}}function c(e,r,n,o){var i,a,s,u;return r=r&&r.prototype instanceof g?r:g,r=Object.create(r.prototype),o=new x(o||[]),r._invoke=(i=e,a=n,s=o,u=l,function(e,r){if(u===d)throw new Error("Generator is already running");if(u===h){if("throw"===e)throw r;return I()}for(s.method=e,s.arg=r;;){var n=s.delegate;if(n){var o=function e(r,n){var o;if((o=r.iterator[n.method])===t){if(n.delegate=null,"throw"===n.method){if(r.iterator.return&&(n.method="return",n.arg=t,e(r,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}return"throw"===(o=f(o,r.iterator,n.arg)).type?(n.method="throw",n.arg=o.arg,n.delegate=null,v):(o=o.arg)?o.done?(n[r.resultName]=o.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}(n,s);if(o){if(o===v)continue;return o}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(u===l)throw u=h,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);if(u=d,"normal"===(o=f(i,a,s)).type){if(u=s.done?h:p,o.arg!==v)return{value:o.arg,done:s.done}}else"throw"===o.type&&(u=h,s.method="throw",s.arg=o.arg)}}),r}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var l="suspendedStart",p="suspendedYield",d="executing",h="completed",v={};function g(){}function y(){}function m(){}var b={};b[i]=function(){return this},(o=(o=Object.getPrototypeOf)&&o(o(T([]))))&&o!==r&&n.call(o,i)&&(b=o);var E=m.prototype=g.prototype=Object.create(b);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){var r;this._invoke=function(o,i){function a(){return new t((function(r,a){!function r(o,i,a,s){if("throw"!==(o=f(e[o],e,i)).type){var u=o.arg;return(i=u.value)&&"object"==typeof i&&n.call(i,"__await")?t.resolve(i.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(i).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(o.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(e){if(e){if(r=e[i])return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r,o=-1;return(r=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r}).next=r}}return{next:I}}function I(){return{value:t,done:!0}}return((y.prototype=E.constructor=m).constructor=y).displayName=u(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){return!!(e="function"==typeof e&&e.constructor)&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,s,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},w(_.prototype),_.prototype[a]=function(){return this},e.AsyncIterator=_,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(E),u(E,s,"Generator"),E[i]=function(){return this},E.toString=function(){return"[object Generator]"},e.keys=function(e){var t,r=[];for(t in e)r.push(t);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;0<=i;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc?null:i)?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n,o=r.completion;return"throw"===o.type&&(n=o.arg,O(r)),n}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}(t={exports:{}}),t.exports);return function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.version="1.0.0";var r=Array.prototype.map,n=Array.prototype.forEach;e&&(this.hasher=e),this.each=function(e,t,r){if(null!=e)if(n&&e.forEach===n)e.forEach(t,r);else if(e.length===+e.length){for(var o=0,i=e.length;o<i;o++)if(t.call(r,e[o],o,e)==={})return}else for(var a in e)if(e.hasOwnProperty(a)&&t.call(r,e[a],a,e)==={})return},this.map=function(e,t,n){var o=[];return null==e?o:r&&e.map===r?e.map(t,n):(this.each(e,(function(e,r,i){o[o.length]=t.call(n,e,r,i)})),o)}}var n,o,i,a;return n=t,(o=[{key:"getQimei36",value:function(e,t){var r=this;this.getHid().then((function(n){var o="3BJr"+e.substring(0,2)+(n&&n.substring(3,7)),i=new XMLHttpRequest;i.open("POST","https://snowflake.qq.com/ola/h5",!0),i.setRequestHeader("Content-Type","application/json"),i.onreadystatechange=function(){if(i.readyState==XMLHttpRequest.DONE&&200==i.status)try{t&&t(JSON.parse(i.responseText))}catch(e){t(null)}},i.send(JSON.stringify({appKey:e,hid:n,sign:o,version:r.version}))}))}},{key:"getHid",value:(i=r.mark((function e(){var t,n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=[]).push((r=void 0,(r=[Math.floor(window.screen.width*window.devicePixelRatio),Math.floor(window.screen.height*window.devicePixelRatio)]).sort().reverse(),r.join("x"))),t.push((r=void 0,(r=[Math.floor(window.screen.availWidth*window.devicePixelRatio),Math.floor(window.screen.availHeight*window.devicePixelRatio)]).sort().reverse(),r.join("x"))),t.push(navigator.deviceMemory),t.push(!!window.sessionStorage),t.push(!!window.indexedDB),t.push(navigator.productSub),t.push(navigator.hardwareConcurrency),t.push(this.getWebglVendorAndRenderer()),t.push((new Date).getTimezoneOffset()),e.next=12,this.getFactor();case 12:if(n=e.sent,t.push(n),this.hasher)return e.abrupt("return",this.hasher(t.join("###"),31));e.next=18;break;case 18:return e.abrupt("return",this.x64hash128(t.join("###"),31));case 19:case"end":return e.stop()}var r}),e,this)})),a=function(){var t=this,r=arguments;return new Promise((function(n,o){var a=i.apply(t,r);function s(t){e(a,n,o,s,u,"next",t)}function u(t){e(a,n,o,s,u,"throw",t)}s(void 0)}))},function(){return a.apply(this,arguments)})},{key:"getUserAgent",value:function(){return navigator.userAgent}},{key:"getNative",value:function(){var e=this;this.getHid().then((function(t){JSInterface.callback(e.version,t,e.getUserAgent())}))}},{key:"getWebglVendorAndRenderer",value:function(){try{var e=function(){var e=document.createElement("canvas"),t=null;try{t=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(e){}return t||null}(),t=e.getExtension("WEBGL_debug_renderer_info"),r=[e.getParameter(t.UNMASKED_VENDOR_WEBGL),e.getParameter(t.UNMASKED_RENDERER_WEBGL)].join("~"),n=e.getExtension("WEBGL_lose_context");return null!=n&&n.loseContext(),r}catch(e){return null}}},{key:"getFactor",value:function(){return new Promise((function(e,t){var r=window.RTCPeerConnection||window.webkitRTCPeerConnection||window.mozRTCPeerConnection;r?function(){var t=new r({iceServers:[]});t.createDataChannel("",{reliable:!1}),t.onicecandidate=function(e){e.candidate&&i("a=".concat(e.candidate.candidate))},t.createOffer((function(e){i(e.sdp),t.setLocalDescription(e)}),(function(e){}));var n=Object.create(null);function o(t){if(!(t in n)){n[t]=!0;for(var r=Object.keys(n).filter((function(e){return n[e]})),o=0;o<r.length;o++)16<r[o].length&&(r.splice(o,1),o--);e(r[0])}}function i(e){(0<arguments.length&&void 0!==e?e:"").split("\r\n").forEach((function(e,t,r){var n,i;~e.indexOf("a=candidate")?(i=(n=e.split(" "))[4],"host"===n[7]&&o(i)):~e.indexOf("c=")&&o(e.split(" ")[2])}))}n["0.0.0.0"]=!1}():e(null)}))}},{key:"x64hash128",value:function(e,t){for(var r=function(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]+t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]+t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]+t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]+t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]},n=function(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]*t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]*t[3],r[1]+=r[2]>>>16,r[2]&=65535,r[2]+=e[3]*t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]*t[3],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[2]*t[2],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[3]*t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]},o=function(e,t){return 32==(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:[e[1]<<(t-=32)|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t]},i=function(e,t){return 0==(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]},a=function(e,t){return[e[0]^t[0],e[1]^t[1]]},s=function(e){return e=a(e,[0,e[0]>>>1]),e=n(e,[4283543511,3981806797]),e=a(e,[0,e[0]>>>1]),e=n(e,[3301882366,444984403]),a(e,[0,e[0]>>>1])},u=(e=e||"").length%16,c=e.length-u,f=[0,t=t||0],l=[0,t],p=[0,0],d=[0,0],h=[2277735313,289559509],v=[1291169091,658871167],g=0;g<c;g+=16)p=[255&e.charCodeAt(g+4)|(255&e.charCodeAt(g+5))<<8|(255&e.charCodeAt(g+6))<<16|(255&e.charCodeAt(g+7))<<24,255&e.charCodeAt(g)|(255&e.charCodeAt(g+1))<<8|(255&e.charCodeAt(g+2))<<16|(255&e.charCodeAt(g+3))<<24],d=[255&e.charCodeAt(g+12)|(255&e.charCodeAt(g+13))<<8|(255&e.charCodeAt(g+14))<<16|(255&e.charCodeAt(g+15))<<24,255&e.charCodeAt(g+8)|(255&e.charCodeAt(g+9))<<8|(255&e.charCodeAt(g+10))<<16|(255&e.charCodeAt(g+11))<<24],p=o(p=n(p,h),31),p=n(p,v),f=r(f=o(f=a(f,p),27),l),f=r(n(f,[0,5]),[0,1390208809]),d=o(d=n(d,v),33),d=n(d,h),l=r(l=o(l=a(l,d),31),f),l=r(n(l,[0,5]),[0,944331445]);switch(p=[0,0],d=[0,0],u){case 15:d=a(d,i([0,e.charCodeAt(g+14)],48));case 14:d=a(d,i([0,e.charCodeAt(g+13)],40));case 13:d=a(d,i([0,e.charCodeAt(g+12)],32));case 12:d=a(d,i([0,e.charCodeAt(g+11)],24));case 11:d=a(d,i([0,e.charCodeAt(g+10)],16));case 10:d=a(d,i([0,e.charCodeAt(g+9)],8));case 9:d=a(d,[0,e.charCodeAt(g+8)]),d=o(d=n(d,v),33),d=n(d,h),l=a(l,d);case 8:p=a(p,i([0,e.charCodeAt(g+7)],56));case 7:p=a(p,i([0,e.charCodeAt(g+6)],48));case 6:p=a(p,i([0,e.charCodeAt(g+5)],40));case 5:p=a(p,i([0,e.charCodeAt(g+4)],32));case 4:p=a(p,i([0,e.charCodeAt(g+3)],24));case 3:p=a(p,i([0,e.charCodeAt(g+2)],16));case 2:p=a(p,i([0,e.charCodeAt(g+1)],8));case 1:p=a(p,[e.charCodeAt(g)]),p=o(p=n(p,h),31),p=n(p,v),f=a(f,p)}return f=a(f,[0,e.length]),l=r(l=a(l,[0,e.length]),f=r(f,l)),f=s(f),l=r(l=s(l),f=r(f,l)),("00000000"+(f[0]>>>0).toString(16)).slice(-8)+("00000000"+(f[1]>>>0).toString(16)).slice(-8)+("00000000"+(l[0]>>>0).toString(16)).slice(-8)+("00000000"+(l[1]>>>0).toString(16)).slice(-8)}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(n.prototype,o),t}()}()}(t),t.exports}(),G="logid_start",W="4.5.5-web";return function(t){function n(e){var r=t.call(this,e)||this;r.qimei36="",r.uselessCycleTaskNum=0,r.underWeakNet=!1,r.send=function(e,t,n){r.storage.setItem(s,Date.now().toString()),r.network.post(r.uploadUrl||r.strategy.getUploadUrl(),e.data).then((function(n){var o;100==(null===(o=null==n?void 0:n.data)||void 0===o?void 0:o.result)?r.delayTime=1e3*n.data.delayTime:r.delayTime=0,t&&t(e.data),e.data.events.forEach((function(e){r.store.removeEvent(e).then((function(){r.removeSendingId(h(e.mapValue))}))})),r.doCustomCycleTask()})).catch((function(t){var o=e.data.events;r.errorReport.reportError(t.code?t.code.toString():"600",t.message),n&&n(e.data);var i=JSON.parse(r.storage.getItem(u));o.forEach((function(e){i&&-1!=i.indexOf(h(e))&&r.store.insertEvent(e,(function(e,t){e&&r.errorReport.reportError("604","insertEvent fail!")})),r.removeSendingId(h(e))})),r.monitorUploadFailed()}))};var n,o,i=w();return r.isUnderIE8=i>0&&i<8,r.isUnderIE8||(r.isUnderIE=i>0,e.needInitQimei&&r.initQimei(e.appkey),r.network=new J(e),r.storage=new H(e.appkey),r.initCommonInfo(e),r.store=new D(e.appkey,r.storage),r.errorReport=new y(r.config,r.commonInfo,"web",r.network),r.strategy=new m(r.config,r.commonInfo,r.storage,r.network),r.logidStartTime=r.storage.getItem(G),r.logidStartTime||(r.logidStartTime=Date.now().toString(),r.storage.setItem(G,r.logidStartTime)),n=r.logidStartTime,o=Date.now()-Number.parseFloat(n),Math.floor(o/864e5)>=365&&r.storage.clear(),r.initSession(e),r.onDirectUserAction("rqd_js_init",{}),setTimeout((function(){return r.lifeCycle.emit("init")}),0),r.initDelayTime=e.delay?e.delay:1e3,r.cycleTask(r.initDelayTime)),r}return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}(n,t),n.prototype.initQimei=function(e){var t=this;(new Y).getQimei36(e,(function(e){t.qimei36=e.q36}))},n.prototype.initSession=function(e){var t=18e5;e.sessionDuration&&e.sessionDuration>3e4&&(t=e.sessionDuration),this.beaconSession=new E(this.storage,t,this)},n.prototype.initCommonInfo=function(e){var t=Number(this.storage.getItem(s));try{var r=JSON.parse(this.storage.getItem(u));(Date.now()-t>3e4||!r)&&this.storage.setItem(u,JSON.stringify([]))}catch(e){}e.uploadUrl&&(this.uploadUrl=e.uploadUrl+"?appkey="+e.appkey);var n=[window.screen.width,window.screen.height];window.devicePixelRatio&&n.push(window.devicePixelRatio),this.commonInfo={deviceId:this.storage.createDeviceId(),language:navigator&&navigator.language||"zh_CN",query:window.location.search,userAgent:navigator.userAgent,pixel:n.join("*"),channelID:e.channelID?String(e.channelID):"",openid:e.openid?String(e.openid):"",unid:e.unionid?String(e.unionid):"",sdkVersion:W},this.config.appVersion=e.versionCode?String(e.versionCode):"",this.config.strictMode=e.strictMode},n.prototype.cycleTask=function(e){var t=this;this.intervalID=window.setInterval((function(){t.store.getEvents().then((function(e){var r=[],n=JSON.parse(t.storage.getItem(u));n||(n=[]),e&&e.forEach((function(e){var t=h(e.mapValue);-1==n.indexOf(t)&&(r.push(e),n.push(t))})),0!=r.length&&(t.storage.setItem(u,JSON.stringify(n)),t._normalLogPipeline(t.assembleData(r)))})).catch((function(e){}))}),e)},n.prototype.onReport=function(e,t,r){var n=this;if(this.isUnderIE8)this.errorReport.reportError("601","UnderIE8");else{var o=this.generateData(e,t,r);if(r&&0==this.delayTime&&!this.underWeakNet)this._normalLogPipeline(this.assembleData(o));else{var i=o.shift();i&&this.store.insertEvent(i,(function(e){e&&n.errorReport.reportError("604","insertEvent fail!")})).catch((function(e){n._normalLogPipeline(n.assembleData(o))}))}}},n.prototype.onSendBeacon=function(e,t){if(this.isUnderIE)this.errorReport.reportError("605","UnderIE");else{var r=this.assembleData(this.generateData(e,t,!0));"function"==typeof navigator.sendBeacon&&navigator.sendBeacon(this.uploadUrl||this.strategy.getUploadUrl(),JSON.stringify(r))}},n.prototype.generateData=function(e,t,n){var o=[],i="4.5.5-web_"+(n?"direct_log_id":"normal_log_id"),a=Number(this.storage.getItem(i));return a=a||1,t=r(r({},t),{A99:n?"Y":"N",A100:a.toString(),A72:W,A88:this.logidStartTime}),a++,this.storage.setItem(i,a.toString()),o.push({eventCode:e,eventTime:Date.now().toString(),mapValue:p(t,this.config.strictMode)}),o},n.prototype.assembleData=function(e){var t=this.beaconSession.getSession();return{appVersion:this.config.appVersion?d(this.config.appVersion):"",sdkId:"js",sdkVersion:W,mainAppKey:this.config.appkey,platformId:3,common:p(r(r({},this.additionalParams),{A2:this.commonInfo.deviceId,A8:this.commonInfo.openid,A12:this.commonInfo.language,A17:this.commonInfo.pixel,A23:this.commonInfo.channelID,A50:this.commonInfo.unid,A76:t.sessionId,A101:this.commonInfo.userAgent,A102:window.location.href,A104:document.referrer,A119:this.commonInfo.query,A153:this.qimei36}),!1),events:e}},n.prototype.monitorUploadFailed=function(){this.uselessCycleTaskNum++,this.uselessCycleTaskNum>=5&&(window.clearInterval(this.intervalID),this.cycleTask(6e4),this.underWeakNet=!0)},n.prototype.doCustomCycleTask=function(){this.uselessCycleTaskNum>=5&&(window.clearInterval(this.intervalID),this.cycleTask(this.initDelayTime)),this.uselessCycleTaskNum=0,this.underWeakNet=!1},n}(g)}()}).call(this,r(109))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.TabJSAttaReporter=void 0;var i=r(14),a=i.DefaultLogger,s={},u=function(e){function t(t){var r=e.call(this,t)||this;return s[i.REPORT_KEY_TABAPPID]="appid",s[i.REPORT_KEY_USERID]="guid",s[i.REPORT_KEY_GRAYID]="grayid",s[i.REPORT_KEY_EXPNAE]="reserved",s[i.REPORT_KEY_PLAT]="platform",s[i.REPORT_KEY_FIRSTHIT]="isfirsthint",s[i.REPORT_KEY_UTYPE]="unittype",s[i.REPORT_KEY_PERCENT]="exppercentage",s[i.REPORT_KEY_BUCKET]="expbucket",s[i.REPORT_KEY_PARAMS]="expparams",s[i.REPORT_KEY_ENV]="reserved2",s[i.REPORT_KEY_LAYER]="layercode",s[i.REPORT_KEY_SDKVER]="sdkversion",r}return o(t,e),t.prototype.isOk=function(){return!0},t.prototype.preapareReqUrl=function(e,t){var r,n,o="https://h.trace.qq.com/kv?attaid="+((null===(r=this.memStore.strategy)||void 0===r?void 0:r.attaId)||i.TabAttaAppKey)+"&token="+((null===(n=this.memStore.strategy)||void 0===n?void 0:n.attaToken)||i.TabAttaAppToken)+"&eventcode="+e;return Object.keys(t).forEach((function(e){var r=s[e];o=r?o+"&"+r+"="+t[e]:o+"&"+e+"="+t[e]})),a.debug(o),o},t.prototype.reportEvent=function(e,t){var r=this;return new Promise((function(n){var o=r.preapareReqUrl(e,t);Image&&(new Image(1,1).src=o),n()}))},t}(i.TabReporter);t.TabJSAttaReporter=u}])},"../node_modules/@tencent/toggle-client-js/dist/toggle.es.js":function(e,t,r){"use strict";r.d(t,{Lc:function(){return je},j2:function(){return ke},mX:function(){return Ce}});var n="undefined"!=typeof r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function f(e,t){return e(t={exports:{}},t.exports),t.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n||"undefined"!=typeof self&&self;for(var l=f((function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function(){return t(r),r}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}})),p=[],d=0;d<256;++d)p[d]=(d+256).toString(16).substr(1);var h=function(e,t){var r=t||0,n=p;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")},v=function(e,t,r){var n=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||l)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var i=0;i<16;++i)t[n+i]=o[i];return t||h(o)},g=f((function(e,t){var r;e.exports=(r=r||function(e,t){var r=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),n={},o=n.lib={},i=o.Base={extend:function(e){var t=r(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=o.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,o=e.sigBytes;if(this.clamp(),n%4)for(var i=0;i<o;i++){var a=r[i>>>2]>>>24-i%4*8&255;t[n+i>>>2]|=a<<24-(n+i)%4*8}else for(i=0;i<o;i+=4)t[n+i>>>2]=r[i>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var r,n=[],o=function(t){var r=987654321,n=4294967295;return function(){var o=((r=36969*(65535&r)+(r>>16)&n)<<16)+(t=18e3*(65535&t)+(t>>16)&n)&n;return o/=4294967296,(o+=.5)*(e.random()>.5?1:-1)}},i=0;i<t;i+=4){var s=o(4294967296*(r||e.random()));r=987654071*s(),n.push(4294967296*s()|0)}return new a.init(n,t)}}),s=n.enc={},u=s.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],o=0;o<r;o++){var i=t[o>>>2]>>>24-o%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new a.init(r,t/2)}},c=s.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],o=0;o<r;o++){var i=t[o>>>2]>>>24-o%4*8&255;n.push(String.fromCharCode(i))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new a.init(r,t)}},f=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},l=o.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r=this._data,n=r.words,o=r.sigBytes,i=this.blockSize,s=o/(4*i),u=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*i,c=e.min(4*u,o);if(u){for(var f=0;f<u;f+=i)this._doProcessBlock(n,f);var l=n.splice(0,u);r.sigBytes-=c}return new a.init(l,c)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),p=(o.Hasher=l.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new p.HMAC.init(e,r).finalize(t)}}}),n.algo={});return n}(Math),r)})),y=f((function(e,t){var r,n,o;e.exports=(o=(n=r=g).lib.WordArray,n.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp();for(var o=[],i=0;i<r;i+=3)for(var a=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;s<4&&i+.75*s<r;s++)o.push(n.charAt(a>>>6*(3-s)&63));var u=n.charAt(64);if(u)for(;o.length%4;)o.push(u);return o.join("")},parse:function(e){var t=e.length,r=this._map,n=this._reverseMap;if(!n){n=this._reverseMap=[];for(var i=0;i<r.length;i++)n[r.charCodeAt(i)]=i}var a=r.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(t=s)}return function(e,t,r){for(var n=[],i=0,a=0;a<t;a++)if(a%4){var s=r[e.charCodeAt(a-1)]<<a%4*2,u=r[e.charCodeAt(a)]>>>6-a%4*2;n[i>>>2]|=(s|u)<<24-i%4*8,i++}return o.create(n,i)}(e,t,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},r.enc.Base64)})),m=f((function(e,t){e.exports=g.enc.Utf8})),b=f((function(e,t){!function(r,n){var o={version:"3.0.1",x86:{},x64:{}};function i(e,t){return(65535&e)*t+(((e>>>16)*t&65535)<<16)}function a(e,t){return e<<t|e>>>32-t}function s(e){return e=i(e^=e>>>16,2246822507),(e=i(e^=e>>>13,3266489909))^e>>>16}function u(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]+t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]+t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]+t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]+t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function c(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]*t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]*t[3],r[1]+=r[2]>>>16,r[2]&=65535,r[2]+=e[3]*t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]*t[3],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[2]*t[2],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[3]*t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function f(e,t){return 32===(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])}function l(e,t){return 0===(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]}function p(e,t){return[e[0]^t[0],e[1]^t[1]]}function d(e){return p(e=c(e=p(e=c(e=p(e,[0,e[0]>>>1]),[4283543511,3981806797]),[0,e[0]>>>1]),[3301882366,444984403]),[0,e[0]>>>1])}o.x86.hash32=function(e,t){t=t||0;for(var r=(e=e||"").length%4,n=e.length-r,o=t,u=0,c=3432918353,f=461845907,l=0;l<n;l+=4)o=i(o=a(o^=u=i(u=a(u=i(u=255&e.charCodeAt(l)|(255&e.charCodeAt(l+1))<<8|(255&e.charCodeAt(l+2))<<16|(255&e.charCodeAt(l+3))<<24,c),15),f),13),5)+3864292196;switch(u=0,r){case 3:u^=(255&e.charCodeAt(l+2))<<16;case 2:u^=(255&e.charCodeAt(l+1))<<8;case 1:o^=u=i(u=a(u=i(u^=255&e.charCodeAt(l),c),15),f)}return(o=s(o^=e.length))>>>0},o.x86.hash128=function(e,t){t=t||0;for(var r=(e=e||"").length%16,n=e.length-r,o=t,u=t,c=t,f=t,l=0,p=0,d=0,h=0,v=597399067,g=2869860233,y=951274213,m=2716044179,b=0;b<n;b+=16)l=255&e.charCodeAt(b)|(255&e.charCodeAt(b+1))<<8|(255&e.charCodeAt(b+2))<<16|(255&e.charCodeAt(b+3))<<24,p=255&e.charCodeAt(b+4)|(255&e.charCodeAt(b+5))<<8|(255&e.charCodeAt(b+6))<<16|(255&e.charCodeAt(b+7))<<24,d=255&e.charCodeAt(b+8)|(255&e.charCodeAt(b+9))<<8|(255&e.charCodeAt(b+10))<<16|(255&e.charCodeAt(b+11))<<24,h=255&e.charCodeAt(b+12)|(255&e.charCodeAt(b+13))<<8|(255&e.charCodeAt(b+14))<<16|(255&e.charCodeAt(b+15))<<24,o=a(o^=l=i(l=a(l=i(l,v),15),g),19),o=i(o+=u,5)+1444728091,u=a(u^=p=i(p=a(p=i(p,g),16),y),17),u=i(u+=c,5)+197830471,c=a(c^=d=i(d=a(d=i(d,y),17),m),15),c=i(c+=f,5)+2530024501,f=a(f^=h=i(h=a(h=i(h,m),18),v),13),f=i(f+=o,5)+850148119;switch(l=0,p=0,d=0,h=0,r){case 15:h^=e.charCodeAt(b+14)<<16;case 14:h^=e.charCodeAt(b+13)<<8;case 13:f^=h=i(h=a(h=i(h^=e.charCodeAt(b+12),m),18),v);case 12:d^=e.charCodeAt(b+11)<<24;case 11:d^=e.charCodeAt(b+10)<<16;case 10:d^=e.charCodeAt(b+9)<<8;case 9:c^=d=i(d=a(d=i(d^=e.charCodeAt(b+8),y),17),m);case 8:p^=e.charCodeAt(b+7)<<24;case 7:p^=e.charCodeAt(b+6)<<16;case 6:p^=e.charCodeAt(b+5)<<8;case 5:u^=p=i(p=a(p=i(p^=e.charCodeAt(b+4),g),16),y);case 4:l^=e.charCodeAt(b+3)<<24;case 3:l^=e.charCodeAt(b+2)<<16;case 2:l^=e.charCodeAt(b+1)<<8;case 1:o^=l=i(l=a(l=i(l^=e.charCodeAt(b),v),15),g)}return o^=e.length,o+=u^=e.length,o+=c^=e.length,u+=o+=f^=e.length,c+=o,f+=o,o=s(o),o+=u=s(u),o+=c=s(c),u+=o+=f=s(f),c+=o,f+=o,("00000000"+(o>>>0).toString(16)).slice(-8)+("00000000"+(u>>>0).toString(16)).slice(-8)+("00000000"+(c>>>0).toString(16)).slice(-8)+("00000000"+(f>>>0).toString(16)).slice(-8)},o.x64.hash128=function(e,t){t=t||0;for(var r=(e=e||"").length%16,n=e.length-r,o=[0,t],i=[0,t],a=[0,0],s=[0,0],h=[2277735313,289559509],v=[1291169091,658871167],g=0;g<n;g+=16)a=[255&e.charCodeAt(g+4)|(255&e.charCodeAt(g+5))<<8|(255&e.charCodeAt(g+6))<<16|(255&e.charCodeAt(g+7))<<24,255&e.charCodeAt(g)|(255&e.charCodeAt(g+1))<<8|(255&e.charCodeAt(g+2))<<16|(255&e.charCodeAt(g+3))<<24],s=[255&e.charCodeAt(g+12)|(255&e.charCodeAt(g+13))<<8|(255&e.charCodeAt(g+14))<<16|(255&e.charCodeAt(g+15))<<24,255&e.charCodeAt(g+8)|(255&e.charCodeAt(g+9))<<8|(255&e.charCodeAt(g+10))<<16|(255&e.charCodeAt(g+11))<<24],o=u(c(o=u(o=f(o=p(o,a=c(a=f(a=c(a,h),31),v)),27),i),[0,5]),[0,1390208809]),i=u(c(i=u(i=f(i=p(i,s=c(s=f(s=c(s,v),33),h)),31),o),[0,5]),[0,944331445]);switch(a=[0,0],s=[0,0],r){case 15:s=p(s,l([0,e.charCodeAt(g+14)],48));case 14:s=p(s,l([0,e.charCodeAt(g+13)],40));case 13:s=p(s,l([0,e.charCodeAt(g+12)],32));case 12:s=p(s,l([0,e.charCodeAt(g+11)],24));case 11:s=p(s,l([0,e.charCodeAt(g+10)],16));case 10:s=p(s,l([0,e.charCodeAt(g+9)],8));case 9:i=p(i,s=c(s=f(s=c(s=p(s,[0,e.charCodeAt(g+8)]),v),33),h));case 8:a=p(a,l([0,e.charCodeAt(g+7)],56));case 7:a=p(a,l([0,e.charCodeAt(g+6)],48));case 6:a=p(a,l([0,e.charCodeAt(g+5)],40));case 5:a=p(a,l([0,e.charCodeAt(g+4)],32));case 4:a=p(a,l([0,e.charCodeAt(g+3)],24));case 3:a=p(a,l([0,e.charCodeAt(g+2)],16));case 2:a=p(a,l([0,e.charCodeAt(g+1)],8));case 1:o=p(o,a=c(a=f(a=c(a=p(a,[0,e.charCodeAt(g)]),h),31),v))}return o=p(o,[0,e.length]),i=u(i=p(i,[0,e.length]),o=u(o,i)),o=d(o),i=u(i=d(i),o=u(o,i)),("00000000"+(o[0]>>>0).toString(16)).slice(-8)+("00000000"+(o[1]>>>0).toString(16)).slice(-8)+("00000000"+(i[0]>>>0).toString(16)).slice(-8)+("00000000"+(i[1]>>>0).toString(16)).slice(-8)},e.exports&&(t=e.exports=o),t.murmurHash3=o}()})),E=(b.murmurHash3,b),w=(f((function(e,t){var r;e.exports=(r=g,function(e){var t=r,n=t.lib,o=n.WordArray,i=n.Hasher,a=t.algo,s=[],u=[];!function(){function t(t){for(var r=e.sqrt(t),n=2;n<=r;n++)if(!(t%n))return!1;return!0}function r(e){return 4294967296*(e-(0|e))|0}for(var n=2,o=0;o<64;)t(n)&&(o<8&&(s[o]=r(e.pow(n,.5))),u[o]=r(e.pow(n,1/3)),o++),n++}();var c=[],f=a.SHA256=i.extend({_doReset:function(){this._hash=new o.init(s.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],o=r[1],i=r[2],a=r[3],s=r[4],f=r[5],l=r[6],p=r[7],d=0;d<64;d++){if(d<16)c[d]=0|e[t+d];else{var h=c[d-15],v=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,g=c[d-2],y=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;c[d]=v+c[d-7]+y+c[d-16]}var m=n&o^n&i^o&i,b=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),E=p+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&f^~s&l)+u[d]+c[d];p=l,l=f,f=s,s=a+E|0,a=i,i=o,o=n,n=E+(b+m)|0}r[0]=r[0]+n|0,r[1]=r[1]+o|0,r[2]=r[2]+i|0,r[3]=r[3]+a|0,r[4]=r[4]+s|0,r[5]=r[5]+f|0,r[6]=r[6]+l|0,r[7]=r[7]+p|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,o=8*t.sigBytes;return r[o>>>5]|=128<<24-o%32,r[14+(o+64>>>9<<4)]=e.floor(n/4294967296),r[15+(o+64>>>9<<4)]=n,t.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=i._createHelper(f),t.HmacSHA256=i._createHmacHelper(f)}(Math),r.SHA256)})),f((function(e,t){var r,n,o,i;e.exports=(n=(r=g).lib.Base,o=r.enc,i=o.Utf8,void(r.algo.HMAC=n.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var r=e.blockSize,n=4*r;t.sigBytes>n&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),a=this._iKey=t.clone(),s=o.words,u=a.words,c=0;c<r;c++)s[c]^=1549556828,u[c]^=909522486;o.sigBytes=a.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,r=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(r))}})))})),f((function(e,t){e.exports=g.HmacSHA256})));function _(e){var t=y.stringify(e);return(t=(t=t.replace(/=+$/,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function S(e){function t(e,t){Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.message=e,this.code=t}return t.prototype=new Error,t.prototype.name=e,t.prototype.constructor=t,t}var O=S("ToggleUnexpectedResponseError"),x=S("ToggleInvalidArgumentError"),T=S("ToggleFetchError"),I=(S("ToggleInvalidSetNameError"),S("ToggleNotConfiguredError"),S("ToggleBadFeatureError")),A=/([0-9]+\.)?([0-9]+\.)?[0-9]+/;function D(e){setTimeout(e,0)}function R(e){var t=String(e.getMonth()+1);t=t.length<2?"0".concat(t):t;var r=String(e.getDate());r=r.length<2?"0".concat(r):r;var n=String(e.getHours());n=n.length<2?"0".concat(n):n;var o=String(e.getMinutes());o=o.length<2?"0".concat(o):o;var i=String(e.getSeconds());return i=i.length<2?"0".concat(i):i,"".concat(e.getFullYear(),"-").concat(t,"-").concat(r," ").concat(n,":").concat(o,":").concat(i)}function P(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((function(e,t){return s(s({},e),t)}),{})}function k(e,t){var r=e.then((function(e){return t&&setTimeout((function(){t(null,e)}),0),e}),(function(e){if(!t)return Promise.reject(e);setTimeout((function(){t(e,null)}),0)}));return t?void 0:r}function C(e,t,r){var n=i({},"Authorization","Bearer "+function(e,t){var r=_(m.parse(JSON.stringify({alg:"HS256",typ:"JWT"}))),n=_(m.parse(JSON.stringify(e))),o="".concat(r,".").concat(n),i=w(o,t);return i=_(i),"".concat(o,".").concat(i)}({iss:t,exp:Math.floor(new Date/1e3)+r+3600},e));return P(function(e){return{sn:v(),productNameEn:e,sdkType:"JavaScript",sdkVersion:"1.10.7",jceVersion:"1.3.0"}}(t),n)}function j(e){var t=Math.floor(Date.now()/1e3)+e;return new Date(function(e){var t=(new Date).getTimezoneOffset();if(e)return new Date(e+60*(-480-t)*1e3);var r=Date.now();return new Date(r+60*(-480-t)*1e3)}(1e3*t))}function L(e){return m.stringify(y.parse(e))}function N(e,t){D((function(){t&&t.maybeReportError(new x(e))}))}function M(e,t){e.length>0&&e.map((function(e){var r=e.key,n=e.message,o=e.callback;r&&(n&&N(n,t),o&&o())}))}function B(){return Math.floor(100*Math.random())+1}function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return E.x86.hash32(e)%t+1}var K=function(e){return"sending ".concat(e," events")},q=function(e,t){return"Received error ".concat(e," for ").concat(t)},U=function(e,t){return"Error fetching features, received error ".concat(function(e){return e&&e.message?e.message:"string"==typeof e||e instanceof String?e:JSON.stringify(e)}(e),", in ").concat(t)},V=function(e,t){return"Missing strategy ".concat(t," for ").concat(e)},J=function(e,t){return"Feature Toggle is not initialized yet, querying feature ".concat(e," gets a default value ").concat(!!t)},H=200,Y=401,G=500,W=100302,z="true",X="whitelist",Q="blacklist",$="equal",Z="regexp",ee="_feature_flag_status",te="_feature_flag_key",re="1",ne="roma",oe="MAP",ie="STRING",ae="BOOL",se="FLOAT",ue="LIST",ce="JSON";function fe(e,t,r){var n={};function o(){return"tf-".concat(t.productId,"-").concat(t.moduleId)}return n.loadFeatures=function(){return e.get(o()).then((function(e){var r=e;if(null===r||void 0===r)return null;t.encodeCache&&(r=L(r));try{return JSON.parse(r)}catch(e){return n.clearFeatures().then((function(){return Promise.reject(e)}))}})).catch((function(e){return r.warn("localStorage is unavailable"),Promise.reject(e)}))},n.saveFeatures=function(n){var i=JSON.stringify(n);return t.encodeCache&&(i=function(e){return y.stringify(m.parse(e))}(i)),e.set(o(),i).catch((function(e){return r.warn("localStorage is unavailable"),Promise.reject(e)}))},n.clearFeatures=function(){return e.clear(o()).catch((function(e){return r.warn("localStorage is unavailable"),Promise.reject(e)}))},n.syncLoadFeatures=function(){var i=e.syncGet(o());try{try{return t.encodeCache&&(i=L(i)),JSON.parse(i)}catch(e){return n.syncClearFeatures()}}catch(e){r.warn("localStorage is unavailable")}},n.syncClearFeatures=function(){return e.syncClear(o())},n}var le=["fetching","getting set name"],pe="ready",de="fetched",he="triggered",ve="changed",ge="error",ye={appid:"",guid:"",tabInfo:{}};function me(e,t){return new T(U(e.status,t))}function be(e,t){var r={},n="".concat(t.statsDomain,"/report/feature-trigger-event-json"),o=t.productKey,i=t.productEn;return r.sendMetrics=function(r){if(!e.httpRequest)return Promise.resolve();var a=JSON.stringify(r),s=C(o,i,t.serverTimeDiff);return e.httpAllowsPost()?function r(u,c){return c&&(s=C(o,i,t.serverTimeDiff)),e.httpRequest("POST",n,s,a).promise.then((function(e){if(e){if(!(e.status===Y&&u>1))return e.status>=G&&u>1?r(u-1):function(e){return{status:e.status}}(e);var n=JSON.parse(e.body);return t.configureServerTimeDiffFromMsg(n.msg)?r(u-1,!0):void 0}})).catch((function(){if(u>1)return r(u-1)}))}(3):Promise.resolve()},r}var Ee="sent";function we(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return E.x86.hash32("".concat(t,":").concat(e))%r+1}function _e(e){return!!/(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))/.test(e)}function Se(e){var t=e.match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);if(t){for(var r=0,n=1,o=4;o>=1;o-=1)r+=n*parseInt(t[o]),n*=256;return r}return-1}function Oe(e,t){var r=t.match(/^(.*?)\/(\d{1,2})$/),n=r?Se(r[1]):-1,o=Se(e);if(r&&n>=0){var i=Math.pow(2,32-parseInt(r[2]));return o>n&&o<n+i-1}return!1}var xe=[{name:"default",isEnabled:function(){return!0}},function(){var e={name:"applicationHostname",isEnabled:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="";return e.listType&&"string"==typeof JSON.parse(e.listType)&&(t=JSON.parse(e.listType)),"blacklist"===t?!e.hostNames||!JSON.parse(e.hostNames).toLowerCase().split(/\s*,\s*/).includes("undefined"):!!e.hostNames&&JSON.parse(e.hostNames).toLowerCase().split(/\s*,\s*/).filter((function(e){return e})).includes("undefined")}};return e}(),function(e){var t={},r=e||function(){return Math.floor(100*Math.random())+1};return t.name="gradualRolloutRandom",t.isEnabled=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0;try{if((t=Number(JSON.parse(e.percentage)))>=100)return!0}catch(e){return!1}return t>=r()},t}(),function(){var e={name:"gradualRolloutUserId",isEnabled:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=0;try{if((r=Number(JSON.parse(e.percentage)))>=100)return!0}catch(e){return!1}var n=t.userId;if(!n)return!1;var o=we(n,JSON.parse(e.groupId)||"");return r>0&&o<=r}};return e}(),function(){var e={name:"gradualRolloutSessionId",isEnabled:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=0;try{if((r=Number(JSON.parse(e.percentage)))>=100)return!0}catch(e){return!1}var n=t.sessionId;if(!n)return!1;var o=we(n,JSON.parse(e.groupId)||"");return r>0&&o<=r}};return e}(),function(){var e={name:"userWithId",isEnabled:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="";return e.listType&&"string"==typeof JSON.parse(e.listType)&&(r=JSON.parse(e.listType)),"blacklist"===r?!e.userIds||!t.userId||!JSON.parse(e.userIds).split(/\s*,\s*/).filter((function(e){return e})).includes(t.userId):!(!e.userIds||!t.userId)&&JSON.parse(e.userIds).split(/\s*,\s*/).filter((function(e){return e})).includes(t.userId)}};return e}(),function(){var e={name:"remoteAddress",isEnabled:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="";if(e.listType&&"string"==typeof JSON.parse(e.listType)&&(r=JSON.parse(e.listType)),"blacklist"===r){if(!e.IPs||!t.remoteAddress)return!0;var n,o=c(JSON.parse(e.IPs).split(/\s*,\s*/).filter((function(e){return e})));try{for(o.s();!(n=o.n()).done;){var i=n.value;try{if(i===t.remoteAddress)return!1;if(!_e(i)&&Oe(t.remoteAddress,i))return!1}catch(e){continue}}}catch(e){o.e(e)}finally{o.f()}return!0}if(!e.IPs||!t.remoteAddress)return!1;var a,s=c(JSON.parse(e.IPs).split(/\s*,\s*/).filter((function(e){return e})));try{for(s.s();!(a=s.n()).done;){var u=a.value;try{if(u===t.remoteAddress)return!0;if(!_e(u)&&Oe(t.remoteAddress,u))return!0}catch(e){continue}}}catch(e){s.e(e)}finally{s.f()}return!1}};return e}(),function(){var e={name:"userIdTailNumber",isEnabled:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="";if(e.listType&&"string"==typeof JSON.parse(e.listType)&&(r=JSON.parse(e.listType)),"blacklist"===r){if(!e.userIdTailNum||!t.userId)return!0;var n,o=c(JSON.parse(e.userIdTailNum).split(/\s*,\s*/).filter((function(e){return e})));try{for(o.s();!(n=o.n()).done;){var i=n.value;if(t.userId.endsWith(i))return!1}}catch(e){o.e(e)}finally{o.f()}return!0}if(!e.userIdTailNum||!t.userId)return!1;var a,s=c(JSON.parse(e.userIdTailNum).split(/\s*,\s*/).filter((function(e){return e})));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(t.userId.endsWith(u))return!0}}catch(e){s.e(e)}finally{s.f()}return!1}};return e}(),function(){var e={};function t(e,t,r){for(var n=0;n<e.length;n++)if(r===Z){if(t.search(e[n])>=0)return!0}else if(e[n]===t)return!0}return e.name="customKVProperty",e.isEnabled=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=X;e.listType&&"string"==typeof JSON.parse(e.listType)&&JSON.parse(e.listType)===Q&&(n=Q);var o=$;if(e.matchType&&"string"==typeof JSON.parse(e.matchType)&&JSON.parse(e.matchType)===Z&&(o=Z),!e.propertyMap)return n===Q;var i=JSON.parse(e.propertyMap),a=JSON.parse(i);if(!r.properties)return n===Q;for(var s in a){if(!r.properties[s])return n===Q;if(!t(a[s],r.properties[s],o))return n===Q}return n==X},e}(),function(){var e={name:"customProperty",isEnabled:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="";if(e.listType&&"string"==typeof JSON.parse(e.listType)&&(r=JSON.parse(e.listType)),"blacklist"===r){if(!e.propertyName||!e.propertyValues)return!0;var n=JSON.parse(e.propertyName);if(!t.properties||!t.properties[n])return!0;var o=t.properties[n];return!JSON.parse(e.propertyValues).split(/\s*,\s*/).filter((function(e){return e})).includes(o)}if(!e.propertyName||!e.propertyValues)return!1;var i=JSON.parse(e.propertyName);if(!t.properties||!t.properties[i])return!1;var a=t.properties[i];return JSON.parse(e.propertyValues).split(/\s*,\s*/).filter((function(e){return e})).includes(a)}};return e}(),function(){var e={name:"gradualRolloutCustomProperty",isEnabled:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=0;try{if((r=Number(JSON.parse(e.percentage)))>=100)return!0}catch(e){return!1}if(!e.propertyName)return!1;var n=JSON.parse(e.propertyName);if(!t.properties||!t.properties[n])return!1;var o=we(t.properties[n],JSON.parse(e.groupId)||"");return r>0&&o<=r}};return e}(),function(){var e={name:"qimei",isEnabled:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="";return e.listType&&"string"==typeof JSON.parse(e.listType)&&(r=JSON.parse(e.listType)),"blacklist"===r?!e.qimeis||!t.qimei||!JSON.parse(e.qimeis).split(/\s*,\s*/).filter((function(e){return e})).includes(t.qimei):!(!e.qimeis||!t.qimei)&&JSON.parse(e.qimeis).split(/\s*,\s*/).filter((function(e){return e})).includes(t.qimei)}};return e}()],Te="Server time: ";function Ie(e,t,r,n){var o=P({logger:n},{accessDomain:"https://access.toggle.qq.com",statsDomain:"https://event.toggle.qq.com",disableMetrics:!1,refreshInterval:12e4,metricsInterval:12e4,useLocalStorage:!0,strategies:[],serverTimeDiff:0,encodeCache:!1,cloudMode:!1,context:{}}),i=P({},t||{});i=function(e,t){var r=P({},e);return Object.keys(t).forEach((function(e){void 0!==r[e]&&null!==r[e]||(r[e]=t[e])})),r}(i,o);var a=[{accessDomain:"https://access.toggle.qq.com",statsDomain:"https://event.toggle.qq.com"},{accessDomain:"https://toggleaccesspre.sparta.html5.qq.com",statsDomain:"https://togglestatdev.sparta.html5.qq.com"},{accessDomain:"https://toggleaccesspre.sparta.html5.qq.com",statsDomain:"https://togglestatdev.sparta.html5.qq.com"},{accessDomain:"https://accessv6.toggle.qq.com",statsDomain:"https://eventv6.toggle.qq.com"}];if(e){var s=["formal","dev","secure_dev","formal_v6"].indexOf(e);[0,1,2,3].indexOf(s)>-1?(i.accessDomain=a[s]&&a[s].accessDomain,i.statsDomain=a[s]&&a[s].statsDomain):N("Invalid environment configured. Auto set to formal environment.",r)}try{i.version=function(e){var t=e.match(A);if(!t||0===t.length)throw new Error("Toggle version is missing");return t[0]}(i.version)}catch(e){N("Invalid product version configured. Must be string with value.",r)}return i.invalid=!1,M([{key:i.buildId,message:"",callback:function(){i.version="".concat(i.version,".").concat(i.buildId)}},{key:!i.productKey||"string"!=typeof i.productKey,message:"Invalid product key configured. Must be string with value.",callback:function(){i.invalid=!0}},{key:!i.productEn||"string"!=typeof i.productEn,message:"Invalid product english name configured. Must be string with value.",callback:function(){i.invalid=!0}},{key:!i.productId||"string"!=typeof i.productId,message:"Invalid product id configured. Must be string with value.",callback:function(){i.invalid=!0}},{key:!i.moduleId||"string"!=typeof i.productEn,message:"Invalid product module id configured. Must be string with value.",callback:function(){i.invalid=!0}},{key:"boolean"!=typeof i.disableMetrics,message:"Invalid disableMetrics configured. Must be boolean value. Auto set to false",callback:function(){i.disableMetrics=!1}},{key:"boolean"!=typeof i.useLocalStorage,message:"Invalid useLocalStorage configured. Must be boolean value. Auto set to true",callback:function(){i.useLocalStorage=!0}},{key:"boolean"!=typeof i.encodeCache,message:"Invalid encodeCache configured. Must be boolean value. Auto set to true",callback:function(){i.encodeCache=!0}},{key:i.buildId&&"string"!=typeof i.version,message:"Invalid product buildId configured. Must be string with value.",callback:function(){i.invalid=!0}},{key:isNaN(i.refreshInterval)||i.refreshInterval<1e4,message:"Invalid fetch interval configured. Must be an integer >= 1000 (millisecond). Auto set to  120000.",callback:function(){i.refreshInterval=12e4}},{key:isNaN(i.metricsInterval)||i.metricsInterval<1e4,message:"Initialization failed with invalid configurations.",callback:function(){i.metricsInterval=12e4}},{key:!Array.isArray(i.strategies),message:"Invalid custom strategies. Must be objects with fileds name and isEnabled",callback:function(){i.invalid=!0}},{key:Array.isArray(i.strategies),message:"",callback:function(){var e,t=c(i.strategies);try{for(t.s();!(e=t.n()).done;){var r=e.value;M([{key:!r||!r.name||"string"!=typeof r.name||!r.isEnabled||"function"!=typeof r.isEnabled,message:"Invalid custom strategies. Must be objects with fileds name and isEnabled",callback:function(){i.invalid=!0}}])}}catch(e){t.e(e)}finally{t.f()}i.strategies=xe.concat(i.strategies)}}],r),i.invalid&&N("Initialization failed with invalid configurations.",r),i.configureServerTimeDiffFromMsg=function(e){if(!e||!e.includes(Te))return!1;var t=e.lastIndexOf(Te),r=+e.slice(t+Te.length,t+Te.length+10);return i.configureServerTimeDiff(r)},i.configureServerTimeDiff=function(e){if(!e)return!1;var t=e-Math.floor(new Date/1e3);return t!==i.serverTimeDiff&&(i.serverTimeDiff=t,!0)},i}function Ae(e,t,r){var n=t&&t.logger?t.logger:function(e,t){var r,n=["debug","info","warn","error"];r=null!==t&&void 0!==t?""===t?"":"".concat(t," "):"FeatureToggle: ";var o=0;e&&(o="none"===e?100:n.indexOf(e));var i={};function a(e,t,i){if(e>=o){var a=e<n.length?n[e]:"?";t("".concat(r,"[").concat(a,"] ").concat(i))}}return i.debug=function(e){return a(0,console.log,e)},i.info=function(e){return a(1,console.info,e)},i.warn=function(e){return a(2,console.warn,e)},i.error=function(e){return a(3,console.error,e)},i}("warn"),i=function(e){var t={},r={},n=function(e){return!!r[e]};return t.on=function(e,t,n){r[e]=r[e]||[],r[e]=r[e].concat({handler:t,context:n})},t.off=function(e,t,n){if(r[e])for(var o=r[e].length-1;o>=0;o--)r[e][o].handler===t&&r[e][o].context===n&&(r[e]=r[e].slice(0,o).concat(r[e].slice(o+1)))},t.emit=function(e){if(r[e])for(var t=0;t<r[e].length;t++)r[e][t].handler.apply(r[e][t].context,Array.prototype.slice.call(arguments,1))},t.getEvents=function(){return Object.keys(r)},t.getEventListenerCount=function(e){return r[e]?r[e].length:0},t.maybeReportError=function(t){t&&(n("error")?this.emit("error",t):(e||console).error(t.message))},t.maybeReportWarn=function(t){t&&(n("warn")?this.emit("warn",t):(e||console).warn(t.message))},t}(n),a=Ie(e,t,i,n),u=a.disableMetrics,f=function(e,t){var r,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i={},a=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)||be(e,t),s=t.disableMetrics,u=t.metricsInterval,c=t.logger,f=p(),l="";function p(){return{sdkType:"JavaScript",sdkVersion:"1.10.7",startTime:R(new Date),stopTime:"",productId:t.productId,moduleId:t.moduleId,moduleVersion:t.version,eventsMap:new Map,os:l}}return e.getOsPlatform&&(l=e.getOsPlatform()),i.enqueue=function(e){if(!s){var t=function(e){var t,r={featureName:e.name||"undefined",featureVersionId:String(e.id)||"-1",featureValue:e.enabledResult.toggleValue?"true":"false",abTestId:e.abTestId,userId:"",datasetId:e.enabledResult.datasetId?String(e.enabledResult.datasetId):"0",versionId:e.enabledResult.versionId?String(e.enabledResult.versionId):"0"};return e.userId&&(r.userId=e.userId),"".concat((t=r).featureName,"#").concat(t.featureVersionId,"#").concat(t.featureValue,"#").concat(t.abTestId,"#").concat(t.userId,"#").concat(t.datasetId,"#").concat(t.versionId)}(e);(function(e){if(f.eventsMap.has(e)){var t=f.eventsMap.get(e)+1;return f.eventsMap.set(e,t),!0}return!1})(t)||f.eventsMap.set(t,1)}},i.flush=function(){if(s)return Promise.resolve();var e;f.stopTime=R(new Date),f.events=[],f.eventsMap.forEach((function(t,r){(e=function(e){var t=e.split("#");return{featureName:t[0],featureVersionId:t[1],featureValue:t[2],abTestId:t[3],userId:t[4],datasetId:t[5],versionId:t[6]}}(r)).eventCount=t,e.sn=v(),f.events.push(e)})),f.eventsMap=new Map;var t=f;return 0===t.events.length?(f.eventsMap=new Map,Promise.resolve()):(f=p(),c.debug(K(t.length)),a.sendMetrics(t).then((function(e){e&&(200!==e.status?D((function(){o.maybeReportError(new O(q(e.status,"send metrics")))})):o.emit(Ee,t))})))},i.start=function(){n||(r=setTimeout((function e(){i.flush(),r=setTimeout(e,u)}),u))},i.stop=function(){n=!0,clearTimeout(r)},i}(r,a,i),l=function(e,t,r){var n,i,a,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,l="product-set-json",p=t.accessDomain,d=t.logger,h=f||fe(e.localStorage,t,d),v={},g=t.cloudMode,y=t.refreshInterval,m={featureData:{},prerequisite:{}},b={},E=!1,w="",_=0;function S(){return e.httpRequest?e.httpAllowsPost()?function r(n,o){var i="".concat(p,"/").concat(l),a={productId:t.productId},s=JSON.stringify(a),c=C(t.productKey,t.productEn,t.serverTimeDiff);o&&(c=C(t.productKey,t.productEn,t.serverTimeDiff));var f=e.httpRequest("POST",i,c,s).promise.then((function(e){if(e)if(e.status===Y&&n>1){var o=JSON.parse(e.body);if(t.configureServerTimeDiffFromMsg(o.msg))return r(n-1,!0)}else{if(e.status>=G&&n>1)return r(n-1);if(e.status===H){var i=JSON.parse(e.body);if(i.data&&i.data.setName){if(w===i.data.setName)return;return w=i.data.setName,O()}}else D((function(){u.maybeReportError(me(e,le[1]))}))}})).catch((function(e){if(n>1)return r(n-1);D((function(){u.maybeReportError(e)}))}));return f}(3):Promise.resolve():(D((function(){u.maybeReportError(new T("Cannot make HTTP requests in this environment."))})),Promise.resolve())}function O(){return e.httpRequest?w?e.httpAllowsPost()?function r(n,o){var i="".concat(p,"/").concat(w,"/").concat(a),s=function(){if(0===_)return[];for(var e=[],t=0,r=Object.keys(b);t<r.length;t++){var n=r[t];e.push(+n)}return e}(),f={productId:t.productId,moduleId:t.moduleId,moduleVersion:t.version,timestamp:_,localIdList:s,clientCtx:t.context},l=JSON.stringify(f),v=C(t.productKey,t.productEn,t.serverTimeDiff);o&&(v=C(t.productKey,t.productEn,t.serverTimeDiff));var g=e.httpRequest("POST",i,v,l).promise.then((function(e){if(e)if(e.status===Y&&n>1){var o=JSON.parse(e.body);if(t.configureServerTimeDiffFromMsg(o.msg))return r(n-1,!0)}else{if(e.status>=G&&n>1)return r(n-1);if(404===e.status)return S();if(e.status===H){var i=JSON.parse(e.body);if(i.code===W&&i.setName){var a=JSON.parse(i.setName);return w=a.TafSet,O()}i.nextTime&&i.nextTime>0&&(y=1e3*i.nextTime),function(e){var t=e.data||[],r=e.prerequisites||[],n=function(e){var t={};return e.forEach((function(e){void 0!==e.name&&(t[e.name]=e)})),t}(t),o=function(e){var t={};return null===e||void 0===e||e.forEach((function(e){void 0!==e.id&&(t[e.id]=e)})),t}(r),i=function(e){var t={};return e.forEach((function(e){e.id&&e.name&&(t[e.id]=e.name)})),t}(t),a={featureData:n,prerequisite:o},s=!1,f=[];if(e.increment){var l,p=e.deletedFeatures||[],d=c(p);try{for(d.s();!(l=d.n()).done;){var v=l.value,g=m.featureData[b[v]];g&&f.push(g)}}catch(e){d.e(e)}finally{d.f()}!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(m&&0!==Object.keys(m.featureData).length){for(var o=0,i=Object.keys(e);o<i.length;o++){var a=i[o];m.featureData[a]=e[a]}var s,u=c(n);try{for(u.s();!(s=u.n()).done;){var f=s.value;delete m.featureData[r[f]]}}catch(e){u.e(e)}finally{u.f()}m.prerequisite=t}else m={featureData:e,prerequisite:t}}(n,o,b,p),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!b||0===Object.keys(b).length)return b=e;for(var r=0,n=Object.keys(e);r<n.length;r++){var o=n[r];b[+o]=e[+o]}var i,a=c(t);try{for(a.s();!(i=a.n()).done;){var s=i.value;delete b[s]}}catch(e){a.e(e)}finally{a.f()}}(i,p)}else s=!0,m=a,b=i;_=e.timestamp||0;var y={isFullUpdate:s,patch:{data:e.data,prerequiste:e.prerequisites},removed:f};D((function(){return u.emit(ve,y)})),h.saveFeatures(m)}(i),D((function(){u.emit(de,i.data)})),E||(d.debug("initialized with fetch"),E=!0,D((function(){u.emit(pe)})))}else D((function(){return u.maybeReportError(me(e,le[0]))}))}})).catch((function(e){if(n>1)return r(n-1);D((function(){u.maybeReportError(e)}))}));return g}(3):Promise.resolve():(E&&D((function(){u.maybeReportError(new T("Fetching features with empty set name, about to retry."))})),S()):(D((function(){u.maybeReportError(new T("Cannot make HTTP requests in this environment."))})),Promise.resolve())}function x(e){var r,n=c(t.strategies);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(o.name===e)return o}}catch(e){n.e(e)}finally{n.f()}return null}function A(e,t){if(!e||0===Object.keys(e).length)return{};if(e.platform||(e.platform=ne),!e.abTestId||"string"!=typeof e.abTestId)return{};if(e.platform===ne)return e.params&&"object"===o(e.params)?"string"!=typeof e.params[t]?{}:{toggleValue:e.params[t]===z}:{};if("tab"===e.platform){if(e.params&&e.params[ee])return e.params[ee]===re?{toggleValue:!0,dataset:e.params,type:oe}:{toggleValue:!1,dataset:e.params,type:oe};var r=ye.tabInfo[e.abTestId];if(r&&r.params&&r.params._feature_flag_key===t)return r.params[ee]===re?{toggleValue:!0,dataset:r.params,type:oe}:"0"===r.params[ee]?{toggleValue:!1,dataset:r.params,type:oe}:{}}return{}}function R(e,t,r,n){var o=t;if(!o)return!0;2===e&&(o="2006-03-04 ".concat(o));var i=new Date(o);return!isNaN(i.valueOf())&&(n?i.valueOf()<=r.valueOf():r.valueOf()<=i.valueOf())}function P(e,t,r){if(2===e||3===e){var n=j(r);2===e&&(n=new Date("2006-03-04 ".concat(n.getHours(),":").concat(n.getMinutes(),":").concat(n.getSeconds())));var o,i=c(t);try{for(i.s();!(o=i.n()).done;){var a=o.value;if(R(e,a.startTime,n,!0)&&R(e,a.endTime,n,!1))return!0}}catch(e){i.e(e)}finally{i.f()}return!1}return!0}function k(e,r,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=e.id.toString();if(void 0!==n[i])return{toggleValue:n[i]};if(e.value!==z)return n[i]=!1,{toggleValue:!1};if(!P(e.timeLimitType,e.timeLimits,t.serverTimeDiff))return n[i]=!1,{toggleValue:!1};if(e.prerequisites&&!function(e,t,r){var n,o=e.id.toString(),i=c(e.prerequisites);try{for(i.s();!(n=i.n()).done;){var a=n.value,s=a.versionId.toString(),u=k(m.prerequisite[s],t,r),f=a.statusValue===z;if(u.toggleValue!==f)return r[o]=!1,!1}}catch(e){i.e(e)}finally{i.f()}return!0}(e,r,n)){if(1===o){var a=N(r,e.offDatasetEx);return a.toggleValue=!1,a}return{toggleValue:!1}}return function(e,t,r,n){if(e.strategyGroups&&e.strategyGroups.length>0)for(var o=0;o<e.strategyGroups.length;o++){var i=e.strategyGroups[o];if(L(e.id,i,t,e.name,r)){var a=i.datasetEx;if(1===n){var s=N(t,a);return s.toggleValue=a.toggleValue,s}return!a||a&&void 0===a.toggleValue?{toggleValue:!0}:{toggleValue:a.toggleValue}}}if(1===n){var u=N(t,e.defaultDatasetEx);return u.toggleValue=!1,u}return{toggleValue:!1}}(e,r,n,o)}function L(e,t,r,n,o,i){var a=e.toString(),s=t.strategies;if(s&&0===s.length)return o[a]=!0,!0;var f,l=2===t.stgRelation,p=c(s);try{for(p.s();!(f=p.n()).done;){var d=f.value,h=x(d.name||"");if(h){var v=h.isEnabled(d.parameters,r||{});if(l&&!v)return o[a]=!1,!1;if(!l&&v)return o[a]=!0,!0}else if(u.maybeReportError(new I(V(d.name,n))),l)return o[a]=!1,!1}}catch(e){p.e(e)}finally{p.f()}return o[a]=l,l}function N(e,t){if("object"!==o(t)||null===t)return{dataset:{},datasetId:0,versionId:0,type:"",value:""};if(1===t.datasetType)return M(t.dataset);if(2===t.datasetType){var r=0,n=t.rolloutBase;r=e&&e[n]?"string"==typeof e[n]?F(e[n]):B():e&&e.properties&&e.properties[n]?F(e.properties[n]):B();var i=0;if(null===t.rolloutWeights)return{dataset:{},datasetId:0,versionId:0,type:"",value:""};var a,s=c(t.rolloutWeights);try{for(s.s();!(a=s.n()).done;){var u=a.value;if(r<=(i+=u.weight))return M(u)}}catch(e){s.e(e)}finally{s.f()}}return{dataset:{},datasetId:0,versionId:0,type:"",value:""}}function M(e){return e?{dataset:e.data||{},datasetId:e.datasetId||0,versionId:e.versionId||0,type:e.type||"",value:e.value||""}:{dataset:{},datasetId:0,versionId:0,type:"",value:""}}function K(e,n,o,i,a){var c,f,l="-1",p={};E?(c=m.featureData[e])?(f=!0===g?function(e,t,r,n,o,i){var a,s,u,c,f,l={},p="-1";return l=A(n,t)||{},e.isAbtFirst&&l.toggleValue?{result:l,abTestId:p=n.abTestId}:P(e.timeLimitType,e.timeLimits,i.serverTimeDiff)?(1===o&&(l={dataset:(null===(a=e.dataset)||void 0===a?void 0:a.data)||{},datasetId:(null===(s=e.dataset)||void 0===s?void 0:s.datasetId)||0,versionId:(null===(u=e.dataset)||void 0===u?void 0:u.versionId)||0,type:(null===(c=e.dataset)||void 0===c?void 0:c.type)||"",value:(null===(f=e.dataset)||void 0===f?void 0:f.value)||""}),l.toggleValue=e.result===z,{result:l,abTestId:p}):(1===o&&(l={dataset:{},datasetId:0,versionId:0}),l.toggleValue="boolean"==typeof r&&r,{result:l,abTestId:p})}(c,e,o,i,a,t):function(e,t,r,n,o,i,a){var s={},u="-1";return s=A(o,t)||{},e.isAbtFirst&&s.toggleValue?{result:s,abTestId:u=o.abTestId}:e.value!==z?(1===i&&(s=N(r,e.offDatasetEx)),s.toggleValue=!1,{result:s,abTestId:u}):P(e.timeLimitType,e.timeLimits,a.serverTimeDiff)?{result:s=k(e,r,{},i),abTestId:u}:(1===i&&(s=N(r,e.offDatasetEx)),s.toggleValue="boolean"==typeof n&&n,{result:s,abTestId:u})}(c,e,n,o,i,a,t),p=f.result,l=f.abTestId):(p=A(i,e)||{}).toggleValue?l=i.abTestId:p.toggleValue=!(!o||"boolean"!=typeof o)&&o:p.toggleValue=function(e,t){return u.maybeReportWarn(new I(J(e,t))),!!t}(e,o);var d=c?s(s({},c),{},{enabledResult:p}):{id:-1,name:e,enabledResult:p};return u.emit(he,d),r&&(n&&n.userId&&(d.userId=n.userId),n&&n.sessionId&&(d.sessionId=n.sessionId),d.abTestId=l,r(d)),p}a=!0===g?"feature-result-json":"feature-with-strategy-json",v.getTimestamp=function(){return _},v.getSetName=function(){return w},v.getrefreshInterval=function(){return y},v.readyPromise=function(){return new Promise((function(e,t){u.on(pe,(function(){e()})),u.on(ge,(function(e){t(e)}))}))},v.fetch=function(){return O()},v.isEnabled=function(e,t,r,n){return K(e,t,r,n,0).toggleValue},v.isEnabledWithDataset=function(e,t,r,n){var o=K(e,t||{},r,n,1),i={toggleValue:o.toggleValue,dataset:""};switch(o.type){case oe:i.dataset=o.dataset;break;case ie:case ce:i.dataset=o.value;break;case ae:i.dataset="true"===o.value;break;case se:i.dataset=Number(o.value);break;case ue:try{var a=JSON.parse(o.value).filter((function(e){return e}));i.dataset=a}catch(t){u.emit("warn","toggle ".concat(e," get list data error, using default value: ").concat(t)),i.dataset=[]}break;default:i.dataset=""}return i},v.syncLoadFeatures=function(){var e=h.syncLoadFeatures();e&&(m=e,E||(E=!0,D((function(){return u.emit(pe)}))))},v.getFeature=function(e){var t=m.featureData[e];return t?Object.assign({},t):null},v.getAllFeatures=function(){return Object.assign({},m.featureData)};var q=function e(){v.fetch(),n=setTimeout(e,y)};return v.start=function(){t.useLocalStorage?h.loadFeatures().catch((function(){return null})).then((function(e){return e?(d.debug("initialized with local storage"),m=e,E||(E=!0,D((function(){return u.emit(pe)})))):m={featureData:{},prerequisite:{}},S()})):S(),i||(n=setTimeout(q,y))},v.stop=function(){i=!0,clearTimeout(n),m={featureData:{},prerequisite:{}}},v.activateExperiment=function(e){if("object"!==o(e)||null===e)return null;var t=e.guid,r=e.expData,n=e.appid;return ye.guid=t,ye.appid=n,"object"===o(r)&&null!==r&&(ye.tabInfo=r,!0)},v.reportTabMetricsData=function(r){if(!r)return D((function(){u.emit("warn","tabReportData undefined")})),!1;var n=ye.tabInfo[r.expId];if(!n)return D((function(){u.emit("warn","no such exp info which id is ".concat(r.expId))})),!1;var i=n.params&&n.params._feature_flag_key;if(!i)return D((function(){u.emit("warn","params of exp has no attribute named ".concat(te))})),n.params;var a=m.featureData[i];if(!(a&&ye.appid&&ye.guid&&a.id&&r.expId&&t.productId&&n.grayId))return D((function(){u.emit("warn","the following attributes can't be undefined. \n        feature productId:".concat(t.productId,"; feature id:").concat(a&&a.id,"; \n        app id:").concat(ye&&ye.appid,"; guid:").concat(ye&&ye.guid,";\n        gray id:").concat(n.grayId,";\n        exp id:").concat(r&&r.expId))})),!1;var s=Math.round(j().valueOf()/1e3),c={attaid:"03d00037385",token:"3868159371",uin:ye.guid,business_id:t.productId,tab_business_id:ye.appid,feature_id:a.id.toString(),feature_name:i,feature_percentage:n.percentage,event_time:s,report_time:s,exp_id:r.expId,event_code:r.eventCode||"",event_value:r.eventValue||"",reserved:r.reserved||"",gray_id:n.grayId};if("object"===o(r.reserved)&&null!==r.reserved){var f=r.reserved,l="";Object.keys(f).map((function(e){l+="".concat(e,"=").concat(f[e],"&")})),c.reserved=encodeURIComponent(l)}return function t(r,n){var o="";return Object.keys(n).map((function(e){o+="".concat(e,"=").concat(n[e],"&")})),o+="_dc=".concat(+Math.random()),e.httpRequest("POST","https://h.trace.qq.com/kv",{"Content-Type":"application/x-www-form-urlencoded"},o).promise.then((function(e){return!!e&&(e.status===H||(r>1?t(r-1,n):void D((function(){u.emit("warn","report error,please retry")}))))})).catch((function(e){if(D((function(){u.emit("warn","report error")})),r>1)return t(r-1,n);D((function(){u.maybeReportError(e)}))}))}(3,c),!0},v.setCloudModeContext=function(e){t.context=e||{},_=0,E&&(v.fetch(),clearTimeout(n),n=setTimeout(q,y))},v.asyncSetCloudModeContext=function(e){if(t.context=e||{},_=0,E)return clearTimeout(n),n=setTimeout(q,y),v.fetch},v}(r,a,d,i),p=!1;function d(e){u||p||r.isDoNotTrack()||(n.debug("enqueueing event"),f.enqueue(e))}return{client:{waitUntilReady:function(){return l.readyPromise()},isEnabled:l.isEnabled,isEnabledWithDataset:l.isEnabledWithDataset,reportTabMetricsData:l.reportTabMetricsData,activateExperiment:l.activateExperiment,getFeature:function(e){return l.getFeature(e)},getAllFeatures:function(){return l.getAllFeatures()},setCloudModeContext:function(e){return l.setCloudModeContext(e)},asyncSetCloudModeContext:function(e){return l.asyncSetCloudModeContext(e)},on:function(e,t,r){i.on.apply(i,arguments)},off:function(e,t,r){i.off.apply(i,arguments)},close:function(e){if(p)return k(Promise.resolve(),e);var t=function(){p=!0};return k(Promise.resolve().then((function(){if(l.stop(),!u)return f.stop(),f.flush()})).then(t).catch(t),e)},loadCache:function(){l.syncLoadFeatures()}},options:a,emitter:i,logger:n,repository:l,start:function(){a.invalid||(l.start(),u||f.start())},enqueueEvent:d}}var De={promise:Promise.resolve({status:200,headers:function(){return null},body:null})};function Re(e,t,r,n,o){if(o&&!function(){var e=window.navigator&&window.navigator.userAgent;if(e){var t=e.match(/Chrom(e|ium)\/([0-9]+)\./);if(t)return parseInt(t[2],10)<73}return!0}())return De;var i,a=new window.XMLHttpRequest;for(var s in a.open(e,t,!o),r||{})r.hasOwnProperty(s)&&a.setRequestHeader(s,r[s]);return o?(a.send(n),De):{promise:new Promise((function(e,t){a.addEventListener("load",(function(){i||e({status:a.status,header:function(e){return a.getResponseHeader(e)},body:a.responseText})})),a.addEventListener("error",(function(){i||t(new Error)})),a.send(n)})),cancel:function(){i=!0,a.abort()}}}function Pe(e){var t,r={pageIsClosing:!1};window.XMLHttpRequest&&(r.httpRequest=function(e,t,n,o){return Re(e,t,n,o,r.pageIsClosing)}),r.httpAllowsPost=function(){return void 0===t&&(t=!!window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest),t};var n=e&&e.eventUrlTransformer;r.getCurrentUrl=function(){return n?n(window.location.href):window.location.href},r.isDoNotTrack=function(){var e;return 1===(e=window.navigator&&void 0!==window.navigator.doNotTrack?window.navigator.doNotTrack:window.navigator&&void 0!==window.navigator.msDoNotTrack?window.navigator.msDoNotTrack:window.doNotTrack)||!0===e||"1"===e||"yes"===e};try{window.localStorage&&(r.localStorage={get:function(e){return new Promise((function(t){t(window.localStorage.getItem(e))}))},syncGet:function(e){return window.localStorage.getItem(e)},set:function(e,t){return new Promise((function(r){window.localStorage.setItem(e,t),r()}))},clear:function(e){return new Promise((function(t){window.localStorage.removeItem(e),t()}))},syncClear:function(e){return window.localStorage.removeItem(e)}})}catch(e){r.localStorage=null}return r.userAgent="JSClient",r.getOsPlatform=function(){return window.navigator.platform},r}function ke(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=Pe(t),o=Ae(e,t,n),i=o.client;return r||("complete"!==document.readyState?window.addEventListener("load",o.start):o.start(),window.addEventListener("beforeunload",(function(){n.pageIsClosing=!0,i.close()}))),i}var Ce="secure_dev",je="formal"}}]),window.jsExecEndTimeStamp=Date.now(),window.cachedPerformanceEntries||(window.cachedPerformanceEntries=[]),window.cachedPerformanceEntries.push({name:"jsExec: js/vendors-node_modules_tencent_facade-config_dist_index_js.cfd3c1109606133bf18c.js",entryType:"jsExec",startTime:window.jsExecStartTimeStamp,endTime:window.jsExecEndTimeStamp});
//# sourceMappingURL=vendors-node_modules_tencent_facade-config_dist_index_js.cfd3c1109606133bf18c.js.map