(function(){self.window=self,window.jsExecStartTimeStamp=Date.now(),(self.webpackChunk_tencent_alloy_builder=self.webpackChunk_tencent_alloy_builder||[]).push([["initial_vendors_public_3"],{"../node_modules/decimal.js/decimal.js":function(t,e,i){var r;!function(n){"use strict";var s,a,o,h=9e15,l=1e9,c="0123456789abcdef",d="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",p="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",f={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-h,maxE:h,crypto:!1},u=!0,m="[DecimalError] ",g=m+"Invalid argument: ",y=m+"Precision limit exceeded",v=m+"crypto unavailable",b="[object Decimal]",_=Math.floor,x=Math.pow,S=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,P=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,w=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,C=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,E=1e7,k=d.length-1,A=p.length-1,T={toStringTag:b};function F(t){var e,i,r,n=t.length-1,s="",a=t[0];if(n>0){for(s+=a,e=1;e<n;e++)(i=7-(r=t[e]+"").length)&&(s+=V(i)),s+=r;(i=7-(r=(a=t[e])+"").length)&&(s+=V(i))}else if(0===a)return"0";for(;a%10===0;)a/=10;return s+a}function M(t,e,i){if(t!==~~t||t<e||t>i)throw Error(g+t)}function D(t,e,i,r){var n,s,a,o;for(s=t[0];s>=10;s/=10)--e;return--e<0?(e+=7,n=0):(n=Math.ceil((e+1)/7),e%=7),s=x(10,7-e),o=t[n]%s|0,null==r?e<3?(0==e?o=o/100|0:1==e&&(o=o/10|0),a=i<4&&99999==o||i>3&&49999==o||5e4==o||0==o):a=(i<4&&o+1==s||i>3&&o+1==s/2)&&(t[n+1]/s/100|0)==x(10,e-2)-1||(o==s/2||0==o)&&0==(t[n+1]/s/100|0):e<4?(0==e?o=o/1e3|0:1==e?o=o/100|0:2==e&&(o=o/10|0),a=(r||i<4)&&9999==o||!r&&i>3&&4999==o):a=((r||i<4)&&o+1==s||!r&&i>3&&o+1==s/2)&&(t[n+1]/s/1e3|0)==x(10,e-3)-1,a}function I(t,e,i){for(var r,n,s=[0],a=0,o=t.length;a<o;){for(n=s.length;n--;)s[n]*=e;for(s[0]+=c.indexOf(t.charAt(a++)),r=0;r<s.length;r++)s[r]>i-1&&(void 0===s[r+1]&&(s[r+1]=0),s[r+1]+=s[r]/i|0,s[r]%=i)}return s.reverse()}T.absoluteValue=T.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),G(t)},T.ceil=function(){return G(new this.constructor(this),this.e+1,2)},T.clampedTo=T.clamp=function(t,e){var i=this,r=i.constructor;if(t=new r(t),e=new r(e),!t.s||!e.s)return new r(NaN);if(t.gt(e))throw Error(g+e);return i.cmp(t)<0?t:i.cmp(e)>0?e:new r(i)},T.comparedTo=T.cmp=function(t){var e,i,r,n,s=this,a=s.d,o=(t=new s.constructor(t)).d,h=s.s,l=t.s;if(!a||!o)return h&&l?h!==l?h:a===o?0:!a^h<0?1:-1:NaN;if(!a[0]||!o[0])return a[0]?h:o[0]?-l:0;if(h!==l)return h;if(s.e!==t.e)return s.e>t.e^h<0?1:-1;for(e=0,i=(r=a.length)<(n=o.length)?r:n;e<i;++e)if(a[e]!==o[e])return a[e]>o[e]^h<0?1:-1;return r===n?0:r>n^h<0?1:-1},T.cosine=T.cos=function(){var t,e,i=this,r=i.constructor;return i.d?i.d[0]?(t=r.precision,e=r.rounding,r.precision=t+Math.max(i.e,i.sd())+7,r.rounding=1,i=function(t,e){var i,r,n;if(e.isZero())return e;(r=e.d.length)<32?n=(1/J(4,i=Math.ceil(r/3))).toString():(i=16,n="2.3283064365386962890625e-10");t.precision+=i,e=U(t,1,e.times(n),new t(1));for(var s=i;s--;){var a=e.times(e);e=a.times(a).minus(a).times(8).plus(1)}return t.precision-=i,e}(r,$(r,i)),r.precision=t,r.rounding=e,G(2==o||3==o?i.neg():i,t,e,!0)):new r(1):new r(NaN)},T.cubeRoot=T.cbrt=function(){var t,e,i,r,n,s,a,o,h,l,c=this,d=c.constructor;if(!c.isFinite()||c.isZero())return new d(c);for(u=!1,(s=c.s*x(c.s*c,1/3))&&Math.abs(s)!=1/0?r=new d(s.toString()):(i=F(c.d),(s=((t=c.e)-i.length+1)%3)&&(i+=1==s||-2==s?"0":"00"),s=x(i,1/3),t=_((t+1)/3)-(t%3==(t<0?-1:2)),(r=new d(i=s==1/0?"5e"+t:(i=s.toExponential()).slice(0,i.indexOf("e")+1)+t)).s=c.s),a=(t=d.precision)+3;;)if(l=(h=(o=r).times(o).times(o)).plus(c),r=R(l.plus(c).times(o),l.plus(h),a+2,1),F(o.d).slice(0,a)===(i=F(r.d)).slice(0,a)){if("9999"!=(i=i.slice(a-3,a+1))&&(n||"4999"!=i)){+i&&(+i.slice(1)||"5"!=i.charAt(0))||(G(r,t+1,1),e=!r.times(r).times(r).eq(c));break}if(!n&&(G(o,t+1,0),o.times(o).times(o).eq(c))){r=o;break}a+=4,n=1}return u=!0,G(r,t,d.rounding,e)},T.decimalPlaces=T.dp=function(){var t,e=this.d,i=NaN;if(e){if(i=7*((t=e.length-1)-_(this.e/7)),t=e[t])for(;t%10==0;t/=10)i--;i<0&&(i=0)}return i},T.dividedBy=T.div=function(t){return R(this,new this.constructor(t))},T.dividedToIntegerBy=T.divToInt=function(t){var e=this.constructor;return G(R(this,new e(t),0,1,1),e.precision,e.rounding)},T.equals=T.eq=function(t){return 0===this.cmp(t)},T.floor=function(){return G(new this.constructor(this),this.e+1,3)},T.greaterThan=T.gt=function(t){return this.cmp(t)>0},T.greaterThanOrEqualTo=T.gte=function(t){var e=this.cmp(t);return 1==e||0===e},T.hyperbolicCosine=T.cosh=function(){var t,e,i,r,n,s=this,a=s.constructor,o=new a(1);if(!s.isFinite())return new a(s.s?1/0:NaN);if(s.isZero())return o;i=a.precision,r=a.rounding,a.precision=i+Math.max(s.e,s.sd())+4,a.rounding=1,(n=s.d.length)<32?e=(1/J(4,t=Math.ceil(n/3))).toString():(t=16,e="2.3283064365386962890625e-10"),s=U(a,1,s.times(e),new a(1),!0);for(var h,l=t,c=new a(8);l--;)h=s.times(s),s=o.minus(h.times(c.minus(h.times(c))));return G(s,a.precision=i,a.rounding=r,!0)},T.hyperbolicSine=T.sinh=function(){var t,e,i,r,n=this,s=n.constructor;if(!n.isFinite()||n.isZero())return new s(n);if(e=s.precision,i=s.rounding,s.precision=e+Math.max(n.e,n.sd())+4,s.rounding=1,(r=n.d.length)<3)n=U(s,2,n,n,!0);else{t=(t=1.4*Math.sqrt(r))>16?16:0|t,n=U(s,2,n=n.times(1/J(5,t)),n,!0);for(var a,o=new s(5),h=new s(16),l=new s(20);t--;)a=n.times(n),n=n.times(o.plus(a.times(h.times(a).plus(l))))}return s.precision=e,s.rounding=i,G(n,e,i,!0)},T.hyperbolicTangent=T.tanh=function(){var t,e,i=this,r=i.constructor;return i.isFinite()?i.isZero()?new r(i):(t=r.precision,e=r.rounding,r.precision=t+7,r.rounding=1,R(i.sinh(),i.cosh(),r.precision=t,r.rounding=e)):new r(i.s)},T.inverseCosine=T.acos=function(){var t,e=this,i=e.constructor,r=e.abs().cmp(1),n=i.precision,s=i.rounding;return-1!==r?0===r?e.isNeg()?B(i,n,s):new i(0):new i(NaN):e.isZero()?B(i,n+4,s).times(.5):(i.precision=n+6,i.rounding=1,e=e.asin(),t=B(i,n+4,s).times(.5),i.precision=n,i.rounding=s,t.minus(e))},T.inverseHyperbolicCosine=T.acosh=function(){var t,e,i=this,r=i.constructor;return i.lte(1)?new r(i.eq(1)?0:NaN):i.isFinite()?(t=r.precision,e=r.rounding,r.precision=t+Math.max(Math.abs(i.e),i.sd())+4,r.rounding=1,u=!1,i=i.times(i).minus(1).sqrt().plus(i),u=!0,r.precision=t,r.rounding=e,i.ln()):new r(i)},T.inverseHyperbolicSine=T.asinh=function(){var t,e,i=this,r=i.constructor;return!i.isFinite()||i.isZero()?new r(i):(t=r.precision,e=r.rounding,r.precision=t+2*Math.max(Math.abs(i.e),i.sd())+6,r.rounding=1,u=!1,i=i.times(i).plus(1).sqrt().plus(i),u=!0,r.precision=t,r.rounding=e,i.ln())},T.inverseHyperbolicTangent=T.atanh=function(){var t,e,i,r,n=this,s=n.constructor;return n.isFinite()?n.e>=0?new s(n.abs().eq(1)?n.s/0:n.isZero()?n:NaN):(t=s.precision,e=s.rounding,r=n.sd(),Math.max(r,t)<2*-n.e-1?G(new s(n),t,e,!0):(s.precision=i=r-n.e,n=R(n.plus(1),new s(1).minus(n),i+t,1),s.precision=t+4,s.rounding=1,n=n.ln(),s.precision=t,s.rounding=e,n.times(.5))):new s(NaN)},T.inverseSine=T.asin=function(){var t,e,i,r,n=this,s=n.constructor;return n.isZero()?new s(n):(e=n.abs().cmp(1),i=s.precision,r=s.rounding,-1!==e?0===e?((t=B(s,i+4,r).times(.5)).s=n.s,t):new s(NaN):(s.precision=i+6,s.rounding=1,n=n.div(new s(1).minus(n.times(n)).sqrt().plus(1)).atan(),s.precision=i,s.rounding=r,n.times(2)))},T.inverseTangent=T.atan=function(){var t,e,i,r,n,s,a,o,h,l=this,c=l.constructor,d=c.precision,p=c.rounding;if(l.isFinite()){if(l.isZero())return new c(l);if(l.abs().eq(1)&&d+4<=A)return(a=B(c,d+4,p).times(.25)).s=l.s,a}else{if(!l.s)return new c(NaN);if(d+4<=A)return(a=B(c,d+4,p).times(.5)).s=l.s,a}for(c.precision=o=d+10,c.rounding=1,t=i=Math.min(28,o/7+2|0);t;--t)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(u=!1,e=Math.ceil(o/7),r=1,h=l.times(l),a=new c(l),n=l;-1!==t;)if(n=n.times(h),s=a.minus(n.div(r+=2)),n=n.times(h),void 0!==(a=s.plus(n.div(r+=2))).d[e])for(t=e;a.d[t]===s.d[t]&&t--;);return i&&(a=a.times(2<<i-1)),u=!0,G(a,c.precision=d,c.rounding=p,!0)},T.isFinite=function(){return!!this.d},T.isInteger=T.isInt=function(){return!!this.d&&_(this.e/7)>this.d.length-2},T.isNaN=function(){return!this.s},T.isNegative=T.isNeg=function(){return this.s<0},T.isPositive=T.isPos=function(){return this.s>0},T.isZero=function(){return!!this.d&&0===this.d[0]},T.lessThan=T.lt=function(t){return this.cmp(t)<0},T.lessThanOrEqualTo=T.lte=function(t){return this.cmp(t)<1},T.logarithm=T.log=function(t){var e,i,r,n,s,a,o,h,l=this,c=l.constructor,d=c.precision,p=c.rounding;if(null==t)t=new c(10),e=!0;else{if(i=(t=new c(t)).d,t.s<0||!i||!i[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(i=l.d,l.s<0||!i||!i[0]||l.eq(1))return new c(i&&!i[0]?-1/0:1!=l.s?NaN:i?0:1/0);if(e)if(i.length>1)s=!0;else{for(n=i[0];n%10===0;)n/=10;s=1!==n}if(u=!1,a=q(l,o=d+5),r=e?N(c,o+10):q(t,o),D((h=R(a,r,o,1)).d,n=d,p))do{if(a=q(l,o+=10),r=e?N(c,o+10):q(t,o),h=R(a,r,o,1),!s){+F(h.d).slice(n+1,n+15)+1==1e14&&(h=G(h,d+1,0));break}}while(D(h.d,n+=10,p));return u=!0,G(h,d,p)},T.minus=T.sub=function(t){var e,i,r,n,s,a,o,h,l,c,d,p,f=this,m=f.constructor;if(t=new m(t),!f.d||!t.d)return f.s&&t.s?f.d?t.s=-t.s:t=new m(t.d||f.s!==t.s?f:NaN):t=new m(NaN),t;if(f.s!=t.s)return t.s=-t.s,f.plus(t);if(l=f.d,p=t.d,o=m.precision,h=m.rounding,!l[0]||!p[0]){if(p[0])t.s=-t.s;else{if(!l[0])return new m(3===h?-0:0);t=new m(f)}return u?G(t,o,h):t}if(i=_(t.e/7),c=_(f.e/7),l=l.slice(),s=c-i){for((d=s<0)?(e=l,s=-s,a=p.length):(e=p,i=c,a=l.length),s>(r=Math.max(Math.ceil(o/7),a)+2)&&(s=r,e.length=1),e.reverse(),r=s;r--;)e.push(0);e.reverse()}else{for((d=(r=l.length)<(a=p.length))&&(a=r),r=0;r<a;r++)if(l[r]!=p[r]){d=l[r]<p[r];break}s=0}for(d&&(e=l,l=p,p=e,t.s=-t.s),a=l.length,r=p.length-a;r>0;--r)l[a++]=0;for(r=p.length;r>s;){if(l[--r]<p[r]){for(n=r;n&&0===l[--n];)l[n]=E-1;--l[n],l[r]+=E}l[r]-=p[r]}for(;0===l[--a];)l.pop();for(;0===l[0];l.shift())--i;return l[0]?(t.d=l,t.e=j(l,i),u?G(t,o,h):t):new m(3===h?-0:0)},T.modulo=T.mod=function(t){var e,i=this,r=i.constructor;return t=new r(t),!i.d||!t.s||t.d&&!t.d[0]?new r(NaN):!t.d||i.d&&!i.d[0]?G(new r(i),r.precision,r.rounding):(u=!1,9==r.modulo?(e=R(i,t.abs(),0,3,1)).s*=t.s:e=R(i,t,0,r.modulo,1),e=e.times(t),u=!0,i.minus(e))},T.naturalExponential=T.exp=function(){return W(this)},T.naturalLogarithm=T.ln=function(){return q(this)},T.negated=T.neg=function(){var t=new this.constructor(this);return t.s=-t.s,G(t)},T.plus=T.add=function(t){var e,i,r,n,s,a,o,h,l,c,d=this,p=d.constructor;if(t=new p(t),!d.d||!t.d)return d.s&&t.s?d.d||(t=new p(t.d||d.s===t.s?d:NaN)):t=new p(NaN),t;if(d.s!=t.s)return t.s=-t.s,d.minus(t);if(l=d.d,c=t.d,o=p.precision,h=p.rounding,!l[0]||!c[0])return c[0]||(t=new p(d)),u?G(t,o,h):t;if(s=_(d.e/7),r=_(t.e/7),l=l.slice(),n=s-r){for(n<0?(i=l,n=-n,a=c.length):(i=c,r=s,a=l.length),n>(a=(s=Math.ceil(o/7))>a?s+1:a+1)&&(n=a,i.length=1),i.reverse();n--;)i.push(0);i.reverse()}for((a=l.length)-(n=c.length)<0&&(n=a,i=c,c=l,l=i),e=0;n;)e=(l[--n]=l[n]+c[n]+e)/E|0,l[n]%=E;for(e&&(l.unshift(e),++r),a=l.length;0==l[--a];)l.pop();return t.d=l,t.e=j(l,r),u?G(t,o,h):t},T.precision=T.sd=function(t){var e,i=this;if(void 0!==t&&t!==!!t&&1!==t&&0!==t)throw Error(g+t);return i.d?(e=O(i.d),t&&i.e+1>e&&(e=i.e+1)):e=NaN,e},T.round=function(){var t=this,e=t.constructor;return G(new e(t),t.e+1,e.rounding)},T.sine=T.sin=function(){var t,e,i=this,r=i.constructor;return i.isFinite()?i.isZero()?new r(i):(t=r.precision,e=r.rounding,r.precision=t+Math.max(i.e,i.sd())+7,r.rounding=1,i=function(t,e){var i,r=e.d.length;if(r<3)return e.isZero()?e:U(t,2,e,e);i=(i=1.4*Math.sqrt(r))>16?16:0|i,e=e.times(1/J(5,i)),e=U(t,2,e,e);for(var n,s=new t(5),a=new t(16),o=new t(20);i--;)n=e.times(e),e=e.times(s.plus(n.times(a.times(n).minus(o))));return e}(r,$(r,i)),r.precision=t,r.rounding=e,G(o>2?i.neg():i,t,e,!0)):new r(NaN)},T.squareRoot=T.sqrt=function(){var t,e,i,r,n,s,a=this,o=a.d,h=a.e,l=a.s,c=a.constructor;if(1!==l||!o||!o[0])return new c(!l||l<0&&(!o||o[0])?NaN:o?a:1/0);for(u=!1,0==(l=Math.sqrt(+a))||l==1/0?(((e=F(o)).length+h)%2==0&&(e+="0"),l=Math.sqrt(e),h=_((h+1)/2)-(h<0||h%2),r=new c(e=l==1/0?"5e"+h:(e=l.toExponential()).slice(0,e.indexOf("e")+1)+h)):r=new c(l.toString()),i=(h=c.precision)+3;;)if(r=(s=r).plus(R(a,s,i+2,1)).times(.5),F(s.d).slice(0,i)===(e=F(r.d)).slice(0,i)){if("9999"!=(e=e.slice(i-3,i+1))&&(n||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(G(r,h+1,1),t=!r.times(r).eq(a));break}if(!n&&(G(s,h+1,0),s.times(s).eq(a))){r=s;break}i+=4,n=1}return u=!0,G(r,h,c.rounding,t)},T.tangent=T.tan=function(){var t,e,i=this,r=i.constructor;return i.isFinite()?i.isZero()?new r(i):(t=r.precision,e=r.rounding,r.precision=t+10,r.rounding=1,(i=i.sin()).s=1,i=R(i,new r(1).minus(i.times(i)).sqrt(),t+10,0),r.precision=t,r.rounding=e,G(2==o||4==o?i.neg():i,t,e,!0)):new r(NaN)},T.times=T.mul=function(t){var e,i,r,n,s,a,o,h,l,c=this,d=c.constructor,p=c.d,f=(t=new d(t)).d;if(t.s*=c.s,!p||!p[0]||!f||!f[0])return new d(!t.s||p&&!p[0]&&!f||f&&!f[0]&&!p?NaN:p&&f?0*t.s:t.s/0);for(i=_(c.e/7)+_(t.e/7),(h=p.length)<(l=f.length)&&(s=p,p=f,f=s,a=h,h=l,l=a),s=[],r=a=h+l;r--;)s.push(0);for(r=l;--r>=0;){for(e=0,n=h+r;n>r;)o=s[n]+f[r]*p[n-r-1]+e,s[n--]=o%E|0,e=o/E|0;s[n]=(s[n]+e)%E|0}for(;!s[--a];)s.pop();return e?++i:s.shift(),t.d=s,t.e=j(s,i),u?G(t,d.precision,d.rounding):t},T.toBinary=function(t,e){return Q(this,2,t,e)},T.toDecimalPlaces=T.toDP=function(t,e){var i=this,r=i.constructor;return i=new r(i),void 0===t?i:(M(t,0,l),void 0===e?e=r.rounding:M(e,0,8),G(i,t+i.e+1,e))},T.toExponential=function(t,e){var i,r=this,n=r.constructor;return void 0===t?i=L(r,!0):(M(t,0,l),void 0===e?e=n.rounding:M(e,0,8),i=L(r=G(new n(r),t+1,e),!0,t+1)),r.isNeg()&&!r.isZero()?"-"+i:i},T.toFixed=function(t,e){var i,r,n=this,s=n.constructor;return void 0===t?i=L(n):(M(t,0,l),void 0===e?e=s.rounding:M(e,0,8),i=L(r=G(new s(n),t+n.e+1,e),!1,t+r.e+1)),n.isNeg()&&!n.isZero()?"-"+i:i},T.toFraction=function(t){var e,i,r,n,s,a,o,h,l,c,d,p,f=this,m=f.d,y=f.constructor;if(!m)return new y(f);if(l=i=new y(1),r=h=new y(0),a=(s=(e=new y(r)).e=O(m)-f.e-1)%7,e.d[0]=x(10,a<0?7+a:a),null==t)t=s>0?e:l;else{if(!(o=new y(t)).isInt()||o.lt(l))throw Error(g+o);t=o.gt(e)?s>0?e:l:o}for(u=!1,o=new y(F(m)),c=y.precision,y.precision=s=7*m.length*2;d=R(o,e,0,1,1),1!=(n=i.plus(d.times(r))).cmp(t);)i=r,r=n,n=l,l=h.plus(d.times(n)),h=n,n=e,e=o.minus(d.times(n)),o=n;return n=R(t.minus(i),r,0,1,1),h=h.plus(n.times(l)),i=i.plus(n.times(r)),h.s=l.s=f.s,p=R(l,r,s,1).minus(f).abs().cmp(R(h,i,s,1).minus(f).abs())<1?[l,r]:[h,i],y.precision=c,u=!0,p},T.toHexadecimal=T.toHex=function(t,e){return Q(this,16,t,e)},T.toNearest=function(t,e){var i=this,r=i.constructor;if(i=new r(i),null==t){if(!i.d)return i;t=new r(1),e=r.rounding}else{if(t=new r(t),void 0===e?e=r.rounding:M(e,0,8),!i.d)return t.s?i:t;if(!t.d)return t.s&&(t.s=i.s),t}return t.d[0]?(u=!1,i=R(i,t,0,e,1).times(t),u=!0,G(i)):(t.s=i.s,i=t),i},T.toNumber=function(){return+this},T.toOctal=function(t,e){return Q(this,8,t,e)},T.toPower=T.pow=function(t){var e,i,r,n,s,a,o=this,h=o.constructor,l=+(t=new h(t));if(!o.d||!t.d||!o.d[0]||!t.d[0])return new h(x(+o,l));if((o=new h(o)).eq(1))return o;if(r=h.precision,s=h.rounding,t.eq(1))return G(o,r,s);if((e=_(t.e/7))>=t.d.length-1&&(i=l<0?-l:l)<=9007199254740991)return n=z(h,o,i,r),t.s<0?new h(1).div(n):G(n,r,s);if((a=o.s)<0){if(e<t.d.length-1)return new h(NaN);if(0==(1&t.d[e])&&(a=1),0==o.e&&1==o.d[0]&&1==o.d.length)return o.s=a,o}return(e=0!=(i=x(+o,l))&&isFinite(i)?new h(i+"").e:_(l*(Math.log("0."+F(o.d))/Math.LN10+o.e+1)))>h.maxE+1||e<h.minE-1?new h(e>0?a/0:0):(u=!1,h.rounding=o.s=1,i=Math.min(12,(e+"").length),(n=W(t.times(q(o,r+i)),r)).d&&D((n=G(n,r+5,1)).d,r,s)&&(e=r+10,+F((n=G(W(t.times(q(o,e+i)),e),e+5,1)).d).slice(r+1,r+15)+1==1e14&&(n=G(n,r+1,0))),n.s=a,u=!0,h.rounding=s,G(n,r,s))},T.toPrecision=function(t,e){var i,r=this,n=r.constructor;return void 0===t?i=L(r,r.e<=n.toExpNeg||r.e>=n.toExpPos):(M(t,1,l),void 0===e?e=n.rounding:M(e,0,8),i=L(r=G(new n(r),t,e),t<=r.e||r.e<=n.toExpNeg,t)),r.isNeg()&&!r.isZero()?"-"+i:i},T.toSignificantDigits=T.toSD=function(t,e){var i=this.constructor;return void 0===t?(t=i.precision,e=i.rounding):(M(t,1,l),void 0===e?e=i.rounding:M(e,0,8)),G(new i(this),t,e)},T.toString=function(){var t=this,e=t.constructor,i=L(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+i:i},T.truncated=T.trunc=function(){return G(new this.constructor(this),this.e+1,1)},T.valueOf=T.toJSON=function(){var t=this,e=t.constructor,i=L(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+i:i};var R=function(){function t(t,e,i){var r,n=0,s=t.length;for(t=t.slice();s--;)r=t[s]*e+n,t[s]=r%i|0,n=r/i|0;return n&&t.unshift(n),t}function e(t,e,i,r){var n,s;if(i!=r)s=i>r?1:-1;else for(n=s=0;n<i;n++)if(t[n]!=e[n]){s=t[n]>e[n]?1:-1;break}return s}function i(t,e,i,r){for(var n=0;i--;)t[i]-=n,n=t[i]<e[i]?1:0,t[i]=n*r+t[i]-e[i];for(;!t[0]&&t.length>1;)t.shift()}return function(r,n,s,o,h,l){var c,d,p,f,u,m,g,y,v,b,x,S,P,w,C,k,A,T,F,M,D=r.constructor,I=r.s==n.s?1:-1,R=r.d,L=n.d;if(!R||!R[0]||!L||!L[0])return new D(r.s&&n.s&&(R?!L||R[0]!=L[0]:L)?R&&0==R[0]||!L?0*I:I/0:NaN);for(l?(u=1,d=r.e-n.e):(l=E,u=7,d=_(r.e/u)-_(n.e/u)),F=L.length,A=R.length,b=(v=new D(I)).d=[],p=0;L[p]==(R[p]||0);p++);if(L[p]>(R[p]||0)&&d--,null==s?(w=s=D.precision,o=D.rounding):w=h?s+(r.e-n.e)+1:s,w<0)b.push(1),m=!0;else{if(w=w/u+2|0,p=0,1==F){for(f=0,L=L[0],w++;(p<A||f)&&w--;p++)C=f*l+(R[p]||0),b[p]=C/L|0,f=C%L|0;m=f||p<A}else{for((f=l/(L[0]+1)|0)>1&&(L=t(L,f,l),R=t(R,f,l),F=L.length,A=R.length),k=F,S=(x=R.slice(0,F)).length;S<F;)x[S++]=0;(M=L.slice()).unshift(0),T=L[0],L[1]>=l/2&&++T;do{f=0,(c=e(L,x,F,S))<0?(P=x[0],F!=S&&(P=P*l+(x[1]||0)),(f=P/T|0)>1?(f>=l&&(f=l-1),1==(c=e(g=t(L,f,l),x,y=g.length,S=x.length))&&(f--,i(g,F<y?M:L,y,l))):(0==f&&(c=f=1),g=L.slice()),(y=g.length)<S&&g.unshift(0),i(x,g,S,l),-1==c&&(c=e(L,x,F,S=x.length))<1&&(f++,i(x,F<S?M:L,S,l)),S=x.length):0===c&&(f++,x=[0]),b[p++]=f,c&&x[0]?x[S++]=R[k]||0:(x=[R[k]],S=1)}while((k++<A||void 0!==x[0])&&w--);m=void 0!==x[0]}b[0]||b.shift()}if(1==u)v.e=d,a=m;else{for(p=1,f=b[0];f>=10;f/=10)p++;v.e=p+d*u-1,G(v,h?s+v.e+1:s,o,m)}return v}}();function G(t,e,i,r){var n,s,a,o,h,l,c,d,p,f=t.constructor;t:if(null!=e){if(!(d=t.d))return t;for(n=1,o=d[0];o>=10;o/=10)n++;if((s=e-n)<0)s+=7,a=e,h=(c=d[p=0])/x(10,n-a-1)%10|0;else if((p=Math.ceil((s+1)/7))>=(o=d.length)){if(!r)break t;for(;o++<=p;)d.push(0);c=h=0,n=1,a=(s%=7)-7+1}else{for(c=o=d[p],n=1;o>=10;o/=10)n++;h=(a=(s%=7)-7+n)<0?0:c/x(10,n-a-1)%10|0}if(r=r||e<0||void 0!==d[p+1]||(a<0?c:c%x(10,n-a-1)),l=i<4?(h||r)&&(0==i||i==(t.s<0?3:2)):h>5||5==h&&(4==i||r||6==i&&(s>0?a>0?c/x(10,n-a):0:d[p-1])%10&1||i==(t.s<0?8:7)),e<1||!d[0])return d.length=0,l?(e-=t.e+1,d[0]=x(10,(7-e%7)%7),t.e=-e||0):d[0]=t.e=0,t;if(0==s?(d.length=p,o=1,p--):(d.length=p+1,o=x(10,7-s),d[p]=a>0?(c/x(10,n-a)%x(10,a)|0)*o:0),l)for(;;){if(0==p){for(s=1,a=d[0];a>=10;a/=10)s++;for(a=d[0]+=o,o=1;a>=10;a/=10)o++;s!=o&&(t.e++,d[0]==E&&(d[0]=1));break}if(d[p]+=o,d[p]!=E)break;d[p--]=0,o=1}for(s=d.length;0===d[--s];)d.pop()}return u&&(t.e>f.maxE?(t.d=null,t.e=NaN):t.e<f.minE&&(t.e=0,t.d=[0])),t}function L(t,e,i){if(!t.isFinite())return Y(t);var r,n=t.e,s=F(t.d),a=s.length;return e?(i&&(r=i-a)>0?s=s.charAt(0)+"."+s.slice(1)+V(r):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(t.e<0?"e":"e+")+t.e):n<0?(s="0."+V(-n-1)+s,i&&(r=i-a)>0&&(s+=V(r))):n>=a?(s+=V(n+1-a),i&&(r=i-n-1)>0&&(s=s+"."+V(r))):((r=n+1)<a&&(s=s.slice(0,r)+"."+s.slice(r)),i&&(r=i-a)>0&&(n+1===a&&(s+="."),s+=V(r))),s}function j(t,e){var i=t[0];for(e*=7;i>=10;i/=10)e++;return e}function N(t,e,i){if(e>k)throw u=!0,i&&(t.precision=i),Error(y);return G(new t(d),e,1,!0)}function B(t,e,i){if(e>A)throw Error(y);return G(new t(p),e,i,!0)}function O(t){var e=t.length-1,i=7*e+1;if(e=t[e]){for(;e%10==0;e/=10)i--;for(e=t[0];e>=10;e/=10)i++}return i}function V(t){for(var e="";t--;)e+="0";return e}function z(t,e,i,r){var n,s=new t(1),a=Math.ceil(r/7+4);for(u=!1;;){if(i%2&&tt((s=s.times(e)).d,a)&&(n=!0),0===(i=_(i/2))){i=s.d.length-1,n&&0===s.d[i]&&++s.d[i];break}tt((e=e.times(e)).d,a)}return u=!0,s}function H(t){return 1&t.d[t.d.length-1]}function Z(t,e,i){for(var r,n=new t(e[0]),s=0;++s<e.length;){if(!(r=new t(e[s])).s){n=r;break}n[i](r)&&(n=r)}return n}function W(t,e){var i,r,n,s,a,o,h,l=0,c=0,d=0,p=t.constructor,f=p.rounding,m=p.precision;if(!t.d||!t.d[0]||t.e>17)return new p(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(null==e?(u=!1,h=m):h=e,o=new p(.03125);t.e>-2;)t=t.times(o),d+=5;for(h+=r=Math.log(x(2,d))/Math.LN10*2+5|0,i=s=a=new p(1),p.precision=h;;){if(s=G(s.times(t),h,1),i=i.times(++c),F((o=a.plus(R(s,i,h,1))).d).slice(0,h)===F(a.d).slice(0,h)){for(n=d;n--;)a=G(a.times(a),h,1);if(null!=e)return p.precision=m,a;if(!(l<3&&D(a.d,h-r,f,l)))return G(a,p.precision=m,f,u=!0);p.precision=h+=10,i=s=o=new p(1),c=0,l++}a=o}}function q(t,e){var i,r,n,s,a,o,h,l,c,d,p,f=1,m=t,g=m.d,y=m.constructor,v=y.rounding,b=y.precision;if(m.s<0||!g||!g[0]||!m.e&&1==g[0]&&1==g.length)return new y(g&&!g[0]?-1/0:1!=m.s?NaN:g?0:m);if(null==e?(u=!1,c=b):c=e,y.precision=c+=10,r=(i=F(g)).charAt(0),!(Math.abs(s=m.e)<15e14))return l=N(y,c+2,b).times(s+""),m=q(new y(r+"."+i.slice(1)),c-10).plus(l),y.precision=b,null==e?G(m,b,v,u=!0):m;for(;r<7&&1!=r||1==r&&i.charAt(1)>3;)r=(i=F((m=m.times(t)).d)).charAt(0),f++;for(s=m.e,r>1?(m=new y("0."+i),s++):m=new y(r+"."+i.slice(1)),d=m,h=a=m=R(m.minus(1),m.plus(1),c,1),p=G(m.times(m),c,1),n=3;;){if(a=G(a.times(p),c,1),F((l=h.plus(R(a,new y(n),c,1))).d).slice(0,c)===F(h.d).slice(0,c)){if(h=h.times(2),0!==s&&(h=h.plus(N(y,c+2,b).times(s+""))),h=R(h,new y(f),c,1),null!=e)return y.precision=b,h;if(!D(h.d,c-10,v,o))return G(h,y.precision=b,v,u=!0);y.precision=c+=10,l=a=m=R(d.minus(1),d.plus(1),c,1),p=G(m.times(m),c,1),n=o=1}h=l,n+=2}}function Y(t){return String(t.s*t.s/0)}function X(t,e){var i,r,n;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(i<0&&(i=r),i+=+e.slice(r+1),e=e.substring(0,r)):i<0&&(i=e.length),r=0;48===e.charCodeAt(r);r++);for(n=e.length;48===e.charCodeAt(n-1);--n);if(e=e.slice(r,n)){if(n-=r,t.e=i=i-r-1,t.d=[],r=(i+1)%7,i<0&&(r+=7),r<n){for(r&&t.d.push(+e.slice(0,r)),n-=7;r<n;)t.d.push(+e.slice(r,r+=7));r=7-(e=e.slice(r)).length}else r-=n;for(;r--;)e+="0";t.d.push(+e),u&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function K(t,e){var i,r,n,a,o,h,l,c,d;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),C.test(e))return X(t,e)}else if("Infinity"===e||"NaN"===e)return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(P.test(e))i=16,e=e.toLowerCase();else if(S.test(e))i=2;else{if(!w.test(e))throw Error(g+e);i=8}for((a=e.search(/p/i))>0?(l=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),o=(a=e.indexOf("."))>=0,r=t.constructor,o&&(a=(h=(e=e.replace(".","")).length)-a,n=z(r,new r(i),a,2*a)),a=d=(c=I(e,i,E)).length-1;0===c[a];--a)c.pop();return a<0?new r(0*t.s):(t.e=j(c,d),t.d=c,u=!1,o&&(t=R(t,n,4*h)),l&&(t=t.times(Math.abs(l)<54?x(2,l):s.pow(2,l))),u=!0,t)}function U(t,e,i,r,n){var s,a,o,h,l=t.precision,c=Math.ceil(l/7);for(u=!1,h=i.times(i),o=new t(r);;){if(a=R(o.times(h),new t(e++*e++),l,1),o=n?r.plus(a):r.minus(a),r=R(a.times(h),new t(e++*e++),l,1),void 0!==(a=o.plus(r)).d[c]){for(s=c;a.d[s]===o.d[s]&&s--;);if(-1==s)break}s=o,o=r,r=a,a=s}return u=!0,a.d.length=c+1,a}function J(t,e){for(var i=t;--e;)i*=t;return i}function $(t,e){var i,r=e.s<0,n=B(t,t.precision,1),s=n.times(.5);if((e=e.abs()).lte(s))return o=r?4:1,e;if((i=e.divToInt(n)).isZero())o=r?3:2;else{if((e=e.minus(i.times(n))).lte(s))return o=H(i)?r?2:3:r?4:1,e;o=H(i)?r?1:4:r?3:2}return e.minus(n).abs()}function Q(t,e,i,r){var n,s,o,h,d,p,f,u,m,g=t.constructor,y=void 0!==i;if(y?(M(i,1,l),void 0===r?r=g.rounding:M(r,0,8)):(i=g.precision,r=g.rounding),t.isFinite()){for(y?(n=2,16==e?i=4*i-3:8==e&&(i=3*i-2)):n=e,(o=(f=L(t)).indexOf("."))>=0&&(f=f.replace(".",""),(m=new g(1)).e=f.length-o,m.d=I(L(m),10,n),m.e=m.d.length),s=d=(u=I(f,10,n)).length;0==u[--d];)u.pop();if(u[0]){if(o<0?s--:((t=new g(t)).d=u,t.e=s,u=(t=R(t,m,i,r,0,n)).d,s=t.e,p=a),o=u[i],h=n/2,p=p||void 0!==u[i+1],p=r<4?(void 0!==o||p)&&(0===r||r===(t.s<0?3:2)):o>h||o===h&&(4===r||p||6===r&&1&u[i-1]||r===(t.s<0?8:7)),u.length=i,p)for(;++u[--i]>n-1;)u[i]=0,i||(++s,u.unshift(1));for(d=u.length;!u[d-1];--d);for(o=0,f="";o<d;o++)f+=c.charAt(u[o]);if(y){if(d>1)if(16==e||8==e){for(o=16==e?4:3,--d;d%o;d++)f+="0";for(d=(u=I(f,n,e)).length;!u[d-1];--d);for(o=1,f="1.";o<d;o++)f+=c.charAt(u[o])}else f=f.charAt(0)+"."+f.slice(1);f=f+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)f="0"+f;f="0."+f}else if(++s>d)for(s-=d;s--;)f+="0";else s<d&&(f=f.slice(0,s)+"."+f.slice(s))}else f=y?"0p+0":"0";f=(16==e?"0x":2==e?"0b":8==e?"0o":"")+f}else f=Y(t);return t.s<0?"-"+f:f}function tt(t,e){if(t.length>e)return t.length=e,!0}function et(t){return new this(t).abs()}function it(t){return new this(t).acos()}function rt(t){return new this(t).acosh()}function nt(t,e){return new this(t).plus(e)}function st(t){return new this(t).asin()}function at(t){return new this(t).asinh()}function ot(t){return new this(t).atan()}function ht(t){return new this(t).atanh()}function lt(t,e){t=new this(t),e=new this(e);var i,r=this.precision,n=this.rounding,s=r+4;return t.s&&e.s?t.d||e.d?!e.d||t.isZero()?(i=e.s<0?B(this,r,n):new this(0)).s=t.s:!t.d||e.isZero()?(i=B(this,s,1).times(.5)).s=t.s:e.s<0?(this.precision=s,this.rounding=1,i=this.atan(R(t,e,s,1)),e=B(this,s,1),this.precision=r,this.rounding=n,i=t.s<0?i.minus(e):i.plus(e)):i=this.atan(R(t,e,s,1)):(i=B(this,s,1).times(e.s>0?.25:.75)).s=t.s:i=new this(NaN),i}function ct(t){return new this(t).cbrt()}function dt(t){return G(t=new this(t),t.e+1,2)}function pt(t,e,i){return new this(t).clamp(e,i)}function ft(t){if(!t||"object"!==typeof t)throw Error(m+"Object expected");var e,i,r,n=!0===t.defaults,s=["precision",1,l,"rounding",0,8,"toExpNeg",-h,0,"toExpPos",0,h,"maxE",0,h,"minE",-h,0,"modulo",0,9];for(e=0;e<s.length;e+=3)if(i=s[e],n&&(this[i]=f[i]),void 0!==(r=t[i])){if(!(_(r)===r&&r>=s[e+1]&&r<=s[e+2]))throw Error(g+i+": "+r);this[i]=r}if(i="crypto",n&&(this[i]=f[i]),void 0!==(r=t[i])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(g+i+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(v);this[i]=!0}else this[i]=!1}return this}function ut(t){return new this(t).cos()}function mt(t){return new this(t).cosh()}function gt(t,e){return new this(t).div(e)}function yt(t){return new this(t).exp()}function vt(t){return G(t=new this(t),t.e+1,3)}function bt(){var t,e,i=new this(0);for(u=!1,t=0;t<arguments.length;)if((e=new this(arguments[t++])).d)i.d&&(i=i.plus(e.times(e)));else{if(e.s)return u=!0,new this(1/0);i=e}return u=!0,i.sqrt()}function _t(t){return t instanceof s||t&&t.toStringTag===b||!1}function xt(t){return new this(t).ln()}function St(t,e){return new this(t).log(e)}function Pt(t){return new this(t).log(2)}function wt(t){return new this(t).log(10)}function Ct(){return Z(this,arguments,"lt")}function Et(){return Z(this,arguments,"gt")}function kt(t,e){return new this(t).mod(e)}function At(t,e){return new this(t).mul(e)}function Tt(t,e){return new this(t).pow(e)}function Ft(t){var e,i,r,n,s=0,a=new this(1),o=[];if(void 0===t?t=this.precision:M(t,1,l),r=Math.ceil(t/7),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));s<r;)(n=e[s])>=429e7?e[s]=crypto.getRandomValues(new Uint32Array(1))[0]:o[s++]=n%1e7;else{if(!crypto.randomBytes)throw Error(v);for(e=crypto.randomBytes(r*=4);s<r;)(n=e[s]+(e[s+1]<<8)+(e[s+2]<<16)+((127&e[s+3])<<24))>=214e7?crypto.randomBytes(4).copy(e,s):(o.push(n%1e7),s+=4);s=r/4}else for(;s<r;)o[s++]=1e7*Math.random()|0;for(t%=7,(r=o[--s])&&t&&(n=x(10,7-t),o[s]=(r/n|0)*n);0===o[s];s--)o.pop();if(s<0)i=0,o=[0];else{for(i=-1;0===o[0];i-=7)o.shift();for(r=1,n=o[0];n>=10;n/=10)r++;r<7&&(i-=7-r)}return a.e=i,a.d=o,a}function Mt(t){return G(t=new this(t),t.e+1,this.rounding)}function Dt(t){return(t=new this(t)).d?t.d[0]?t.s:0*t.s:t.s||NaN}function It(t){return new this(t).sin()}function Rt(t){return new this(t).sinh()}function Gt(t){return new this(t).sqrt()}function Lt(t,e){return new this(t).sub(e)}function jt(){var t=0,e=arguments,i=new this(e[t]);for(u=!1;i.s&&++t<e.length;)i=i.plus(e[t]);return u=!0,G(i,this.precision,this.rounding)}function Nt(t){return new this(t).tan()}function Bt(t){return new this(t).tanh()}function Ot(t){return G(t=new this(t),t.e+1,1)}s=function t(e){var i,r,n;function s(t){var e,i,r,n=this;if(!(n instanceof s))return new s(t);if(n.constructor=s,_t(t))return n.s=t.s,void(u?!t.d||t.e>s.maxE?(n.e=NaN,n.d=null):t.e<s.minE?(n.e=0,n.d=[0]):(n.e=t.e,n.d=t.d.slice()):(n.e=t.e,n.d=t.d?t.d.slice():t.d));if("number"===(r=typeof t)){if(0===t)return n.s=1/t<0?-1:1,n.e=0,void(n.d=[0]);if(t<0?(t=-t,n.s=-1):n.s=1,t===~~t&&t<1e7){for(e=0,i=t;i>=10;i/=10)e++;return void(u?e>s.maxE?(n.e=NaN,n.d=null):e<s.minE?(n.e=0,n.d=[0]):(n.e=e,n.d=[t]):(n.e=e,n.d=[t]))}return 0*t!==0?(t||(n.s=NaN),n.e=NaN,void(n.d=null)):X(n,t.toString())}if("string"!==r)throw Error(g+t);return 45===(i=t.charCodeAt(0))?(t=t.slice(1),n.s=-1):(43===i&&(t=t.slice(1)),n.s=1),C.test(t)?X(n,t):K(n,t)}if(s.prototype=T,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=ft,s.clone=t,s.isDecimal=_t,s.abs=et,s.acos=it,s.acosh=rt,s.add=nt,s.asin=st,s.asinh=at,s.atan=ot,s.atanh=ht,s.atan2=lt,s.cbrt=ct,s.ceil=dt,s.clamp=pt,s.cos=ut,s.cosh=mt,s.div=gt,s.exp=yt,s.floor=vt,s.hypot=bt,s.ln=xt,s.log=St,s.log10=wt,s.log2=Pt,s.max=Ct,s.min=Et,s.mod=kt,s.mul=At,s.pow=Tt,s.random=Ft,s.round=Mt,s.sign=Dt,s.sin=It,s.sinh=Rt,s.sqrt=Gt,s.sub=Lt,s.sum=jt,s.tan=Nt,s.tanh=Bt,s.trunc=Ot,void 0===e&&(e={}),e&&!0!==e.defaults)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],i=0;i<n.length;)e.hasOwnProperty(r=n[i++])||(e[r]=this[r]);return s.config(e),s}(f),s.prototype.constructor=s,s.default=s.Decimal=s,d=new s(d),p=new s(p),void 0===(r=function(){return s}.call(e,i,e,t))||(t.exports=r)}()},"../node_modules/lottie-web/build/player/lottie.js":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__,root,factory;"undefined"!==typeof navigator&&(root=window||{},factory=function(window){"use strict";var svgNS="http://www.w3.org/2000/svg",locationHref="",initialDefaultFrame=-999999,_useWebWorker=!1,subframeEnabled=!0,idPrefix="",expressionsPlugin,isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),cachedColors={},bmRnd,bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};function ProjectInterface(){return{}}!function(){var t,e=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],i=e.length;for(t=0;t<i;t+=1)BMMath[e[t]]=Math[e[t]]}(),BMMath.random=Math.random,BMMath.abs=function(t){if("object"===typeof t&&t.length){var e,i=createSizedArray(t.length),r=t.length;for(e=0;e<r;e+=1)i[e]=Math.abs(t[e]);return i}return Math.abs(t)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function roundValues(t){bmRnd=t?Math.round:function(t){return t}}function styleDiv(t){t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.display="block",t.style.transformOrigin="0 0",t.style.webkitTransformOrigin="0 0",t.style.backfaceVisibility="visible",t.style.webkitBackfaceVisibility="visible",t.style.transformStyle="preserve-3d",t.style.webkitTransformStyle="preserve-3d",t.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(t,e,i,r){this.type=t,this.currentTime=e,this.totalTime=i,this.direction=r<0?-1:1}function BMCompleteEvent(t,e){this.type=t,this.direction=e<0?-1:1}function BMCompleteLoopEvent(t,e,i,r){this.type=t,this.currentLoop=i,this.totalLoops=e,this.direction=r<0?-1:1}function BMSegmentStartEvent(t,e,i){this.type=t,this.firstFrame=e,this.totalFrames=i}function BMDestroyEvent(t,e){this.type=t,this.target=e}function BMRenderFrameErrorEvent(t,e){this.type="renderFrameError",this.nativeError=t,this.currentTime=e}function BMConfigErrorEvent(t){this.type="configError",this.nativeError=t}function BMAnimationConfigErrorEvent(t,e){this.type=t,this.nativeError=e}roundValues(!1);var createElementID=function(){var t=0;return function(){return idPrefix+"__lottie_element_"+(t+=1)}}();function HSVtoRGB(t,e,i){var r,n,s,a,o,h,l,c;switch(h=i*(1-e),l=i*(1-(o=6*t-(a=Math.floor(6*t)))*e),c=i*(1-(1-o)*e),a%6){case 0:r=i,n=c,s=h;break;case 1:r=l,n=i,s=h;break;case 2:r=h,n=i,s=c;break;case 3:r=h,n=l,s=i;break;case 4:r=c,n=h,s=i;break;case 5:r=i,n=h,s=l}return[r,n,s]}function RGBtoHSV(t,e,i){var r,n=Math.max(t,e,i),s=Math.min(t,e,i),a=n-s,o=0===n?0:a/n,h=n/255;switch(n){case s:r=0;break;case t:r=e-i+a*(e<i?6:0),r/=6*a;break;case e:r=i-t+2*a,r/=6*a;break;case i:r=t-e+4*a,r/=6*a}return[r,o,h]}function addSaturationToRGB(t,e){var i=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return i[1]+=e,i[1]>1?i[1]=1:i[1]<=0&&(i[1]=0),HSVtoRGB(i[0],i[1],i[2])}function addBrightnessToRGB(t,e){var i=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return i[2]+=e,i[2]>1?i[2]=1:i[2]<0&&(i[2]=0),HSVtoRGB(i[0],i[1],i[2])}function addHueToRGB(t,e){var i=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return i[0]+=e/360,i[0]>1?i[0]-=1:i[0]<0&&(i[0]+=1),HSVtoRGB(i[0],i[1],i[2])}var rgbToHex=function(){var t,e,i=[];for(t=0;t<256;t+=1)e=t.toString(16),i[t]=1===e.length?"0"+e:e;return function(t,e,r){return t<0&&(t=0),e<0&&(e=0),r<0&&(r=0),"#"+i[t]+i[e]+i[r]}}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(t,e){if(this._cbs[t])for(var i=this._cbs[t],r=0;r<i.length;r+=1)i[r](e)},addEventListener:function(t,e){return this._cbs[t]||(this._cbs[t]=[]),this._cbs[t].push(e),function(){this.removeEventListener(t,e)}.bind(this)},removeEventListener:function(t,e){if(e){if(this._cbs[t]){for(var i=0,r=this._cbs[t].length;i<r;)this._cbs[t][i]===e&&(this._cbs[t].splice(i,1),i-=1,r-=1),i+=1;this._cbs[t].length||(this._cbs[t]=null)}}else this._cbs[t]=null}};var createTypedArray=function(){function t(t,e){var i,r=0,n=[];switch(t){case"int16":case"uint8c":i=1;break;default:i=1.1}for(r=0;r<e;r+=1)n.push(i);return n}return"function"===typeof Uint8ClampedArray&&"function"===typeof Float32Array?function(e,i){return"float32"===e?new Float32Array(i):"int16"===e?new Int16Array(i):"uint8c"===e?new Uint8ClampedArray(i):t(e,i)}:t}();function createSizedArray(t){return Array.apply(null,{length:t})}function createNS(t){return document.createElementNS(svgNS,t)}function createTag(t){return document.createElement(t)}function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(t){-1===this.dynamicProperties.indexOf(t)&&(this.dynamicProperties.push(t),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){var t;this._mdf=!1;var e=this.dynamicProperties.length;for(t=0;t<e;t+=1)this.dynamicProperties[t].getValue(),this.dynamicProperties[t]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(t){this.container=t,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var getBlendMode=function(){var t={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(e){return t[e]||""}}(),lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"},Matrix=function(){var t=Math.cos,e=Math.sin,i=Math.tan,r=Math.round;function n(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function s(i){if(0===i)return this;var r=t(i),n=e(i);return this._t(r,-n,0,0,n,r,0,0,0,0,1,0,0,0,0,1)}function a(i){if(0===i)return this;var r=t(i),n=e(i);return this._t(1,0,0,0,0,r,-n,0,0,n,r,0,0,0,0,1)}function o(i){if(0===i)return this;var r=t(i),n=e(i);return this._t(r,0,n,0,0,1,0,0,-n,0,r,0,0,0,0,1)}function h(i){if(0===i)return this;var r=t(i),n=e(i);return this._t(r,-n,0,0,n,r,0,0,0,0,1,0,0,0,0,1)}function l(t,e){return this._t(1,e,t,1,0,0)}function c(t,e){return this.shear(i(t),i(e))}function d(r,n){var s=t(n),a=e(n);return this._t(s,a,0,0,-a,s,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,i(r),1,0,0,0,0,1,0,0,0,0,1)._t(s,-a,0,0,a,s,0,0,0,0,1,0,0,0,0,1)}function p(t,e,i){return i||0===i||(i=1),1===t&&1===e&&1===i?this:this._t(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1)}function f(t,e,i,r,n,s,a,o,h,l,c,d,p,f,u,m){return this.props[0]=t,this.props[1]=e,this.props[2]=i,this.props[3]=r,this.props[4]=n,this.props[5]=s,this.props[6]=a,this.props[7]=o,this.props[8]=h,this.props[9]=l,this.props[10]=c,this.props[11]=d,this.props[12]=p,this.props[13]=f,this.props[14]=u,this.props[15]=m,this}function u(t,e,i){return i=i||0,0!==t||0!==e||0!==i?this._t(1,0,0,0,0,1,0,0,0,0,1,0,t,e,i,1):this}function m(t,e,i,r,n,s,a,o,h,l,c,d,p,f,u,m){var g=this.props;if(1===t&&0===e&&0===i&&0===r&&0===n&&1===s&&0===a&&0===o&&0===h&&0===l&&1===c&&0===d)return g[12]=g[12]*t+g[15]*p,g[13]=g[13]*s+g[15]*f,g[14]=g[14]*c+g[15]*u,g[15]*=m,this._identityCalculated=!1,this;var y=g[0],v=g[1],b=g[2],_=g[3],x=g[4],S=g[5],P=g[6],w=g[7],C=g[8],E=g[9],k=g[10],A=g[11],T=g[12],F=g[13],M=g[14],D=g[15];return g[0]=y*t+v*n+b*h+_*p,g[1]=y*e+v*s+b*l+_*f,g[2]=y*i+v*a+b*c+_*u,g[3]=y*r+v*o+b*d+_*m,g[4]=x*t+S*n+P*h+w*p,g[5]=x*e+S*s+P*l+w*f,g[6]=x*i+S*a+P*c+w*u,g[7]=x*r+S*o+P*d+w*m,g[8]=C*t+E*n+k*h+A*p,g[9]=C*e+E*s+k*l+A*f,g[10]=C*i+E*a+k*c+A*u,g[11]=C*r+E*o+k*d+A*m,g[12]=T*t+F*n+M*h+D*p,g[13]=T*e+F*s+M*l+D*f,g[14]=T*i+F*a+M*c+D*u,g[15]=T*r+F*o+M*d+D*m,this._identityCalculated=!1,this}function g(){return this._identityCalculated||(this._identity=!(1!==this.props[0]||0!==this.props[1]||0!==this.props[2]||0!==this.props[3]||0!==this.props[4]||1!==this.props[5]||0!==this.props[6]||0!==this.props[7]||0!==this.props[8]||0!==this.props[9]||1!==this.props[10]||0!==this.props[11]||0!==this.props[12]||0!==this.props[13]||0!==this.props[14]||1!==this.props[15]),this._identityCalculated=!0),this._identity}function y(t){for(var e=0;e<16;){if(t.props[e]!==this.props[e])return!1;e+=1}return!0}function v(t){var e;for(e=0;e<16;e+=1)t.props[e]=this.props[e];return t}function b(t){var e;for(e=0;e<16;e+=1)this.props[e]=t[e]}function _(t,e,i){return{x:t*this.props[0]+e*this.props[4]+i*this.props[8]+this.props[12],y:t*this.props[1]+e*this.props[5]+i*this.props[9]+this.props[13],z:t*this.props[2]+e*this.props[6]+i*this.props[10]+this.props[14]}}function x(t,e,i){return t*this.props[0]+e*this.props[4]+i*this.props[8]+this.props[12]}function S(t,e,i){return t*this.props[1]+e*this.props[5]+i*this.props[9]+this.props[13]}function P(t,e,i){return t*this.props[2]+e*this.props[6]+i*this.props[10]+this.props[14]}function w(){var t=this.props[0]*this.props[5]-this.props[1]*this.props[4],e=this.props[5]/t,i=-this.props[1]/t,r=-this.props[4]/t,n=this.props[0]/t,s=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/t,a=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/t,o=new Matrix;return o.props[0]=e,o.props[1]=i,o.props[4]=r,o.props[5]=n,o.props[12]=s,o.props[13]=a,o}function C(t){return this.getInverseMatrix().applyToPointArray(t[0],t[1],t[2]||0)}function E(t){var e,i=t.length,r=[];for(e=0;e<i;e+=1)r[e]=C(t[e]);return r}function k(t,e,i){var r=createTypedArray("float32",6);if(this.isIdentity())r[0]=t[0],r[1]=t[1],r[2]=e[0],r[3]=e[1],r[4]=i[0],r[5]=i[1];else{var n=this.props[0],s=this.props[1],a=this.props[4],o=this.props[5],h=this.props[12],l=this.props[13];r[0]=t[0]*n+t[1]*a+h,r[1]=t[0]*s+t[1]*o+l,r[2]=e[0]*n+e[1]*a+h,r[3]=e[0]*s+e[1]*o+l,r[4]=i[0]*n+i[1]*a+h,r[5]=i[0]*s+i[1]*o+l}return r}function A(t,e,i){return this.isIdentity()?[t,e,i]:[t*this.props[0]+e*this.props[4]+i*this.props[8]+this.props[12],t*this.props[1]+e*this.props[5]+i*this.props[9]+this.props[13],t*this.props[2]+e*this.props[6]+i*this.props[10]+this.props[14]]}function T(t,e){if(this.isIdentity())return t+","+e;var i=this.props;return Math.round(100*(t*i[0]+e*i[4]+i[12]))/100+","+Math.round(100*(t*i[1]+e*i[5]+i[13]))/100}function F(){for(var t=0,e=this.props,i="matrix3d(";t<16;)i+=r(1e4*e[t])/1e4,i+=15===t?")":",",t+=1;return i}function M(t){return t<1e-6&&t>0||t>-1e-6&&t<0?r(1e4*t)/1e4:t}function D(){var t=this.props;return"matrix("+M(t[0])+","+M(t[1])+","+M(t[4])+","+M(t[5])+","+M(t[12])+","+M(t[13])+")"}return function(){this.reset=n,this.rotate=s,this.rotateX=a,this.rotateY=o,this.rotateZ=h,this.skew=c,this.skewFromAxis=d,this.shear=l,this.scale=p,this.setTransform=f,this.translate=u,this.transform=m,this.applyToPoint=_,this.applyToX=x,this.applyToY=S,this.applyToZ=P,this.applyToPointArray=A,this.applyToTriplePoints=k,this.applyToPointStringified=T,this.toCSS=F,this.to2dCSS=D,this.clone=v,this.cloneFromProps=b,this.equals=y,this.inversePoints=E,this.inversePoint=C,this.getInverseMatrix=w,this._t=this.transform,this.isIdentity=g,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();!function(t,e){var i=this,r=256,n=e.pow(r,6),s=e.pow(2,52),a=2*s,o=255;function h(t){var e,i=t.length,n=this,s=0,a=n.i=n.j=0,h=n.S=[];for(i||(t=[i++]);s<r;)h[s]=s++;for(s=0;s<r;s++)h[s]=h[a=o&a+t[s%i]+(e=h[s])],h[a]=e;n.g=function(t){for(var e,i=0,s=n.i,a=n.j,h=n.S;t--;)e=h[s=o&s+1],i=i*r+h[o&(h[s]=h[a=o&a+e])+(h[a]=e)];return n.i=s,n.j=a,i}}function l(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function c(t,e){var i,r=[],n=typeof t;if(e&&"object"==n)for(i in t)try{r.push(c(t[i],e-1))}catch(s){}return r.length?r:"string"==n?t:t+"\0"}function d(t,e){for(var i,r=t+"",n=0;n<r.length;)e[o&n]=o&(i^=19*e[o&n])+r.charCodeAt(n++);return p(e)}function p(t){return String.fromCharCode.apply(0,t)}e.seedrandom=function(o,f,u){var m=[],g=d(c((f=!0===f?{entropy:!0}:f||{}).entropy?[o,p(t)]:null===o?function(){try{var e=new Uint8Array(r);return(i.crypto||i.msCrypto).getRandomValues(e),p(e)}catch(a){var n=i.navigator,s=n&&n.plugins;return[+new Date,i,s,i.screen,p(t)]}}():o,3),m),y=new h(m),v=function(){for(var t=y.g(6),e=n,i=0;t<s;)t=(t+i)*r,e*=r,i=y.g(1);for(;t>=a;)t/=2,e/=2,i>>>=1;return(t+i)/e};return v.int32=function(){return 0|y.g(4)},v.quick=function(){return y.g(4)/4294967296},v.double=v,d(p(y.S),t),(f.pass||u||function(t,i,r,n){return n&&(n.S&&l(n,y),t.state=function(){return l(y,{})}),r?(e.random=t,i):t})(v,g,"global"in f?f.global:this==e,f.state)},d(e.random(),t)}([],BMMath);var BezierFactory=function(){var t={getBezierEasing:function(t,i,r,n,s){var a=s||("bez_"+t+"_"+i+"_"+r+"_"+n).replace(/\./g,"p");if(e[a])return e[a];var o=new l([t,i,r,n]);return e[a]=o,o}},e={},i=.1,r="function"===typeof Float32Array;function n(t,e){return 1-3*e+3*t}function s(t,e){return 3*e-6*t}function a(t){return 3*t}function o(t,e,i){return((n(e,i)*t+s(e,i))*t+a(e))*t}function h(t,e,i){return 3*n(e,i)*t*t+2*s(e,i)*t+a(e)}function l(t){this._p=t,this._mSampleValues=r?new Float32Array(11):new Array(11),this._precomputed=!1,this.get=this.get.bind(this)}return l.prototype={get:function(t){var e=this._p[0],i=this._p[1],r=this._p[2],n=this._p[3];return this._precomputed||this._precompute(),e===i&&r===n?t:0===t?0:1===t?1:o(this._getTForX(t),i,n)},_precompute:function(){var t=this._p[0],e=this._p[1],i=this._p[2],r=this._p[3];this._precomputed=!0,t===e&&i===r||this._calcSampleValues()},_calcSampleValues:function(){for(var t=this._p[0],e=this._p[2],r=0;r<11;++r)this._mSampleValues[r]=o(r*i,t,e)},_getTForX:function(t){for(var e=this._p[0],r=this._p[2],n=this._mSampleValues,s=0,a=1;10!==a&&n[a]<=t;++a)s+=i;var l=s+(t-n[--a])/(n[a+1]-n[a])*i,c=h(l,e,r);return c>=.001?function(t,e,i,r){for(var n=0;n<4;++n){var s=h(e,i,r);if(0===s)return e;e-=(o(e,i,r)-t)/s}return e}(t,l,e,r):0===c?l:function(t,e,i,r,n){var s,a,h=0;do{(s=o(a=e+(i-e)/2,r,n)-t)>0?i=a:e=a}while(Math.abs(s)>1e-7&&++h<10);return a}(t,s,s+i,e,r)}},t}();function extendPrototype(t,e){var i,r,n=t.length;for(i=0;i<n;i+=1)for(var s in r=t[i].prototype)Object.prototype.hasOwnProperty.call(r,s)&&(e.prototype[s]=r[s])}function getDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)}function createProxyFunction(t){function e(){}return e.prototype=t,e}function bezFunction(){var t=Math;function e(t,e,i,r,n,s){var a=t*r+e*n+i*s-n*r-s*t-i*e;return a>-.001&&a<.001}var i=function(t,e,i,r){var n,s,a,o,h,l,c=defaultCurveSegments,d=0,p=[],f=[],u=bezierLengthPool.newElement();for(a=i.length,n=0;n<c;n+=1){for(h=n/(c-1),l=0,s=0;s<a;s+=1)o=bmPow(1-h,3)*t[s]+3*bmPow(1-h,2)*h*i[s]+3*(1-h)*bmPow(h,2)*r[s]+bmPow(h,3)*e[s],p[s]=o,null!==f[s]&&(l+=bmPow(p[s]-f[s],2)),f[s]=p[s];l&&(d+=l=bmSqrt(l)),u.percents[n]=h,u.lengths[n]=d}return u.addedLength=d,u};function r(t){this.segmentLength=0,this.points=new Array(t)}function n(t,e){this.partialLength=t,this.point=e}var s=function(){var t={};return function(i,s,a,o){var h=(i[0]+"_"+i[1]+"_"+s[0]+"_"+s[1]+"_"+a[0]+"_"+a[1]+"_"+o[0]+"_"+o[1]).replace(/\./g,"p");if(!t[h]){var l,c,d,p,f,u,m,g=defaultCurveSegments,y=0,v=null;2===i.length&&(i[0]!==s[0]||i[1]!==s[1])&&e(i[0],i[1],s[0],s[1],i[0]+a[0],i[1]+a[1])&&e(i[0],i[1],s[0],s[1],s[0]+o[0],s[1]+o[1])&&(g=2);var b=new r(g);for(d=a.length,l=0;l<g;l+=1){for(m=createSizedArray(d),f=l/(g-1),u=0,c=0;c<d;c+=1)p=bmPow(1-f,3)*i[c]+3*bmPow(1-f,2)*f*(i[c]+a[c])+3*(1-f)*bmPow(f,2)*(s[c]+o[c])+bmPow(f,3)*s[c],m[c]=p,null!==v&&(u+=bmPow(m[c]-v[c],2));y+=u=bmSqrt(u),b.points[l]=new n(u,m),v=m}b.segmentLength=y,t[h]=b}return t[h]}}();function a(t,e){var i=e.percents,r=e.lengths,n=i.length,s=bmFloor((n-1)*t),a=t*e.addedLength,o=0;if(s===n-1||0===s||a===r[s])return i[s];for(var h=r[s]>a?-1:1,l=!0;l;)if(r[s]<=a&&r[s+1]>a?(o=(a-r[s])/(r[s+1]-r[s]),l=!1):s+=h,s<0||s>=n-1){if(s===n-1)return i[s];l=!1}return i[s]+(i[s+1]-i[s])*o}var o=createTypedArray("float32",8);return{getSegmentsLength:function(t){var e,r=segmentsLengthPool.newElement(),n=t.c,s=t.v,a=t.o,o=t.i,h=t._length,l=r.lengths,c=0;for(e=0;e<h-1;e+=1)l[e]=i(s[e],s[e+1],a[e],o[e+1]),c+=l[e].addedLength;return n&&h&&(l[e]=i(s[e],s[0],a[e],o[0]),c+=l[e].addedLength),r.totalLength=c,r},getNewSegment:function(e,i,r,n,s,h,l){s<0?s=0:s>1&&(s=1);var c,d=a(s,l),p=a(h=h>1?1:h,l),f=e.length,u=1-d,m=1-p,g=u*u*u,y=d*u*u*3,v=d*d*u*3,b=d*d*d,_=u*u*m,x=d*u*m+u*d*m+u*u*p,S=d*d*m+u*d*p+d*u*p,P=d*d*p,w=u*m*m,C=d*m*m+u*p*m+u*m*p,E=d*p*m+u*p*p+d*m*p,k=d*p*p,A=m*m*m,T=p*m*m+m*p*m+m*m*p,F=p*p*m+m*p*p+p*m*p,M=p*p*p;for(c=0;c<f;c+=1)o[4*c]=t.round(1e3*(g*e[c]+y*r[c]+v*n[c]+b*i[c]))/1e3,o[4*c+1]=t.round(1e3*(_*e[c]+x*r[c]+S*n[c]+P*i[c]))/1e3,o[4*c+2]=t.round(1e3*(w*e[c]+C*r[c]+E*n[c]+k*i[c]))/1e3,o[4*c+3]=t.round(1e3*(A*e[c]+T*r[c]+F*n[c]+M*i[c]))/1e3;return o},getPointInSegment:function(e,i,r,n,s,o){var h=a(s,o),l=1-h;return[t.round(1e3*(l*l*l*e[0]+(h*l*l+l*h*l+l*l*h)*r[0]+(h*h*l+l*h*h+h*l*h)*n[0]+h*h*h*i[0]))/1e3,t.round(1e3*(l*l*l*e[1]+(h*l*l+l*h*l+l*l*h)*r[1]+(h*h*l+l*h*h+h*l*h)*n[1]+h*h*h*i[1]))/1e3]},buildBezierData:s,pointOnLine2D:e,pointOnLine3D:function(i,r,n,s,a,o,h,l,c){if(0===n&&0===o&&0===c)return e(i,r,s,a,h,l);var d,p=t.sqrt(t.pow(s-i,2)+t.pow(a-r,2)+t.pow(o-n,2)),f=t.sqrt(t.pow(h-i,2)+t.pow(l-r,2)+t.pow(c-n,2)),u=t.sqrt(t.pow(h-s,2)+t.pow(l-a,2)+t.pow(c-o,2));return(d=p>f?p>u?p-f-u:u-f-p:u>f?u-f-p:f-p-u)>-1e-4&&d<1e-4}}}!function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var i=(new Date).getTime(),r=Math.max(0,16-(i-t)),n=setTimeout((function(){e(i+r)}),r);return t=i+r,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();var bez=bezFunction(),dataManager=function(){var t,e,i=1,r=[],n={onmessage:function(){},postMessage:function(e){t({data:e})}},s={postMessage:function(t){n.onmessage({data:t})}};function a(){e||(e=function(e){if(window.Worker&&window.Blob&&_useWebWorker){var i=new Blob(["var _workerSelf = self; self.onmessage = ",e.toString()],{type:"text/javascript"}),r=URL.createObjectURL(i);return new Worker(r)}return t=e,n}((function(t){if(s.dataManager||(s.dataManager=function(){function t(n,s){var a,o,h,l,d,p,f=n.length;for(o=0;o<f;o+=1)if("ks"in(a=n[o])&&!a.completed){if(a.completed=!0,a.tt&&(n[o-1].td=a.tt),a.hasMask){var u=a.masksProperties;for(l=u.length,h=0;h<l;h+=1)if(u[h].pt.k.i)r(u[h].pt.k);else for(p=u[h].pt.k.length,d=0;d<p;d+=1)u[h].pt.k[d].s&&r(u[h].pt.k[d].s[0]),u[h].pt.k[d].e&&r(u[h].pt.k[d].e[0])}0===a.ty?(a.layers=e(a.refId,s),t(a.layers,s)):4===a.ty?i(a.shapes):5===a.ty&&c(a)}}function e(t,e){for(var i=0,r=e.length;i<r;){if(e[i].id===t)return e[i].layers.__used?JSON.parse(JSON.stringify(e[i].layers)):(e[i].layers.__used=!0,e[i].layers);i+=1}return null}function i(t){var e,n,s;for(e=t.length-1;e>=0;e-=1)if("sh"===t[e].ty)if(t[e].ks.k.i)r(t[e].ks.k);else for(s=t[e].ks.k.length,n=0;n<s;n+=1)t[e].ks.k[n].s&&r(t[e].ks.k[n].s[0]),t[e].ks.k[n].e&&r(t[e].ks.k[n].e[0]);else"gr"===t[e].ty&&i(t[e].it)}function r(t){var e,i=t.i.length;for(e=0;e<i;e+=1)t.i[e][0]+=t.v[e][0],t.i[e][1]+=t.v[e][1],t.o[e][0]+=t.v[e][0],t.o[e][1]+=t.v[e][1]}function n(t,e){var i=e?e.split("."):[100,100,100];return t[0]>i[0]||!(i[0]>t[0])&&(t[1]>i[1]||!(i[1]>t[1])&&(t[2]>i[2]||!(i[2]>t[2])&&null))}var s=function(){var t=[4,4,14];function e(t){var e=t.t.d;t.t.d={k:[{s:e,t:0}]}}function i(t){var i,r=t.length;for(i=0;i<r;i+=1)5===t[i].ty&&e(t[i])}return function(e){if(n(t,e.v)&&(i(e.layers),e.assets)){var r,s=e.assets.length;for(r=0;r<s;r+=1)e.assets[r].layers&&i(e.assets[r].layers)}}}(),a=function(){var t=[4,7,99];return function(e){if(e.chars&&!n(t,e.v)){var i,s,a,o,h,l=e.chars.length;for(i=0;i<l;i+=1)if(e.chars[i].data&&e.chars[i].data.shapes)for(a=(h=e.chars[i].data.shapes[0].it).length,s=0;s<a;s+=1)(o=h[s].ks.k).__converted||(r(h[s].ks.k),o.__converted=!0)}}}(),o=function(){var t=[5,7,15];function e(t){var e=t.t.p;"number"===typeof e.a&&(e.a={a:0,k:e.a}),"number"===typeof e.p&&(e.p={a:0,k:e.p}),"number"===typeof e.r&&(e.r={a:0,k:e.r})}function i(t){var i,r=t.length;for(i=0;i<r;i+=1)5===t[i].ty&&e(t[i])}return function(e){if(n(t,e.v)&&(i(e.layers),e.assets)){var r,s=e.assets.length;for(r=0;r<s;r+=1)e.assets[r].layers&&i(e.assets[r].layers)}}}(),h=function(){var t=[4,1,9];function e(t){var i,r,n,s=t.length;for(i=0;i<s;i+=1)if("gr"===t[i].ty)e(t[i].it);else if("fl"===t[i].ty||"st"===t[i].ty)if(t[i].c.k&&t[i].c.k[0].i)for(n=t[i].c.k.length,r=0;r<n;r+=1)t[i].c.k[r].s&&(t[i].c.k[r].s[0]/=255,t[i].c.k[r].s[1]/=255,t[i].c.k[r].s[2]/=255,t[i].c.k[r].s[3]/=255),t[i].c.k[r].e&&(t[i].c.k[r].e[0]/=255,t[i].c.k[r].e[1]/=255,t[i].c.k[r].e[2]/=255,t[i].c.k[r].e[3]/=255);else t[i].c.k[0]/=255,t[i].c.k[1]/=255,t[i].c.k[2]/=255,t[i].c.k[3]/=255}function i(t){var i,r=t.length;for(i=0;i<r;i+=1)4===t[i].ty&&e(t[i].shapes)}return function(e){if(n(t,e.v)&&(i(e.layers),e.assets)){var r,s=e.assets.length;for(r=0;r<s;r+=1)e.assets[r].layers&&i(e.assets[r].layers)}}}(),l=function(){var t=[4,4,18];function e(t){var i,r,n;for(i=t.length-1;i>=0;i-=1)if("sh"===t[i].ty)if(t[i].ks.k.i)t[i].ks.k.c=t[i].closed;else for(n=t[i].ks.k.length,r=0;r<n;r+=1)t[i].ks.k[r].s&&(t[i].ks.k[r].s[0].c=t[i].closed),t[i].ks.k[r].e&&(t[i].ks.k[r].e[0].c=t[i].closed);else"gr"===t[i].ty&&e(t[i].it)}function i(t){var i,r,n,s,a,o,h=t.length;for(r=0;r<h;r+=1){if((i=t[r]).hasMask){var l=i.masksProperties;for(s=l.length,n=0;n<s;n+=1)if(l[n].pt.k.i)l[n].pt.k.c=l[n].cl;else for(o=l[n].pt.k.length,a=0;a<o;a+=1)l[n].pt.k[a].s&&(l[n].pt.k[a].s[0].c=l[n].cl),l[n].pt.k[a].e&&(l[n].pt.k[a].e[0].c=l[n].cl)}4===i.ty&&e(i.shapes)}}return function(e){if(n(t,e.v)&&(i(e.layers),e.assets)){var r,s=e.assets.length;for(r=0;r<s;r+=1)e.assets[r].layers&&i(e.assets[r].layers)}}}();function c(t){0!==t.t.a.length||"m"in t.t.p||(t.singleShape=!0)}var d={completeData:function(e){e.__complete||(h(e),s(e),a(e),o(e),l(e),t(e.layers,e.assets),e.__complete=!0)}};return d.checkColors=h,d.checkChars=a,d.checkPathProperties=o,d.checkShapes=l,d.completeLayers=t,d}()),s.assetLoader||(s.assetLoader=function(){function t(t){var e=t.getResponseHeader("content-type");return e&&"json"===t.responseType&&-1!==e.indexOf("json")||t.response&&"object"===typeof t.response?t.response:t.response&&"string"===typeof t.response?JSON.parse(t.response):t.responseText?JSON.parse(t.responseText):null}return{load:function(e,i,r,n){var s,a=new XMLHttpRequest;try{a.responseType="json"}catch(o){}a.onreadystatechange=function(){if(4===a.readyState)if(200===a.status)s=t(a),r(s);else try{s=t(a),r(s)}catch(o){n&&n(o)}};try{a.open("GET",e,!0)}catch(h){a.open("GET",i+"/"+e,!0)}a.send()}}}()),"loadAnimation"===t.data.type)s.assetLoader.load(t.data.path,t.data.fullPath,(function(e){s.dataManager.completeData(e),s.postMessage({id:t.data.id,payload:e,status:"success"})}),(function(){s.postMessage({id:t.data.id,status:"error"})}));else if("complete"===t.data.type){var e=t.data.animation;s.dataManager.completeData(e),s.postMessage({id:t.data.id,payload:e,status:"success"})}else"loadData"===t.data.type&&s.assetLoader.load(t.data.path,t.data.fullPath,(function(e){s.postMessage({id:t.data.id,payload:e,status:"success"})}),(function(){s.postMessage({id:t.data.id,status:"error"})}))})),e.onmessage=function(t){var e=t.data,i=e.id,n=r[i];r[i]=null,"success"===e.status?n.onComplete(e.payload):n.onError&&n.onError()})}function o(t,e){var n="processId_"+(i+=1);return r[n]={onComplete:t,onError:e},n}return{loadAnimation:function(t,i,r){a();var n=o(i,r);e.postMessage({type:"loadAnimation",path:t,fullPath:window.location.origin+window.location.pathname,id:n})},loadData:function(t,i,r){a();var n=o(i,r);e.postMessage({type:"loadData",path:t,fullPath:window.location.origin+window.location.pathname,id:n})},completeAnimation:function(t,i,r){a();var n=o(i,r);e.postMessage({type:"complete",animation:t,id:n})}}}();function getFontProperties(t){for(var e=t.fStyle?t.fStyle.split(" "):[],i="normal",r="normal",n=e.length,s=0;s<n;s+=1)switch(e[s].toLowerCase()){case"italic":r="italic";break;case"bold":i="700";break;case"black":i="900";break;case"medium":i="500";break;case"regular":case"normal":i="400";break;case"light":case"thin":i="200"}return{style:r,weight:t.fWeight||i}}var FontManager=function(){var t={w:0,size:0,shapes:[]},e=[];e=e.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var i=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"],r=[65039,8205];function n(t,e){var i=createTag("span");i.setAttribute("aria-hidden",!0),i.style.fontFamily=e;var r=createTag("span");r.innerText="giItT1WQy@!-/#",i.style.position="absolute",i.style.left="-10000px",i.style.top="-10000px",i.style.fontSize="300px",i.style.fontVariant="normal",i.style.fontStyle="normal",i.style.fontWeight="normal",i.style.letterSpacing="0",i.appendChild(r),document.body.appendChild(i);var n=r.offsetWidth;return r.style.fontFamily=function(t){var e,i=t.split(","),r=i.length,n=[];for(e=0;e<r;e+=1)"sans-serif"!==i[e]&&"monospace"!==i[e]&&n.push(i[e]);return n.join(",")}(t)+", "+e,{node:r,w:n,parent:i}}function s(t,e){var i=createNS("text");i.style.fontSize="100px";var r=getFontProperties(e);return i.setAttribute("font-family",e.fFamily),i.setAttribute("font-style",r.style),i.setAttribute("font-weight",r.weight),i.textContent="1",e.fClass?(i.style.fontFamily="inherit",i.setAttribute("class",e.fClass)):i.style.fontFamily=e.fFamily,t.appendChild(i),createTag("canvas").getContext("2d").font=e.fWeight+" "+e.fStyle+" 100px "+e.fFamily,i}var a=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};a.isModifier=function(t,e){var r=t.toString(16)+e.toString(16);return-1!==i.indexOf(r)},a.isZeroWidthJoiner=function(t,e){return e?t===r[0]&&e===r[1]:t===r[1]},a.isCombinedCharacter=function(t){return-1!==e.indexOf(t)};var o={addChars:function(t){if(t){var e;this.chars||(this.chars=[]);var i,r,n=t.length,s=this.chars.length;for(e=0;e<n;e+=1){for(i=0,r=!1;i<s;)this.chars[i].style===t[e].style&&this.chars[i].fFamily===t[e].fFamily&&this.chars[i].ch===t[e].ch&&(r=!0),i+=1;r||(this.chars.push(t[e]),s+=1)}}},addFonts:function(t,e){if(t){if(this.chars)return this.isLoaded=!0,void(this.fonts=t.list);var i,r=t.list,a=r.length,o=a;for(i=0;i<a;i+=1){var h,l,c=!0;if(r[i].loaded=!1,r[i].monoCase=n(r[i].fFamily,"monospace"),r[i].sansCase=n(r[i].fFamily,"sans-serif"),r[i].fPath){if("p"===r[i].fOrigin||3===r[i].origin){if((h=document.querySelectorAll('style[f-forigin="p"][f-family="'+r[i].fFamily+'"], style[f-origin="3"][f-family="'+r[i].fFamily+'"]')).length>0&&(c=!1),c){var d=createTag("style");d.setAttribute("f-forigin",r[i].fOrigin),d.setAttribute("f-origin",r[i].origin),d.setAttribute("f-family",r[i].fFamily),d.type="text/css",d.innerText="@font-face {font-family: "+r[i].fFamily+"; font-style: normal; src: url('"+r[i].fPath+"');}",e.appendChild(d)}}else if("g"===r[i].fOrigin||1===r[i].origin){for(h=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),l=0;l<h.length;l+=1)-1!==h[l].href.indexOf(r[i].fPath)&&(c=!1);if(c){var p=createTag("link");p.setAttribute("f-forigin",r[i].fOrigin),p.setAttribute("f-origin",r[i].origin),p.type="text/css",p.rel="stylesheet",p.href=r[i].fPath,document.body.appendChild(p)}}else if("t"===r[i].fOrigin||2===r[i].origin){for(h=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),l=0;l<h.length;l+=1)r[i].fPath===h[l].src&&(c=!1);if(c){var f=createTag("link");f.setAttribute("f-forigin",r[i].fOrigin),f.setAttribute("f-origin",r[i].origin),f.setAttribute("rel","stylesheet"),f.setAttribute("href",r[i].fPath),e.appendChild(f)}}}else r[i].loaded=!0,o-=1;r[i].helper=s(e,r[i]),r[i].cache={},this.fonts.push(r[i])}0===o?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}else this.isLoaded=!0},getCharData:function(e,i,r){for(var n=0,s=this.chars.length;n<s;){if(this.chars[n].ch===e&&this.chars[n].style===i&&this.chars[n].fFamily===r)return this.chars[n];n+=1}return("string"===typeof e&&13!==e.charCodeAt(0)||!e)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",e,i,r)),t},getFontByName:function(t){for(var e=0,i=this.fonts.length;e<i;){if(this.fonts[e].fName===t)return this.fonts[e];e+=1}return this.fonts[0]},measureText:function(t,e,i){var r=this.getFontByName(e),n=t.charCodeAt(0);if(!r.cache[n+1]){var s=r.helper;if(" "===t){s.textContent="|"+t+"|";var a=s.getComputedTextLength();s.textContent="||";var o=s.getComputedTextLength();r.cache[n+1]=(a-o)/100}else s.textContent=t,r.cache[n+1]=s.getComputedTextLength()/100}return r.cache[n+1]*i},checkLoadedFonts:function(){var t,e,i,r=this.fonts.length,n=r;for(t=0;t<r;t+=1)this.fonts[t].loaded?n-=1:"n"===this.fonts[t].fOrigin||0===this.fonts[t].origin?this.fonts[t].loaded=!0:(e=this.fonts[t].monoCase.node,i=this.fonts[t].monoCase.w,e.offsetWidth!==i?(n-=1,this.fonts[t].loaded=!0):(e=this.fonts[t].sansCase.node,i=this.fonts[t].sansCase.w,e.offsetWidth!==i&&(n-=1,this.fonts[t].loaded=!0)),this.fonts[t].loaded&&(this.fonts[t].sansCase.parent.parentNode.removeChild(this.fonts[t].sansCase.parent),this.fonts[t].monoCase.parent.parentNode.removeChild(this.fonts[t].monoCase.parent)));0!==n&&Date.now()-this.initTime<5e3?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)},setIsLoaded:function(){this.isLoaded=!0}};return a.prototype=o,a}(),PropertyFactory=function(){var t=initialDefaultFrame,e=Math.abs;function i(t,e){var i,n=this.offsetTime;"multidimensional"===this.propType&&(i=createTypedArray("float32",this.pv.length));for(var s,a,o,h,l,c,d,p,f,u=e.lastIndex,m=u,g=this.keyframes.length-1,y=!0;y;){if(s=this.keyframes[m],a=this.keyframes[m+1],m===g-1&&t>=a.t-n){s.h&&(s=a),u=0;break}if(a.t-n>t){u=m;break}m<g-1?m+=1:(u=0,y=!1)}o=this.keyframesMetadata[m]||{};var v,b=a.t-n,_=s.t-n;if(s.to){o.bezierData||(o.bezierData=bez.buildBezierData(s.s,a.s||s.e,s.to,s.ti));var x=o.bezierData;if(t>=b||t<_){var S=t>=b?x.points.length-1:0;for(l=x.points[S].point.length,h=0;h<l;h+=1)i[h]=x.points[S].point[h]}else{o.__fnct?f=o.__fnct:(f=BezierFactory.getBezierEasing(s.o.x,s.o.y,s.i.x,s.i.y,s.n).get,o.__fnct=f),c=f((t-_)/(b-_));var P,w=x.segmentLength*c,C=e.lastFrame<t&&e._lastKeyframeIndex===m?e._lastAddedLength:0;for(p=e.lastFrame<t&&e._lastKeyframeIndex===m?e._lastPoint:0,y=!0,d=x.points.length;y;){if(C+=x.points[p].partialLength,0===w||0===c||p===x.points.length-1){for(l=x.points[p].point.length,h=0;h<l;h+=1)i[h]=x.points[p].point[h];break}if(w>=C&&w<C+x.points[p+1].partialLength){for(P=(w-C)/x.points[p+1].partialLength,l=x.points[p].point.length,h=0;h<l;h+=1)i[h]=x.points[p].point[h]+(x.points[p+1].point[h]-x.points[p].point[h])*P;break}p<d-1?p+=1:y=!1}e._lastPoint=p,e._lastAddedLength=C-x.points[p].partialLength,e._lastKeyframeIndex=m}}else{var E,k,A,T,F;if(g=s.s.length,v=a.s||s.e,this.sh&&1!==s.h)t>=b?(i[0]=v[0],i[1]=v[1],i[2]=v[2]):t<=_?(i[0]=s.s[0],i[1]=s.s[1],i[2]=s.s[2]):function(t,e){var i=e[0],r=e[1],n=e[2],s=e[3],a=Math.atan2(2*r*s-2*i*n,1-2*r*r-2*n*n),o=Math.asin(2*i*r+2*n*s),h=Math.atan2(2*i*s-2*r*n,1-2*i*i-2*n*n);t[0]=a/degToRads,t[1]=o/degToRads,t[2]=h/degToRads}(i,function(t,e,i){var r,n,s,a,o,h=[],l=t[0],c=t[1],d=t[2],p=t[3],f=e[0],u=e[1],m=e[2],g=e[3];return(n=l*f+c*u+d*m+p*g)<0&&(n=-n,f=-f,u=-u,m=-m,g=-g),1-n>1e-6?(r=Math.acos(n),s=Math.sin(r),a=Math.sin((1-i)*r)/s,o=Math.sin(i*r)/s):(a=1-i,o=i),h[0]=a*l+o*f,h[1]=a*c+o*u,h[2]=a*d+o*m,h[3]=a*p+o*g,h}(r(s.s),r(v),(t-_)/(b-_)));else for(m=0;m<g;m+=1)1!==s.h&&(t>=b?c=1:t<_?c=0:(s.o.x.constructor===Array?(o.__fnct||(o.__fnct=[]),o.__fnct[m]?f=o.__fnct[m]:(E=void 0===s.o.x[m]?s.o.x[0]:s.o.x[m],k=void 0===s.o.y[m]?s.o.y[0]:s.o.y[m],A=void 0===s.i.x[m]?s.i.x[0]:s.i.x[m],T=void 0===s.i.y[m]?s.i.y[0]:s.i.y[m],f=BezierFactory.getBezierEasing(E,k,A,T).get,o.__fnct[m]=f)):o.__fnct?f=o.__fnct:(E=s.o.x,k=s.o.y,A=s.i.x,T=s.i.y,f=BezierFactory.getBezierEasing(E,k,A,T).get,s.keyframeMetadata=f),c=f((t-_)/(b-_)))),v=a.s||s.e,F=1===s.h?s.s[m]:s.s[m]+(v[m]-s.s[m])*c,"multidimensional"===this.propType?i[m]=F:i=F}return e.lastIndex=u,i}function r(t){var e=t[0]*degToRads,i=t[1]*degToRads,r=t[2]*degToRads,n=Math.cos(e/2),s=Math.cos(i/2),a=Math.cos(r/2),o=Math.sin(e/2),h=Math.sin(i/2),l=Math.sin(r/2);return[o*h*a+n*s*l,o*s*a+n*h*l,n*h*a-o*s*l,n*s*a-o*h*l]}function n(){var e=this.comp.renderedFrame-this.offsetTime,i=this.keyframes[0].t-this.offsetTime,r=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(e===this._caching.lastFrame||this._caching.lastFrame!==t&&(this._caching.lastFrame>=r&&e>=r||this._caching.lastFrame<i&&e<i))){this._caching.lastFrame>=e&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var n=this.interpolateValue(e,this._caching);this.pv=n}return this._caching.lastFrame=e,this.pv}function s(t){var i;if("unidimensional"===this.propType)i=t*this.mult,e(this.v-i)>1e-5&&(this.v=i,this._mdf=!0);else for(var r=0,n=this.v.length;r<n;)i=t[r]*this.mult,e(this.v[r]-i)>1e-5&&(this.v[r]=i,this._mdf=!0),r+=1}function a(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var t;this.lock=!0,this._mdf=this._isFirstFrame;var e=this.effectsSequence.length,i=this.kf?this.pv:this.data.k;for(t=0;t<e;t+=1)i=this.effectsSequence[t](i);this.setVValue(i),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function o(t){this.effectsSequence.push(t),this.container.addDynamicProperty(this)}function h(t,e,i,r){this.propType="unidimensional",this.mult=i||1,this.data=e,this.v=i?e.k*i:e.k,this.pv=e.k,this._mdf=!1,this.elem=t,this.container=r,this.comp=t.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=a,this.setVValue=s,this.addEffect=o}function l(t,e,i,r){var n;this.propType="multidimensional",this.mult=i||1,this.data=e,this._mdf=!1,this.elem=t,this.container=r,this.comp=t.comp,this.k=!1,this.kf=!1,this.frameId=-1;var h=e.k.length;for(this.v=createTypedArray("float32",h),this.pv=createTypedArray("float32",h),this.vel=createTypedArray("float32",h),n=0;n<h;n+=1)this.v[n]=e.k[n]*this.mult,this.pv[n]=e.k[n];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=a,this.setVValue=s,this.addEffect=o}function c(e,r,h,l){this.propType="unidimensional",this.keyframes=r.k,this.keyframesMetadata=[],this.offsetTime=e.data.st,this.frameId=-1,this._caching={lastFrame:t,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=r,this.mult=h||1,this.elem=e,this.container=l,this.comp=e.comp,this.v=t,this.pv=t,this._isFirstFrame=!0,this.getValue=a,this.setVValue=s,this.interpolateValue=i,this.effectsSequence=[n.bind(this)],this.addEffect=o}function d(e,r,h,l){var c;this.propType="multidimensional";var d,p,f,u,m=r.k.length;for(c=0;c<m-1;c+=1)r.k[c].to&&r.k[c].s&&r.k[c+1]&&r.k[c+1].s&&(d=r.k[c].s,p=r.k[c+1].s,f=r.k[c].to,u=r.k[c].ti,(2===d.length&&(d[0]!==p[0]||d[1]!==p[1])&&bez.pointOnLine2D(d[0],d[1],p[0],p[1],d[0]+f[0],d[1]+f[1])&&bez.pointOnLine2D(d[0],d[1],p[0],p[1],p[0]+u[0],p[1]+u[1])||3===d.length&&(d[0]!==p[0]||d[1]!==p[1]||d[2]!==p[2])&&bez.pointOnLine3D(d[0],d[1],d[2],p[0],p[1],p[2],d[0]+f[0],d[1]+f[1],d[2]+f[2])&&bez.pointOnLine3D(d[0],d[1],d[2],p[0],p[1],p[2],p[0]+u[0],p[1]+u[1],p[2]+u[2]))&&(r.k[c].to=null,r.k[c].ti=null),d[0]===p[0]&&d[1]===p[1]&&0===f[0]&&0===f[1]&&0===u[0]&&0===u[1]&&(2===d.length||d[2]===p[2]&&0===f[2]&&0===u[2])&&(r.k[c].to=null,r.k[c].ti=null));this.effectsSequence=[n.bind(this)],this.data=r,this.keyframes=r.k,this.keyframesMetadata=[],this.offsetTime=e.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=h||1,this.elem=e,this.container=l,this.comp=e.comp,this.getValue=a,this.setVValue=s,this.interpolateValue=i,this.frameId=-1;var g=r.k[0].s.length;for(this.v=createTypedArray("float32",g),this.pv=createTypedArray("float32",g),c=0;c<g;c+=1)this.v[c]=t,this.pv[c]=t;this._caching={lastFrame:t,lastIndex:0,value:createTypedArray("float32",g)},this.addEffect=o}return{getProp:function(t,e,i,r,n){var s;if(e.k.length)if("number"===typeof e.k[0])s=new l(t,e,r,n);else switch(i){case 0:s=new c(t,e,r,n);break;case 1:s=new d(t,e,r,n)}else s=new h(t,e,r,n);return s.effectsSequence.length&&n.addDynamicProperty(s),s}}}(),TransformPropertyFactory=function(){var t=[0,0];function e(t,e,i){if(this.elem=t,this.frameId=-1,this.propType="transform",this.data=e,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(i||t),e.p&&e.p.s?(this.px=PropertyFactory.getProp(t,e.p.x,0,0,this),this.py=PropertyFactory.getProp(t,e.p.y,0,0,this),e.p.z&&(this.pz=PropertyFactory.getProp(t,e.p.z,0,0,this))):this.p=PropertyFactory.getProp(t,e.p||{k:[0,0,0]},1,0,this),e.rx){if(this.rx=PropertyFactory.getProp(t,e.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(t,e.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(t,e.rz,0,degToRads,this),e.or.k[0].ti){var r,n=e.or.k.length;for(r=0;r<n;r+=1)e.or.k[r].to=null,e.or.k[r].ti=null}this.or=PropertyFactory.getProp(t,e.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(t,e.r||{k:0},0,degToRads,this);e.sk&&(this.sk=PropertyFactory.getProp(t,e.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(t,e.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(t,e.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(t,e.s||{k:[100,100,100]},1,.01,this),e.o?this.o=PropertyFactory.getProp(t,e.o,0,.01,t):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}return e.prototype={applyToMatrix:function(t){var e=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||e,this.a&&t.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&t.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&t.skewFromAxis(-this.sk.v,this.sa.v),this.r?t.rotate(-this.r.v):t.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?t.translate(this.px.v,this.py.v,-this.pz.v):t.translate(this.px.v,this.py.v,0):t.translate(this.p.v[0],this.p.v[1],-this.p.v[2])},getValue:function(e){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||e){var i;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var r,n;if(i=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(r=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/i,0),n=this.p.getValueAtTime(this.p.keyframes[0].t/i,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(r=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/i,0),n=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/i,0)):(r=this.p.pv,n=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/i,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){r=[],n=[];var s=this.px,a=this.py;s._caching.lastFrame+s.offsetTime<=s.keyframes[0].t?(r[0]=s.getValueAtTime((s.keyframes[0].t+.01)/i,0),r[1]=a.getValueAtTime((a.keyframes[0].t+.01)/i,0),n[0]=s.getValueAtTime(s.keyframes[0].t/i,0),n[1]=a.getValueAtTime(a.keyframes[0].t/i,0)):s._caching.lastFrame+s.offsetTime>=s.keyframes[s.keyframes.length-1].t?(r[0]=s.getValueAtTime(s.keyframes[s.keyframes.length-1].t/i,0),r[1]=a.getValueAtTime(a.keyframes[a.keyframes.length-1].t/i,0),n[0]=s.getValueAtTime((s.keyframes[s.keyframes.length-1].t-.01)/i,0),n[1]=a.getValueAtTime((a.keyframes[a.keyframes.length-1].t-.01)/i,0)):(r=[s.pv,a.pv],n[0]=s.getValueAtTime((s._caching.lastFrame+s.offsetTime-.01)/i,s.offsetTime),n[1]=a.getValueAtTime((a._caching.lastFrame+a.offsetTime-.01)/i,a.offsetTime))}else r=n=t;this.v.rotate(-Math.atan2(r[1]-n[1],r[0]-n[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}},precalculateMatrix:function(){if(!this.a.k&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}},autoOrient:function(){}},extendPrototype([DynamicPropertyContainer],e),e.prototype.addDynamicProperty=function(t){this._addDynamicProperty(t),this.elem.addDynamicProperty(t),this._isDirty=!0},e.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty,{getTransformProperty:function(t,i,r){return new e(t,i,r)}}}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(t,e){this.c=t,this.setLength(e);for(var i=0;i<e;)this.v[i]=pointPool.newElement(),this.o[i]=pointPool.newElement(),this.i[i]=pointPool.newElement(),i+=1},ShapePath.prototype.setLength=function(t){for(;this._maxLength<t;)this.doubleArrayLength();this._length=t},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(t,e,i,r,n){var s;switch(this._length=Math.max(this._length,r+1),this._length>=this._maxLength&&this.doubleArrayLength(),i){case"v":s=this.v;break;case"i":s=this.i;break;case"o":s=this.o;break;default:s=[]}(!s[r]||s[r]&&!n)&&(s[r]=pointPool.newElement()),s[r][0]=t,s[r][1]=e},ShapePath.prototype.setTripleAt=function(t,e,i,r,n,s,a,o){this.setXYAt(t,e,"v",a,o),this.setXYAt(i,r,"o",a,o),this.setXYAt(n,s,"i",a,o)},ShapePath.prototype.reverse=function(){var t=new ShapePath;t.setPathData(this.c,this._length);var e=this.v,i=this.o,r=this.i,n=0;this.c&&(t.setTripleAt(e[0][0],e[0][1],r[0][0],r[0][1],i[0][0],i[0][1],0,!1),n=1);var s,a=this._length-1,o=this._length;for(s=n;s<o;s+=1)t.setTripleAt(e[a][0],e[a][1],r[a][0],r[a][1],i[a][0],i[a][1],s,!1),a-=1;return t};var ShapePropertyFactory=function(){var t=-999999;function e(t,e,i){var r,n,s,a,o,h,l,c,d,p=i.lastIndex,f=this.keyframes;if(t<f[0].t-this.offsetTime)r=f[0].s[0],s=!0,p=0;else if(t>=f[f.length-1].t-this.offsetTime)r=f[f.length-1].s?f[f.length-1].s[0]:f[f.length-2].e[0],s=!0;else{for(var u,m,g,y=p,v=f.length-1,b=!0;b&&(u=f[y],!((m=f[y+1]).t-this.offsetTime>t));)y<v-1?y+=1:b=!1;if(g=this.keyframesMetadata[y]||{},p=y,!(s=1===u.h)){if(t>=m.t-this.offsetTime)c=1;else if(t<u.t-this.offsetTime)c=0;else{var _;g.__fnct?_=g.__fnct:(_=BezierFactory.getBezierEasing(u.o.x,u.o.y,u.i.x,u.i.y).get,g.__fnct=_),c=_((t-(u.t-this.offsetTime))/(m.t-this.offsetTime-(u.t-this.offsetTime)))}n=m.s?m.s[0]:u.e[0]}r=u.s[0]}for(h=e._length,l=r.i[0].length,i.lastIndex=p,a=0;a<h;a+=1)for(o=0;o<l;o+=1)d=s?r.i[a][o]:r.i[a][o]+(n.i[a][o]-r.i[a][o])*c,e.i[a][o]=d,d=s?r.o[a][o]:r.o[a][o]+(n.o[a][o]-r.o[a][o])*c,e.o[a][o]=d,d=s?r.v[a][o]:r.v[a][o]+(n.v[a][o]-r.v[a][o])*c,e.v[a][o]=d}function i(){var e=this.comp.renderedFrame-this.offsetTime,i=this.keyframes[0].t-this.offsetTime,r=this.keyframes[this.keyframes.length-1].t-this.offsetTime,n=this._caching.lastFrame;return n!==t&&(n<i&&e<i||n>r&&e>r)||(this._caching.lastIndex=n<e?this._caching.lastIndex:0,this.interpolateShape(e,this.pv,this._caching)),this._caching.lastFrame=e,this.pv}function r(){this.paths=this.localShapeCollection}function n(t){(function(t,e){if(t._length!==e._length||t.c!==e.c)return!1;var i,r=t._length;for(i=0;i<r;i+=1)if(t.v[i][0]!==e.v[i][0]||t.v[i][1]!==e.v[i][1]||t.o[i][0]!==e.o[i][0]||t.o[i][1]!==e.o[i][1]||t.i[i][0]!==e.i[i][0]||t.i[i][1]!==e.i[i][1])return!1;return!0})(this.v,t)||(this.v=shapePool.clone(t),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function s(){if(this.elem.globalData.frameId!==this.frameId)if(this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var t,e;this.lock=!0,this._mdf=!1,t=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k;var i=this.effectsSequence.length;for(e=0;e<i;e+=1)t=this.effectsSequence[e](t);this.setVValue(t),this.lock=!1,this.frameId=this.elem.globalData.frameId}else this._mdf=!1}function a(t,e,i){this.propType="shape",this.comp=t.comp,this.container=t,this.elem=t,this.data=e,this.k=!1,this.kf=!1,this._mdf=!1;var n=3===i?e.pt.k:e.ks.k;this.v=shapePool.clone(n),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=r,this.effectsSequence=[]}function o(t){this.effectsSequence.push(t),this.container.addDynamicProperty(this)}function h(e,n,s){this.propType="shape",this.comp=e.comp,this.elem=e,this.container=e,this.offsetTime=e.data.st,this.keyframes=3===s?n.pt.k:n.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var a=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,a),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=t,this.reset=r,this._caching={lastFrame:t,lastIndex:0},this.effectsSequence=[i.bind(this)]}a.prototype.interpolateShape=e,a.prototype.getValue=s,a.prototype.setVValue=n,a.prototype.addEffect=o,h.prototype.getValue=s,h.prototype.interpolateShape=e,h.prototype.setVValue=n,h.prototype.addEffect=o;var l=function(){var t=roundCorner;function e(t,e){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=e.d,this.elem=t,this.comp=t.comp,this.frameId=-1,this.initDynamicPropertyContainer(t),this.p=PropertyFactory.getProp(t,e.p,1,0,this),this.s=PropertyFactory.getProp(t,e.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return e.prototype={reset:r,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var e=this.p.v[0],i=this.p.v[1],r=this.s.v[0]/2,n=this.s.v[1]/2,s=3!==this.d,a=this.v;a.v[0][0]=e,a.v[0][1]=i-n,a.v[1][0]=s?e+r:e-r,a.v[1][1]=i,a.v[2][0]=e,a.v[2][1]=i+n,a.v[3][0]=s?e-r:e+r,a.v[3][1]=i,a.i[0][0]=s?e-r*t:e+r*t,a.i[0][1]=i-n,a.i[1][0]=s?e+r:e-r,a.i[1][1]=i-n*t,a.i[2][0]=s?e+r*t:e-r*t,a.i[2][1]=i+n,a.i[3][0]=s?e-r:e+r,a.i[3][1]=i+n*t,a.o[0][0]=s?e+r*t:e-r*t,a.o[0][1]=i-n,a.o[1][0]=s?e+r:e-r,a.o[1][1]=i+n*t,a.o[2][0]=s?e-r*t:e+r*t,a.o[2][1]=i+n,a.o[3][0]=s?e-r:e+r,a.o[3][1]=i-n*t}},extendPrototype([DynamicPropertyContainer],e),e}(),c=function(){function t(t,e){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=t,this.comp=t.comp,this.data=e,this.frameId=-1,this.d=e.d,this.initDynamicPropertyContainer(t),1===e.sy?(this.ir=PropertyFactory.getProp(t,e.ir,0,0,this),this.is=PropertyFactory.getProp(t,e.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(t,e.pt,0,0,this),this.p=PropertyFactory.getProp(t,e.p,1,0,this),this.r=PropertyFactory.getProp(t,e.r,0,degToRads,this),this.or=PropertyFactory.getProp(t,e.or,0,0,this),this.os=PropertyFactory.getProp(t,e.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return t.prototype={reset:r,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var t,e,i,r,n=2*Math.floor(this.pt.v),s=2*Math.PI/n,a=!0,o=this.or.v,h=this.ir.v,l=this.os.v,c=this.is.v,d=2*Math.PI*o/(2*n),p=2*Math.PI*h/(2*n),f=-Math.PI/2;f+=this.r.v;var u=3===this.data.d?-1:1;for(this.v._length=0,t=0;t<n;t+=1){i=a?l:c,r=a?d:p;var m=(e=a?o:h)*Math.cos(f),g=e*Math.sin(f),y=0===m&&0===g?0:g/Math.sqrt(m*m+g*g),v=0===m&&0===g?0:-m/Math.sqrt(m*m+g*g);m+=+this.p.v[0],g+=+this.p.v[1],this.v.setTripleAt(m,g,m-y*r*i*u,g-v*r*i*u,m+y*r*i*u,g+v*r*i*u,t,!0),a=!a,f+=s*u}},convertPolygonToPath:function(){var t,e=Math.floor(this.pt.v),i=2*Math.PI/e,r=this.or.v,n=this.os.v,s=2*Math.PI*r/(4*e),a=.5*-Math.PI,o=3===this.data.d?-1:1;for(a+=this.r.v,this.v._length=0,t=0;t<e;t+=1){var h=r*Math.cos(a),l=r*Math.sin(a),c=0===h&&0===l?0:l/Math.sqrt(h*h+l*l),d=0===h&&0===l?0:-h/Math.sqrt(h*h+l*l);h+=+this.p.v[0],l+=+this.p.v[1],this.v.setTripleAt(h,l,h-c*s*n*o,l-d*s*n*o,h+c*s*n*o,l+d*s*n*o,t,!0),a+=i*o}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],t),t}(),d=function(){function t(t,e){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=t,this.comp=t.comp,this.frameId=-1,this.d=e.d,this.initDynamicPropertyContainer(t),this.p=PropertyFactory.getProp(t,e.p,1,0,this),this.s=PropertyFactory.getProp(t,e.s,1,0,this),this.r=PropertyFactory.getProp(t,e.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return t.prototype={convertRectToPath:function(){var t=this.p.v[0],e=this.p.v[1],i=this.s.v[0]/2,r=this.s.v[1]/2,n=bmMin(i,r,this.r.v),s=n*(1-roundCorner);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(t+i,e-r+n,t+i,e-r+n,t+i,e-r+s,0,!0),this.v.setTripleAt(t+i,e+r-n,t+i,e+r-s,t+i,e+r-n,1,!0),0!==n?(this.v.setTripleAt(t+i-n,e+r,t+i-n,e+r,t+i-s,e+r,2,!0),this.v.setTripleAt(t-i+n,e+r,t-i+s,e+r,t-i+n,e+r,3,!0),this.v.setTripleAt(t-i,e+r-n,t-i,e+r-n,t-i,e+r-s,4,!0),this.v.setTripleAt(t-i,e-r+n,t-i,e-r+s,t-i,e-r+n,5,!0),this.v.setTripleAt(t-i+n,e-r,t-i+n,e-r,t-i+s,e-r,6,!0),this.v.setTripleAt(t+i-n,e-r,t+i-s,e-r,t+i-n,e-r,7,!0)):(this.v.setTripleAt(t-i,e+r,t-i+s,e+r,t-i,e+r,2),this.v.setTripleAt(t-i,e-r,t-i,e-r+s,t-i,e-r,3))):(this.v.setTripleAt(t+i,e-r+n,t+i,e-r+s,t+i,e-r+n,0,!0),0!==n?(this.v.setTripleAt(t+i-n,e-r,t+i-n,e-r,t+i-s,e-r,1,!0),this.v.setTripleAt(t-i+n,e-r,t-i+s,e-r,t-i+n,e-r,2,!0),this.v.setTripleAt(t-i,e-r+n,t-i,e-r+n,t-i,e-r+s,3,!0),this.v.setTripleAt(t-i,e+r-n,t-i,e+r-s,t-i,e+r-n,4,!0),this.v.setTripleAt(t-i+n,e+r,t-i+n,e+r,t-i+s,e+r,5,!0),this.v.setTripleAt(t+i-n,e+r,t+i-s,e+r,t+i-n,e+r,6,!0),this.v.setTripleAt(t+i,e+r-n,t+i,e+r-n,t+i,e+r-s,7,!0)):(this.v.setTripleAt(t-i,e-r,t-i+s,e-r,t-i,e-r,1,!0),this.v.setTripleAt(t-i,e+r,t-i,e+r-s,t-i,e+r,2,!0),this.v.setTripleAt(t+i,e+r,t+i-s,e+r,t+i,e+r,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:r},extendPrototype([DynamicPropertyContainer],t),t}(),p={getShapeProp:function(t,e,i){var r;return 3===i||4===i?r=(3===i?e.pt:e.ks).k.length?new h(t,e,i):new a(t,e,i):5===i?r=new d(t,e):6===i?r=new l(t,e):7===i&&(r=new c(t,e)),r.k&&t.addDynamicProperty(r),r},getConstructorFunction:function(){return a},getKeyframedConstructorFunction:function(){return h}};return p}(),ShapeModifiers=function(){var t={},e={};return t.registerModifier=function(t,i){e[t]||(e[t]=i)},t.getModifier=function(t,i,r){return new e[t](i,r)},t}();function ShapeModifier(){}function TrimModifier(){}function RoundCornersModifier(){}function PuckerAndBloatModifier(){}function RepeaterModifier(){}function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}function DashProperty(t,e,i,r){var n;this.elem=t,this.frameId=-1,this.dataProps=createSizedArray(e.length),this.renderer=i,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",e.length?e.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(r);var s,a=e.length||0;for(n=0;n<a;n+=1)s=PropertyFactory.getProp(t,e[n].v,0,0,this),this.k=s.k||this.k,this.dataProps[n]={n:e[n].n,p:s};this.k||this.getValue(!0),this._isAnimated=this.k}function GradientProperty(t,e,i){this.data=e,this.c=createTypedArray("uint8c",4*e.p);var r=e.k.k[0].s?e.k.k[0].s.length-4*e.p:e.k.k.length-4*e.p;this.o=createTypedArray("float32",r),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=r,this.initDynamicPropertyContainer(i),this.prop=PropertyFactory.getProp(t,e.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(t){if(!this.closed){t.sh.container.addDynamicProperty(t.sh);var e={shape:t.sh,data:t,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(e),this.addShapeToModifier(e),this._isAnimated&&t.setAsAnimated()}},ShapeModifier.prototype.init=function(t,e){this.shapes=[],this.elem=t,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(t,e){this.s=PropertyFactory.getProp(t,e.s,0,.01,this),this.e=PropertyFactory.getProp(t,e.e,0,.01,this),this.o=PropertyFactory.getProp(t,e.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=e.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(t){t.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(t,e,i,r,n){var s=[];e<=1?s.push({s:t,e:e}):t>=1?s.push({s:t-1,e:e-1}):(s.push({s:t,e:1}),s.push({s:0,e:e-1}));var a,o,h=[],l=s.length;for(a=0;a<l;a+=1){var c,d;(o=s[a]).e*n<r||o.s*n>r+i||(c=o.s*n<=r?0:(o.s*n-r)/i,d=o.e*n>=r+i?1:(o.e*n-r)/i,h.push([c,d]))}return h.length||h.push([0,0]),h},TrimModifier.prototype.releasePathsData=function(t){var e,i=t.length;for(e=0;e<i;e+=1)segmentsLengthPool.release(t[e]);return t.length=0,t},TrimModifier.prototype.processShapes=function(t){var e,i,r,n;if(this._mdf||t){var s=this.o.v%360/360;if(s<0&&(s+=1),(e=this.s.v>1?1+s:this.s.v<0?0+s:this.s.v+s)>(i=this.e.v>1?1+s:this.e.v<0?0+s:this.e.v+s)){var a=e;e=i,i=a}e=1e-4*Math.round(1e4*e),i=1e-4*Math.round(1e4*i),this.sValue=e,this.eValue=i}else e=this.sValue,i=this.eValue;var o,h,l,c,d,p=this.shapes.length,f=0;if(i===e)for(n=0;n<p;n+=1)this.shapes[n].localShapeCollection.releaseShapes(),this.shapes[n].shape._mdf=!0,this.shapes[n].shape.paths=this.shapes[n].localShapeCollection,this._mdf&&(this.shapes[n].pathsData.length=0);else if(1===i&&0===e||0===i&&1===e){if(this._mdf)for(n=0;n<p;n+=1)this.shapes[n].pathsData.length=0,this.shapes[n].shape._mdf=!0}else{var u,m,g=[];for(n=0;n<p;n+=1)if((u=this.shapes[n]).shape._mdf||this._mdf||t||2===this.m){if(h=(r=u.shape.paths)._length,d=0,!u.shape._mdf&&u.pathsData.length)d=u.totalShapeLength;else{for(l=this.releasePathsData(u.pathsData),o=0;o<h;o+=1)c=bez.getSegmentsLength(r.shapes[o]),l.push(c),d+=c.totalLength;u.totalShapeLength=d,u.pathsData=l}f+=d,u.shape._mdf=!0}else u.shape.paths=u.localShapeCollection;var y,v=e,b=i,_=0;for(n=p-1;n>=0;n-=1)if((u=this.shapes[n]).shape._mdf){for((m=u.localShapeCollection).releaseShapes(),2===this.m&&p>1?(y=this.calculateShapeEdges(e,i,u.totalShapeLength,_,f),_+=u.totalShapeLength):y=[[v,b]],h=y.length,o=0;o<h;o+=1){v=y[o][0],b=y[o][1],g.length=0,b<=1?g.push({s:u.totalShapeLength*v,e:u.totalShapeLength*b}):v>=1?g.push({s:u.totalShapeLength*(v-1),e:u.totalShapeLength*(b-1)}):(g.push({s:u.totalShapeLength*v,e:u.totalShapeLength}),g.push({s:0,e:u.totalShapeLength*(b-1)}));var x=this.addShapes(u,g[0]);if(g[0].s!==g[0].e){if(g.length>1)if(u.shape.paths.shapes[u.shape.paths._length-1].c){var S=x.pop();this.addPaths(x,m),x=this.addShapes(u,g[1],S)}else this.addPaths(x,m),x=this.addShapes(u,g[1]);this.addPaths(x,m)}}u.shape.paths=m}}},TrimModifier.prototype.addPaths=function(t,e){var i,r=t.length;for(i=0;i<r;i+=1)e.addShape(t[i])},TrimModifier.prototype.addSegment=function(t,e,i,r,n,s,a){n.setXYAt(e[0],e[1],"o",s),n.setXYAt(i[0],i[1],"i",s+1),a&&n.setXYAt(t[0],t[1],"v",s),n.setXYAt(r[0],r[1],"v",s+1)},TrimModifier.prototype.addSegmentFromArray=function(t,e,i,r){e.setXYAt(t[1],t[5],"o",i),e.setXYAt(t[2],t[6],"i",i+1),r&&e.setXYAt(t[0],t[4],"v",i),e.setXYAt(t[3],t[7],"v",i+1)},TrimModifier.prototype.addShapes=function(t,e,i){var r,n,s,a,o,h,l,c,d=t.pathsData,p=t.shape.paths.shapes,f=t.shape.paths._length,u=0,m=[],g=!0;for(i?(o=i._length,c=i._length):(i=shapePool.newElement(),o=0,c=0),m.push(i),r=0;r<f;r+=1){for(h=d[r].lengths,i.c=p[r].c,s=p[r].c?h.length:h.length+1,n=1;n<s;n+=1)if(u+(a=h[n-1]).addedLength<e.s)u+=a.addedLength,i.c=!1;else{if(u>e.e){i.c=!1;break}e.s<=u&&e.e>=u+a.addedLength?(this.addSegment(p[r].v[n-1],p[r].o[n-1],p[r].i[n],p[r].v[n],i,o,g),g=!1):(l=bez.getNewSegment(p[r].v[n-1],p[r].v[n],p[r].o[n-1],p[r].i[n],(e.s-u)/a.addedLength,(e.e-u)/a.addedLength,h[n-1]),this.addSegmentFromArray(l,i,o,g),g=!1,i.c=!1),u+=a.addedLength,o+=1}if(p[r].c&&h.length){if(a=h[n-1],u<=e.e){var y=h[n-1].addedLength;e.s<=u&&e.e>=u+y?(this.addSegment(p[r].v[n-1],p[r].o[n-1],p[r].i[0],p[r].v[0],i,o,g),g=!1):(l=bez.getNewSegment(p[r].v[n-1],p[r].v[0],p[r].o[n-1],p[r].i[0],(e.s-u)/y,(e.e-u)/y,h[n-1]),this.addSegmentFromArray(l,i,o,g),g=!1,i.c=!1)}else i.c=!1;u+=a.addedLength,o+=1}if(i._length&&(i.setXYAt(i.v[c][0],i.v[c][1],"i",c),i.setXYAt(i.v[i._length-1][0],i.v[i._length-1][1],"o",i._length-1)),u>e.e)break;r<f-1&&(i=shapePool.newElement(),g=!0,m.push(i),o=0)}return m},ShapeModifiers.registerModifier("tm",TrimModifier),extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(t,e.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(t,e){var i,r=shapePool.newElement();r.c=t.c;var n,s,a,o,h,l,c,d,p,f,u,m,g=t._length,y=0;for(i=0;i<g;i+=1)n=t.v[i],a=t.o[i],s=t.i[i],n[0]===a[0]&&n[1]===a[1]&&n[0]===s[0]&&n[1]===s[1]?0!==i&&i!==g-1||t.c?(o=0===i?t.v[g-1]:t.v[i-1],l=(h=Math.sqrt(Math.pow(n[0]-o[0],2)+Math.pow(n[1]-o[1],2)))?Math.min(h/2,e)/h:0,c=u=n[0]+(o[0]-n[0])*l,d=m=n[1]-(n[1]-o[1])*l,p=c-(c-n[0])*roundCorner,f=d-(d-n[1])*roundCorner,r.setTripleAt(c,d,p,f,u,m,y),y+=1,o=i===g-1?t.v[0]:t.v[i+1],l=(h=Math.sqrt(Math.pow(n[0]-o[0],2)+Math.pow(n[1]-o[1],2)))?Math.min(h/2,e)/h:0,c=p=n[0]+(o[0]-n[0])*l,d=f=n[1]+(o[1]-n[1])*l,u=c-(c-n[0])*roundCorner,m=d-(d-n[1])*roundCorner,r.setTripleAt(c,d,p,f,u,m,y),y+=1):(r.setTripleAt(n[0],n[1],a[0],a[1],s[0],s[1],y),y+=1):(r.setTripleAt(t.v[i][0],t.v[i][1],t.o[i][0],t.o[i][1],t.i[i][0],t.i[i][1],y),y+=1);return r},RoundCornersModifier.prototype.processShapes=function(t){var e,i,r,n,s,a,o=this.shapes.length,h=this.rd.v;if(0!==h)for(i=0;i<o;i+=1){if(a=(s=this.shapes[i]).localShapeCollection,s.shape._mdf||this._mdf||t)for(a.releaseShapes(),s.shape._mdf=!0,e=s.shape.paths.shapes,n=s.shape.paths._length,r=0;r<n;r+=1)a.addShape(this.processPath(e[r],h));s.shape.paths=s.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},ShapeModifiers.registerModifier("rd",RoundCornersModifier),extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(t,e.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(t,e){var i=e/100,r=[0,0],n=t._length,s=0;for(s=0;s<n;s+=1)r[0]+=t.v[s][0],r[1]+=t.v[s][1];r[0]/=n,r[1]/=n;var a,o,h,l,c,d,p=shapePool.newElement();for(p.c=t.c,s=0;s<n;s+=1)a=t.v[s][0]+(r[0]-t.v[s][0])*i,o=t.v[s][1]+(r[1]-t.v[s][1])*i,h=t.o[s][0]+(r[0]-t.o[s][0])*-i,l=t.o[s][1]+(r[1]-t.o[s][1])*-i,c=t.i[s][0]+(r[0]-t.i[s][0])*-i,d=t.i[s][1]+(r[1]-t.i[s][1])*-i,p.setTripleAt(a,o,h,l,c,d,s);return p},PuckerAndBloatModifier.prototype.processShapes=function(t){var e,i,r,n,s,a,o=this.shapes.length,h=this.amount.v;if(0!==h)for(i=0;i<o;i+=1){if(a=(s=this.shapes[i]).localShapeCollection,s.shape._mdf||this._mdf||t)for(a.releaseShapes(),s.shape._mdf=!0,e=s.shape.paths.shapes,n=s.shape.paths._length,r=0;r<n;r+=1)a.addShape(this.processPath(e[r],h));s.shape.paths=s.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(t,e.c,0,null,this),this.o=PropertyFactory.getProp(t,e.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(t,e.tr,this),this.so=PropertyFactory.getProp(t,e.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(t,e.tr.eo,0,.01,this),this.data=e,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(t,e,i,r,n,s){var a=s?-1:1,o=r.s.v[0]+(1-r.s.v[0])*(1-n),h=r.s.v[1]+(1-r.s.v[1])*(1-n);t.translate(r.p.v[0]*a*n,r.p.v[1]*a*n,r.p.v[2]),e.translate(-r.a.v[0],-r.a.v[1],r.a.v[2]),e.rotate(-r.r.v*a*n),e.translate(r.a.v[0],r.a.v[1],r.a.v[2]),i.translate(-r.a.v[0],-r.a.v[1],r.a.v[2]),i.scale(s?1/o:o,s?1/h:h),i.translate(r.a.v[0],r.a.v[1],r.a.v[2])},RepeaterModifier.prototype.init=function(t,e,i,r){for(this.elem=t,this.arr=e,this.pos=i,this.elemsData=r,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e[i]);i>0;)i-=1,this._elements.unshift(e[i]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(t){var e,i=t.length;for(e=0;e<i;e+=1)t[e]._processed=!1,"gr"===t[e].ty&&this.resetElements(t[e].it)},RepeaterModifier.prototype.cloneElements=function(t){var e=JSON.parse(JSON.stringify(t));return this.resetElements(e),e},RepeaterModifier.prototype.changeGroupRender=function(t,e){var i,r=t.length;for(i=0;i<r;i+=1)t[i]._render=e,"gr"===t[i].ty&&this.changeGroupRender(t[i].it,e)},RepeaterModifier.prototype.processShapes=function(t){var e,i,r,n,s,a=!1;if(this._mdf||t){var o,h=Math.ceil(this.c.v);if(this._groups.length<h){for(;this._groups.length<h;){var l={it:this.cloneElements(this._elements),ty:"gr"};l.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,l),this._groups.splice(0,0,l),this._currentCopies+=1}this.elem.reloadShapes(),a=!0}for(s=0,r=0;r<=this._groups.length-1;r+=1){if(o=s<h,this._groups[r]._render=o,this.changeGroupRender(this._groups[r].it,o),!o){var c=this.elemsData[r].it,d=c[c.length-1];0!==d.transform.op.v?(d.transform.op._mdf=!0,d.transform.op.v=0):d.transform.op._mdf=!1}s+=1}this._currentCopies=h;var p=this.o.v,f=p%1,u=p>0?Math.floor(p):Math.ceil(p),m=this.pMatrix.props,g=this.rMatrix.props,y=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var v,b,_=0;if(p>0){for(;_<u;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),_+=1;f&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,f,!1),_+=f)}else if(p<0){for(;_>u;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),_-=1;f&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-f,!0),_-=f)}for(r=1===this.data.m?0:this._currentCopies-1,n=1===this.data.m?1:-1,s=this._currentCopies;s;){if(b=(i=(e=this.elemsData[r].it)[e.length-1].transform.mProps.v.props).length,e[e.length-1].transform.mProps._mdf=!0,e[e.length-1].transform.op._mdf=!0,e[e.length-1].transform.op.v=1===this._currentCopies?this.so.v:this.so.v+(this.eo.v-this.so.v)*(r/(this._currentCopies-1)),0!==_){for((0!==r&&1===n||r!==this._currentCopies-1&&-1===n)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],g[8],g[9],g[10],g[11],g[12],g[13],g[14],g[15]),this.matrix.transform(y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7],y[8],y[9],y[10],y[11],y[12],y[13],y[14],y[15]),this.matrix.transform(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],m[9],m[10],m[11],m[12],m[13],m[14],m[15]),v=0;v<b;v+=1)i[v]=this.matrix.props[v];this.matrix.reset()}else for(this.matrix.reset(),v=0;v<b;v+=1)i[v]=this.matrix.props[v];_+=1,s-=1,r+=n}}else for(s=this._currentCopies,r=0,n=1;s;)i=(e=this.elemsData[r].it)[e.length-1].transform.mProps.v.props,e[e.length-1].transform.mProps._mdf=!1,e[e.length-1].transform.op._mdf=!1,s-=1,r+=n;return a},RepeaterModifier.prototype.addShape=function(){},ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeCollection.prototype.addShape=function(t){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=t,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var t;for(t=0;t<this._length;t+=1)shapePool.release(this.shapes[t]);this._length=0},DashProperty.prototype.getValue=function(t){if((this.elem.globalData.frameId!==this.frameId||t)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||t,this._mdf)){var e=0,i=this.dataProps.length;for("svg"===this.renderer&&(this.dashStr=""),e=0;e<i;e+=1)"o"!==this.dataProps[e].n?"svg"===this.renderer?this.dashStr+=" "+this.dataProps[e].p.v:this.dashArray[e]=this.dataProps[e].p.v:this.dashoffset[0]=this.dataProps[e].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty),GradientProperty.prototype.comparePoints=function(t,e){for(var i=0,r=this.o.length/2;i<r;){if(Math.abs(t[4*i]-t[4*e+2*i])>.01)return!1;i+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var t=0,e=this.data.k.k.length;t<e;){if(!this.comparePoints(this.data.k.k[t].s,this.data.p))return!1;t+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(t){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||t){var e,i,r,n=4*this.data.p;for(e=0;e<n;e+=1)i=e%4===0?100:255,r=Math.round(this.prop.v[e]*i),this.c[e]!==r&&(this.c[e]=r,this._cmdf=!t);if(this.o.length)for(n=this.prop.v.length,e=4*this.data.p;e<n;e+=1)i=e%2===0?100:1,r=e%2===0?Math.round(100*this.prop.v[e]):this.prop.v[e],this.o[e-4*this.data.p]!==r&&(this.o[e-4*this.data.p]=r,this._omdf=!t);this._mdf=!t}},extendPrototype([DynamicPropertyContainer],GradientProperty);var buildShapeString=function(t,e,i,r){if(0===e)return"";var n,s=t.o,a=t.i,o=t.v,h=" M"+r.applyToPointStringified(o[0][0],o[0][1]);for(n=1;n<e;n+=1)h+=" C"+r.applyToPointStringified(s[n-1][0],s[n-1][1])+" "+r.applyToPointStringified(a[n][0],a[n][1])+" "+r.applyToPointStringified(o[n][0],o[n][1]);return i&&e&&(h+=" C"+r.applyToPointStringified(s[n-1][0],s[n-1][1])+" "+r.applyToPointStringified(a[0][0],a[0][1])+" "+r.applyToPointStringified(o[0][0],o[0][1]),h+="z"),h},audioControllerFactory=function(){function t(t){this.audios=[],this.audioFactory=t,this._volume=1,this._isMuted=!1}return t.prototype={addAudio:function(t){this.audios.push(t)},pause:function(){var t,e=this.audios.length;for(t=0;t<e;t+=1)this.audios[t].pause()},resume:function(){var t,e=this.audios.length;for(t=0;t<e;t+=1)this.audios[t].resume()},setRate:function(t){var e,i=this.audios.length;for(e=0;e<i;e+=1)this.audios[e].setRate(t)},createAudio:function(t){return this.audioFactory?this.audioFactory(t):Howl?new Howl({src:[t]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(t){this.audioFactory=t},setVolume:function(t){this._volume=t,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var t,e=this.audios.length;for(t=0;t<e;t+=1)this.audios[t].volume(this._volume*(this._isMuted?0:1))}},function(){return new t}}(),ImagePreloader=function(){var t=function(){var t=createTag("canvas");t.width=1,t.height=1;var e=t.getContext("2d");return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),t}();function e(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function i(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function r(t,e,i){var r="";if(t.e)r=t.p;else if(e){var n=t.p;-1!==n.indexOf("images/")&&(n=n.split("/")[1]),r=e+n}else r=i,r+=t.u?t.u:"",r+=t.p;return r}function n(t){var e=0,i=setInterval(function(){(t.getBBox().width||e>500)&&(this._imageLoaded(),clearInterval(i)),e+=1}.bind(this),50)}function s(t){var e={assetData:t},i=r(t,this.assetsPath,this.path);return dataManager.loadData(i,function(t){e.img=t,this._footageLoaded()}.bind(this),function(){e.img={},this._footageLoaded()}.bind(this)),e}function a(){this._imageLoaded=e.bind(this),this._footageLoaded=i.bind(this),this.testImageLoaded=n.bind(this),this.createFootageData=s.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return a.prototype={loadAssets:function(t,e){var i;this.imagesLoadedCb=e;var r=t.length;for(i=0;i<r;i+=1)t[i].layers||(t[i].t&&"seq"!==t[i].t?3===t[i].t&&(this.totalFootages+=1,this.images.push(this.createFootageData(t[i]))):(this.totalImages+=1,this.images.push(this._createImageData(t[i]))))},setAssetsPath:function(t){this.assetsPath=t||""},setPath:function(t){this.path=t||""},loadedImages:function(){return this.totalImages===this.loadedAssets},loadedFootages:function(){return this.totalFootages===this.loadedFootagesCount},destroy:function(){this.imagesLoadedCb=null,this.images.length=0},getAsset:function(t){for(var e=0,i=this.images.length;e<i;){if(this.images[e].assetData===t)return this.images[e].img;e+=1}return null},createImgData:function(e){var i=r(e,this.assetsPath,this.path),n=createTag("img");n.crossOrigin="anonymous",n.addEventListener("load",this._imageLoaded,!1),n.addEventListener("error",function(){s.img=t,this._imageLoaded()}.bind(this),!1),n.src=i;var s={img:n,assetData:e};return s},createImageData:function(e){var i=r(e,this.assetsPath,this.path),n=createNS("image");isSafari?this.testImageLoaded(n):n.addEventListener("load",this._imageLoaded,!1),n.addEventListener("error",function(){s.img=t,this._imageLoaded()}.bind(this),!1),n.setAttributeNS("http://www.w3.org/1999/xlink","href",i),this._elementHelper.append?this._elementHelper.append(n):this._elementHelper.appendChild(n);var s={img:n,assetData:e};return s},imageLoaded:e,footageLoaded:i,setCacheType:function(t,e){"svg"===t?(this._elementHelper=e,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}},a}(),featureSupport=function(){var t={maskType:!0};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(t.maskType=!1),t}(),filtersFactory=function(){var t={createFilter:function(t,e){var i=createNS("filter");return i.setAttribute("id",t),!0!==e&&(i.setAttribute("filterUnits","objectBoundingBox"),i.setAttribute("x","0%"),i.setAttribute("y","0%"),i.setAttribute("width","100%"),i.setAttribute("height","100%")),i},createAlphaToLuminanceFilter:function(){var t=createNS("feColorMatrix");return t.setAttribute("type","matrix"),t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),t}};return t}();function TextAnimatorProperty(t,e,i){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=t,this._renderType=e,this._elem=i,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(i)}function TextAnimatorDataProperty(t,e,i){var r={propType:!1},n=PropertyFactory.getProp,s=e.a;this.a={r:s.r?n(t,s.r,0,degToRads,i):r,rx:s.rx?n(t,s.rx,0,degToRads,i):r,ry:s.ry?n(t,s.ry,0,degToRads,i):r,sk:s.sk?n(t,s.sk,0,degToRads,i):r,sa:s.sa?n(t,s.sa,0,degToRads,i):r,s:s.s?n(t,s.s,1,.01,i):r,a:s.a?n(t,s.a,1,0,i):r,o:s.o?n(t,s.o,0,.01,i):r,p:s.p?n(t,s.p,1,0,i):r,sw:s.sw?n(t,s.sw,0,0,i):r,sc:s.sc?n(t,s.sc,1,0,i):r,fc:s.fc?n(t,s.fc,1,0,i):r,fh:s.fh?n(t,s.fh,0,0,i):r,fs:s.fs?n(t,s.fs,0,.01,i):r,fb:s.fb?n(t,s.fb,0,.01,i):r,t:s.t?n(t,s.t,0,0,i):r},this.s=TextSelectorProp.getTextSelectorProp(t,e.s,i),this.s.t=e.s.t}function LetterProps(t,e,i,r,n,s){this.o=t,this.sw=e,this.sc=i,this.fc=r,this.m=n,this.p=s,this._mdf={o:!0,sw:!!e,sc:!!i,fc:!!r,m:!0,p:!0}}function TextProperty(t,e){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,this.data=e,this.elem=t,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextAnimatorProperty.prototype.searchProperties=function(){var t,e,i=this._textData.a.length,r=PropertyFactory.getProp;for(t=0;t<i;t+=1)e=this._textData.a[t],this._animatorsData[t]=new TextAnimatorDataProperty(this._elem,e,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:r(this._elem,this._textData.p.a,0,0,this),f:r(this._elem,this._textData.p.f,0,0,this),l:r(this._elem,this._textData.p.l,0,0,this),r:r(this._elem,this._textData.p.r,0,0,this),p:r(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=r(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(t,e){if(this.lettersChangedFlag=e,this._mdf||this._isFirstFrame||e||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var i,r,n,s,a,o,h,l,c,d,p,f,u,m,g,y,v,b,_,x=this._moreOptions.alignment.v,S=this._animatorsData,P=this._textData,w=this.mHelper,C=this._renderType,E=this.renderedLetters.length,k=t.l;if(this._hasMaskedPath){if(_=this._pathData.m,!this._pathData.n||this._pathData._mdf){var A,T=_.v;for(this._pathData.r.v&&(T=T.reverse()),a={tLength:0,segments:[]},s=T._length-1,y=0,n=0;n<s;n+=1)A=bez.buildBezierData(T.v[n],T.v[n+1],[T.o[n][0]-T.v[n][0],T.o[n][1]-T.v[n][1]],[T.i[n+1][0]-T.v[n+1][0],T.i[n+1][1]-T.v[n+1][1]]),a.tLength+=A.segmentLength,a.segments.push(A),y+=A.segmentLength;n=s,_.v.c&&(A=bez.buildBezierData(T.v[n],T.v[0],[T.o[n][0]-T.v[n][0],T.o[n][1]-T.v[n][1]],[T.i[0][0]-T.v[0][0],T.i[0][1]-T.v[0][1]]),a.tLength+=A.segmentLength,a.segments.push(A),y+=A.segmentLength),this._pathData.pi=a}if(a=this._pathData.pi,o=this._pathData.f.v,p=0,d=1,l=0,c=!0,m=a.segments,o<0&&_.v.c)for(a.tLength<Math.abs(o)&&(o=-Math.abs(o)%a.tLength),d=(u=m[p=m.length-1].points).length-1;o<0;)o+=u[d].partialLength,(d-=1)<0&&(d=(u=m[p-=1].points).length-1);f=(u=m[p].points)[d-1],g=(h=u[d]).partialLength}s=k.length,i=0,r=0;var F,M,D,I,R,G=1.2*t.finalSize*.714,L=!0;D=S.length;var j,N,B,O,V,z,H,Z,W,q,Y,X,K=-1,U=o,J=p,$=d,Q=-1,tt="",et=this.defaultPropsArray;if(2===t.j||1===t.j){var it=0,rt=0,nt=2===t.j?-.5:-1,st=0,at=!0;for(n=0;n<s;n+=1)if(k[n].n){for(it&&(it+=rt);st<n;)k[st].animatorJustifyOffset=it,st+=1;it=0,at=!0}else{for(M=0;M<D;M+=1)(F=S[M].a).t.propType&&(at&&2===t.j&&(rt+=F.t.v*nt),(R=S[M].s.getMult(k[n].anIndexes[M],P.a[M].s.totalChars)).length?it+=F.t.v*R[0]*nt:it+=F.t.v*R*nt);at=!1}for(it&&(it+=rt);st<n;)k[st].animatorJustifyOffset=it,st+=1}for(n=0;n<s;n+=1){if(w.reset(),O=1,k[n].n)i=0,r+=t.yOffset,r+=L?1:0,o=U,L=!1,this._hasMaskedPath&&(d=$,f=(u=m[p=J].points)[d-1],g=(h=u[d]).partialLength,l=0),tt="",Y="",W="",X="",et=this.defaultPropsArray;else{if(this._hasMaskedPath){if(Q!==k[n].line){switch(t.j){case 1:o+=y-t.lineWidths[k[n].line];break;case 2:o+=(y-t.lineWidths[k[n].line])/2}Q=k[n].line}K!==k[n].ind&&(k[K]&&(o+=k[K].extra),o+=k[n].an/2,K=k[n].ind),o+=x[0]*k[n].an*.005;var ot=0;for(M=0;M<D;M+=1)(F=S[M].a).p.propType&&((R=S[M].s.getMult(k[n].anIndexes[M],P.a[M].s.totalChars)).length?ot+=F.p.v[0]*R[0]:ot+=F.p.v[0]*R),F.a.propType&&((R=S[M].s.getMult(k[n].anIndexes[M],P.a[M].s.totalChars)).length?ot+=F.a.v[0]*R[0]:ot+=F.a.v[0]*R);for(c=!0,this._pathData.a.v&&(o=.5*k[0].an+(y-this._pathData.f.v-.5*k[0].an-.5*k[k.length-1].an)*K/(s-1),o+=this._pathData.f.v);c;)l+g>=o+ot||!u?(v=(o+ot-l)/h.partialLength,N=f.point[0]+(h.point[0]-f.point[0])*v,B=f.point[1]+(h.point[1]-f.point[1])*v,w.translate(-x[0]*k[n].an*.005,-x[1]*G*.01),c=!1):u&&(l+=h.partialLength,(d+=1)>=u.length&&(d=0,m[p+=1]?u=m[p].points:_.v.c?(d=0,u=m[p=0].points):(l-=h.partialLength,u=null)),u&&(f=h,g=(h=u[d]).partialLength));j=k[n].an/2-k[n].add,w.translate(-j,0,0)}else j=k[n].an/2-k[n].add,w.translate(-j,0,0),w.translate(-x[0]*k[n].an*.005,-x[1]*G*.01,0);for(M=0;M<D;M+=1)(F=S[M].a).t.propType&&(R=S[M].s.getMult(k[n].anIndexes[M],P.a[M].s.totalChars),0===i&&0===t.j||(this._hasMaskedPath?R.length?o+=F.t.v*R[0]:o+=F.t.v*R:R.length?i+=F.t.v*R[0]:i+=F.t.v*R));for(t.strokeWidthAnim&&(z=t.sw||0),t.strokeColorAnim&&(V=t.sc?[t.sc[0],t.sc[1],t.sc[2]]:[0,0,0]),t.fillColorAnim&&t.fc&&(H=[t.fc[0],t.fc[1],t.fc[2]]),M=0;M<D;M+=1)(F=S[M].a).a.propType&&((R=S[M].s.getMult(k[n].anIndexes[M],P.a[M].s.totalChars)).length?w.translate(-F.a.v[0]*R[0],-F.a.v[1]*R[1],F.a.v[2]*R[2]):w.translate(-F.a.v[0]*R,-F.a.v[1]*R,F.a.v[2]*R));for(M=0;M<D;M+=1)(F=S[M].a).s.propType&&((R=S[M].s.getMult(k[n].anIndexes[M],P.a[M].s.totalChars)).length?w.scale(1+(F.s.v[0]-1)*R[0],1+(F.s.v[1]-1)*R[1],1):w.scale(1+(F.s.v[0]-1)*R,1+(F.s.v[1]-1)*R,1));for(M=0;M<D;M+=1){if(F=S[M].a,R=S[M].s.getMult(k[n].anIndexes[M],P.a[M].s.totalChars),F.sk.propType&&(R.length?w.skewFromAxis(-F.sk.v*R[0],F.sa.v*R[1]):w.skewFromAxis(-F.sk.v*R,F.sa.v*R)),F.r.propType&&(R.length?w.rotateZ(-F.r.v*R[2]):w.rotateZ(-F.r.v*R)),F.ry.propType&&(R.length?w.rotateY(F.ry.v*R[1]):w.rotateY(F.ry.v*R)),F.rx.propType&&(R.length?w.rotateX(F.rx.v*R[0]):w.rotateX(F.rx.v*R)),F.o.propType&&(R.length?O+=(F.o.v*R[0]-O)*R[0]:O+=(F.o.v*R-O)*R),t.strokeWidthAnim&&F.sw.propType&&(R.length?z+=F.sw.v*R[0]:z+=F.sw.v*R),t.strokeColorAnim&&F.sc.propType)for(Z=0;Z<3;Z+=1)R.length?V[Z]+=(F.sc.v[Z]-V[Z])*R[0]:V[Z]+=(F.sc.v[Z]-V[Z])*R;if(t.fillColorAnim&&t.fc){if(F.fc.propType)for(Z=0;Z<3;Z+=1)R.length?H[Z]+=(F.fc.v[Z]-H[Z])*R[0]:H[Z]+=(F.fc.v[Z]-H[Z])*R;F.fh.propType&&(H=R.length?addHueToRGB(H,F.fh.v*R[0]):addHueToRGB(H,F.fh.v*R)),F.fs.propType&&(H=R.length?addSaturationToRGB(H,F.fs.v*R[0]):addSaturationToRGB(H,F.fs.v*R)),F.fb.propType&&(H=R.length?addBrightnessToRGB(H,F.fb.v*R[0]):addBrightnessToRGB(H,F.fb.v*R))}}for(M=0;M<D;M+=1)(F=S[M].a).p.propType&&(R=S[M].s.getMult(k[n].anIndexes[M],P.a[M].s.totalChars),this._hasMaskedPath?R.length?w.translate(0,F.p.v[1]*R[0],-F.p.v[2]*R[1]):w.translate(0,F.p.v[1]*R,-F.p.v[2]*R):R.length?w.translate(F.p.v[0]*R[0],F.p.v[1]*R[1],-F.p.v[2]*R[2]):w.translate(F.p.v[0]*R,F.p.v[1]*R,-F.p.v[2]*R));if(t.strokeWidthAnim&&(W=z<0?0:z),t.strokeColorAnim&&(q="rgb("+Math.round(255*V[0])+","+Math.round(255*V[1])+","+Math.round(255*V[2])+")"),t.fillColorAnim&&t.fc&&(Y="rgb("+Math.round(255*H[0])+","+Math.round(255*H[1])+","+Math.round(255*H[2])+")"),this._hasMaskedPath){if(w.translate(0,-t.ls),w.translate(0,x[1]*G*.01+r,0),this._pathData.p.v){b=(h.point[1]-f.point[1])/(h.point[0]-f.point[0]);var ht=180*Math.atan(b)/Math.PI;h.point[0]<f.point[0]&&(ht+=180),w.rotate(-ht*Math.PI/180)}w.translate(N,B,0),o-=x[0]*k[n].an*.005,k[n+1]&&K!==k[n+1].ind&&(o+=k[n].an/2,o+=.001*t.tr*t.finalSize)}else{switch(w.translate(i,r,0),t.ps&&w.translate(t.ps[0],t.ps[1]+t.ascent,0),t.j){case 1:w.translate(k[n].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[k[n].line]),0,0);break;case 2:w.translate(k[n].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[k[n].line])/2,0,0)}w.translate(0,-t.ls),w.translate(j,0,0),w.translate(x[0]*k[n].an*.005,x[1]*G*.01,0),i+=k[n].l+.001*t.tr*t.finalSize}"html"===C?tt=w.toCSS():"svg"===C?tt=w.to2dCSS():et=[w.props[0],w.props[1],w.props[2],w.props[3],w.props[4],w.props[5],w.props[6],w.props[7],w.props[8],w.props[9],w.props[10],w.props[11],w.props[12],w.props[13],w.props[14],w.props[15]],X=O}E<=n?(I=new LetterProps(X,W,q,Y,tt,et),this.renderedLetters.push(I),E+=1,this.lettersChangedFlag=!0):(I=this.renderedLetters[n],this.lettersChangedFlag=I.update(X,W,q,Y,tt,et)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),LetterProps.prototype.update=function(t,e,i,r,n,s){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var a=!1;return this.o!==t&&(this.o=t,this._mdf.o=!0,a=!0),this.sw!==e&&(this.sw=e,this._mdf.sw=!0,a=!0),this.sc!==i&&(this.sc=i,this._mdf.sc=!0,a=!0),this.fc!==r&&(this.fc=r,this._mdf.fc=!0,a=!0),this.m!==n&&(this.m=n,this._mdf.m=!0,a=!0),!s.length||this.p[0]===s[0]&&this.p[1]===s[1]&&this.p[4]===s[4]&&this.p[5]===s[5]&&this.p[12]===s[12]&&this.p[13]===s[13]||(this.p=s,this._mdf.p=!0,a=!0),a},TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},TextProperty.prototype.setCurrentData=function(t){t.__complete||this.completeTextData(t),this.currentData=t,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(t){this.effectsSequence.push(t),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(t){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||t){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var e=this.currentData,i=this.keysIndex;if(this.lock)this.setCurrentData(this.currentData);else{var r;this.lock=!0,this._mdf=!1;var n=this.effectsSequence.length,s=t||this.data.d.k[this.keysIndex].s;for(r=0;r<n;r+=1)s=i!==this.keysIndex?this.effectsSequence[r](s,s.t):this.effectsSequence[r](this.currentData,s.t);e!==s&&this.setCurrentData(s),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}}},TextProperty.prototype.getKeyframeValue=function(){for(var t=this.data.d.k,e=this.elem.comp.renderedFrame,i=0,r=t.length;i<=r-1&&!(i===r-1||t[i+1].t>e);)i+=1;return this.keysIndex!==i&&(this.keysIndex=i),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(t){for(var e,i,r=[],n=0,s=t.length,a=!1;n<s;)e=t.charCodeAt(n),FontManager.isCombinedCharacter(e)?r[r.length-1]+=t.charAt(n):e>=55296&&e<=56319?(i=t.charCodeAt(n+1))>=56320&&i<=57343?(a||FontManager.isModifier(e,i)?(r[r.length-1]+=t.substr(n,2),a=!1):r.push(t.substr(n,2)),n+=1):r.push(t.charAt(n)):e>56319?(i=t.charCodeAt(n+1),FontManager.isZeroWidthJoiner(e,i)?(a=!0,r[r.length-1]+=t.substr(n,2),n+=1):r.push(t.charAt(n))):FontManager.isZeroWidthJoiner(e)?(r[r.length-1]+=t.charAt(n),a=!0):r.push(t.charAt(n)),n+=1;return r},TextProperty.prototype.completeTextData=function(t){t.__complete=!0;var e,i,r,n,s,a,o,h=this.elem.globalData.fontManager,l=this.data,c=[],d=0,p=l.m.g,f=0,u=0,m=0,g=[],y=0,v=0,b=h.getFontByName(t.f),_=0,x=getFontProperties(b);t.fWeight=x.weight,t.fStyle=x.style,t.finalSize=t.s,t.finalText=this.buildFinalText(t.t),i=t.finalText.length,t.finalLineHeight=t.lh;var S,P=t.tr/1e3*t.finalSize;if(t.sz)for(var w,C,E=!0,k=t.sz[0],A=t.sz[1];E;){w=0,y=0,i=(C=this.buildFinalText(t.t)).length,P=t.tr/1e3*t.finalSize;var T=-1;for(e=0;e<i;e+=1)S=C[e].charCodeAt(0),r=!1," "===C[e]?T=e:13!==S&&3!==S||(y=0,r=!0,w+=t.finalLineHeight||1.2*t.finalSize),h.chars?(o=h.getCharData(C[e],b.fStyle,b.fFamily),_=r?0:o.w*t.finalSize/100):_=h.measureText(C[e],t.f,t.finalSize),y+_>k&&" "!==C[e]?(-1===T?i+=1:e=T,w+=t.finalLineHeight||1.2*t.finalSize,C.splice(e,T===e?1:0,"\r"),T=-1,y=0):(y+=_,y+=P);w+=b.ascent*t.finalSize/100,this.canResize&&t.finalSize>this.minimumFontSize&&A<w?(t.finalSize-=1,t.finalLineHeight=t.finalSize*t.lh/t.s):(t.finalText=C,i=t.finalText.length,E=!1)}y=-P,_=0;var F,M=0;for(e=0;e<i;e+=1)if(r=!1,13===(S=(F=t.finalText[e]).charCodeAt(0))||3===S?(M=0,g.push(y),v=y>v?y:v,y=-2*P,n="",r=!0,m+=1):n=F,h.chars?(o=h.getCharData(F,b.fStyle,h.getFontByName(t.f).fFamily),_=r?0:o.w*t.finalSize/100):_=h.measureText(n,t.f,t.finalSize)," "===F?M+=_+P:(y+=_+P+M,M=0),c.push({l:_,an:_,add:f,n:r,anIndexes:[],val:n,line:m,animatorJustifyOffset:0}),2==p){if(f+=_,""===n||" "===n||e===i-1){for(""!==n&&" "!==n||(f-=_);u<=e;)c[u].an=f,c[u].ind=d,c[u].extra=_,u+=1;d+=1,f=0}}else if(3==p){if(f+=_,""===n||e===i-1){for(""===n&&(f-=_);u<=e;)c[u].an=f,c[u].ind=d,c[u].extra=_,u+=1;f=0,d+=1}}else c[d].ind=d,c[d].extra=0,d+=1;if(t.l=c,v=y>v?y:v,g.push(y),t.sz)t.boxWidth=t.sz[0],t.justifyOffset=0;else switch(t.boxWidth=v,t.j){case 1:t.justifyOffset=-t.boxWidth;break;case 2:t.justifyOffset=-t.boxWidth/2;break;default:t.justifyOffset=0}t.lineWidths=g;var D,I,R,G,L=l.a;a=L.length;var j=[];for(s=0;s<a;s+=1){for((D=L[s]).a.sc&&(t.strokeColorAnim=!0),D.a.sw&&(t.strokeWidthAnim=!0),(D.a.fc||D.a.fh||D.a.fs||D.a.fb)&&(t.fillColorAnim=!0),G=0,R=D.s.b,e=0;e<i;e+=1)(I=c[e]).anIndexes[s]=G,(1==R&&""!==I.val||2==R&&""!==I.val&&" "!==I.val||3==R&&(I.n||" "==I.val||e==i-1)||4==R&&(I.n||e==i-1))&&(1===D.s.rn&&j.push(G),G+=1);l.a[s].s.totalChars=G;var N,B=-1;if(1===D.s.rn)for(e=0;e<i;e+=1)B!=(I=c[e]).anIndexes[s]&&(B=I.anIndexes[s],N=j.splice(Math.floor(Math.random()*j.length),1)[0]),I.anIndexes[s]=N}t.yOffset=t.finalLineHeight||1.2*t.finalSize,t.ls=t.ls||0,t.ascent=b.ascent*t.finalSize/100},TextProperty.prototype.updateDocumentData=function(t,e){e=void 0===e?this.keysIndex:e;var i=this.copyData({},this.data.d.k[e].s);i=this.copyData(i,t),this.data.d.k[e].s=i,this.recalculate(e),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(t){var e=this.data.d.k[t].s;e.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(e)},TextProperty.prototype.canResizeFont=function(t){this.canResize=t,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(t){this.minimumFontSize=Math.floor(t)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var t=Math.max,e=Math.min,i=Math.floor;function r(t,e){this._currentTextLength=-1,this.k=!1,this.data=e,this.elem=t,this.comp=t.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(t),this.s=PropertyFactory.getProp(t,e.s||{k:0},0,0,this),this.e="e"in e?PropertyFactory.getProp(t,e.e,0,0,this):{v:100},this.o=PropertyFactory.getProp(t,e.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(t,e.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(t,e.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(t,e.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(t,e.a,0,.01,this),this.dynamicProperties.length||this.getValue()}return r.prototype={getMult:function(r){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var n=0,s=0,a=1,o=1;this.ne.v>0?n=this.ne.v/100:s=-this.ne.v/100,this.xe.v>0?a=1-this.xe.v/100:o=1+this.xe.v/100;var h=BezierFactory.getBezierEasing(n,s,a,o).get,l=0,c=this.finalS,d=this.finalE,p=this.data.sh;if(2===p)l=h(l=d===c?r>=d?1:0:t(0,e(.5/(d-c)+(r-c)/(d-c),1)));else if(3===p)l=h(l=d===c?r>=d?0:1:1-t(0,e(.5/(d-c)+(r-c)/(d-c),1)));else if(4===p)d===c?l=0:(l=t(0,e(.5/(d-c)+(r-c)/(d-c),1)))<.5?l*=2:l=1-2*(l-.5),l=h(l);else if(5===p){if(d===c)l=0;else{var f=d-c,u=-f/2+(r=e(t(0,r+.5-c),d-c)),m=f/2;l=Math.sqrt(1-u*u/(m*m))}l=h(l)}else 6===p?(d===c?l=0:(r=e(t(0,r+.5-c),d-c),l=(1+Math.cos(Math.PI+2*Math.PI*r/(d-c)))/2),l=h(l)):(r>=i(c)&&(l=t(0,e(r-c<0?e(d,1)-(c-r):d-r,1))),l=h(l));if(100!==this.sm.v){var g=.01*this.sm.v;0===g&&(g=1e-8);var y=.5-.5*g;l<y?l=0:(l=(l-y)/g)>1&&(l=1)}return l*this.a.v},getValue:function(t){this.iterateDynamicProperties(),this._mdf=t||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,t&&2===this.data.r&&(this.e.v=this._currentTextLength);var e=2===this.data.r?1:100/this.data.totalChars,i=this.o.v/e,r=this.s.v/e+i,n=this.e.v/e+i;if(r>n){var s=r;r=n,n=s}this.finalS=r,this.finalE=n}},extendPrototype([DynamicPropertyContainer],r),{getTextSelectorProp:function(t,e,i){return new r(t,e,i)}}}(),poolFactory=function(t,e,i){var r=0,n=t,s=createSizedArray(n);return{newElement:function(){return r?s[r-=1]:e()},release:function(t){r===n&&(s=pooling.double(s),n*=2),i&&i(t),s[r]=t,r+=1}}},pooling={double:function(t){return t.concat(createSizedArray(t.length))}},pointPool=poolFactory(8,(function(){return createTypedArray("float32",2)})),shapePool=function(){var t=poolFactory(4,(function(){return new ShapePath}),(function(t){var e,i=t._length;for(e=0;e<i;e+=1)pointPool.release(t.v[e]),pointPool.release(t.i[e]),pointPool.release(t.o[e]),t.v[e]=null,t.i[e]=null,t.o[e]=null;t._length=0,t.c=!1}));return t.clone=function(e){var i,r=t.newElement(),n=void 0===e._length?e.v.length:e._length;for(r.setLength(n),r.c=e.c,i=0;i<n;i+=1)r.setTripleAt(e.v[i][0],e.v[i][1],e.o[i][0],e.o[i][1],e.i[i][0],e.i[i][1],i);return r},t}(),shapeCollectionPool=function(){var t={newShapeCollection:function(){return e?r[e-=1]:new ShapeCollection},release:function(t){var n,s=t._length;for(n=0;n<s;n+=1)shapePool.release(t.shapes[n]);t._length=0,e===i&&(r=pooling.double(r),i*=2),r[e]=t,e+=1}},e=0,i=4,r=createSizedArray(i);return t}(),segmentsLengthPool=poolFactory(8,(function(){return{lengths:[],totalLength:0}}),(function(t){var e,i=t.lengths.length;for(e=0;e<i;e+=1)bezierLengthPool.release(t.lengths[e]);t.lengths.length=0})),bezierLengthPool=poolFactory(8,(function(){return{addedLength:0,percents:createTypedArray("float32",defaultCurveSegments),lengths:createTypedArray("float32",defaultCurveSegments)}})),markerParser=function(){function t(t){for(var e,i=t.split("\r\n"),r={},n=0,s=0;s<i.length;s+=1)2===(e=i[s].split(":")).length&&(r[e[0]]=e[1].trim(),n+=1);if(0===n)throw new Error;return r}return function(e){for(var i=[],r=0;r<e.length;r+=1){var n=e[r],s={time:n.tm,duration:n.dr};try{s.payload=JSON.parse(e[r].cm)}catch(a){try{s.payload=t(e[r].cm)}catch(o){s.payload={name:e[r]}}}i.push(s)}return i}}();function BaseRenderer(){}function SVGRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var i="";if(e&&e.title){var r=createNS("title"),n=createElementID();r.setAttribute("id",n),r.textContent=e.title,this.svgElement.appendChild(r),i+=n}if(e&&e.description){var s=createNS("desc"),a=createElementID();s.setAttribute("id",a),s.textContent=e.description,this.svgElement.appendChild(s),i+=" "+a}i&&this.svgElement.setAttribute("aria-labelledby",i);var o=createNS("defs");this.svgElement.appendChild(o);var h=createNS("g");this.svgElement.appendChild(h),this.layerElement=h,this.renderConfig={preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:e&&e.contentVisibility||"visible",progressiveLoad:e&&e.progressiveLoad||!1,hideOnTransparent:!(e&&!1===e.hideOnTransparent),viewBoxOnly:e&&e.viewBoxOnly||!1,viewBoxSize:e&&e.viewBoxSize||!1,className:e&&e.className||"",id:e&&e.id||"",focusable:e&&e.focusable,filterSize:{width:e&&e.filterSize&&e.filterSize.width||"100%",height:e&&e.filterSize&&e.filterSize.height||"100%",x:e&&e.filterSize&&e.filterSize.x||"0%",y:e&&e.filterSize&&e.filterSize.y||"0%"}},this.globalData={_mdf:!1,frameNum:-1,defs:o,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}function CanvasRenderer(t,e){this.animationItem=t,this.renderConfig={clearCanvas:!e||void 0===e.clearCanvas||e.clearCanvas,context:e&&e.context||null,progressiveLoad:e&&e.progressiveLoad||!1,preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:e&&e.contentVisibility||"visible",className:e&&e.className||"",id:e&&e.id||""},this.renderConfig.dpr=e&&e.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=e&&e.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}function HybridRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:e&&e.className||"",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(e&&!1===e.hideOnTransparent),filterSize:{width:e&&e.filterSize&&e.filterSize.width||"400%",height:e&&e.filterSize&&e.filterSize.height||"400%",x:e&&e.filterSize&&e.filterSize.x||"-100%",y:e&&e.filterSize&&e.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}function MaskElement(t,e,i){this.data=t,this.element=e,this.globalData=i,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var r,n,s=this.globalData.defs,a=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(a),this.solidPath="";var o,h,l,c,d,p,f=this.masksProperties,u=0,m=[],g=createElementID(),y="clipPath",v="clip-path";for(r=0;r<a;r+=1)if(("a"!==f[r].mode&&"n"!==f[r].mode||f[r].inv||100!==f[r].o.k||f[r].o.x)&&(y="mask",v="mask"),"s"!==f[r].mode&&"i"!==f[r].mode||0!==u?l=null:((l=createNS("rect")).setAttribute("fill","#ffffff"),l.setAttribute("width",this.element.comp.data.w||0),l.setAttribute("height",this.element.comp.data.h||0),m.push(l)),n=createNS("path"),"n"===f[r].mode)this.viewData[r]={op:PropertyFactory.getProp(this.element,f[r].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,f[r],3),elem:n,lastPath:""},s.appendChild(n);else{var b;if(u+=1,n.setAttribute("fill","s"===f[r].mode?"#000000":"#ffffff"),n.setAttribute("clip-rule","nonzero"),0!==f[r].x.k?(y="mask",v="mask",p=PropertyFactory.getProp(this.element,f[r].x,0,null,this.element),b=createElementID(),(c=createNS("filter")).setAttribute("id",b),(d=createNS("feMorphology")).setAttribute("operator","erode"),d.setAttribute("in","SourceGraphic"),d.setAttribute("radius","0"),c.appendChild(d),s.appendChild(c),n.setAttribute("stroke","s"===f[r].mode?"#000000":"#ffffff")):(d=null,p=null),this.storedData[r]={elem:n,x:p,expan:d,lastPath:"",lastOperator:"",filterId:b,lastRadius:0},"i"===f[r].mode){h=m.length;var _=createNS("g");for(o=0;o<h;o+=1)_.appendChild(m[o]);var x=createNS("mask");x.setAttribute("mask-type","alpha"),x.setAttribute("id",g+"_"+u),x.appendChild(n),s.appendChild(x),_.setAttribute("mask","url("+locationHref+"#"+g+"_"+u+")"),m.length=0,m.push(_)}else m.push(n);f[r].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[r]={elem:n,lastPath:"",op:PropertyFactory.getProp(this.element,f[r].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,f[r],3),invRect:l},this.viewData[r].prop.k||this.drawPath(f[r],this.viewData[r].prop.v,this.viewData[r])}for(this.maskElement=createNS(y),a=m.length,r=0;r<a;r+=1)this.maskElement.appendChild(m[r]);u>0&&(this.maskElement.setAttribute("id",g),this.element.maskedElement.setAttribute(v,"url("+locationHref+"#"+g+")"),s.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}function HierarchyElement(){}function FrameElement(){}function TransformElement(){}function RenderableElement(){}function RenderableDOMElement(){}function ProcessedElement(t,e){this.elem=t,this.pos=e}function SVGStyleData(t,e){this.data=t,this.type=t.ty,this.d="",this.lvl=e,this._mdf=!1,this.closed=!0===t.hd,this.pElem=createNS("path"),this.msElem=null}function SVGShapeData(t,e,i){this.caches=[],this.styles=[],this.transformers=t,this.lStr="",this.sh=i,this.lvl=e,this._isAnimated=!!i.k;for(var r=0,n=t.length;r<n;){if(t[r].mProps.dynamicProperties.length){this._isAnimated=!0;break}r+=1}}function SVGTransformData(t,e,i){this.transform={mProps:t,op:e,container:i},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}function SVGStrokeStyleData(t,e,i){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.w=PropertyFactory.getProp(t,e.w,0,null,this),this.d=new DashProperty(t,e.d||{},"svg",this),this.c=PropertyFactory.getProp(t,e.c,1,255,this),this.style=i,this._isAnimated=!!this._isAnimated}function SVGFillStyleData(t,e,i){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.c=PropertyFactory.getProp(t,e.c,1,255,this),this.style=i}function SVGGradientFillStyleData(t,e,i){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.initGradientData(t,e,i)}function SVGGradientStrokeStyleData(t,e,i){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(t,e.w,0,null,this),this.d=new DashProperty(t,e.d||{},"svg",this),this.initGradientData(t,e,i),this._isAnimated=!!this._isAnimated}function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}BaseRenderer.prototype.checkLayers=function(t){var e,i,r=this.layers.length;for(this.completeLayers=!0,e=r-1;e>=0;e-=1)this.elements[e]||(i=this.layers[e]).ip-i.st<=t-this.layers[e].st&&i.op-i.st>t-this.layers[e].st&&this.buildItem(e),this.completeLayers=!!this.elements[e]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(t){switch(t.ty){case 2:return this.createImage(t);case 0:return this.createComp(t);case 1:return this.createSolid(t);case 3:default:return this.createNull(t);case 4:return this.createShape(t);case 5:return this.createText(t);case 6:return this.createAudio(t);case 13:return this.createCamera(t);case 15:return this.createFootage(t)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(t){return new AudioElement(t,this.globalData,this)},BaseRenderer.prototype.createFootage=function(t){return new FootageElement(t,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.buildItem(t);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(t){var e;this.completeLayers=!1;var i,r=t.length,n=this.layers.length;for(e=0;e<r;e+=1)for(i=0;i<n;){if(this.layers[i].id===t[e].id){this.layers[i]=t[e];break}i+=1}},BaseRenderer.prototype.setProjectInterface=function(t){this.globalData.projectInterface=t},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(t,e,i){for(var r=this.elements,n=this.layers,s=0,a=n.length;s<a;)n[s].ind==e&&(r[s]&&!0!==r[s]?(i.push(r[s]),r[s].setAsParent(),void 0!==n[s].parent?this.buildElementParenting(t,n[s].parent,i):t.setHierarchy(i)):(this.buildItem(s),this.addPendingElement(t))),s+=1},BaseRenderer.prototype.addPendingElement=function(t){this.pendingElements.push(t)},BaseRenderer.prototype.searchExtraCompositions=function(t){var e,i=t.length;for(e=0;e<i;e+=1)if(t[e].xt){var r=this.createComp(t[e]);r.initExpressions(),this.globalData.projectInterface.registerComposition(r)}},BaseRenderer.prototype.setupGlobalData=function(t,e){this.globalData.fontManager=new FontManager,this.globalData.fontManager.addChars(t.chars),this.globalData.fontManager.addFonts(t.fonts,e),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=t.fr,this.globalData.nm=t.nm,this.globalData.compSize={w:t.w,h:t.h}},extendPrototype([BaseRenderer],SVGRenderer),SVGRenderer.prototype.createNull=function(t){return new NullElement(t,this.globalData,this)},SVGRenderer.prototype.createShape=function(t){return new SVGShapeElement(t,this.globalData,this)},SVGRenderer.prototype.createText=function(t){return new SVGTextLottieElement(t,this.globalData,this)},SVGRenderer.prototype.createImage=function(t){return new IImageElement(t,this.globalData,this)},SVGRenderer.prototype.createComp=function(t){return new SVGCompElement(t,this.globalData,this)},SVGRenderer.prototype.createSolid=function(t){return new ISolidElement(t,this.globalData,this)},SVGRenderer.prototype.configAnimation=function(t){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+t.w+" "+t.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",t.w),this.svgElement.setAttribute("height",t.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),void 0!==this.renderConfig.focusable&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var e=this.globalData.defs;this.setupGlobalData(t,e),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=t;var i=createNS("clipPath"),r=createNS("rect");r.setAttribute("width",t.w),r.setAttribute("height",t.h),r.setAttribute("x",0),r.setAttribute("y",0);var n=createElementID();i.setAttribute("id",n),i.appendChild(r),this.layerElement.setAttribute("clip-path","url("+locationHref+"#"+n+")"),e.appendChild(i),this.layers=t.layers,this.elements=createSizedArray(t.layers.length)},SVGRenderer.prototype.destroy=function(){var t;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var e=this.layers?this.layers.length:0;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRenderer.prototype.updateContainerSize=function(){},SVGRenderer.prototype.buildItem=function(t){var e=this.elements;if(!e[t]&&99!==this.layers[t].ty){e[t]=!0;var i=this.createItem(this.layers[t]);e[t]=i,expressionsPlugin&&(0===this.layers[t].ty&&this.globalData.projectInterface.registerComposition(i),i.initExpressions()),this.appendElementInPos(i,t),this.layers[t].tt&&(this.elements[t-1]&&!0!==this.elements[t-1]?i.setMatte(e[t-1].layerId):(this.buildItem(t-1),this.addPendingElement(i)))}},SVGRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();if(t.checkParenting(),t.data.tt)for(var e=0,i=this.elements.length;e<i;){if(this.elements[e]===t){t.setMatte(this.elements[e-1].layerId);break}e+=1}}},SVGRenderer.prototype.renderFrame=function(t){if(this.renderedFrame!==t&&!this.destroyed){var e;null===t?t=this.renderedFrame:this.renderedFrame=t,this.globalData.frameNum=t,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=t,this.globalData._mdf=!1;var i=this.layers.length;for(this.completeLayers||this.checkLayers(t),e=i-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].prepareFrame(t-this.layers[e].st);if(this.globalData._mdf)for(e=0;e<i;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()}},SVGRenderer.prototype.appendElementInPos=function(t,e){var i=t.getBaseElement();if(i){for(var r,n=0;n<e;)this.elements[n]&&!0!==this.elements[n]&&this.elements[n].getBaseElement()&&(r=this.elements[n].getBaseElement()),n+=1;r?this.layerElement.insertBefore(i,r):this.layerElement.appendChild(i)}},SVGRenderer.prototype.hide=function(){this.layerElement.style.display="none"},SVGRenderer.prototype.show=function(){this.layerElement.style.display="block"},extendPrototype([BaseRenderer],CanvasRenderer),CanvasRenderer.prototype.createShape=function(t){return new CVShapeElement(t,this.globalData,this)},CanvasRenderer.prototype.createText=function(t){return new CVTextElement(t,this.globalData,this)},CanvasRenderer.prototype.createImage=function(t){return new CVImageElement(t,this.globalData,this)},CanvasRenderer.prototype.createComp=function(t){return new CVCompElement(t,this.globalData,this)},CanvasRenderer.prototype.createSolid=function(t){return new CVSolidElement(t,this.globalData,this)},CanvasRenderer.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRenderer.prototype.ctxTransform=function(t){if(1!==t[0]||0!==t[1]||0!==t[4]||1!==t[5]||0!==t[12]||0!==t[13])if(this.renderConfig.clearCanvas){this.transformMat.cloneFromProps(t);var e=this.contextData.cTr.props;this.transformMat.transform(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]),this.contextData.cTr.cloneFromProps(this.transformMat.props);var i=this.contextData.cTr.props;this.canvasContext.setTransform(i[0],i[1],i[4],i[5],i[12],i[13])}else this.canvasContext.transform(t[0],t[1],t[4],t[5],t[12],t[13])},CanvasRenderer.prototype.ctxOpacity=function(t){if(!this.renderConfig.clearCanvas)return this.canvasContext.globalAlpha*=t<0?0:t,void(this.globalData.currentGlobalAlpha=this.contextData.cO);this.contextData.cO*=t<0?0:t,this.globalData.currentGlobalAlpha!==this.contextData.cO&&(this.canvasContext.globalAlpha=this.contextData.cO,this.globalData.currentGlobalAlpha=this.contextData.cO)},CanvasRenderer.prototype.reset=function(){this.renderConfig.clearCanvas?this.contextData.reset():this.canvasContext.restore()},CanvasRenderer.prototype.save=function(t){if(this.renderConfig.clearCanvas){t&&this.canvasContext.save();var e,i=this.contextData.cTr.props;this.contextData._length<=this.contextData.cArrPos&&this.contextData.duplicate();var r=this.contextData.saved[this.contextData.cArrPos];for(e=0;e<16;e+=1)r[e]=i[e];this.contextData.savedOp[this.contextData.cArrPos]=this.contextData.cO,this.contextData.cArrPos+=1}else this.canvasContext.save()},CanvasRenderer.prototype.restore=function(t){if(this.renderConfig.clearCanvas){t&&(this.canvasContext.restore(),this.globalData.blendMode="source-over"),this.contextData.cArrPos-=1;var e,i=this.contextData.saved[this.contextData.cArrPos],r=this.contextData.cTr.props;for(e=0;e<16;e+=1)r[e]=i[e];this.canvasContext.setTransform(i[0],i[1],i[4],i[5],i[12],i[13]),i=this.contextData.savedOp[this.contextData.cArrPos],this.contextData.cO=i,this.globalData.currentGlobalAlpha!==i&&(this.canvasContext.globalAlpha=i,this.globalData.currentGlobalAlpha=i)}else this.canvasContext.restore()},CanvasRenderer.prototype.configAnimation=function(t){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var e=this.animationItem.container.style;e.width="100%",e.height="100%";var i="0px 0px 0px";e.transformOrigin=i,e.mozTransformOrigin=i,e.webkitTransformOrigin=i,e["-webkit-transform"]=i,e.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.data=t,this.layers=t.layers,this.transformCanvas={w:t.w,h:t.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(t,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(t.layers.length),this.updateContainerSize()},CanvasRenderer.prototype.updateContainerSize=function(){var t,e,i,r;if(this.reset(),this.animationItem.wrapper&&this.animationItem.container?(t=this.animationItem.wrapper.offsetWidth,e=this.animationItem.wrapper.offsetHeight,this.animationItem.container.setAttribute("width",t*this.renderConfig.dpr),this.animationItem.container.setAttribute("height",e*this.renderConfig.dpr)):(t=this.canvasContext.canvas.width*this.renderConfig.dpr,e=this.canvasContext.canvas.height*this.renderConfig.dpr),-1!==this.renderConfig.preserveAspectRatio.indexOf("meet")||-1!==this.renderConfig.preserveAspectRatio.indexOf("slice")){var n=this.renderConfig.preserveAspectRatio.split(" "),s=n[1]||"meet",a=n[0]||"xMidYMid",o=a.substr(0,4),h=a.substr(4);i=t/e,(r=this.transformCanvas.w/this.transformCanvas.h)>i&&"meet"===s||r<i&&"slice"===s?(this.transformCanvas.sx=t/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=t/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=e/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=e/(this.transformCanvas.h/this.renderConfig.dpr)),this.transformCanvas.tx="xMid"===o&&(r<i&&"meet"===s||r>i&&"slice"===s)?(t-this.transformCanvas.w*(e/this.transformCanvas.h))/2*this.renderConfig.dpr:"xMax"===o&&(r<i&&"meet"===s||r>i&&"slice"===s)?(t-this.transformCanvas.w*(e/this.transformCanvas.h))*this.renderConfig.dpr:0,this.transformCanvas.ty="YMid"===h&&(r>i&&"meet"===s||r<i&&"slice"===s)?(e-this.transformCanvas.h*(t/this.transformCanvas.w))/2*this.renderConfig.dpr:"YMax"===h&&(r>i&&"meet"===s||r<i&&"slice"===s)?(e-this.transformCanvas.h*(t/this.transformCanvas.w))*this.renderConfig.dpr:0}else"none"===this.renderConfig.preserveAspectRatio?(this.transformCanvas.sx=t/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=e/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRenderer.prototype.destroy=function(){var t;for(this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),t=(this.layers?this.layers.length:0)-1;t>=0;t-=1)this.elements[t]&&this.elements[t].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRenderer.prototype.renderFrame=function(t,e){if((this.renderedFrame!==t||!0!==this.renderConfig.clearCanvas||e)&&!this.destroyed&&-1!==t){var i;this.renderedFrame=t,this.globalData.frameNum=t-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||e,this.globalData.projectInterface.currentFrame=t;var r=this.layers.length;for(this.completeLayers||this.checkLayers(t),i=0;i<r;i+=1)(this.completeLayers||this.elements[i])&&this.elements[i].prepareFrame(t-this.layers[i].st);if(this.globalData._mdf){for(!0===this.renderConfig.clearCanvas?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),i=r-1;i>=0;i-=1)(this.completeLayers||this.elements[i])&&this.elements[i].renderFrame();!0!==this.renderConfig.clearCanvas&&this.restore()}}},CanvasRenderer.prototype.buildItem=function(t){var e=this.elements;if(!e[t]&&99!==this.layers[t].ty){var i=this.createItem(this.layers[t],this,this.globalData);e[t]=i,i.initExpressions()}},CanvasRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},CanvasRenderer.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRenderer.prototype.show=function(){this.animationItem.container.style.display="block"},extendPrototype([BaseRenderer],HybridRenderer),HybridRenderer.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},HybridRenderer.prototype.appendElementInPos=function(t,e){var i=t.getBaseElement();if(i){var r=this.layers[e];if(r.ddd&&this.supports3d)this.addTo3dContainer(i,e);else if(this.threeDElements)this.addTo3dContainer(i,e);else{for(var n,s,a=0;a<e;)this.elements[a]&&!0!==this.elements[a]&&this.elements[a].getBaseElement&&(s=this.elements[a],n=(this.layers[a].ddd?this.getThreeDContainerByPos(a):s.getBaseElement())||n),a+=1;n?r.ddd&&this.supports3d||this.layerElement.insertBefore(i,n):r.ddd&&this.supports3d||this.layerElement.appendChild(i)}}},HybridRenderer.prototype.createShape=function(t){return this.supports3d?new HShapeElement(t,this.globalData,this):new SVGShapeElement(t,this.globalData,this)},HybridRenderer.prototype.createText=function(t){return this.supports3d?new HTextElement(t,this.globalData,this):new SVGTextLottieElement(t,this.globalData,this)},HybridRenderer.prototype.createCamera=function(t){return this.camera=new HCameraElement(t,this.globalData,this),this.camera},HybridRenderer.prototype.createImage=function(t){return this.supports3d?new HImageElement(t,this.globalData,this):new IImageElement(t,this.globalData,this)},HybridRenderer.prototype.createComp=function(t){return this.supports3d?new HCompElement(t,this.globalData,this):new SVGCompElement(t,this.globalData,this)},HybridRenderer.prototype.createSolid=function(t){return this.supports3d?new HSolidElement(t,this.globalData,this):new ISolidElement(t,this.globalData,this)},HybridRenderer.prototype.createNull=SVGRenderer.prototype.createNull,HybridRenderer.prototype.getThreeDContainerByPos=function(t){for(var e=0,i=this.threeDElements.length;e<i;){if(this.threeDElements[e].startPos<=t&&this.threeDElements[e].endPos>=t)return this.threeDElements[e].perspectiveElem;e+=1}return null},HybridRenderer.prototype.createThreeDContainer=function(t,e){var i,r,n=createTag("div");styleDiv(n);var s=createTag("div");if(styleDiv(s),"3d"===e){(i=n.style).width=this.globalData.compSize.w+"px",i.height=this.globalData.compSize.h+"px";var a="50% 50%";i.webkitTransformOrigin=a,i.mozTransformOrigin=a,i.transformOrigin=a;var o="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";(r=s.style).transform=o,r.webkitTransform=o}n.appendChild(s);var h={container:s,perspectiveElem:n,startPos:t,endPos:t,type:e};return this.threeDElements.push(h),h},HybridRenderer.prototype.build3dContainers=function(){var t,e,i=this.layers.length,r="";for(t=0;t<i;t+=1)this.layers[t].ddd&&3!==this.layers[t].ty?("3d"!==r&&(r="3d",e=this.createThreeDContainer(t,"3d")),e.endPos=Math.max(e.endPos,t)):("2d"!==r&&(r="2d",e=this.createThreeDContainer(t,"2d")),e.endPos=Math.max(e.endPos,t));for(t=(i=this.threeDElements.length)-1;t>=0;t-=1)this.resizerElem.appendChild(this.threeDElements[t].perspectiveElem)},HybridRenderer.prototype.addTo3dContainer=function(t,e){for(var i=0,r=this.threeDElements.length;i<r;){if(e<=this.threeDElements[i].endPos){for(var n,s=this.threeDElements[i].startPos;s<e;)this.elements[s]&&this.elements[s].getBaseElement&&(n=this.elements[s].getBaseElement()),s+=1;n?this.threeDElements[i].container.insertBefore(t,n):this.threeDElements[i].container.appendChild(t);break}i+=1}},HybridRenderer.prototype.configAnimation=function(t){var e=createTag("div"),i=this.animationItem.wrapper,r=e.style;r.width=t.w+"px",r.height=t.h+"px",this.resizerElem=e,styleDiv(e),r.transformStyle="flat",r.mozTransformStyle="flat",r.webkitTransformStyle="flat",this.renderConfig.className&&e.setAttribute("class",this.renderConfig.className),i.appendChild(e),r.overflow="hidden";var n=createNS("svg");n.setAttribute("width","1"),n.setAttribute("height","1"),styleDiv(n),this.resizerElem.appendChild(n);var s=createNS("defs");n.appendChild(s),this.data=t,this.setupGlobalData(t,n),this.globalData.defs=s,this.layers=t.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRenderer.prototype.destroy=function(){var t;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var e=this.layers?this.layers.length:0;for(t=0;t<e;t+=1)this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRenderer.prototype.updateContainerSize=function(){var t,e,i,r,n=this.animationItem.wrapper.offsetWidth,s=this.animationItem.wrapper.offsetHeight,a=n/s;this.globalData.compSize.w/this.globalData.compSize.h>a?(t=n/this.globalData.compSize.w,e=n/this.globalData.compSize.w,i=0,r=(s-this.globalData.compSize.h*(n/this.globalData.compSize.w))/2):(t=s/this.globalData.compSize.h,e=s/this.globalData.compSize.h,i=(n-this.globalData.compSize.w*(s/this.globalData.compSize.h))/2,r=0);var o=this.resizerElem.style;o.webkitTransform="matrix3d("+t+",0,0,0,0,"+e+",0,0,0,0,1,0,"+i+","+r+",0,1)",o.transform=o.webkitTransform},HybridRenderer.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRenderer.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRenderer.prototype.show=function(){this.resizerElem.style.display="block"},HybridRenderer.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var t,e=this.globalData.compSize.w,i=this.globalData.compSize.h,r=this.threeDElements.length;for(t=0;t<r;t+=1){var n=this.threeDElements[t].perspectiveElem.style;n.webkitPerspective=Math.sqrt(Math.pow(e,2)+Math.pow(i,2))+"px",n.perspective=n.webkitPerspective}}},HybridRenderer.prototype.searchExtraCompositions=function(t){var e,i=t.length,r=createTag("div");for(e=0;e<i;e+=1)if(t[e].xt){var n=this.createComp(t[e],r,this.globalData.comp,null);n.initExpressions(),this.globalData.projectInterface.registerComposition(n)}},MaskElement.prototype.getMaskProperty=function(t){return this.viewData[t].prop},MaskElement.prototype.renderFrame=function(t){var e,i=this.element.finalTransform.mat,r=this.masksProperties.length;for(e=0;e<r;e+=1)if((this.viewData[e].prop._mdf||t)&&this.drawPath(this.masksProperties[e],this.viewData[e].prop.v,this.viewData[e]),(this.viewData[e].op._mdf||t)&&this.viewData[e].elem.setAttribute("fill-opacity",this.viewData[e].op.v),"n"!==this.masksProperties[e].mode&&(this.viewData[e].invRect&&(this.element.finalTransform.mProp._mdf||t)&&this.viewData[e].invRect.setAttribute("transform",i.getInverseMatrix().to2dCSS()),this.storedData[e].x&&(this.storedData[e].x._mdf||t))){var n=this.storedData[e].expan;this.storedData[e].x.v<0?("erode"!==this.storedData[e].lastOperator&&(this.storedData[e].lastOperator="erode",this.storedData[e].elem.setAttribute("filter","url("+locationHref+"#"+this.storedData[e].filterId+")")),n.setAttribute("radius",-this.storedData[e].x.v)):("dilate"!==this.storedData[e].lastOperator&&(this.storedData[e].lastOperator="dilate",this.storedData[e].elem.setAttribute("filter",null)),this.storedData[e].elem.setAttribute("stroke-width",2*this.storedData[e].x.v))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var t="M0,0 ";return t+=" h"+this.globalData.compSize.w,t+=" v"+this.globalData.compSize.h,t+=" h-"+this.globalData.compSize.w,t+=" v-"+this.globalData.compSize.h+" "},MaskElement.prototype.drawPath=function(t,e,i){var r,n,s=" M"+e.v[0][0]+","+e.v[0][1];for(n=e._length,r=1;r<n;r+=1)s+=" C"+e.o[r-1][0]+","+e.o[r-1][1]+" "+e.i[r][0]+","+e.i[r][1]+" "+e.v[r][0]+","+e.v[r][1];if(e.c&&n>1&&(s+=" C"+e.o[r-1][0]+","+e.o[r-1][1]+" "+e.i[0][0]+","+e.i[0][1]+" "+e.v[0][0]+","+e.v[0][1]),i.lastPath!==s){var a="";i.elem&&(e.c&&(a=t.inv?this.solidPath+s:s),i.elem.setAttribute("d",a)),i.lastPath=s}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null},HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(t){this.hierarchy=t},setAsParent:function(){this._isParent=!0},checkParenting:function(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent,[])}},FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(t,e){var i,r=this.dynamicProperties.length;for(i=0;i<r;i+=1)(e||this._isParent&&"transform"===this.dynamicProperties[i].propType)&&(this.dynamicProperties[i].getValue(),this.dynamicProperties[i]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(t){-1===this.dynamicProperties.indexOf(t)&&this.dynamicProperties.push(t)}},TransformElement.prototype={initTransform:function(){this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_opMdf:!1,mat:new Matrix},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var t,e=this.finalTransform.mat,i=0,r=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;i<r;){if(this.hierarchy[i].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}i+=1}if(this.finalTransform._matMdf)for(t=this.finalTransform.mProp.v.props,e.cloneFromProps(t),i=0;i<r;i+=1)t=this.hierarchy[i].finalTransform.mProp.v.props,e.transform(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}},globalToLocal:function(t){var e=[];e.push(this.finalTransform);for(var i,r=!0,n=this.comp;r;)n.finalTransform?(n.data.hasMask&&e.splice(0,0,n.finalTransform),n=n.comp):r=!1;var s,a=e.length;for(i=0;i<a;i+=1)s=e[i].mat.applyToPointArray(0,0,0),t=[t[0]-s[0],t[1]-s[1],0];return t},mHelper:new Matrix},RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(t){-1===this.renderableComponents.indexOf(t)&&this.renderableComponents.push(t)},removeRenderableComponent:function(t){-1!==this.renderableComponents.indexOf(t)&&this.renderableComponents.splice(this.renderableComponents.indexOf(t),1)},prepareRenderableFrame:function(t){this.checkLayerLimits(t)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(t){this.data.ip-this.data.st<=t&&this.data.op-this.data.st>t?!0!==this.isInRange&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):!1!==this.isInRange&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var t,e=this.renderableComponents.length;for(t=0;t<e;t+=1)this.renderableComponents[t].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}},extendPrototype([RenderableElement,createProxyFunction({initElement:function(t,e,i){this.initFrame(),this.initBaseData(t,e,i),this.initTransform(t,e,i),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){this.hidden||this.isInRange&&!this.isTransparent||((this.baseElement||this.layerElement).style.display="none",this.hidden=!0)},show:function(){this.isInRange&&!this.isTransparent&&(this.data.hd||((this.baseElement||this.layerElement).style.display="block"),this.hidden=!1,this._isFirstFrame=!0)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(t){this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}})],RenderableDOMElement),SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1},SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0},extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),SVGGradientFillStyleData.prototype.initGradientData=function(t,e,i){this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.s=PropertyFactory.getProp(t,e.s,1,null,this),this.e=PropertyFactory.getProp(t,e.e,1,null,this),this.h=PropertyFactory.getProp(t,e.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(t,e.a||{k:0},0,degToRads,this),this.g=new GradientProperty(t,e.g,this),this.style=i,this.stops=[],this.setGradientData(i.pElem,e),this.setGradientOpacity(e,i),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(t,e){var i=createElementID(),r=createNS(1===e.t?"linearGradient":"radialGradient");r.setAttribute("id",i),r.setAttribute("spreadMethod","pad"),r.setAttribute("gradientUnits","userSpaceOnUse");var n,s,a,o=[];for(a=4*e.g.p,s=0;s<a;s+=4)n=createNS("stop"),r.appendChild(n),o.push(n);t.setAttribute("gf"===e.ty?"fill":"stroke","url("+locationHref+"#"+i+")"),this.gf=r,this.cst=o},SVGGradientFillStyleData.prototype.setGradientOpacity=function(t,e){if(this.g._hasOpacity&&!this.g._collapsable){var i,r,n,s=createNS("mask"),a=createNS("path");s.appendChild(a);var o=createElementID(),h=createElementID();s.setAttribute("id",h);var l=createNS(1===t.t?"linearGradient":"radialGradient");l.setAttribute("id",o),l.setAttribute("spreadMethod","pad"),l.setAttribute("gradientUnits","userSpaceOnUse"),n=t.g.k.k[0].s?t.g.k.k[0].s.length:t.g.k.k.length;var c=this.stops;for(r=4*t.g.p;r<n;r+=2)(i=createNS("stop")).setAttribute("stop-color","rgb(255,255,255)"),l.appendChild(i),c.push(i);a.setAttribute("gf"===t.ty?"fill":"stroke","url("+locationHref+"#"+o+")"),"gs"===t.ty&&(a.setAttribute("stroke-linecap",lineCapEnum[t.lc||2]),a.setAttribute("stroke-linejoin",lineJoinEnum[t.lj||2]),1===t.lj&&a.setAttribute("stroke-miterlimit",t.ml)),this.of=l,this.ms=s,this.ost=c,this.maskId=h,e.msElem=a}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);var SVGElementsRenderer=function(){var t=new Matrix,e=new Matrix;function i(t,e,i){(i||e.transform.op._mdf)&&e.transform.container.setAttribute("opacity",e.transform.op.v),(i||e.transform.mProps._mdf)&&e.transform.container.setAttribute("transform",e.transform.mProps.v.to2dCSS())}function r(i,r,n){var s,a,o,h,l,c,d,p,f,u,m,g=r.styles.length,y=r.lvl;for(c=0;c<g;c+=1){if(h=r.sh._mdf||n,r.styles[c].lvl<y){for(p=e.reset(),u=y-r.styles[c].lvl,m=r.transformers.length-1;!h&&u>0;)h=r.transformers[m].mProps._mdf||h,u-=1,m-=1;if(h)for(u=y-r.styles[c].lvl,m=r.transformers.length-1;u>0;)f=r.transformers[m].mProps.v.props,p.transform(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15]),u-=1,m-=1}else p=t;if(a=(d=r.sh.paths)._length,h){for(o="",s=0;s<a;s+=1)(l=d.shapes[s])&&l._length&&(o+=buildShapeString(l,l._length,l.c,p));r.caches[c]=o}else o=r.caches[c];r.styles[c].d+=!0===i.hd?"":o,r.styles[c]._mdf=h||r.styles[c]._mdf}}function n(t,e,i){var r=e.style;(e.c._mdf||i)&&r.pElem.setAttribute("fill","rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||i)&&r.pElem.setAttribute("fill-opacity",e.o.v)}function s(t,e,i){a(t,e,i),o(0,e,i)}function a(t,e,i){var r,n,s,a,o,h=e.gf,l=e.g._hasOpacity,c=e.s.v,d=e.e.v;if(e.o._mdf||i){var p="gf"===t.ty?"fill-opacity":"stroke-opacity";e.style.pElem.setAttribute(p,e.o.v)}if(e.s._mdf||i){var f=1===t.t?"x1":"cx",u="x1"===f?"y1":"cy";h.setAttribute(f,c[0]),h.setAttribute(u,c[1]),l&&!e.g._collapsable&&(e.of.setAttribute(f,c[0]),e.of.setAttribute(u,c[1]))}if(e.g._cmdf||i){r=e.cst;var m=e.g.c;for(s=r.length,n=0;n<s;n+=1)(a=r[n]).setAttribute("offset",m[4*n]+"%"),a.setAttribute("stop-color","rgb("+m[4*n+1]+","+m[4*n+2]+","+m[4*n+3]+")")}if(l&&(e.g._omdf||i)){var g=e.g.o;for(s=(r=e.g._collapsable?e.cst:e.ost).length,n=0;n<s;n+=1)a=r[n],e.g._collapsable||a.setAttribute("offset",g[2*n]+"%"),a.setAttribute("stop-opacity",g[2*n+1])}if(1===t.t)(e.e._mdf||i)&&(h.setAttribute("x2",d[0]),h.setAttribute("y2",d[1]),l&&!e.g._collapsable&&(e.of.setAttribute("x2",d[0]),e.of.setAttribute("y2",d[1])));else if((e.s._mdf||e.e._mdf||i)&&(o=Math.sqrt(Math.pow(c[0]-d[0],2)+Math.pow(c[1]-d[1],2)),h.setAttribute("r",o),l&&!e.g._collapsable&&e.of.setAttribute("r",o)),e.e._mdf||e.h._mdf||e.a._mdf||i){o||(o=Math.sqrt(Math.pow(c[0]-d[0],2)+Math.pow(c[1]-d[1],2)));var y=Math.atan2(d[1]-c[1],d[0]-c[0]),v=e.h.v;v>=1?v=.99:v<=-1&&(v=-.99);var b=o*v,_=Math.cos(y+e.a.v)*b+c[0],x=Math.sin(y+e.a.v)*b+c[1];h.setAttribute("fx",_),h.setAttribute("fy",x),l&&!e.g._collapsable&&(e.of.setAttribute("fx",_),e.of.setAttribute("fy",x))}}function o(t,e,i){var r=e.style,n=e.d;n&&(n._mdf||i)&&n.dashStr&&(r.pElem.setAttribute("stroke-dasharray",n.dashStr),r.pElem.setAttribute("stroke-dashoffset",n.dashoffset[0])),e.c&&(e.c._mdf||i)&&r.pElem.setAttribute("stroke","rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||i)&&r.pElem.setAttribute("stroke-opacity",e.o.v),(e.w._mdf||i)&&(r.pElem.setAttribute("stroke-width",e.w.v),r.msElem&&r.msElem.setAttribute("stroke-width",e.w.v))}return{createRenderFunction:function(t){switch(t.ty){case"fl":return n;case"gf":return a;case"gs":return s;case"st":return o;case"sh":case"el":case"rc":case"sr":return r;case"tr":return i;default:return null}}}}();function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}function CVShapeData(t,e,i,r){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var n,s=4;"rc"===e.ty?s=5:"el"===e.ty?s=6:"sr"===e.ty&&(s=7),this.sh=ShapePropertyFactory.getShapeProp(t,e,s,t);var a,o=i.length;for(n=0;n<o;n+=1)i[n].closed||(a={transforms:r.addTransformSequence(i[n].transforms),trNodes:[]},this.styledShapes.push(a),i[n].elements.push(a))}function BaseElement(){}function NullElement(t,e,i){this.initFrame(),this.initBaseData(t,e,i),this.initFrame(),this.initTransform(t,e,i),this.initHierarchy()}function SVGBaseElement(){}function IShapeElement(){}function ITextElement(){}function ICompElement(){}function IImageElement(t,e,i){this.assetData=e.getAssetData(t.refId),this.initElement(t,e,i),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function ISolidElement(t,e,i){this.initElement(t,e,i)}function AudioElement(t,e,i){this.initFrame(),this.initRenderable(),this.assetData=e.getAssetData(t.refId),this.initBaseData(t,e,i),this._isPlaying=!1,this._canPlay=!1;var r=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(r),this._currentTime=0,this.globalData.audioController.addAudio(this),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}function FootageElement(t,e,i){this.initFrame(),this.initRenderable(),this.assetData=e.getAssetData(t.refId),this.footageData=e.imageLoader.getAsset(this.assetData),this.initBaseData(t,e,i)}function SVGCompElement(t,e,i){this.layers=t.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(t,e,i),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}function SVGTextLottieElement(t,e,i){this.textSpans=[],this.renderType="svg",this.initElement(t,e,i)}function SVGShapeElement(t,e,i){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(t,e,i),this.prevViewData=[]}function SVGTintFilter(t,e){this.filterManager=e;var i=createNS("feColorMatrix");if(i.setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","linearRGB"),i.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),i.setAttribute("result","f1"),t.appendChild(i),(i=createNS("feColorMatrix")).setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),i.setAttribute("result","f2"),t.appendChild(i),this.matrixFilter=i,100!==e.effectElements[2].p.v||e.effectElements[2].p.k){var r,n=createNS("feMerge");t.appendChild(n),(r=createNS("feMergeNode")).setAttribute("in","SourceGraphic"),n.appendChild(r),(r=createNS("feMergeNode")).setAttribute("in","f2"),n.appendChild(r)}}function SVGFillFilter(t,e){this.filterManager=e;var i=createNS("feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),t.appendChild(i),this.matrixFilter=i}function SVGGaussianBlurEffect(t,e){t.setAttribute("x","-100%"),t.setAttribute("y","-100%"),t.setAttribute("width","300%"),t.setAttribute("height","300%"),this.filterManager=e;var i=createNS("feGaussianBlur");t.appendChild(i),this.feGaussianBlur=i}function SVGStrokeEffect(t,e){this.initialized=!1,this.filterManager=e,this.elem=t,this.paths=[]}function SVGTritoneFilter(t,e){this.filterManager=e;var i=createNS("feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","linearRGB"),i.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),i.setAttribute("result","f1"),t.appendChild(i);var r=createNS("feComponentTransfer");r.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(r),this.matrixFilter=r;var n=createNS("feFuncR");n.setAttribute("type","table"),r.appendChild(n),this.feFuncR=n;var s=createNS("feFuncG");s.setAttribute("type","table"),r.appendChild(s),this.feFuncG=s;var a=createNS("feFuncB");a.setAttribute("type","table"),r.appendChild(a),this.feFuncB=a}function SVGProLevelsFilter(t,e){this.filterManager=e;var i=this.filterManager.effectElements,r=createNS("feComponentTransfer");(i[10].p.k||0!==i[10].p.v||i[11].p.k||1!==i[11].p.v||i[12].p.k||1!==i[12].p.v||i[13].p.k||0!==i[13].p.v||i[14].p.k||1!==i[14].p.v)&&(this.feFuncR=this.createFeFunc("feFuncR",r)),(i[17].p.k||0!==i[17].p.v||i[18].p.k||1!==i[18].p.v||i[19].p.k||1!==i[19].p.v||i[20].p.k||0!==i[20].p.v||i[21].p.k||1!==i[21].p.v)&&(this.feFuncG=this.createFeFunc("feFuncG",r)),(i[24].p.k||0!==i[24].p.v||i[25].p.k||1!==i[25].p.v||i[26].p.k||1!==i[26].p.v||i[27].p.k||0!==i[27].p.v||i[28].p.k||1!==i[28].p.v)&&(this.feFuncB=this.createFeFunc("feFuncB",r)),(i[31].p.k||0!==i[31].p.v||i[32].p.k||1!==i[32].p.v||i[33].p.k||1!==i[33].p.v||i[34].p.k||0!==i[34].p.v||i[35].p.k||1!==i[35].p.v)&&(this.feFuncA=this.createFeFunc("feFuncA",r)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(r.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(r),r=createNS("feComponentTransfer")),(i[3].p.k||0!==i[3].p.v||i[4].p.k||1!==i[4].p.v||i[5].p.k||1!==i[5].p.v||i[6].p.k||0!==i[6].p.v||i[7].p.k||1!==i[7].p.v)&&(r.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(r),this.feFuncRComposed=this.createFeFunc("feFuncR",r),this.feFuncGComposed=this.createFeFunc("feFuncG",r),this.feFuncBComposed=this.createFeFunc("feFuncB",r))}function SVGDropShadowEffect(t,e){var i=e.container.globalData.renderConfig.filterSize;t.setAttribute("x",i.x),t.setAttribute("y",i.y),t.setAttribute("width",i.width),t.setAttribute("height",i.height),this.filterManager=e;var r=createNS("feGaussianBlur");r.setAttribute("in","SourceAlpha"),r.setAttribute("result","drop_shadow_1"),r.setAttribute("stdDeviation","0"),this.feGaussianBlur=r,t.appendChild(r);var n=createNS("feOffset");n.setAttribute("dx","25"),n.setAttribute("dy","0"),n.setAttribute("in","drop_shadow_1"),n.setAttribute("result","drop_shadow_2"),this.feOffset=n,t.appendChild(n);var s=createNS("feFlood");s.setAttribute("flood-color","#00ff00"),s.setAttribute("flood-opacity","1"),s.setAttribute("result","drop_shadow_3"),this.feFlood=s,t.appendChild(s);var a=createNS("feComposite");a.setAttribute("in","drop_shadow_3"),a.setAttribute("in2","drop_shadow_2"),a.setAttribute("operator","in"),a.setAttribute("result","drop_shadow_4"),t.appendChild(a);var o,h=createNS("feMerge");t.appendChild(h),o=createNS("feMergeNode"),h.appendChild(o),(o=createNS("feMergeNode")).setAttribute("in","SourceGraphic"),this.feMergeNode=o,this.feMerge=h,this.originalNodeAdded=!1,h.appendChild(o)}ShapeTransformManager.prototype={addTransformSequence:function(t){var e,i=t.length,r="_";for(e=0;e<i;e+=1)r+=t[e].transform.key+"_";var n=this.sequences[r];return n||(n={transforms:[].concat(t),finalTransform:new Matrix,_mdf:!1},this.sequences[r]=n,this.sequenceList.push(n)),n},processSequence:function(t,e){for(var i,r=0,n=t.transforms.length,s=e;r<n&&!e;){if(t.transforms[r].transform.mProps._mdf){s=!0;break}r+=1}if(s)for(t.finalTransform.reset(),r=n-1;r>=0;r-=1)i=t.transforms[r].transform.mProps.v.props,t.finalTransform.transform(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],i[9],i[10],i[11],i[12],i[13],i[14],i[15]);t._mdf=s},processSequences:function(t){var e,i=this.sequenceList.length;for(e=0;e<i;e+=1)this.processSequence(this.sequenceList[e],t)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}},CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var t=0,e=this.data.masksProperties.length;t<e;){if("n"!==this.data.masksProperties[t].mode&&!1!==this.data.masksProperties[t].cl)return!0;t+=1}return!1},initExpressions:function(){this.layerInterface=LayerExpressionInterface(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var t=EffectsExpressionInterface.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(t),0===this.data.ty||this.data.xt?this.compInterface=CompExpressionInterface(this):4===this.data.ty?(this.layerInterface.shapeInterface=ShapeExpressionInterface(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):5===this.data.ty&&(this.layerInterface.textInterface=TextExpressionInterface(this),this.layerInterface.text=this.layerInterface.textInterface)},setBlendMode:function(){var t=getBlendMode(this.data.bm);(this.baseElement||this.layerElement).style["mix-blend-mode"]=t},initBaseData:function(t,e,i){this.globalData=e,this.comp=i,this.data=t,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}},NullElement.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var t,e,i,r=null;if(this.data.td){if(3==this.data.td||1==this.data.td){var n=createNS("mask");n.setAttribute("id",this.layerId),n.setAttribute("mask-type",3==this.data.td?"luminance":"alpha"),n.appendChild(this.layerElement),r=n,this.globalData.defs.appendChild(n),featureSupport.maskType||1!=this.data.td||(n.setAttribute("mask-type","luminance"),t=createElementID(),e=filtersFactory.createFilter(t),this.globalData.defs.appendChild(e),e.appendChild(filtersFactory.createAlphaToLuminanceFilter()),(i=createNS("g")).appendChild(this.layerElement),r=i,n.appendChild(i),i.setAttribute("filter","url("+locationHref+"#"+t+")"))}else if(2==this.data.td){var s=createNS("mask");s.setAttribute("id",this.layerId),s.setAttribute("mask-type","alpha");var a=createNS("g");s.appendChild(a),t=createElementID(),e=filtersFactory.createFilter(t);var o=createNS("feComponentTransfer");o.setAttribute("in","SourceGraphic"),e.appendChild(o);var h=createNS("feFuncA");h.setAttribute("type","table"),h.setAttribute("tableValues","1.0 0.0"),o.appendChild(h),this.globalData.defs.appendChild(e);var l=createNS("rect");l.setAttribute("width",this.comp.data.w),l.setAttribute("height",this.comp.data.h),l.setAttribute("x","0"),l.setAttribute("y","0"),l.setAttribute("fill","#ffffff"),l.setAttribute("opacity","0"),a.setAttribute("filter","url("+locationHref+"#"+t+")"),a.appendChild(l),a.appendChild(this.layerElement),r=a,featureSupport.maskType||(s.setAttribute("mask-type","luminance"),e.appendChild(filtersFactory.createAlphaToLuminanceFilter()),i=createNS("g"),a.appendChild(l),i.appendChild(this.layerElement),r=i,a.appendChild(i)),this.globalData.defs.appendChild(s)}}else this.data.tt?(this.matteElement.appendChild(this.layerElement),r=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0===this.data.ty&&!this.data.hd){var c=createNS("clipPath"),d=createNS("path");d.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var p=createElementID();if(c.setAttribute("id",p),c.appendChild(d),this.globalData.defs.appendChild(c),this.checkMasks()){var f=createNS("g");f.setAttribute("clip-path","url("+locationHref+"#"+p+")"),f.appendChild(this.layerElement),this.transformedElement=f,r?r.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+locationHref+"#"+p+")")}0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._matMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.mat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.mProp.o.v)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this)},setMatte:function(t){this.matteElement&&this.matteElement.setAttribute("mask","url("+locationHref+"#"+t+")")}},IShapeElement.prototype={addShapeToModifiers:function(t){var e,i=this.shapeModifiers.length;for(e=0;e<i;e+=1)this.shapeModifiers[e].addShape(t)},isShapeInAnimatedModifiers:function(t){for(var e=this.shapeModifiers.length;0<e;)if(this.shapeModifiers[0].isAnimatedWithShape(t))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var t,e=this.shapes.length;for(t=0;t<e;t+=1)this.shapes[t].sh.reset();for(t=(e=this.shapeModifiers.length)-1;t>=0&&!this.shapeModifiers[t].processShapes(this._isFirstFrame);t-=1);}},searchProcessedElement:function(t){for(var e=this.processedElements,i=0,r=e.length;i<r;){if(e[i].elem===t)return e[i].pos;i+=1}return 0},addProcessedElement:function(t,e){for(var i=this.processedElements,r=i.length;r;)if(i[r-=1].elem===t)return void(i[r].pos=e);i.push(new ProcessedElement(t,e))},prepareFrame:function(t){this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange)}},ITextElement.prototype.initElement=function(t,e,i){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(t,e,i),this.textProperty=new TextProperty(this,t.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(t.t,this.renderType,this),this.initTransform(t,e,i),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(t){this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)},ITextElement.prototype.createPathShape=function(t,e){var i,r,n=e.length,s="";for(i=0;i<n;i+=1)r=e[i].ks.k,s+=buildShapeString(r,r.i.length,!0,t);return s},ITextElement.prototype.updateDocumentData=function(t,e){this.textProperty.updateDocumentData(t,e)},ITextElement.prototype.canResizeFont=function(t){this.textProperty.canResizeFont(t)},ITextElement.prototype.setMinimumFontSize=function(t){this.textProperty.setMinimumFontSize(t)},ITextElement.prototype.applyTextPropertiesToMatrix=function(t,e,i,r,n){switch(t.ps&&e.translate(t.ps[0],t.ps[1]+t.ascent,0),e.translate(0,-t.ls,0),t.j){case 1:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[i]),0,0);break;case 2:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[i])/2,0,0)}e.translate(r,n,0)},ITextElement.prototype.buildColor=function(t){return"rgb("+Math.round(255*t[0])+","+Math.round(255*t[1])+","+Math.round(255*t[2])+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(t,e,i){this.initFrame(),this.initBaseData(t,e,i),this.initTransform(t,e,i),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),!this.data.xt&&e.progressiveLoad||this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(t){if(this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),this.isInRange||this.data.xt){if(this.tm._placeholder)this.renderedFrame=t/this.data.sr;else{var e=this.tm.v;e===this.data.op&&(e=this.data.op-1),this.renderedFrame=e}var i,r=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),i=r-1;i>=0;i-=1)(this.completeLayers||this.elements[i])&&(this.elements[i].prepareFrame(this.renderedFrame-this.layers[i].st),this.elements[i]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()},ICompElement.prototype.setElements=function(t){this.elements=t},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var t=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect},extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var t=createNS("rect");t.setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.layerElement.appendChild(t)},AudioElement.prototype.prepareFrame=function(t){if(this.prepareRenderableFrame(t,!0),this.prepareProperties(t,!0),this.tm._placeholder)this._currentTime=t/this.data.sr;else{var e=this.tm.v;this._currentTime=e}},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(t){this.audio.rate(t)},AudioElement.prototype.volume=function(t){this.audio.volume(t)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){},FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){this.layerInterface=FootageInterface(this)},FootageElement.prototype.getFootageData=function(){return this.footageData},extendPrototype([SVGRenderer,ICompElement,SVGBaseElement],SVGCompElement),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(t){for(var e=0,i=t.length,r=[],n="";e<i;)t[e]===String.fromCharCode(13)||t[e]===String.fromCharCode(3)?(r.push(n),n=""):n+=t[e],e+=1;return r.push(n),r},SVGTextLottieElement.prototype.buildNewText=function(){var t,e,i=this.textProperty.currentData;this.renderedLetters=createSizedArray(i?i.l.length:0),i.fc?this.layerElement.setAttribute("fill",this.buildColor(i.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),i.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(i.sc)),this.layerElement.setAttribute("stroke-width",i.sw)),this.layerElement.setAttribute("font-size",i.finalSize);var r=this.globalData.fontManager.getFontByName(i.f);if(r.fClass)this.layerElement.setAttribute("class",r.fClass);else{this.layerElement.setAttribute("font-family",r.fFamily);var n=i.fWeight,s=i.fStyle;this.layerElement.setAttribute("font-style",s),this.layerElement.setAttribute("font-weight",n)}this.layerElement.setAttribute("aria-label",i.t);var a,o=i.l||[],h=!!this.globalData.fontManager.chars;e=o.length;var l,c=this.mHelper,d="",p=this.data.singleShape,f=0,u=0,m=!0,g=.001*i.tr*i.finalSize;if(!p||h||i.sz){var y,v,b=this.textSpans.length;for(t=0;t<e;t+=1)h&&p&&0!==t||(a=b>t?this.textSpans[t]:createNS(h?"path":"text"),b<=t&&(a.setAttribute("stroke-linecap","butt"),a.setAttribute("stroke-linejoin","round"),a.setAttribute("stroke-miterlimit","4"),this.textSpans[t]=a,this.layerElement.appendChild(a)),a.style.display="inherit"),c.reset(),c.scale(i.finalSize/100,i.finalSize/100),p&&(o[t].n&&(f=-g,u+=i.yOffset,u+=m?1:0,m=!1),this.applyTextPropertiesToMatrix(i,c,o[t].line,f,u),f+=o[t].l||0,f+=g),h?(l=(y=(v=this.globalData.fontManager.getCharData(i.finalText[t],r.fStyle,this.globalData.fontManager.getFontByName(i.f).fFamily))&&v.data||{}).shapes?y.shapes[0].it:[],p?d+=this.createPathShape(c,l):a.setAttribute("d",this.createPathShape(c,l))):(p&&a.setAttribute("transform","translate("+c.props[12]+","+c.props[13]+")"),a.textContent=o[t].val,a.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"));p&&a&&a.setAttribute("d",d)}else{var _=this.textContainer,x="start";switch(i.j){case 1:x="end";break;case 2:x="middle";break;default:x="start"}_.setAttribute("text-anchor",x),_.setAttribute("letter-spacing",g);var S=this.buildTextContents(i.finalText);for(e=S.length,u=i.ps?i.ps[1]+i.ascent:0,t=0;t<e;t+=1)(a=this.textSpans[t]||createNS("tspan")).textContent=S[t],a.setAttribute("x",0),a.setAttribute("y",u),a.style.display="inherit",_.appendChild(a),this.textSpans[t]=a,u+=i.finalLineHeight;this.layerElement.appendChild(_)}for(;t<this.textSpans.length;)this.textSpans[t].style.display="none",t+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var t=this.layerElement.getBBox();this.bbox={top:t.y,left:t.x,width:t.width,height:t.height}}return this.bbox},SVGTextLottieElement.prototype.renderInnerContent=function(){if(!this.data.singleShape&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){var t,e;this._sizeChanged=!0;var i,r,n=this.textAnimator.renderedLetters,s=this.textProperty.currentData.l;for(e=s.length,t=0;t<e;t+=1)s[t].n||(i=n[t],r=this.textSpans[t],i._mdf.m&&r.setAttribute("transform",i.m),i._mdf.o&&r.setAttribute("opacity",i.o),i._mdf.sw&&r.setAttribute("stroke-width",i.sw),i._mdf.sc&&r.setAttribute("stroke",i.sc),i._mdf.fc&&r.setAttribute("fill",i.fc))}},extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var t,e,i,r,n=this.shapes.length,s=this.stylesList.length,a=[],o=!1;for(i=0;i<s;i+=1){for(r=this.stylesList[i],o=!1,a.length=0,t=0;t<n;t+=1)-1!==(e=this.shapes[t]).styles.indexOf(r)&&(a.push(e),o=e._isAnimated||o);a.length>1&&o&&this.setShapesAsAnimated(a)}},SVGShapeElement.prototype.setShapesAsAnimated=function(t){var e,i=t.length;for(e=0;e<i;e+=1)t[e].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(t,e){var i,r=new SVGStyleData(t,e),n=r.pElem;return"st"===t.ty?i=new SVGStrokeStyleData(this,t,r):"fl"===t.ty?i=new SVGFillStyleData(this,t,r):"gf"!==t.ty&&"gs"!==t.ty||(i=new("gf"===t.ty?SVGGradientFillStyleData:SVGGradientStrokeStyleData)(this,t,r),this.globalData.defs.appendChild(i.gf),i.maskId&&(this.globalData.defs.appendChild(i.ms),this.globalData.defs.appendChild(i.of),n.setAttribute("mask","url("+locationHref+"#"+i.maskId+")"))),"st"!==t.ty&&"gs"!==t.ty||(n.setAttribute("stroke-linecap",lineCapEnum[t.lc||2]),n.setAttribute("stroke-linejoin",lineJoinEnum[t.lj||2]),n.setAttribute("fill-opacity","0"),1===t.lj&&n.setAttribute("stroke-miterlimit",t.ml)),2===t.r&&n.setAttribute("fill-rule","evenodd"),t.ln&&n.setAttribute("id",t.ln),t.cl&&n.setAttribute("class",t.cl),t.bm&&(n.style["mix-blend-mode"]=getBlendMode(t.bm)),this.stylesList.push(r),this.addToAnimatedContents(t,i),i},SVGShapeElement.prototype.createGroupElement=function(t){var e=new ShapeGroupData;return t.ln&&e.gr.setAttribute("id",t.ln),t.cl&&e.gr.setAttribute("class",t.cl),t.bm&&(e.gr.style["mix-blend-mode"]=getBlendMode(t.bm)),e},SVGShapeElement.prototype.createTransformElement=function(t,e){var i=TransformPropertyFactory.getTransformProperty(this,t,this),r=new SVGTransformData(i,i.o,e);return this.addToAnimatedContents(t,r),r},SVGShapeElement.prototype.createShapeElement=function(t,e,i){var r=4;"rc"===t.ty?r=5:"el"===t.ty?r=6:"sr"===t.ty&&(r=7);var n=new SVGShapeData(e,i,ShapePropertyFactory.getShapeProp(this,t,r,this));return this.shapes.push(n),this.addShapeToModifiers(n),this.addToAnimatedContents(t,n),n},SVGShapeElement.prototype.addToAnimatedContents=function(t,e){for(var i=0,r=this.animatedContents.length;i<r;){if(this.animatedContents[i].element===e)return;i+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(t),element:e,data:t})},SVGShapeElement.prototype.setElementStyles=function(t){var e,i=t.styles,r=this.stylesList.length;for(e=0;e<r;e+=1)this.stylesList[e].closed||i.push(this.stylesList[e])},SVGShapeElement.prototype.reloadShapes=function(){var t;this._isFirstFrame=!0;var e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(t,e,i,r,n,s,a){var o,h,l,c,d,p,f=[].concat(s),u=t.length-1,m=[],g=[];for(o=u;o>=0;o-=1){if((p=this.searchProcessedElement(t[o]))?e[o]=i[p-1]:t[o]._render=a,"fl"===t[o].ty||"st"===t[o].ty||"gf"===t[o].ty||"gs"===t[o].ty)p?e[o].style.closed=!1:e[o]=this.createStyleElement(t[o],n),t[o]._render&&e[o].style.pElem.parentNode!==r&&r.appendChild(e[o].style.pElem),m.push(e[o].style);else if("gr"===t[o].ty){if(p)for(l=e[o].it.length,h=0;h<l;h+=1)e[o].prevViewData[h]=e[o].it[h];else e[o]=this.createGroupElement(t[o]);this.searchShapes(t[o].it,e[o].it,e[o].prevViewData,e[o].gr,n+1,f,a),t[o]._render&&e[o].gr.parentNode!==r&&r.appendChild(e[o].gr)}else"tr"===t[o].ty?(p||(e[o]=this.createTransformElement(t[o],r)),c=e[o].transform,f.push(c)):"sh"===t[o].ty||"rc"===t[o].ty||"el"===t[o].ty||"sr"===t[o].ty?(p||(e[o]=this.createShapeElement(t[o],f,n)),this.setElementStyles(e[o])):"tm"===t[o].ty||"rd"===t[o].ty||"ms"===t[o].ty||"pb"===t[o].ty?(p?(d=e[o]).closed=!1:((d=ShapeModifiers.getModifier(t[o].ty)).init(this,t[o]),e[o]=d,this.shapeModifiers.push(d)),g.push(d)):"rp"===t[o].ty&&(p?(d=e[o]).closed=!0:(d=ShapeModifiers.getModifier(t[o].ty),e[o]=d,d.init(this,t,o,e),this.shapeModifiers.push(d),a=!1),g.push(d));this.addProcessedElement(t[o],o+1)}for(u=m.length,o=0;o<u;o+=1)m[o].closed=!0;for(u=g.length,o=0;o<u;o+=1)g[o].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){var t;this.renderModifiers();var e=this.stylesList.length;for(t=0;t<e;t+=1)this.stylesList[t].reset();for(this.renderShape(),t=0;t<e;t+=1)(this.stylesList[t]._mdf||this._isFirstFrame)&&(this.stylesList[t].msElem&&(this.stylesList[t].msElem.setAttribute("d",this.stylesList[t].d),this.stylesList[t].d="M0 0"+this.stylesList[t].d),this.stylesList[t].pElem.setAttribute("d",this.stylesList[t].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var t,e,i=this.animatedContents.length;for(t=0;t<i;t+=1)e=this.animatedContents[t],(this._isFirstFrame||e.element._isAnimated)&&!0!==e.data&&e.fn(e.data,e.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},SVGTintFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,i=this.filterManager.effectElements[1].p.v,r=this.filterManager.effectElements[2].p.v/100;this.matrixFilter.setAttribute("values",i[0]-e[0]+" 0 0 0 "+e[0]+" "+(i[1]-e[1])+" 0 0 0 "+e[1]+" "+(i[2]-e[2])+" 0 0 0 "+e[2]+" 0 0 0 "+r+" 0")}},SVGFillFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[2].p.v,i=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+e[0]+" 0 0 0 0 "+e[1]+" 0 0 0 0 "+e[2]+" 0 0 0 "+i+" 0")}},SVGGaussianBlurEffect.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=.3*this.filterManager.effectElements[0].p.v,i=this.filterManager.effectElements[1].p.v,r=3==i?0:e,n=2==i?0:e;this.feGaussianBlur.setAttribute("stdDeviation",r+" "+n);var s=1==this.filterManager.effectElements[2].p.v?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",s)}},SVGStrokeEffect.prototype.initialize=function(){var t,e,i,r,n=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(1===this.filterManager.effectElements[1].p.v?(r=this.elem.maskManager.masksProperties.length,i=0):r=1+(i=this.filterManager.effectElements[0].p.v-1),(e=createNS("g")).setAttribute("fill","none"),e.setAttribute("stroke-linecap","round"),e.setAttribute("stroke-dashoffset",1);i<r;i+=1)t=createNS("path"),e.appendChild(t),this.paths.push({p:t,m:i});if(3===this.filterManager.effectElements[10].p.v){var s=createNS("mask"),a=createElementID();s.setAttribute("id",a),s.setAttribute("mask-type","alpha"),s.appendChild(e),this.elem.globalData.defs.appendChild(s);var o=createNS("g");for(o.setAttribute("mask","url("+locationHref+"#"+a+")");n[0];)o.appendChild(n[0]);this.elem.layerElement.appendChild(o),this.masker=s,e.setAttribute("stroke","#fff")}else if(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v){if(2===this.filterManager.effectElements[10].p.v)for(n=this.elem.layerElement.children||this.elem.layerElement.childNodes;n.length;)this.elem.layerElement.removeChild(n[0]);this.elem.layerElement.appendChild(e),this.elem.layerElement.removeAttribute("mask"),e.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=e},SVGStrokeEffect.prototype.renderFrame=function(t){var e;this.initialized||this.initialize();var i,r,n=this.paths.length;for(e=0;e<n;e+=1)if(-1!==this.paths[e].m&&(i=this.elem.maskManager.viewData[this.paths[e].m],r=this.paths[e].p,(t||this.filterManager._mdf||i.prop._mdf)&&r.setAttribute("d",i.lastPath),t||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||i.prop._mdf)){var s;if(0!==this.filterManager.effectElements[7].p.v||100!==this.filterManager.effectElements[8].p.v){var a=.01*Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),o=.01*Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),h=r.getTotalLength();s="0 0 0 "+h*a+" ";var l,c=h*(o-a),d=1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01,p=Math.floor(c/d);for(l=0;l<p;l+=1)s+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01+" ";s+="0 "+10*h+" 0 0"}else s="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01;r.setAttribute("stroke-dasharray",s)}if((t||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(t||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v)&&(t||this.filterManager.effectElements[3].p._mdf)){var f=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(255*f[0])+","+bmFloor(255*f[1])+","+bmFloor(255*f[2])+")")}},SVGTritoneFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,i=this.filterManager.effectElements[1].p.v,r=this.filterManager.effectElements[2].p.v,n=r[0]+" "+i[0]+" "+e[0],s=r[1]+" "+i[1]+" "+e[1],a=r[2]+" "+i[2]+" "+e[2];this.feFuncR.setAttribute("tableValues",n),this.feFuncG.setAttribute("tableValues",s),this.feFuncB.setAttribute("tableValues",a)}},SVGProLevelsFilter.prototype.createFeFunc=function(t,e){var i=createNS(t);return i.setAttribute("type","table"),e.appendChild(i),i},SVGProLevelsFilter.prototype.getTableValue=function(t,e,i,r,n){for(var s,a,o=0,h=Math.min(t,e),l=Math.max(t,e),c=Array.call(null,{length:256}),d=0,p=n-r,f=e-t;o<=256;)a=(s=o/256)<=h?f<0?n:r:s>=l?f<0?r:n:r+p*Math.pow((s-t)/f,1/i),c[d]=a,d+=1,o+=256/255;return c.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e,i=this.filterManager.effectElements;this.feFuncRComposed&&(t||i[3].p._mdf||i[4].p._mdf||i[5].p._mdf||i[6].p._mdf||i[7].p._mdf)&&(e=this.getTableValue(i[3].p.v,i[4].p.v,i[5].p.v,i[6].p.v,i[7].p.v),this.feFuncRComposed.setAttribute("tableValues",e),this.feFuncGComposed.setAttribute("tableValues",e),this.feFuncBComposed.setAttribute("tableValues",e)),this.feFuncR&&(t||i[10].p._mdf||i[11].p._mdf||i[12].p._mdf||i[13].p._mdf||i[14].p._mdf)&&(e=this.getTableValue(i[10].p.v,i[11].p.v,i[12].p.v,i[13].p.v,i[14].p.v),this.feFuncR.setAttribute("tableValues",e)),this.feFuncG&&(t||i[17].p._mdf||i[18].p._mdf||i[19].p._mdf||i[20].p._mdf||i[21].p._mdf)&&(e=this.getTableValue(i[17].p.v,i[18].p.v,i[19].p.v,i[20].p.v,i[21].p.v),this.feFuncG.setAttribute("tableValues",e)),this.feFuncB&&(t||i[24].p._mdf||i[25].p._mdf||i[26].p._mdf||i[27].p._mdf||i[28].p._mdf)&&(e=this.getTableValue(i[24].p.v,i[25].p.v,i[26].p.v,i[27].p.v,i[28].p.v),this.feFuncB.setAttribute("tableValues",e)),this.feFuncA&&(t||i[31].p._mdf||i[32].p._mdf||i[33].p._mdf||i[34].p._mdf||i[35].p._mdf)&&(e=this.getTableValue(i[31].p.v,i[32].p.v,i[33].p.v,i[34].p.v,i[35].p.v),this.feFuncA.setAttribute("tableValues",e))}},SVGDropShadowEffect.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){if((t||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),t||this.filterManager.effectElements[0].p._mdf){var e=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*e[0]),Math.round(255*e[1]),Math.round(255*e[2])))}if((t||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),t||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var i=this.filterManager.effectElements[3].p.v,r=(this.filterManager.effectElements[2].p.v-90)*degToRads,n=i*Math.cos(r),s=i*Math.sin(r);this.feOffset.setAttribute("dx",n),this.feOffset.setAttribute("dy",s)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(t,e,i){this.initialized=!1,this.filterManager=e,this.filterElem=t,this.elem=i,i.matteElement=createNS("g"),i.matteElement.appendChild(i.layerElement),i.matteElement.appendChild(i.transformedElement),i.baseElement=i.matteElement}function SVGEffects(t){var e,i,r=t.data.ef?t.data.ef.length:0,n=createElementID(),s=filtersFactory.createFilter(n,!0),a=0;for(this.filters=[],e=0;e<r;e+=1)i=null,20===t.data.ef[e].ty?(a+=1,i=new SVGTintFilter(s,t.effectsManager.effectElements[e])):21===t.data.ef[e].ty?(a+=1,i=new SVGFillFilter(s,t.effectsManager.effectElements[e])):22===t.data.ef[e].ty?i=new SVGStrokeEffect(t,t.effectsManager.effectElements[e]):23===t.data.ef[e].ty?(a+=1,i=new SVGTritoneFilter(s,t.effectsManager.effectElements[e])):24===t.data.ef[e].ty?(a+=1,i=new SVGProLevelsFilter(s,t.effectsManager.effectElements[e])):25===t.data.ef[e].ty?(a+=1,i=new SVGDropShadowEffect(s,t.effectsManager.effectElements[e])):28===t.data.ef[e].ty?i=new SVGMatte3Effect(s,t.effectsManager.effectElements[e],t):29===t.data.ef[e].ty&&(a+=1,i=new SVGGaussianBlurEffect(s,t.effectsManager.effectElements[e])),i&&this.filters.push(i);a&&(t.globalData.defs.appendChild(s),t.layerElement.setAttribute("filter","url("+locationHref+"#"+n+")")),this.filters.length&&t.addRenderableComponent(this)}function CVContextData(){var t;for(this.saved=[],this.cArrPos=0,this.cTr=new Matrix,this.cO=1,this.savedOp=createTypedArray("float32",15),t=0;t<15;t+=1)this.saved[t]=createTypedArray("float32",16);this._length=15}function CVBaseElement(){}function CVImageElement(t,e,i){this.assetData=e.getAssetData(t.refId),this.img=e.imageLoader.getAsset(this.assetData),this.initElement(t,e,i)}function CVCompElement(t,e,i){this.completeLayers=!1,this.layers=t.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(t,e,i),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}function CVMaskElement(t,e){var i;this.data=t,this.element=e,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var r=this.masksProperties.length,n=!1;for(i=0;i<r;i+=1)"n"!==this.masksProperties[i].mode&&(n=!0),this.viewData[i]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[i],3);this.hasMasks=n,n&&this.element.addRenderableComponent(this)}function CVShapeElement(t,e,i){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(t,e,i)}function CVSolidElement(t,e,i){this.initElement(t,e,i)}function CVTextElement(t,e,i){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(t,e,i)}function CVEffects(){}function HBaseElement(){}function HSolidElement(t,e,i){this.initElement(t,e,i)}function HCompElement(t,e,i){this.layers=t.layers,this.supports3d=!t.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(t,e,i),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}function HShapeElement(t,e,i){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(t,e,i),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(t,e,i){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(t,e,i)}function HImageElement(t,e,i){this.assetData=e.getAssetData(t.refId),this.initElement(t,e,i)}function HCameraElement(t,e,i){this.initFrame(),this.initBaseData(t,e,i),this.initHierarchy();var r=PropertyFactory.getProp;if(this.pe=r(this,t.pe,0,0,this),t.ks.p.s?(this.px=r(this,t.ks.p.x,1,0,this),this.py=r(this,t.ks.p.y,1,0,this),this.pz=r(this,t.ks.p.z,1,0,this)):this.p=r(this,t.ks.p,1,0,this),t.ks.a&&(this.a=r(this,t.ks.a,1,0,this)),t.ks.or.k.length&&t.ks.or.k[0].to){var n,s=t.ks.or.k.length;for(n=0;n<s;n+=1)t.ks.or.k[n].to=null,t.ks.or.k[n].ti=null}this.or=r(this,t.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=r(this,t.ks.rx,0,degToRads,this),this.ry=r(this,t.ks.ry,0,degToRads,this),this.rz=r(this,t.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}function HEffects(){}SVGMatte3Effect.prototype.findSymbol=function(t){for(var e=0,i=_svgMatteSymbols.length;e<i;){if(_svgMatteSymbols[e]===t)return _svgMatteSymbols[e];e+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(t,e){var i=t.layerElement.parentNode;if(i){for(var r,n=i.children,s=0,a=n.length;s<a&&n[s]!==t.layerElement;)s+=1;s<=a-2&&(r=n[s+1]);var o=createNS("use");o.setAttribute("href","#"+e),r?i.insertBefore(o,r):i.appendChild(o)}},SVGMatte3Effect.prototype.setElementAsMask=function(t,e){if(!this.findSymbol(e)){var i=createElementID(),r=createNS("mask");r.setAttribute("id",e.layerId),r.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(e);var n=t.globalData.defs;n.appendChild(r);var s=createNS("symbol");s.setAttribute("id",i),this.replaceInParent(e,i),s.appendChild(e.layerElement),n.appendChild(s);var a=createNS("use");a.setAttribute("href","#"+i),r.appendChild(a),e.data.hd=!1,e.show()}t.setMatte(e.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var t=this.filterManager.effectElements[0].p.v,e=this.elem.comp.elements,i=0,r=e.length;i<r;)e[i]&&e[i].data.ind===t&&this.setElementAsMask(this.elem,e[i]),i+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGEffects.prototype.renderFrame=function(t){var e,i=this.filters.length;for(e=0;e<i;e+=1)this.filters[e].renderFrame(t)},CVContextData.prototype.duplicate=function(){var t=2*this._length,e=this.savedOp;this.savedOp=createTypedArray("float32",t),this.savedOp.set(e);var i=0;for(i=this._length;i<t;i+=1)this.saved[i]=createTypedArray("float32",16);this._length=t},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.cO=1},CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){this.canvasContext=this.globalData.canvasContext,this.renderableEffectsManager=new CVEffects(this)},createContent:function(){},setBlendMode:function(){var t=this.globalData;if(t.blendMode!==this.data.bm){t.blendMode=this.data.bm;var e=getBlendMode(this.data.bm);t.canvasContext.globalCompositeOperation=e}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this)},hideElement:function(){this.hidden||this.isInRange&&!this.isTransparent||(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},renderFrame:function(){if(!this.hidden&&!this.data.hd){this.renderTransform(),this.renderRenderable(),this.setBlendMode();var t=0===this.data.ty;this.globalData.renderer.save(t),this.globalData.renderer.ctxTransform(this.finalTransform.mat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v),this.renderInnerContent(),this.globalData.renderer.restore(t),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var t=createTag("canvas");t.width=this.assetData.w,t.height=this.assetData.h;var e,i,r=t.getContext("2d"),n=this.img.width,s=this.img.height,a=n/s,o=this.assetData.w/this.assetData.h,h=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;a>o&&"xMidYMid slice"===h||a<o&&"xMidYMid slice"!==h?e=(i=s)*o:i=(e=n)/o,r.drawImage(this.img,(n-e)/2,(s-i)/2,e,i,0,0,this.assetData.w,this.assetData.h),this.img=t}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([CanvasRenderer,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var t,e=this.canvasContext;for(e.beginPath(),e.moveTo(0,0),e.lineTo(this.data.w,0),e.lineTo(this.data.w,this.data.h),e.lineTo(0,this.data.h),e.lineTo(0,0),e.clip(),t=this.layers.length-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()},CVCompElement.prototype.destroy=function(){var t;for(t=this.layers.length-1;t>=0;t-=1)this.elements[t]&&this.elements[t].destroy();this.layers=null,this.elements=null},CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var t,e,i,r,n=this.element.finalTransform.mat,s=this.element.canvasContext,a=this.masksProperties.length;for(s.beginPath(),t=0;t<a;t+=1)if("n"!==this.masksProperties[t].mode){var o;this.masksProperties[t].inv&&(s.moveTo(0,0),s.lineTo(this.element.globalData.compSize.w,0),s.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),s.lineTo(0,this.element.globalData.compSize.h),s.lineTo(0,0)),r=this.viewData[t].v,e=n.applyToPointArray(r.v[0][0],r.v[0][1],0),s.moveTo(e[0],e[1]);var h=r._length;for(o=1;o<h;o+=1)i=n.applyToTriplePoints(r.o[o-1],r.i[o],r.v[o]),s.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5]);i=n.applyToTriplePoints(r.o[o-1],r.i[0],r.v[0]),s.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5])}this.element.globalData.renderer.save(!0),s.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(t,e){var i={data:t,type:t.ty,preTransforms:this.transformsManager.addTransformSequence(e),transforms:[],elements:[],closed:!0===t.hd},r={};if("fl"===t.ty||"st"===t.ty?(r.c=PropertyFactory.getProp(this,t.c,1,255,this),r.c.k||(i.co="rgb("+bmFloor(r.c.v[0])+","+bmFloor(r.c.v[1])+","+bmFloor(r.c.v[2])+")")):"gf"!==t.ty&&"gs"!==t.ty||(r.s=PropertyFactory.getProp(this,t.s,1,null,this),r.e=PropertyFactory.getProp(this,t.e,1,null,this),r.h=PropertyFactory.getProp(this,t.h||{k:0},0,.01,this),r.a=PropertyFactory.getProp(this,t.a||{k:0},0,degToRads,this),r.g=new GradientProperty(this,t.g,this)),r.o=PropertyFactory.getProp(this,t.o,0,.01,this),"st"===t.ty||"gs"===t.ty){if(i.lc=lineCapEnum[t.lc||2],i.lj=lineJoinEnum[t.lj||2],1==t.lj&&(i.ml=t.ml),r.w=PropertyFactory.getProp(this,t.w,0,null,this),r.w.k||(i.wi=r.w.v),t.d){var n=new DashProperty(this,t.d,"canvas",this);r.d=n,r.d.k||(i.da=r.d.dashArray,i.do=r.d.dashoffset[0])}}else i.r=2===t.r?"evenodd":"nonzero";return this.stylesList.push(i),r.style=i,r},CVShapeElement.prototype.createGroupElement=function(){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(t){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,t.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,t,this)}}},CVShapeElement.prototype.createShapeElement=function(t){var e=new CVShapeData(this,t,this.stylesList,this.transformsManager);return this.shapes.push(e),this.addShapeToModifiers(e),e},CVShapeElement.prototype.reloadShapes=function(){var t;this._isFirstFrame=!0;var e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(t){var e,i=this.stylesList.length;for(e=0;e<i;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.push(t)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var t,e=this.stylesList.length;for(t=0;t<e;t+=1)this.stylesList[t].closed||this.stylesList[t].transforms.pop()},CVShapeElement.prototype.closeStyles=function(t){var e,i=t.length;for(e=0;e<i;e+=1)t[e].closed=!0},CVShapeElement.prototype.searchShapes=function(t,e,i,r,n){var s,a,o,h,l,c,d=t.length-1,p=[],f=[],u=[].concat(n);for(s=d;s>=0;s-=1){if((h=this.searchProcessedElement(t[s]))?e[s]=i[h-1]:t[s]._shouldRender=r,"fl"===t[s].ty||"st"===t[s].ty||"gf"===t[s].ty||"gs"===t[s].ty)h?e[s].style.closed=!1:e[s]=this.createStyleElement(t[s],u),p.push(e[s].style);else if("gr"===t[s].ty){if(h)for(o=e[s].it.length,a=0;a<o;a+=1)e[s].prevViewData[a]=e[s].it[a];else e[s]=this.createGroupElement(t[s]);this.searchShapes(t[s].it,e[s].it,e[s].prevViewData,r,u)}else"tr"===t[s].ty?(h||(c=this.createTransformElement(t[s]),e[s]=c),u.push(e[s]),this.addTransformToStyleList(e[s])):"sh"===t[s].ty||"rc"===t[s].ty||"el"===t[s].ty||"sr"===t[s].ty?h||(e[s]=this.createShapeElement(t[s])):"tm"===t[s].ty||"rd"===t[s].ty||"pb"===t[s].ty?(h?(l=e[s]).closed=!1:((l=ShapeModifiers.getModifier(t[s].ty)).init(this,t[s]),e[s]=l,this.shapeModifiers.push(l)),f.push(l)):"rp"===t[s].ty&&(h?(l=e[s]).closed=!0:(l=ShapeModifiers.getModifier(t[s].ty),e[s]=l,l.init(this,t,s,e),this.shapeModifiers.push(l),r=!1),f.push(l));this.addProcessedElement(t[s],s+1)}for(this.removeTransformFromStyleList(),this.closeStyles(p),d=f.length,s=0;s<d;s+=1)f[s].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(t,e){(t._opMdf||e.op._mdf||this._isFirstFrame)&&(e.opacity=t.opacity,e.opacity*=e.op.v,e._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var t,e,i,r,n,s,a,o,h,l=this.stylesList.length,c=this.globalData.renderer,d=this.globalData.canvasContext;for(t=0;t<l;t+=1)if(("st"!==(o=(h=this.stylesList[t]).type)&&"gs"!==o||0!==h.wi)&&h.data._shouldRender&&0!==h.coOp&&0!==this.globalData.currentGlobalAlpha){for(c.save(),s=h.elements,"st"===o||"gs"===o?(d.strokeStyle="st"===o?h.co:h.grd,d.lineWidth=h.wi,d.lineCap=h.lc,d.lineJoin=h.lj,d.miterLimit=h.ml||0):d.fillStyle="fl"===o?h.co:h.grd,c.ctxOpacity(h.coOp),"st"!==o&&"gs"!==o&&d.beginPath(),c.ctxTransform(h.preTransforms.finalTransform.props),i=s.length,e=0;e<i;e+=1){for("st"!==o&&"gs"!==o||(d.beginPath(),h.da&&(d.setLineDash(h.da),d.lineDashOffset=h.do)),n=(a=s[e].trNodes).length,r=0;r<n;r+=1)"m"===a[r].t?d.moveTo(a[r].p[0],a[r].p[1]):"c"===a[r].t?d.bezierCurveTo(a[r].pts[0],a[r].pts[1],a[r].pts[2],a[r].pts[3],a[r].pts[4],a[r].pts[5]):d.closePath();"st"!==o&&"gs"!==o||(d.stroke(),h.da&&d.setLineDash(this.dashResetter))}"st"!==o&&"gs"!==o&&d.fill(h.r),c.restore()}},CVShapeElement.prototype.renderShape=function(t,e,i,r){var n,s;for(s=t,n=e.length-1;n>=0;n-=1)"tr"===e[n].ty?(s=i[n].transform,this.renderShapeTransform(t,s)):"sh"===e[n].ty||"el"===e[n].ty||"rc"===e[n].ty||"sr"===e[n].ty?this.renderPath(e[n],i[n]):"fl"===e[n].ty?this.renderFill(e[n],i[n],s):"st"===e[n].ty?this.renderStroke(e[n],i[n],s):"gf"===e[n].ty||"gs"===e[n].ty?this.renderGradientFill(e[n],i[n],s):"gr"===e[n].ty?this.renderShape(s,e[n].it,i[n].it):e[n].ty;r&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(t,e){if(this._isFirstFrame||e._mdf||t.transforms._mdf){var i,r,n,s=t.trNodes,a=e.paths,o=a._length;s.length=0;var h=t.transforms.finalTransform;for(n=0;n<o;n+=1){var l=a.shapes[n];if(l&&l.v){for(r=l._length,i=1;i<r;i+=1)1===i&&s.push({t:"m",p:h.applyToPointArray(l.v[0][0],l.v[0][1],0)}),s.push({t:"c",pts:h.applyToTriplePoints(l.o[i-1],l.i[i],l.v[i])});1===r&&s.push({t:"m",p:h.applyToPointArray(l.v[0][0],l.v[0][1],0)}),l.c&&r&&(s.push({t:"c",pts:h.applyToTriplePoints(l.o[i-1],l.i[0],l.v[0])}),s.push({t:"z"}))}}t.trNodes=s}},CVShapeElement.prototype.renderPath=function(t,e){if(!0!==t.hd&&t._shouldRender){var i,r=e.styledShapes.length;for(i=0;i<r;i+=1)this.renderStyledShape(e.styledShapes[i],e.sh)}},CVShapeElement.prototype.renderFill=function(t,e,i){var r=e.style;(e.c._mdf||this._isFirstFrame)&&(r.co="rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||i._opMdf||this._isFirstFrame)&&(r.coOp=e.o.v*i.opacity)},CVShapeElement.prototype.renderGradientFill=function(t,e,i){var r,n=e.style;if(!n.grd||e.g._mdf||e.s._mdf||e.e._mdf||1!==t.t&&(e.h._mdf||e.a._mdf)){var s,a=this.globalData.canvasContext,o=e.s.v,h=e.e.v;if(1===t.t)r=a.createLinearGradient(o[0],o[1],h[0],h[1]);else{var l=Math.sqrt(Math.pow(o[0]-h[0],2)+Math.pow(o[1]-h[1],2)),c=Math.atan2(h[1]-o[1],h[0]-o[0]),d=e.h.v;d>=1?d=.99:d<=-1&&(d=-.99);var p=l*d,f=Math.cos(c+e.a.v)*p+o[0],u=Math.sin(c+e.a.v)*p+o[1];r=a.createRadialGradient(f,u,0,o[0],o[1],l)}var m=t.g.p,g=e.g.c,y=1;for(s=0;s<m;s+=1)e.g._hasOpacity&&e.g._collapsable&&(y=e.g.o[2*s+1]),r.addColorStop(g[4*s]/100,"rgba("+g[4*s+1]+","+g[4*s+2]+","+g[4*s+3]+","+y+")");n.grd=r}n.coOp=e.o.v*i.opacity},CVShapeElement.prototype.renderStroke=function(t,e,i){var r=e.style,n=e.d;n&&(n._mdf||this._isFirstFrame)&&(r.da=n.dashArray,r.do=n.dashoffset[0]),(e.c._mdf||this._isFirstFrame)&&(r.co="rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||i._opMdf||this._isFirstFrame)&&(r.coOp=e.o.v*i.opacity),(e.w._mdf||this._isFirstFrame)&&(r.wi=e.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){var t=this.canvasContext;t.fillStyle=this.data.sc,t.fillRect(0,0,this.data.sw,this.data.sh)},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t.l?t.l.length:0);var e=!1;t.fc?(e=!0,this.values.fill=this.buildColor(t.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=e;var i=!1;t.sc&&(i=!0,this.values.stroke=this.buildColor(t.sc),this.values.sWidth=t.sw);var r,n,s,a,o,h,l,c,d,p,f,u,m=this.globalData.fontManager.getFontByName(t.f),g=t.l,y=this.mHelper;this.stroke=i,this.values.fValue=t.finalSize+"px "+this.globalData.fontManager.getFontByName(t.f).fFamily,n=t.finalText.length;var v=this.data.singleShape,b=.001*t.tr*t.finalSize,_=0,x=0,S=!0,P=0;for(r=0;r<n;r+=1){for(a=(s=this.globalData.fontManager.getCharData(t.finalText[r],m.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily))&&s.data||{},y.reset(),v&&g[r].n&&(_=-b,x+=t.yOffset,x+=S?1:0,S=!1),d=(l=a.shapes?a.shapes[0].it:[]).length,y.scale(t.finalSize/100,t.finalSize/100),v&&this.applyTextPropertiesToMatrix(t,y,g[r].line,_,x),f=createSizedArray(d),c=0;c<d;c+=1){for(h=l[c].ks.k.i.length,p=l[c].ks.k,u=[],o=1;o<h;o+=1)1===o&&u.push(y.applyToX(p.v[0][0],p.v[0][1],0),y.applyToY(p.v[0][0],p.v[0][1],0)),u.push(y.applyToX(p.o[o-1][0],p.o[o-1][1],0),y.applyToY(p.o[o-1][0],p.o[o-1][1],0),y.applyToX(p.i[o][0],p.i[o][1],0),y.applyToY(p.i[o][0],p.i[o][1],0),y.applyToX(p.v[o][0],p.v[o][1],0),y.applyToY(p.v[o][0],p.v[o][1],0));u.push(y.applyToX(p.o[o-1][0],p.o[o-1][1],0),y.applyToY(p.o[o-1][0],p.o[o-1][1],0),y.applyToX(p.i[0][0],p.i[0][1],0),y.applyToY(p.i[0][0],p.i[0][1],0),y.applyToX(p.v[0][0],p.v[0][1],0),y.applyToY(p.v[0][0],p.v[0][1],0)),f[c]=u}v&&(_+=g[r].l,_+=b),this.textSpans[P]?this.textSpans[P].elem=f:this.textSpans[P]={elem:f},P+=1}},CVTextElement.prototype.renderInnerContent=function(){var t,e,i,r,n,s,a=this.canvasContext;a.font=this.values.fValue,a.lineCap="butt",a.lineJoin="miter",a.miterLimit=4,this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var o,h=this.textAnimator.renderedLetters,l=this.textProperty.currentData.l;e=l.length;var c,d,p=null,f=null,u=null;for(t=0;t<e;t+=1)if(!l[t].n){if((o=h[t])&&(this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(o.p),this.globalData.renderer.ctxOpacity(o.o)),this.fill){for(o&&o.fc?p!==o.fc&&(p=o.fc,a.fillStyle=o.fc):p!==this.values.fill&&(p=this.values.fill,a.fillStyle=this.values.fill),r=(c=this.textSpans[t].elem).length,this.globalData.canvasContext.beginPath(),i=0;i<r;i+=1)for(s=(d=c[i]).length,this.globalData.canvasContext.moveTo(d[0],d[1]),n=2;n<s;n+=6)this.globalData.canvasContext.bezierCurveTo(d[n],d[n+1],d[n+2],d[n+3],d[n+4],d[n+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.fill()}if(this.stroke){for(o&&o.sw?u!==o.sw&&(u=o.sw,a.lineWidth=o.sw):u!==this.values.sWidth&&(u=this.values.sWidth,a.lineWidth=this.values.sWidth),o&&o.sc?f!==o.sc&&(f=o.sc,a.strokeStyle=o.sc):f!==this.values.stroke&&(f=this.values.stroke,a.strokeStyle=this.values.stroke),r=(c=this.textSpans[t].elem).length,this.globalData.canvasContext.beginPath(),i=0;i<r;i+=1)for(s=(d=c[i]).length,this.globalData.canvasContext.moveTo(d[0],d[1]),n=2;n<s;n+=6)this.globalData.canvasContext.bezierCurveTo(d[n],d[n+1],d[n+2],d[n+3],d[n+4],d[n+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.stroke()}o&&this.globalData.renderer.restore()}},CVEffects.prototype.renderFrame=function(){},HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0!==this.data.bm&&this.setBlendMode()},renderElement:function(){var t=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var e=this.finalTransform.mat.toCSS();t.transform=e,t.webkitTransform=e}this.finalTransform._opMdf&&(t.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=HybridRenderer.prototype.buildElementParenting,extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var t;this.data.hasMask?((t=createNS("rect")).setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):((t=createTag("div")).style.width=this.data.sw+"px",t.style.height=this.data.sh+"px",t.style.backgroundColor=this.data.sc),this.layerElement.appendChild(t)},extendPrototype([HybridRenderer,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(t,e){for(var i,r=0;r<e;)this.elements[r]&&this.elements[r].getBaseElement&&(i=this.elements[r].getBaseElement()),r+=1;i?this.layerElement.insertBefore(t,i):this.layerElement.appendChild(t)},extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var t;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),t=this.svgElement;else{t=createNS("svg");var e=this.comp.data?this.comp.data:this.globalData.compSize;t.setAttribute("width",e.w),t.setAttribute("height",e.h),t.appendChild(this.shapesContainer),this.layerElement.appendChild(t)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=t},HShapeElement.prototype.getTransformedPoint=function(t,e){var i,r=t.length;for(i=0;i<r;i+=1)e=t[i].mProps.v.applyToPointArray(e[0],e[1],0);return e},HShapeElement.prototype.calculateShapeBoundingBox=function(t,e){var i,r,n,s,a,o=t.sh.v,h=t.transformers,l=o._length;if(!(l<=1)){for(i=0;i<l-1;i+=1)r=this.getTransformedPoint(h,o.v[i]),n=this.getTransformedPoint(h,o.o[i]),s=this.getTransformedPoint(h,o.i[i+1]),a=this.getTransformedPoint(h,o.v[i+1]),this.checkBounds(r,n,s,a,e);o.c&&(r=this.getTransformedPoint(h,o.v[i]),n=this.getTransformedPoint(h,o.o[i]),s=this.getTransformedPoint(h,o.i[0]),a=this.getTransformedPoint(h,o.v[0]),this.checkBounds(r,n,s,a,e))}},HShapeElement.prototype.checkBounds=function(t,e,i,r,n){this.getBoundsOfCurve(t,e,i,r);var s=this.shapeBoundingBox;n.x=bmMin(s.left,n.x),n.xMax=bmMax(s.right,n.xMax),n.y=bmMin(s.top,n.y),n.yMax=bmMax(s.bottom,n.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(t,e,i,r){for(var n,s,a,o,h,l,c,d=[[t[0],r[0]],[t[1],r[1]]],p=0;p<2;++p)s=6*t[p]-12*e[p]+6*i[p],n=-3*t[p]+9*e[p]-9*i[p]+3*r[p],a=3*e[p]-3*t[p],s|=0,a|=0,0===(n|=0)&&0===s||(0===n?(o=-a/s)>0&&o<1&&d[p].push(this.calculateF(o,t,e,i,r,p)):(h=s*s-4*a*n)>=0&&((l=(-s+bmSqrt(h))/(2*n))>0&&l<1&&d[p].push(this.calculateF(l,t,e,i,r,p)),(c=(-s-bmSqrt(h))/(2*n))>0&&c<1&&d[p].push(this.calculateF(c,t,e,i,r,p))));this.shapeBoundingBox.left=bmMin.apply(null,d[0]),this.shapeBoundingBox.top=bmMin.apply(null,d[1]),this.shapeBoundingBox.right=bmMax.apply(null,d[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,d[1])},HShapeElement.prototype.calculateF=function(t,e,i,r,n,s){return bmPow(1-t,3)*e[s]+3*bmPow(1-t,2)*t*i[s]+3*(1-t)*bmPow(t,2)*r[s]+bmPow(t,3)*n[s]},HShapeElement.prototype.calculateBoundingBox=function(t,e){var i,r=t.length;for(i=0;i<r;i+=1)t[i]&&t[i].sh?this.calculateShapeBoundingBox(t[i],e):t[i]&&t[i].it&&this.calculateBoundingBox(t[i].it,e)},HShapeElement.prototype.currentBoxContains=function(t){return this.currentBBox.x<=t.x&&this.currentBBox.y<=t.y&&this.currentBBox.width+this.currentBBox.x>=t.x+t.width&&this.currentBBox.height+this.currentBBox.y>=t.y+t.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var t=this.tempBoundingBox,e=999999;if(t.x=e,t.xMax=-e,t.y=e,t.yMax=-e,this.calculateBoundingBox(this.itemsData,t),t.width=t.xMax<t.x?0:t.xMax-t.x,t.height=t.yMax<t.y?0:t.yMax-t.y,this.currentBoxContains(t))return;var i=!1;if(this.currentBBox.w!==t.width&&(this.currentBBox.w=t.width,this.shapeCont.setAttribute("width",t.width),i=!0),this.currentBBox.h!==t.height&&(this.currentBBox.h=t.height,this.shapeCont.setAttribute("height",t.height),i=!0),i||this.currentBBox.x!==t.x||this.currentBBox.y!==t.y){this.currentBBox.w=t.width,this.currentBBox.h=t.height,this.currentBBox.x=t.x,this.currentBBox.y=t.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var r=this.shapeCont.style,n="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";r.transform=n,r.webkitTransform=n}}},extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var t=createNS("g");this.maskedElement.appendChild(t),this.innerElem=t}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t.l?t.l.length:0);var e=this.innerElem.style,i=t.fc?this.buildColor(t.fc):"rgba(0,0,0,0)";e.fill=i,e.color=i,t.sc&&(e.stroke=this.buildColor(t.sc),e.strokeWidth=t.sw+"px");var r,n,s=this.globalData.fontManager.getFontByName(t.f);if(!this.globalData.fontManager.chars)if(e.fontSize=t.finalSize+"px",e.lineHeight=t.finalSize+"px",s.fClass)this.innerElem.className=s.fClass;else{e.fontFamily=s.fFamily;var a=t.fWeight,o=t.fStyle;e.fontStyle=o,e.fontWeight=a}var h,l,c,d=t.l;n=d.length;var p,f=this.mHelper,u="",m=0;for(r=0;r<n;r+=1){if(this.globalData.fontManager.chars?(this.textPaths[m]?h=this.textPaths[m]:((h=createNS("path")).setAttribute("stroke-linecap",lineCapEnum[1]),h.setAttribute("stroke-linejoin",lineJoinEnum[2]),h.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[m]?c=(l=this.textSpans[m]).children[0]:((l=createTag("div")).style.lineHeight=0,(c=createNS("svg")).appendChild(h),styleDiv(l)))):this.isMasked?h=this.textPaths[m]?this.textPaths[m]:createNS("text"):this.textSpans[m]?(l=this.textSpans[m],h=this.textPaths[m]):(styleDiv(l=createTag("span")),styleDiv(h=createTag("span")),l.appendChild(h)),this.globalData.fontManager.chars){var g,y=this.globalData.fontManager.getCharData(t.finalText[r],s.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily);if(g=y?y.data:null,f.reset(),g&&g.shapes&&(p=g.shapes[0].it,f.scale(t.finalSize/100,t.finalSize/100),u=this.createPathShape(f,p),h.setAttribute("d",u)),this.isMasked)this.innerElem.appendChild(h);else{if(this.innerElem.appendChild(l),g&&g.shapes){document.body.appendChild(c);var v=c.getBBox();c.setAttribute("width",v.width+2),c.setAttribute("height",v.height+2),c.setAttribute("viewBox",v.x-1+" "+(v.y-1)+" "+(v.width+2)+" "+(v.height+2));var b=c.style,_="translate("+(v.x-1)+"px,"+(v.y-1)+"px)";b.transform=_,b.webkitTransform=_,d[r].yOffset=v.y-1}else c.setAttribute("width",1),c.setAttribute("height",1);l.appendChild(c)}}else if(h.textContent=d[r].val,h.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(h);else{this.innerElem.appendChild(l);var x=h.style,S="translate3d(0,"+-t.finalSize/1.2+"px,0)";x.transform=S,x.webkitTransform=S}this.isMasked?this.textSpans[m]=h:this.textSpans[m]=l,this.textSpans[m].style.display="block",this.textPaths[m]=h,m+=1}for(;m<this.textSpans.length;)this.textSpans[m].style.display="none",m+=1},HTextElement.prototype.renderInnerContent=function(){var t;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),t=this.svgElement.style;var e="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";t.transform=e,t.webkitTransform=e}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){var i,r,n,s,a,o=0,h=this.textAnimator.renderedLetters,l=this.textProperty.currentData.l;for(r=l.length,i=0;i<r;i+=1)l[i].n?o+=1:(s=this.textSpans[i],a=this.textPaths[i],n=h[o],o+=1,n._mdf.m&&(this.isMasked?s.setAttribute("transform",n.m):(s.style.webkitTransform=n.m,s.style.transform=n.m)),s.style.opacity=n.o,n.sw&&n._mdf.sw&&a.setAttribute("stroke-width",n.sw),n.sc&&n._mdf.sc&&a.setAttribute("stroke",n.sc),n.fc&&n._mdf.fc&&(a.setAttribute("fill",n.fc),a.style.color=n.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var c=this.innerElem.getBBox();if(this.currentBBox.w!==c.width&&(this.currentBBox.w=c.width,this.svgElement.setAttribute("width",c.width)),this.currentBBox.h!==c.height&&(this.currentBBox.h=c.height,this.svgElement.setAttribute("height",c.height)),this.currentBBox.w!==c.width+2||this.currentBBox.h!==c.height+2||this.currentBBox.x!==c.x-1||this.currentBBox.y!==c.y-1){this.currentBBox.w=c.width+2,this.currentBBox.h=c.height+2,this.currentBBox.x=c.x-1,this.currentBBox.y=c.y-1,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),t=this.svgElement.style;var d="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";t.transform=d,t.webkitTransform=d}}}},extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var t=this.globalData.getAssetsPath(this.assetData),e=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(e),e.crossOrigin="anonymous",e.src=t,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)},extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var t,e,i,r,n=this.comp.threeDElements.length;for(t=0;t<n;t+=1)if("3d"===(e=this.comp.threeDElements[t]).type){i=e.perspectiveElem.style,r=e.container.style;var s=this.pe.v+"px",a="0px 0px 0px",o="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";i.perspective=s,i.webkitPerspective=s,r.transformOrigin=a,r.mozTransformOrigin=a,r.webkitTransformOrigin=a,i.transform=o,i.webkitTransform=o}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var t,e,i=this._isFirstFrame;if(this.hierarchy)for(e=this.hierarchy.length,t=0;t<e;t+=1)i=this.hierarchy[t].finalTransform.mProp._mdf||i;if(i||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(t=e=this.hierarchy.length-1;t>=0;t-=1){var r=this.hierarchy[t].finalTransform.mProp;this.mat.translate(-r.p.v[0],-r.p.v[1],r.p.v[2]),this.mat.rotateX(-r.or.v[0]).rotateY(-r.or.v[1]).rotateZ(r.or.v[2]),this.mat.rotateX(-r.rx.v).rotateY(-r.ry.v).rotateZ(r.rz.v),this.mat.scale(1/r.s.v[0],1/r.s.v[1],1/r.s.v[2]),this.mat.translate(r.a.v[0],r.a.v[1],r.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var n;n=this.p?[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var s=Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2)+Math.pow(n[2],2)),a=[n[0]/s,n[1]/s,n[2]/s],o=Math.sqrt(a[2]*a[2]+a[0]*a[0]),h=Math.atan2(a[1],o),l=Math.atan2(a[0],-a[2]);this.mat.rotateY(l).rotateX(-h)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var c=!this._prevMat.equals(this.mat);if((c||this.pe._mdf)&&this.comp.threeDElements){var d,p,f;for(e=this.comp.threeDElements.length,t=0;t<e;t+=1)if("3d"===(d=this.comp.threeDElements[t]).type){if(c){var u=this.mat.toCSS();(f=d.container.style).transform=u,f.webkitTransform=u}this.pe._mdf&&((p=d.perspectiveElem.style).perspective=this.pe.v+"px",p.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null},HEffects.prototype.renderFrame=function(){};var animationManager=function(){var t={},e=[],i=0,r=0,n=0,s=!0,a=!1;function o(t){for(var i=0,n=t.target;i<r;)e[i].animation===n&&(e.splice(i,1),i-=1,r-=1,n.isPaused||c()),i+=1}function h(t,i){if(!t)return null;for(var n=0;n<r;){if(e[n].elem===t&&null!==e[n].elem)return e[n].animation;n+=1}var s=new AnimationItem;return d(s,t),s.setData(t,i),s}function l(){n+=1,u()}function c(){n-=1}function d(t,i){t.addEventListener("destroy",o),t.addEventListener("_active",l),t.addEventListener("_idle",c),e.push({elem:i,animation:t}),r+=1}function p(t){var o,h=t-i;for(o=0;o<r;o+=1)e[o].animation.advanceTime(h);i=t,n&&!a?window.requestAnimationFrame(p):s=!0}function f(t){i=t,window.requestAnimationFrame(p)}function u(){!a&&n&&s&&(window.requestAnimationFrame(f),s=!1)}return t.registerAnimation=h,t.loadAnimation=function(t){var e=new AnimationItem;return d(e,null),e.setParams(t),e},t.setSpeed=function(t,i){var n;for(n=0;n<r;n+=1)e[n].animation.setSpeed(t,i)},t.setDirection=function(t,i){var n;for(n=0;n<r;n+=1)e[n].animation.setDirection(t,i)},t.play=function(t){var i;for(i=0;i<r;i+=1)e[i].animation.play(t)},t.pause=function(t){var i;for(i=0;i<r;i+=1)e[i].animation.pause(t)},t.stop=function(t){var i;for(i=0;i<r;i+=1)e[i].animation.stop(t)},t.togglePause=function(t){var i;for(i=0;i<r;i+=1)e[i].animation.togglePause(t)},t.searchAnimations=function(t,e,i){var r,n=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),s=n.length;for(r=0;r<s;r+=1)i&&n[r].setAttribute("data-bm-type",i),h(n[r],t);if(e&&0===s){i||(i="svg");var a=document.getElementsByTagName("body")[0];a.innerText="";var o=createTag("div");o.style.width="100%",o.style.height="100%",o.setAttribute("data-bm-type",i),a.appendChild(o),h(o,t)}},t.resize=function(){var t;for(t=0;t<r;t+=1)e[t].animation.resize()},t.goToAndStop=function(t,i,n){var s;for(s=0;s<r;s+=1)e[s].animation.goToAndStop(t,i,n)},t.destroy=function(t){var i;for(i=r-1;i>=0;i-=1)e[i].animation.destroy(t)},t.freeze=function(){a=!0},t.unfreeze=function(){a=!1,u()},t.setVolume=function(t,i){var n;for(n=0;n<r;n+=1)e[n].animation.setVolume(t,i)},t.mute=function(t){var i;for(i=0;i<r;i+=1)e[i].animation.mute(t)},t.unmute=function(t){var i;for(i=0;i<r;i+=1)e[i].animation.unmute(t)},t.getRegisteredAnimations=function(){var t,i=e.length,r=[];for(t=0;t<i;t+=1)r.push(e[t].animation);return r},t}(),AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=subframeEnabled,this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this)};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(t){(t.wrapper||t.container)&&(this.wrapper=t.wrapper||t.container);var e="svg";switch(t.animType?e=t.animType:t.renderer&&(e=t.renderer),e){case"canvas":this.renderer=new CanvasRenderer(this,t.rendererSettings);break;case"svg":this.renderer=new SVGRenderer(this,t.rendererSettings);break;default:this.renderer=new HybridRenderer(this,t.rendererSettings)}this.imagePreloader.setCacheType(e,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=e,""===t.loop||null===t.loop||void 0===t.loop||!0===t.loop?this.loop=!0:!1===t.loop?this.loop=!1:this.loop=parseInt(t.loop,10),this.autoplay=!("autoplay"in t)||t.autoplay,this.name=t.name?t.name:"",this.autoloadSegments=!Object.prototype.hasOwnProperty.call(t,"autoloadSegments")||t.autoloadSegments,this.assetsPath=t.assetsPath,this.initialSegment=t.initialSegment,t.audioFactory&&this.audioController.setAudioFactory(t.audioFactory),t.animationData?this.setupAnimation(t.animationData):t.path&&(-1!==t.path.lastIndexOf("\\")?this.path=t.path.substr(0,t.path.lastIndexOf("\\")+1):this.path=t.path.substr(0,t.path.lastIndexOf("/")+1),this.fileName=t.path.substr(t.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(t.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(t){dataManager.completeAnimation(t,this.configAnimation)},AnimationItem.prototype.setData=function(t,e){e&&"object"!==typeof e&&(e=JSON.parse(e));var i={wrapper:t,animationData:e},r=t.attributes;i.path=r.getNamedItem("data-animation-path")?r.getNamedItem("data-animation-path").value:r.getNamedItem("data-bm-path")?r.getNamedItem("data-bm-path").value:r.getNamedItem("bm-path")?r.getNamedItem("bm-path").value:"",i.animType=r.getNamedItem("data-anim-type")?r.getNamedItem("data-anim-type").value:r.getNamedItem("data-bm-type")?r.getNamedItem("data-bm-type").value:r.getNamedItem("bm-type")?r.getNamedItem("bm-type").value:r.getNamedItem("data-bm-renderer")?r.getNamedItem("data-bm-renderer").value:r.getNamedItem("bm-renderer")?r.getNamedItem("bm-renderer").value:"canvas";var n=r.getNamedItem("data-anim-loop")?r.getNamedItem("data-anim-loop").value:r.getNamedItem("data-bm-loop")?r.getNamedItem("data-bm-loop").value:r.getNamedItem("bm-loop")?r.getNamedItem("bm-loop").value:"";"false"===n?i.loop=!1:"true"===n?i.loop=!0:""!==n&&(i.loop=parseInt(n,10));var s=r.getNamedItem("data-anim-autoplay")?r.getNamedItem("data-anim-autoplay").value:r.getNamedItem("data-bm-autoplay")?r.getNamedItem("data-bm-autoplay").value:!r.getNamedItem("bm-autoplay")||r.getNamedItem("bm-autoplay").value;i.autoplay="false"!==s,i.name=r.getNamedItem("data-name")?r.getNamedItem("data-name").value:r.getNamedItem("data-bm-name")?r.getNamedItem("data-bm-name").value:r.getNamedItem("bm-name")?r.getNamedItem("bm-name").value:"","false"===(r.getNamedItem("data-anim-prerender")?r.getNamedItem("data-anim-prerender").value:r.getNamedItem("data-bm-prerender")?r.getNamedItem("data-bm-prerender").value:r.getNamedItem("bm-prerender")?r.getNamedItem("bm-prerender").value:"")&&(i.prerender=!1),this.setParams(i)},AnimationItem.prototype.includeLayers=function(t){t.op>this.animationData.op&&(this.animationData.op=t.op,this.totalFrames=Math.floor(t.op-this.animationData.ip));var e,i,r=this.animationData.layers,n=r.length,s=t.layers,a=s.length;for(i=0;i<a;i+=1)for(e=0;e<n;){if(r[e].id===s[i].id){r[e]=s[i];break}e+=1}if((t.chars||t.fonts)&&(this.renderer.globalData.fontManager.addChars(t.chars),this.renderer.globalData.fontManager.addFonts(t.fonts,this.renderer.globalData.defs)),t.assets)for(n=t.assets.length,e=0;e<n;e+=1)this.animationData.assets.push(t.assets[e]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(t){this.animationData=t,expressionsPlugin&&expressionsPlugin.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var t=this.animationData.segments;if(!t||0===t.length||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.totalFrames);var e=t.shift();this.timeCompleted=e.time*this.frameRate;var i=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(i,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))},AnimationItem.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(t){if(this.renderer)try{this.animationData=t,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(t),t.assets||(t.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(t.assets),this.markers=markerParser(t.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(e){this.triggerConfigError(e)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||"canvas"!==this.renderer.rendererType)&&this.imagePreloader.loadedFootages()&&(this.isLoaded=!0,expressionsPlugin&&expressionsPlugin.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.gotoFrame(),this.autoplay&&this.play())},AnimationItem.prototype.resize=function(){this.renderer.updateContainerSize()},AnimationItem.prototype.setSubframe=function(t){this.isSubframeEnabled=!!t},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!1!==this.isLoaded&&this.renderer)try{this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(t){this.triggerRenderFrameError(t)}},AnimationItem.prototype.play=function(t){t&&this.name!==t||!0===this.isPaused&&(this.isPaused=!1,this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(t){t&&this.name!==t||!1===this.isPaused&&(this.isPaused=!0,this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(t){t&&this.name!==t||(!0===this.isPaused?this.play():this.pause())},AnimationItem.prototype.stop=function(t){t&&this.name!==t||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(t){for(var e,i=0;i<this.markers.length;i+=1)if((e=this.markers[i]).payload&&e.payload.name===t)return e;return null},AnimationItem.prototype.goToAndStop=function(t,e,i){if(!i||this.name===i){var r=Number(t);if(isNaN(r)){var n=this.getMarkerData(t);n&&this.goToAndStop(n.time,!0)}else e?this.setCurrentRawFrameValue(t):this.setCurrentRawFrameValue(t*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(t,e,i){if(!i||this.name===i){var r=Number(t);if(isNaN(r)){var n=this.getMarkerData(t);n&&(n.duration?this.playSegments([n.time,n.time+n.duration],!0):this.goToAndStop(n.time,!0))}else this.goToAndStop(r,e,i);this.play()}},AnimationItem.prototype.advanceTime=function(t){if(!0!==this.isPaused&&!1!==this.isLoaded){var e=this.currentRawFrame+t*this.frameModifier,i=!1;e>=this.totalFrames-1&&this.frameModifier>0?this.loop&&this.playCount!==this.loop?e>=this.totalFrames?(this.playCount+=1,this.checkSegments(e%this.totalFrames)||(this.setCurrentRawFrameValue(e%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(e):this.checkSegments(e>this.totalFrames?e%this.totalFrames:0)||(i=!0,e=this.totalFrames-1):e<0?this.checkSegments(e%this.totalFrames)||(!this.loop||this.playCount--<=0&&!0!==this.loop?(i=!0,e=0):(this.setCurrentRawFrameValue(this.totalFrames+e%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0)):this.setCurrentRawFrameValue(e),i&&(this.setCurrentRawFrameValue(e),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(t,e){this.playCount=0,t[1]<t[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=t[0]-t[1],this.timeCompleted=this.totalFrames,this.firstFrame=t[1],this.setCurrentRawFrameValue(this.totalFrames-.001-e)):t[1]>t[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=t[1]-t[0],this.timeCompleted=this.totalFrames,this.firstFrame=t[0],this.setCurrentRawFrameValue(.001+e)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(t,e){var i=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<t?i=t:this.currentRawFrame+this.firstFrame>e&&(i=e-t)),this.firstFrame=t,this.totalFrames=e-t,this.timeCompleted=this.totalFrames,-1!==i&&this.goToAndStop(i,!0)},AnimationItem.prototype.playSegments=function(t,e){if(e&&(this.segments.length=0),"object"===typeof t[0]){var i,r=t.length;for(i=0;i<r;i+=1)this.segments.push(t[i])}else this.segments.push(t);this.segments.length&&e&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(t){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),t&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(t){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),t),!0)},AnimationItem.prototype.destroy=function(t){t&&this.name!==t||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.renderer=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(t){this.currentRawFrame=t,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(t){this.playSpeed=t,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(t){this.playDirection=t<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setVolume=function(t,e){e&&this.name!==e||this.audioController.setVolume(t)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(t){t&&this.name!==t||this.audioController.mute()},AnimationItem.prototype.unmute=function(t){t&&this.name!==t||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(t){var e="";if(t.e)e=t.p;else if(this.assetsPath){var i=t.p;-1!==i.indexOf("images/")&&(i=i.split("/")[1]),e=this.assetsPath+i}else e=this.path,e+=t.u?t.u:"",e+=t.p;return e},AnimationItem.prototype.getAssetData=function(t){for(var e=0,i=this.assets.length;e<i;){if(t===this.assets[e].id)return this.assets[e];e+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(t){return t?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.trigger=function(t){if(this._cbs&&this._cbs[t])switch(t){case"enterFrame":case"drawnFrame":this.triggerEvent(t,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameModifier));break;case"loopComplete":this.triggerEvent(t,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(t,new BMCompleteEvent(t,this.frameMult));break;case"segmentStart":this.triggerEvent(t,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(t,new BMDestroyEvent(t,this));break;default:this.triggerEvent(t)}"enterFrame"===t&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameMult)),"loopComplete"===t&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult)),"complete"===t&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(t,this.frameMult)),"segmentStart"===t&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames)),"destroy"===t&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(t,this))},AnimationItem.prototype.triggerRenderFrameError=function(t){var e=new BMRenderFrameErrorEvent(t,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)},AnimationItem.prototype.triggerConfigError=function(t){var e=new BMConfigErrorEvent(t,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)};var Expressions=function(){var t={initExpressions:function(t){var e=0,i=[];t.renderer.compInterface=CompExpressionInterface(t.renderer),t.renderer.globalData.projectInterface.registerComposition(t.renderer),t.renderer.globalData.pushExpression=function(){e+=1},t.renderer.globalData.popExpression=function(){0===(e-=1)&&function(){var t,e=i.length;for(t=0;t<e;t+=1)i[t].release();i.length=0}()},t.renderer.globalData.registerExpressionProperty=function(t){-1===i.indexOf(t)&&i.push(t)}}};return t}();expressionsPlugin=Expressions;var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null;function $bm_isInstanceOfArray(t){return t.constructor===Array||t.constructor===Float32Array}function isNumerable(t,e){return"number"===t||"boolean"===t||"string"===t||e instanceof Number}function $bm_neg(t){var e=typeof t;if("number"===e||"boolean"===e||t instanceof Number)return-t;if($bm_isInstanceOfArray(t)){var i,r=t.length,n=[];for(i=0;i<r;i+=1)n[i]=-t[i];return n}return t.propType?t.v:-t}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(t,e){var i=typeof t,r=typeof e;if("string"===i||"string"===r)return t+e;if(isNumerable(i,t)&&isNumerable(r,e))return t+e;if($bm_isInstanceOfArray(t)&&isNumerable(r,e))return(t=t.slice(0))[0]+=e,t;if(isNumerable(i,t)&&$bm_isInstanceOfArray(e))return(e=e.slice(0))[0]=t+e[0],e;if($bm_isInstanceOfArray(t)&&$bm_isInstanceOfArray(e)){for(var n=0,s=t.length,a=e.length,o=[];n<s||n<a;)("number"===typeof t[n]||t[n]instanceof Number)&&("number"===typeof e[n]||e[n]instanceof Number)?o[n]=t[n]+e[n]:o[n]=void 0===e[n]?t[n]:t[n]||e[n],n+=1;return o}return 0}var add=sum;function sub(t,e){var i=typeof t,r=typeof e;if(isNumerable(i,t)&&isNumerable(r,e))return"string"===i&&(t=parseInt(t,10)),"string"===r&&(e=parseInt(e,10)),t-e;if($bm_isInstanceOfArray(t)&&isNumerable(r,e))return(t=t.slice(0))[0]-=e,t;if(isNumerable(i,t)&&$bm_isInstanceOfArray(e))return(e=e.slice(0))[0]=t-e[0],e;if($bm_isInstanceOfArray(t)&&$bm_isInstanceOfArray(e)){for(var n=0,s=t.length,a=e.length,o=[];n<s||n<a;)("number"===typeof t[n]||t[n]instanceof Number)&&("number"===typeof e[n]||e[n]instanceof Number)?o[n]=t[n]-e[n]:o[n]=void 0===e[n]?t[n]:t[n]||e[n],n+=1;return o}return 0}function mul(t,e){var i,r,n,s=typeof t,a=typeof e;if(isNumerable(s,t)&&isNumerable(a,e))return t*e;if($bm_isInstanceOfArray(t)&&isNumerable(a,e)){for(n=t.length,i=createTypedArray("float32",n),r=0;r<n;r+=1)i[r]=t[r]*e;return i}if(isNumerable(s,t)&&$bm_isInstanceOfArray(e)){for(n=e.length,i=createTypedArray("float32",n),r=0;r<n;r+=1)i[r]=t*e[r];return i}return 0}function div(t,e){var i,r,n,s=typeof t,a=typeof e;if(isNumerable(s,t)&&isNumerable(a,e))return t/e;if($bm_isInstanceOfArray(t)&&isNumerable(a,e)){for(n=t.length,i=createTypedArray("float32",n),r=0;r<n;r+=1)i[r]=t[r]/e;return i}if(isNumerable(s,t)&&$bm_isInstanceOfArray(e)){for(n=e.length,i=createTypedArray("float32",n),r=0;r<n;r+=1)i[r]=t/e[r];return i}return 0}function mod(t,e){return"string"===typeof t&&(t=parseInt(t,10)),"string"===typeof e&&(e=parseInt(e,10)),t%e}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(t,e,i){if(e>i){var r=i;i=e,e=r}return Math.min(Math.max(t,e),i)}function radiansToDegrees(t){return t/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(t){return t*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(t,e){if("number"===typeof t||t instanceof Number)return e=e||0,Math.abs(t-e);var i;e||(e=helperLengthArray);var r=Math.min(t.length,e.length),n=0;for(i=0;i<r;i+=1)n+=Math.pow(e[i]-t[i],2);return Math.sqrt(n)}function normalize(t){return div(t,length(t))}function rgbToHsl(t){var e,i,r=t[0],n=t[1],s=t[2],a=Math.max(r,n,s),o=Math.min(r,n,s),h=(a+o)/2;if(a===o)e=0,i=0;else{var l=a-o;switch(i=h>.5?l/(2-a-o):l/(a+o),a){case r:e=(n-s)/l+(n<s?6:0);break;case n:e=(s-r)/l+2;break;case s:e=(r-n)/l+4}e/=6}return[e,i,h,t[3]]}function hue2rgb(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}function hslToRgb(t){var e,i,r,n=t[0],s=t[1],a=t[2];if(0===s)e=a,r=a,i=a;else{var o=a<.5?a*(1+s):a+s-a*s,h=2*a-o;e=hue2rgb(h,o,n+1/3),i=hue2rgb(h,o,n),r=hue2rgb(h,o,n-1/3)}return[e,i,r,t[3]]}function linear(t,e,i,r,n){if(void 0!==r&&void 0!==n||(r=e,n=i,e=0,i=1),i<e){var s=i;i=e,e=s}if(t<=e)return r;if(t>=i)return n;var a,o=i===e?0:(t-e)/(i-e);if(!r.length)return r+(n-r)*o;var h=r.length,l=createTypedArray("float32",h);for(a=0;a<h;a+=1)l[a]=r[a]+(n[a]-r[a])*o;return l}function random(t,e){if(void 0===e&&(void 0===t?(t=0,e=1):(e=t,t=void 0)),e.length){var i,r=e.length;t||(t=createTypedArray("float32",r));var n=createTypedArray("float32",r),s=BMMath.random();for(i=0;i<r;i+=1)n[i]=t[i]+s*(e[i]-t[i]);return n}return void 0===t&&(t=0),t+BMMath.random()*(e-t)}function createPath(t,e,i,r){var n,s=t.length,a=shapePool.newElement();a.setPathData(!!r,s);var o,h,l=[0,0];for(n=0;n<s;n+=1)o=e&&e[n]?e[n]:l,h=i&&i[n]?i[n]:l,a.setTripleAt(t[n][0],t[n][1],h[0]+t[n][0],h[1]+t[n][1],o[0]+t[n][0],o[1]+t[n][1],n,!0);return a}function initiateExpression(elem,data,property){var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=-1!==val.indexOf("random"),elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||!0!==this.data.hd,wiggle=function(t,e){var i,r,n=this.pv.length?this.pv.length:1,s=createTypedArray("float32",n),a=Math.floor(5*time);for(i=0,r=0;i<a;){for(r=0;r<n;r+=1)s[r]+=-e+2*e*BMMath.random();i+=1}var o=5*time,h=o-Math.floor(o),l=createTypedArray("float32",n);if(n>1){for(r=0;r<n;r+=1)l[r]=this.pv[r]+s[r]+(-e+2*e*BMMath.random())*h;return l}return this.pv+s[0]+(-e+2*e*BMMath.random())*h}.bind(this);function loopInDuration(t,e){return loopIn(t,e,!0)}function loopOutDuration(t,e){return loopOut(t,e,!0)}thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty)),this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),time,velocity,value,text,textIndex,textTotal,selectorValue;function lookAt(t,e){var i=[e[0]-t[0],e[1]-t[1],e[2]-t[2]],r=Math.atan2(i[0],Math.sqrt(i[1]*i[1]+i[2]*i[2]))/degToRads;return[-Math.atan2(i[1],i[2])/degToRads,r,0]}function easeOut(t,e,i,r,n){return applyEase(easeOutBez,t,e,i,r,n)}function easeIn(t,e,i,r,n){return applyEase(easeInBez,t,e,i,r,n)}function ease(t,e,i,r,n){return applyEase(easeInOutBez,t,e,i,r,n)}function applyEase(t,e,i,r,n,s){void 0===n?(n=i,s=r):e=(e-i)/(r-i),e>1?e=1:e<0&&(e=0);var a=t(e);if($bm_isInstanceOfArray(n)){var o,h=n.length,l=createTypedArray("float32",h);for(o=0;o<h;o+=1)l[o]=(s[o]-n[o])*a+n[o];return l}return(s-n)*a+n}function nearestKey(t){var e,i,r,n=data.k.length;if(data.k.length&&"number"!==typeof data.k[0])if(i=-1,(t*=elem.comp.globalData.frameRate)<data.k[0].t)i=1,r=data.k[0].t;else{for(e=0;e<n-1;e+=1){if(t===data.k[e].t){i=e+1,r=data.k[e].t;break}if(t>data.k[e].t&&t<data.k[e+1].t){t-data.k[e].t>data.k[e+1].t-t?(i=e+2,r=data.k[e+1].t):(i=e+1,r=data.k[e].t);break}}-1===i&&(i=e+1,r=data.k[e].t)}else i=0,r=0;var s={};return s.index=i,s.time=r/elem.comp.globalData.frameRate,s}function key(t){var e,i,r;if(!data.k.length||"number"===typeof data.k[0])throw new Error("The property has no keyframe at index "+t);t-=1,e={time:data.k[t].t/elem.comp.globalData.frameRate,value:[]};var n=Object.prototype.hasOwnProperty.call(data.k[t],"s")?data.k[t].s:data.k[t-1].e;for(r=n.length,i=0;i<r;i+=1)e[i]=n[i],e.value[i]=n[i];return e}function framesToTime(t,e){return e||(e=elem.comp.globalData.frameRate),t/e}function timeToFrames(t,e){return t||0===t||(t=time),e||(e=elem.comp.globalData.frameRate),t*e}function seedRandom(t){BMMath.seedrandom(randSeed+t)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(t,e){return"string"===typeof value?void 0===e?value.substring(t):value.substring(t,e):""}function substr(t,e){return"string"===typeof value?void 0===e?value.substr(t):value.substr(t,e):""}function posterizeTime(t){time=0===t?0:Math.floor(time*t)/t,value=valueAtTime(time)}var index=elem.data.ind,hasParent=!(!elem.hierarchy||!elem.hierarchy.length),parent,randSeed=Math.floor(1e6*Math.random()),globalData=elem.globalData;function executeExpression(t){return value=t,this.frameExpressionId===elem.globalData.frameId&&"textSelector"!==this.propType?value:("textSelector"===this.propType&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),4!==elemType||content||(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),(hasParent=!(!elem.hierarchy||!elem.hierarchy.length))&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,"shape"===scoped_bm_rt.propType&&(scoped_bm_rt=scoped_bm_rt.v),scoped_bm_rt)}return executeExpression}return ob.initiateExpression=initiateExpression,ob}(),expressionHelpers={searchExpressions:function(t,e,i){e.x&&(i.k=!0,i.x=!0,i.initiateExpression=ExpressionManager.initiateExpression,i.effectsSequence.push(i.initiateExpression(t,e,i).bind(i)))},getSpeedAtTime:function(t){var e=this.getValueAtTime(t),i=this.getValueAtTime(t+-.01),r=0;if(e.length){var n;for(n=0;n<e.length;n+=1)r+=Math.pow(i[n]-e[n],2);r=100*Math.sqrt(r)}else r=0;return r},getVelocityAtTime:function(t){if(void 0!==this.vel)return this.vel;var e,i,r=-.001,n=this.getValueAtTime(t),s=this.getValueAtTime(t+r);if(n.length)for(e=createTypedArray("float32",n.length),i=0;i<n.length;i+=1)e[i]=(s[i]-n[i])/r;else e=(s-n)/r;return e},getValueAtTime:function(t){return t*=this.elem.globalData.frameRate,(t-=this.offsetTime)!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<t?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(t,this._cachingAtTime),this._cachingAtTime.lastFrame=t),this._cachingAtTime.value},getStaticValueAtTime:function(){return this.pv},setGroupProperty:function(t){this.propertyGroup=t}};!function(){function t(t,e,i){if(!this.k||!this.keyframes)return this.pv;t=t?t.toLowerCase():"";var r,n,s,a,o,h=this.comp.renderedFrame,l=this.keyframes,c=l[l.length-1].t;if(h<=c)return this.pv;if(i?n=c-(r=e?Math.abs(c-this.elem.comp.globalData.frameRate*e):Math.max(0,c-this.elem.data.ip)):((!e||e>l.length-1)&&(e=l.length-1),r=c-(n=l[l.length-1-e].t)),"pingpong"===t){if(Math.floor((h-n)/r)%2!==0)return this.getValueAtTime((r-(h-n)%r+n)/this.comp.globalData.frameRate,0)}else{if("offset"===t){var d=this.getValueAtTime(n/this.comp.globalData.frameRate,0),p=this.getValueAtTime(c/this.comp.globalData.frameRate,0),f=this.getValueAtTime(((h-n)%r+n)/this.comp.globalData.frameRate,0),u=Math.floor((h-n)/r);if(this.pv.length){for(a=(o=new Array(d.length)).length,s=0;s<a;s+=1)o[s]=(p[s]-d[s])*u+f[s];return o}return(p-d)*u+f}if("continue"===t){var m=this.getValueAtTime(c/this.comp.globalData.frameRate,0),g=this.getValueAtTime((c-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(a=(o=new Array(m.length)).length,s=0;s<a;s+=1)o[s]=m[s]+(m[s]-g[s])*((h-c)/this.comp.globalData.frameRate)/5e-4;return o}return m+(h-c)/.001*(m-g)}}return this.getValueAtTime(((h-n)%r+n)/this.comp.globalData.frameRate,0)}function e(t,e,i){if(!this.k)return this.pv;t=t?t.toLowerCase():"";var r,n,s,a,o,h=this.comp.renderedFrame,l=this.keyframes,c=l[0].t;if(h>=c)return this.pv;if(i?n=c+(r=e?Math.abs(this.elem.comp.globalData.frameRate*e):Math.max(0,this.elem.data.op-c)):((!e||e>l.length-1)&&(e=l.length-1),r=(n=l[e].t)-c),"pingpong"===t){if(Math.floor((c-h)/r)%2===0)return this.getValueAtTime(((c-h)%r+c)/this.comp.globalData.frameRate,0)}else{if("offset"===t){var d=this.getValueAtTime(c/this.comp.globalData.frameRate,0),p=this.getValueAtTime(n/this.comp.globalData.frameRate,0),f=this.getValueAtTime((r-(c-h)%r+c)/this.comp.globalData.frameRate,0),u=Math.floor((c-h)/r)+1;if(this.pv.length){for(a=(o=new Array(d.length)).length,s=0;s<a;s+=1)o[s]=f[s]-(p[s]-d[s])*u;return o}return f-(p-d)*u}if("continue"===t){var m=this.getValueAtTime(c/this.comp.globalData.frameRate,0),g=this.getValueAtTime((c+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(a=(o=new Array(m.length)).length,s=0;s<a;s+=1)o[s]=m[s]+(m[s]-g[s])*(c-h)/.001;return o}return m+(m-g)*(c-h)/.001}}return this.getValueAtTime((r-((c-h)%r+c))/this.comp.globalData.frameRate,0)}function i(t,e){if(!this.k)return this.pv;if(t=.5*(t||.4),(e=Math.floor(e||5))<=1)return this.pv;var i,r,n=this.comp.renderedFrame/this.comp.globalData.frameRate,s=n-t,a=e>1?(n+t-s)/(e-1):1,o=0,h=0;for(i=this.pv.length?createTypedArray("float32",this.pv.length):0;o<e;){if(r=this.getValueAtTime(s+o*a),this.pv.length)for(h=0;h<this.pv.length;h+=1)i[h]+=r[h];else i+=r;o+=1}if(this.pv.length)for(h=0;h<this.pv.length;h+=1)i[h]/=e;else i/=e;return i}function r(t){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var e=this._transformCachingAtTime.v;if(e.cloneFromProps(this.pre.props),this.appliedTransformations<1){var i=this.a.getValueAtTime(t);e.translate(-i[0]*this.a.mult,-i[1]*this.a.mult,i[2]*this.a.mult)}if(this.appliedTransformations<2){var r=this.s.getValueAtTime(t);e.scale(r[0]*this.s.mult,r[1]*this.s.mult,r[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var n=this.sk.getValueAtTime(t),s=this.sa.getValueAtTime(t);e.skewFromAxis(-n*this.sk.mult,s*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var a=this.r.getValueAtTime(t);e.rotate(-a*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var o=this.rz.getValueAtTime(t),h=this.ry.getValueAtTime(t),l=this.rx.getValueAtTime(t),c=this.or.getValueAtTime(t);e.rotateZ(-o*this.rz.mult).rotateY(h*this.ry.mult).rotateX(l*this.rx.mult).rotateZ(-c[2]*this.or.mult).rotateY(c[1]*this.or.mult).rotateX(c[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var d=this.px.getValueAtTime(t),p=this.py.getValueAtTime(t);if(this.data.p.z){var f=this.pz.getValueAtTime(t);e.translate(d*this.px.mult,p*this.py.mult,-f*this.pz.mult)}else e.translate(d*this.px.mult,p*this.py.mult,0)}else{var u=this.p.getValueAtTime(t);e.translate(u[0]*this.p.mult,u[1]*this.p.mult,-u[2]*this.p.mult)}return e}function n(){return this.v.clone(new Matrix)}var s=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(t,e,i){var a=s(t,e,i);return a.dynamicProperties.length?a.getValueAtTime=r.bind(a):a.getValueAtTime=n.bind(a),a.setGroupProperty=expressionHelpers.setGroupProperty,a};var a=PropertyFactory.getProp;PropertyFactory.getProp=function(r,n,s,o,h){var l=a(r,n,s,o,h);l.kf?l.getValueAtTime=expressionHelpers.getValueAtTime.bind(l):l.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(l),l.setGroupProperty=expressionHelpers.setGroupProperty,l.loopOut=t,l.loopIn=e,l.smooth=i,l.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(l),l.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(l),l.numKeys=1===n.a?n.k.length:0,l.propertyIndex=n.ix;var c=0;return 0!==s&&(c=createTypedArray("float32",1===n.a?n.k[0].s.length:n.k.length)),l._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:c},expressionHelpers.searchExpressions(r,n,l),l.k&&h.addDynamicProperty(l),l};var o=ShapePropertyFactory.getConstructorFunction(),h=ShapePropertyFactory.getKeyframedConstructorFunction();function l(){}l.prototype={vertices:function(t,e){this.k&&this.getValue();var i,r=this.v;void 0!==e&&(r=this.getValueAtTime(e,0));var n=r._length,s=r[t],a=r.v,o=createSizedArray(n);for(i=0;i<n;i+=1)o[i]="i"===t||"o"===t?[s[i][0]-a[i][0],s[i][1]-a[i][1]]:[s[i][0],s[i][1]];return o},points:function(t){return this.vertices("v",t)},inTangents:function(t){return this.vertices("i",t)},outTangents:function(t){return this.vertices("o",t)},isClosed:function(){return this.v.c},pointOnPath:function(t,e){var i=this.v;void 0!==e&&(i=this.getValueAtTime(e,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(i));for(var r,n=this._segmentsLength,s=n.lengths,a=n.totalLength*t,o=0,h=s.length,l=0;o<h;){if(l+s[o].addedLength>a){var c=o,d=i.c&&o===h-1?0:o+1,p=(a-l)/s[o].addedLength;r=bez.getPointInSegment(i.v[c],i.v[d],i.o[c],i.i[d],p,s[o]);break}l+=s[o].addedLength,o+=1}return r||(r=i.c?[i.v[0][0],i.v[0][1]]:[i.v[i._length-1][0],i.v[i._length-1][1]]),r},vectorOnPath:function(t,e,i){1==t?t=this.v.c:0==t&&(t=.999);var r=this.pointOnPath(t,e),n=this.pointOnPath(t+.001,e),s=n[0]-r[0],a=n[1]-r[1],o=Math.sqrt(Math.pow(s,2)+Math.pow(a,2));return 0===o?[0,0]:"tangent"===i?[s/o,a/o]:[-a/o,s/o]},tangentOnPath:function(t,e){return this.vectorOnPath(t,e,"tangent")},normalOnPath:function(t,e){return this.vectorOnPath(t,e,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([l],o),extendPrototype([l],h),h.prototype.getValueAtTime=function(t){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),t*=this.elem.globalData.frameRate,(t-=this.offsetTime)!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<t?this._caching.lastIndex:0,this._cachingAtTime.lastTime=t,this.interpolateShape(t,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue},h.prototype.initiateExpression=ExpressionManager.initiateExpression;var c=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(t,e,i,r,n){var s=c(t,e,i,r,n);return s.propertyIndex=e.ix,s.lock=!1,3===i?expressionHelpers.searchExpressions(t,e.pt,s):4===i&&expressionHelpers.searchExpressions(t,e.ks,s),s.k&&t.addDynamicProperty(s),s}}(),TextProperty.prototype.getExpressionValue=function(t,e){var i=this.calculateExpression(e);if(t.t!==i){var r={};return this.copyData(r,t),r.t=i.toString(),r.__complete=!1,r}return t},TextProperty.prototype.searchProperty=function(){var t=this.searchKeyframes(),e=this.searchExpressions();return this.kf=t||e,this.kf},TextProperty.prototype.searchExpressions=function(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null};var ShapePathInterface=function(t,e,i){var r=e.sh;function n(t){return"Shape"===t||"shape"===t||"Path"===t||"path"===t||"ADBE Vector Shape"===t||2===t?n.path:null}var s=propertyGroupFactory(n,i);return r.setGroupProperty(PropertyInterface("Path",s)),Object.defineProperties(n,{path:{get:function(){return r.k&&r.getValue(),r}},shape:{get:function(){return r.k&&r.getValue(),r}},_name:{value:t.nm},ix:{value:t.ix},propertyIndex:{value:t.ix},mn:{value:t.mn},propertyGroup:{value:i}}),n},propertyGroupFactory=function(t,e){return function(i){return(i=void 0===i?1:i)<=0?t:e(i-1)}},PropertyInterface=function(t,e){var i={_name:t};return function(t){return(t=void 0===t?1:t)<=0?i:e(t-1)}},ShapeExpressionInterface=function(){function t(t,a,p){var f,u=[],m=t?t.length:0;for(f=0;f<m;f+=1)"gr"===t[f].ty?u.push(e(t[f],a[f],p)):"fl"===t[f].ty?u.push(i(t[f],a[f],p)):"st"===t[f].ty?u.push(n(t[f],a[f],p)):"tm"===t[f].ty?u.push(s(t[f],a[f],p)):"tr"===t[f].ty||("el"===t[f].ty?u.push(o(t[f],a[f],p)):"sr"===t[f].ty?u.push(h(t[f],a[f],p)):"sh"===t[f].ty?u.push(ShapePathInterface(t[f],a[f],p)):"rc"===t[f].ty?u.push(l(t[f],a[f],p)):"rd"===t[f].ty?u.push(c(t[f],a[f],p)):"rp"===t[f].ty?u.push(d(t[f],a[f],p)):"gf"===t[f].ty?u.push(r(t[f],a[f],p)):u.push((t[f],a[f],function(){return null})));return u}function e(e,i,r){var n=function(t){switch(t){case"ADBE Vectors Group":case"Contents":case 2:return n.content;default:return n.transform}};n.propertyGroup=propertyGroupFactory(n,r);var s=function(e,i,r){var n,s=function(t){for(var e=0,i=n.length;e<i;){if(n[e]._name===t||n[e].mn===t||n[e].propertyIndex===t||n[e].ix===t||n[e].ind===t)return n[e];e+=1}return"number"===typeof t?n[t-1]:null};s.propertyGroup=propertyGroupFactory(s,r),n=t(e.it,i.it,s.propertyGroup),s.numProperties=n.length;var o=a(e.it[e.it.length-1],i.it[i.it.length-1],s.propertyGroup);return s.transform=o,s.propertyIndex=e.cix,s._name=e.nm,s}(e,i,n.propertyGroup),o=a(e.it[e.it.length-1],i.it[i.it.length-1],n.propertyGroup);return n.content=s,n.transform=o,Object.defineProperty(n,"_name",{get:function(){return e.nm}}),n.numProperties=e.np,n.propertyIndex=e.ix,n.nm=e.nm,n.mn=e.mn,n}function i(t,e,i){function r(t){return"Color"===t||"color"===t?r.color:"Opacity"===t||"opacity"===t?r.opacity:null}return Object.defineProperties(r,{color:{get:ExpressionPropertyInterface(e.c)},opacity:{get:ExpressionPropertyInterface(e.o)},_name:{value:t.nm},mn:{value:t.mn}}),e.c.setGroupProperty(PropertyInterface("Color",i)),e.o.setGroupProperty(PropertyInterface("Opacity",i)),r}function r(t,e,i){function r(t){return"Start Point"===t||"start point"===t?r.startPoint:"End Point"===t||"end point"===t?r.endPoint:"Opacity"===t||"opacity"===t?r.opacity:null}return Object.defineProperties(r,{startPoint:{get:ExpressionPropertyInterface(e.s)},endPoint:{get:ExpressionPropertyInterface(e.e)},opacity:{get:ExpressionPropertyInterface(e.o)},type:{get:function(){return"a"}},_name:{value:t.nm},mn:{value:t.mn}}),e.s.setGroupProperty(PropertyInterface("Start Point",i)),e.e.setGroupProperty(PropertyInterface("End Point",i)),e.o.setGroupProperty(PropertyInterface("Opacity",i)),r}function n(t,e,i){var r,n=propertyGroupFactory(l,i),s=propertyGroupFactory(h,n);function a(i){Object.defineProperty(h,t.d[i].nm,{get:ExpressionPropertyInterface(e.d.dataProps[i].p)})}var o=t.d?t.d.length:0,h={};for(r=0;r<o;r+=1)a(r),e.d.dataProps[r].p.setGroupProperty(s);function l(t){return"Color"===t||"color"===t?l.color:"Opacity"===t||"opacity"===t?l.opacity:"Stroke Width"===t||"stroke width"===t?l.strokeWidth:null}return Object.defineProperties(l,{color:{get:ExpressionPropertyInterface(e.c)},opacity:{get:ExpressionPropertyInterface(e.o)},strokeWidth:{get:ExpressionPropertyInterface(e.w)},dash:{get:function(){return h}},_name:{value:t.nm},mn:{value:t.mn}}),e.c.setGroupProperty(PropertyInterface("Color",n)),e.o.setGroupProperty(PropertyInterface("Opacity",n)),e.w.setGroupProperty(PropertyInterface("Stroke Width",n)),l}function s(t,e,i){function r(e){return e===t.e.ix||"End"===e||"end"===e?r.end:e===t.s.ix?r.start:e===t.o.ix?r.offset:null}var n=propertyGroupFactory(r,i);return r.propertyIndex=t.ix,e.s.setGroupProperty(PropertyInterface("Start",n)),e.e.setGroupProperty(PropertyInterface("End",n)),e.o.setGroupProperty(PropertyInterface("Offset",n)),r.propertyIndex=t.ix,r.propertyGroup=i,Object.defineProperties(r,{start:{get:ExpressionPropertyInterface(e.s)},end:{get:ExpressionPropertyInterface(e.e)},offset:{get:ExpressionPropertyInterface(e.o)},_name:{value:t.nm}}),r.mn=t.mn,r}function a(t,e,i){function r(e){return t.a.ix===e||"Anchor Point"===e?r.anchorPoint:t.o.ix===e||"Opacity"===e?r.opacity:t.p.ix===e||"Position"===e?r.position:t.r.ix===e||"Rotation"===e||"ADBE Vector Rotation"===e?r.rotation:t.s.ix===e||"Scale"===e?r.scale:t.sk&&t.sk.ix===e||"Skew"===e?r.skew:t.sa&&t.sa.ix===e||"Skew Axis"===e?r.skewAxis:null}var n=propertyGroupFactory(r,i);return e.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",n)),e.transform.mProps.p.setGroupProperty(PropertyInterface("Position",n)),e.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",n)),e.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",n)),e.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",n)),e.transform.mProps.sk&&(e.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",n)),e.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",n))),e.transform.op.setGroupProperty(PropertyInterface("Opacity",n)),Object.defineProperties(r,{opacity:{get:ExpressionPropertyInterface(e.transform.mProps.o)},position:{get:ExpressionPropertyInterface(e.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(e.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(e.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(e.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(e.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(e.transform.mProps.sa)},_name:{value:t.nm}}),r.ty="tr",r.mn=t.mn,r.propertyGroup=i,r}function o(t,e,i){function r(e){return t.p.ix===e?r.position:t.s.ix===e?r.size:null}var n=propertyGroupFactory(r,i);r.propertyIndex=t.ix;var s="tm"===e.sh.ty?e.sh.prop:e.sh;return s.s.setGroupProperty(PropertyInterface("Size",n)),s.p.setGroupProperty(PropertyInterface("Position",n)),Object.defineProperties(r,{size:{get:ExpressionPropertyInterface(s.s)},position:{get:ExpressionPropertyInterface(s.p)},_name:{value:t.nm}}),r.mn=t.mn,r}function h(t,e,i){function r(e){return t.p.ix===e?r.position:t.r.ix===e?r.rotation:t.pt.ix===e?r.points:t.or.ix===e||"ADBE Vector Star Outer Radius"===e?r.outerRadius:t.os.ix===e?r.outerRoundness:!t.ir||t.ir.ix!==e&&"ADBE Vector Star Inner Radius"!==e?t.is&&t.is.ix===e?r.innerRoundness:null:r.innerRadius}var n=propertyGroupFactory(r,i),s="tm"===e.sh.ty?e.sh.prop:e.sh;return r.propertyIndex=t.ix,s.or.setGroupProperty(PropertyInterface("Outer Radius",n)),s.os.setGroupProperty(PropertyInterface("Outer Roundness",n)),s.pt.setGroupProperty(PropertyInterface("Points",n)),s.p.setGroupProperty(PropertyInterface("Position",n)),s.r.setGroupProperty(PropertyInterface("Rotation",n)),t.ir&&(s.ir.setGroupProperty(PropertyInterface("Inner Radius",n)),s.is.setGroupProperty(PropertyInterface("Inner Roundness",n))),Object.defineProperties(r,{position:{get:ExpressionPropertyInterface(s.p)},rotation:{get:ExpressionPropertyInterface(s.r)},points:{get:ExpressionPropertyInterface(s.pt)},outerRadius:{get:ExpressionPropertyInterface(s.or)},outerRoundness:{get:ExpressionPropertyInterface(s.os)},innerRadius:{get:ExpressionPropertyInterface(s.ir)},innerRoundness:{get:ExpressionPropertyInterface(s.is)},_name:{value:t.nm}}),r.mn=t.mn,r}function l(t,e,i){function r(e){return t.p.ix===e?r.position:t.r.ix===e?r.roundness:t.s.ix===e||"Size"===e||"ADBE Vector Rect Size"===e?r.size:null}var n=propertyGroupFactory(r,i),s="tm"===e.sh.ty?e.sh.prop:e.sh;return r.propertyIndex=t.ix,s.p.setGroupProperty(PropertyInterface("Position",n)),s.s.setGroupProperty(PropertyInterface("Size",n)),s.r.setGroupProperty(PropertyInterface("Rotation",n)),Object.defineProperties(r,{position:{get:ExpressionPropertyInterface(s.p)},roundness:{get:ExpressionPropertyInterface(s.r)},size:{get:ExpressionPropertyInterface(s.s)},_name:{value:t.nm}}),r.mn=t.mn,r}function c(t,e,i){function r(e){return t.r.ix===e||"Round Corners 1"===e?r.radius:null}var n=propertyGroupFactory(r,i),s=e;return r.propertyIndex=t.ix,s.rd.setGroupProperty(PropertyInterface("Radius",n)),Object.defineProperties(r,{radius:{get:ExpressionPropertyInterface(s.rd)},_name:{value:t.nm}}),r.mn=t.mn,r}function d(t,e,i){function r(e){return t.c.ix===e||"Copies"===e?r.copies:t.o.ix===e||"Offset"===e?r.offset:null}var n=propertyGroupFactory(r,i),s=e;return r.propertyIndex=t.ix,s.c.setGroupProperty(PropertyInterface("Copies",n)),s.o.setGroupProperty(PropertyInterface("Offset",n)),Object.defineProperties(r,{copies:{get:ExpressionPropertyInterface(s.c)},offset:{get:ExpressionPropertyInterface(s.o)},_name:{value:t.nm}}),r.mn=t.mn,r}return function(e,i,r){var n;function s(t){if("number"===typeof t)return 0===(t=void 0===t?1:t)?r:n[t-1];for(var e=0,i=n.length;e<i;){if(n[e]._name===t)return n[e];e+=1}return null}return s.propertyGroup=propertyGroupFactory(s,(function(){return r})),n=t(e,i,s.propertyGroup),s.numProperties=n.length,s._name="Contents",s}}(),TextExpressionInterface=function(t){var e,i;function r(t){return"ADBE Text Document"===t?r.sourceText:null}return Object.defineProperty(r,"sourceText",{get:function(){t.textProperty.getValue();var r=t.textProperty.currentData.t;return r!==e&&(t.textProperty.currentData.t=e,(i=new String(r)).value=r||new String(r)),i}}),r},LayerExpressionInterface=function(){function t(t){var e=new Matrix;return void 0!==t?this._elem.finalTransform.mProp.getValueAtTime(t).clone(e):this._elem.finalTransform.mProp.applyToMatrix(e),e}function e(t,e){var i=this.getMatrix(e);return i.props[12]=0,i.props[13]=0,i.props[14]=0,this.applyPoint(i,t)}function i(t,e){var i=this.getMatrix(e);return this.applyPoint(i,t)}function r(t,e){var i=this.getMatrix(e);return i.props[12]=0,i.props[13]=0,i.props[14]=0,this.invertPoint(i,t)}function n(t,e){var i=this.getMatrix(e);return this.invertPoint(i,t)}function s(t,e){if(this._elem.hierarchy&&this._elem.hierarchy.length){var i,r=this._elem.hierarchy.length;for(i=0;i<r;i+=1)this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(t)}return t.applyToPointArray(e[0],e[1],e[2]||0)}function a(t,e){if(this._elem.hierarchy&&this._elem.hierarchy.length){var i,r=this._elem.hierarchy.length;for(i=0;i<r;i+=1)this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(t)}return t.inversePoint(e)}function o(t){var e=new Matrix;if(e.reset(),this._elem.finalTransform.mProp.applyToMatrix(e),this._elem.hierarchy&&this._elem.hierarchy.length){var i,r=this._elem.hierarchy.length;for(i=0;i<r;i+=1)this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(e);return e.inversePoint(t)}return e.inversePoint(t)}function h(){return[1,1,1,1]}return function(l){var c;function d(t){switch(t){case"ADBE Root Vectors Group":case"Contents":case 2:return d.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return c;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return d.effect;case"ADBE Text Properties":return d.textInterface;default:return null}}d.getMatrix=t,d.invertPoint=a,d.applyPoint=s,d.toWorld=i,d.toWorldVec=e,d.fromWorld=n,d.fromWorldVec=r,d.toComp=i,d.fromComp=o,d.sampleImage=h,d.sourceRectAtTime=l.sourceRectAtTime.bind(l),d._elem=l;var p=getDescriptor(c=TransformExpressionInterface(l.finalTransform.mProp),"anchorPoint");return Object.defineProperties(d,{hasParent:{get:function(){return l.hierarchy.length}},parent:{get:function(){return l.hierarchy[0].layerInterface}},rotation:getDescriptor(c,"rotation"),scale:getDescriptor(c,"scale"),position:getDescriptor(c,"position"),opacity:getDescriptor(c,"opacity"),anchorPoint:p,anchor_point:p,transform:{get:function(){return c}},active:{get:function(){return l.isInRange}}}),d.startTime=l.data.st,d.index=l.data.ind,d.source=l.data.refId,d.height=0===l.data.ty?l.data.h:100,d.width=0===l.data.ty?l.data.w:100,d.inPoint=l.data.ip/l.comp.globalData.frameRate,d.outPoint=l.data.op/l.comp.globalData.frameRate,d._name=l.data.nm,d.registerMaskInterface=function(t){d.mask=new MaskManagerInterface(t,l)},d.registerEffectsInterface=function(t){d.effect=t},d}}(),FootageInterface=function(){var t=function(t){function e(t){return"Outline"===t?e.outlineInterface():null}return e._name="Outline",e.outlineInterface=function(t){var e="",i=t.getFootageData();function r(t){if(i[t])return e=t,"object"===typeof(i=i[t])?r:i;var n=t.indexOf(e);if(-1!==n){var s=parseInt(t.substr(n+e.length),10);return"object"===typeof(i=i[s])?r:i}return""}return function(){return e="",i=t.getFootageData(),r}}(t),e};return function(e){function i(t){return"Data"===t?i.dataInterface:null}return i._name="Data",i.dataInterface=t(e),i}}(),CompExpressionInterface=function(t){function e(e){for(var i=0,r=t.layers.length;i<r;){if(t.layers[i].nm===e||t.layers[i].ind===e)return t.elements[i].layerInterface;i+=1}return null}return Object.defineProperty(e,"_name",{value:t.data.nm}),e.layer=e,e.pixelAspect=1,e.height=t.data.h||t.globalData.compSize.h,e.width=t.data.w||t.globalData.compSize.w,e.pixelAspect=1,e.frameDuration=1/t.globalData.frameRate,e.displayStartTime=0,e.numLayers=t.layers.length,e},TransformExpressionInterface=function(t){function e(t){switch(t){case"scale":case"Scale":case"ADBE Scale":case 6:return e.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return e.rotation;case"ADBE Rotate X":return e.xRotation;case"ADBE Rotate Y":return e.yRotation;case"position":case"Position":case"ADBE Position":case 2:return e.position;case"ADBE Position_0":return e.xPosition;case"ADBE Position_1":return e.yPosition;case"ADBE Position_2":return e.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return e.anchorPoint;case"opacity":case"Opacity":case 11:return e.opacity;default:return null}}var i,r,n,s;return Object.defineProperty(e,"rotation",{get:ExpressionPropertyInterface(t.r||t.rz)}),Object.defineProperty(e,"zRotation",{get:ExpressionPropertyInterface(t.rz||t.r)}),Object.defineProperty(e,"xRotation",{get:ExpressionPropertyInterface(t.rx)}),Object.defineProperty(e,"yRotation",{get:ExpressionPropertyInterface(t.ry)}),Object.defineProperty(e,"scale",{get:ExpressionPropertyInterface(t.s)}),t.p?s=ExpressionPropertyInterface(t.p):(i=ExpressionPropertyInterface(t.px),r=ExpressionPropertyInterface(t.py),t.pz&&(n=ExpressionPropertyInterface(t.pz))),Object.defineProperty(e,"position",{get:function(){return t.p?s():[i(),r(),n?n():0]}}),Object.defineProperty(e,"xPosition",{get:ExpressionPropertyInterface(t.px)}),Object.defineProperty(e,"yPosition",{get:ExpressionPropertyInterface(t.py)}),Object.defineProperty(e,"zPosition",{get:ExpressionPropertyInterface(t.pz)}),Object.defineProperty(e,"anchorPoint",{get:ExpressionPropertyInterface(t.a)}),Object.defineProperty(e,"opacity",{get:ExpressionPropertyInterface(t.o)}),Object.defineProperty(e,"skew",{get:ExpressionPropertyInterface(t.sk)}),Object.defineProperty(e,"skewAxis",{get:ExpressionPropertyInterface(t.sa)}),Object.defineProperty(e,"orientation",{get:ExpressionPropertyInterface(t.or)}),e},ProjectInterface=function(){function t(t){this.compositions.push(t)}return function(){function e(t){for(var e=0,i=this.compositions.length;e<i;){if(this.compositions[e].data&&this.compositions[e].data.nm===t)return this.compositions[e].prepareFrame&&this.compositions[e].data.xt&&this.compositions[e].prepareFrame(this.currentFrame),this.compositions[e].compInterface;e+=1}return null}return e.compositions=[],e.currentFrame=0,e.registerComposition=t,e}}(),EffectsExpressionInterface=function(){function t(i,r,n,s){function a(t){for(var e=i.ef,r=0,n=e.length;r<n;){if(t===e[r].nm||t===e[r].mn||t===e[r].ix)return 5===e[r].ty?l[r]:l[r]();r+=1}throw new Error}var o,h=propertyGroupFactory(a,n),l=[],c=i.ef.length;for(o=0;o<c;o+=1)5===i.ef[o].ty?l.push(t(i.ef[o],r.effectElements[o],r.effectElements[o].propertyGroup,s)):l.push(e(r.effectElements[o],i.ef[o].ty,s,h));return"ADBE Color Control"===i.mn&&Object.defineProperty(a,"color",{get:function(){return l[0]()}}),Object.defineProperties(a,{numProperties:{get:function(){return i.np}},_name:{value:i.nm},propertyGroup:{value:h}}),a.enabled=0!==i.en,a.active=a.enabled,a}function e(t,e,i,r){var n=ExpressionPropertyInterface(t.p);return t.p.setGroupProperty&&t.p.setGroupProperty(PropertyInterface("",r)),function(){return 10===e?i.comp.compInterface(t.p.v):n()}}return{createEffectsInterface:function(e,i){if(e.effectsManager){var r,n=[],s=e.data.ef,a=e.effectsManager.effectElements.length;for(r=0;r<a;r+=1)n.push(t(s[r],e.effectsManager.effectElements[r],i,e));var o=e.data.ef||[],h=function(t){for(r=0,a=o.length;r<a;){if(t===o[r].nm||t===o[r].mn||t===o[r].ix)return n[r];r+=1}return null};return Object.defineProperty(h,"numProperties",{get:function(){return o.length}}),h}return null}}}(),MaskManagerInterface=function(){function t(t,e){this._mask=t,this._data=e}return Object.defineProperty(t.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(t.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),100*this._mask.op.v}}),function(e){var i,r=createSizedArray(e.viewData.length),n=e.viewData.length;for(i=0;i<n;i+=1)r[i]=new t(e.viewData[i],e.masksProperties[i]);return function(t){for(i=0;i<n;){if(e.masksProperties[i].nm===t)return r[i];i+=1}return null}}}(),ExpressionPropertyInterface=function(){var t={pv:0,v:0,mult:1},e={pv:[0,0,0],v:[0,0,0],mult:1};function i(t,e,i){Object.defineProperty(t,"velocity",{get:function(){return e.getVelocityAtTime(e.comp.currentFrame)}}),t.numKeys=e.keyframes?e.keyframes.length:0,t.key=function(r){if(!t.numKeys)return 0;var n="";n="s"in e.keyframes[r-1]?e.keyframes[r-1].s:"e"in e.keyframes[r-2]?e.keyframes[r-2].e:e.keyframes[r-2].s;var s="unidimensional"===i?new Number(n):Object.assign({},n);return s.time=e.keyframes[r-1].t/e.elem.comp.globalData.frameRate,s.value="unidimensional"===i?n[0]:n,s},t.valueAtTime=e.getValueAtTime,t.speedAtTime=e.getSpeedAtTime,t.velocityAtTime=e.getVelocityAtTime,t.propertyGroup=e.propertyGroup}function r(){return t}return function(n){return n?"unidimensional"===n.propType?function(e){e&&"pv"in e||(e=t);var r=1/e.mult,n=e.pv*r,s=new Number(n);return s.value=n,i(s,e,"unidimensional"),function(){return e.k&&e.getValue(),n=e.v*r,s.value!==n&&((s=new Number(n)).value=n,i(s,e,"unidimensional")),s}}(n):function(t){t&&"pv"in t||(t=e);var r=1/t.mult,n=t.data&&t.data.l||t.pv.length,s=createTypedArray("float32",n),a=createTypedArray("float32",n);return s.value=a,i(s,t,"multidimensional"),function(){t.k&&t.getValue();for(var e=0;e<n;e+=1)a[e]=t.v[e]*r,s[e]=a[e];return s}}(n):r}}(),TextExpressionSelectorPropFactory=function(){function t(t,e){return this.textIndex=t+1,this.textTotal=e,this.v=this.getValue()*this.mult,this.v}return function(e,i){this.pv=1,this.comp=e.comp,this.elem=e,this.mult=.01,this.propType="textSelector",this.textTotal=i.totalChars,this.selectorValue=100,this.lastValue=[1,1,1],this.k=!0,this.x=!0,this.getValue=ExpressionManager.initiateExpression.bind(this)(e,i,this),this.getMult=t,this.getVelocityAtTime=expressionHelpers.getVelocityAtTime,this.kf?this.getValueAtTime=expressionHelpers.getValueAtTime.bind(this):this.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(this),this.setGroupProperty=expressionHelpers.setGroupProperty}}(),propertyGetTextProp=TextSelectorProp.getTextSelectorProp;function SliderEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,0,0,i)}function AngleEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,0,0,i)}function ColorEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,1,0,i)}function PointEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,1,0,i)}function LayerIndexEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,0,0,i)}function MaskIndexEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,0,0,i)}function CheckboxEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,0,0,i)}function NoValueEffect(){this.p={}}function EffectsManager(t,e){var i,r=t.ef||[];this.effectElements=[];var n,s=r.length;for(i=0;i<s;i+=1)n=new GroupEffect(r[i],e),this.effectElements.push(n)}function GroupEffect(t,e){this.init(t,e)}TextSelectorProp.getTextSelectorProp=function(t,e,i){return 1===e.t?new TextExpressionSelectorPropFactory(t,e,i):propertyGetTextProp(t,e,i)},extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(t,e){var i;this.data=t,this.effectElements=[],this.initDynamicPropertyContainer(e);var r,n=this.data.ef.length,s=this.data.ef;for(i=0;i<n;i+=1){switch(r=null,s[i].ty){case 0:r=new SliderEffect(s[i],e,this);break;case 1:r=new AngleEffect(s[i],e,this);break;case 2:r=new ColorEffect(s[i],e,this);break;case 3:r=new PointEffect(s[i],e,this);break;case 4:case 7:r=new CheckboxEffect(s[i],e,this);break;case 10:r=new LayerIndexEffect(s[i],e,this);break;case 11:r=new MaskIndexEffect(s[i],e,this);break;case 5:r=new EffectsManager(s[i],e,this);break;default:r=new NoValueEffect(s[i],e,this)}r&&this.effectElements.push(r)}};var lottie={};function setLocationHref(t){locationHref=t}function searchAnimations(){!0===standalone?animationManager.searchAnimations(animationData,standalone,renderer):animationManager.searchAnimations()}function setSubframeRendering(t){subframeEnabled=t}function setIDPrefix(t){idPrefix=t}function loadAnimation(t){return!0===standalone&&(t.animationData=JSON.parse(animationData)),animationManager.loadAnimation(t)}function setQuality(t){if("string"===typeof t)switch(t){case"high":defaultCurveSegments=200;break;default:case"medium":defaultCurveSegments=50;break;case"low":defaultCurveSegments=10}else!isNaN(t)&&t>1&&(defaultCurveSegments=t);roundValues(!(defaultCurveSegments>=50))}function inBrowser(){return"undefined"!==typeof navigator}function installPlugin(t,e){"expressions"===t&&(expressionsPlugin=e)}function getFactory(t){switch(t){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}function checkReady(){"complete"===document.readyState&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(t){for(var e=queryString.split("&"),i=0;i<e.length;i+=1){var r=e[i].split("=");if(decodeURIComponent(r[0])==t)return decodeURIComponent(r[1])}return null}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocationHref,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=function(t){_useWebWorker=t},lottie.setIDPrefix=setIDPrefix,lottie.__getFactory=getFactory,lottie.version="5.8.1";var standalone="__[STANDALONE]__",animationData="__[ANIMATIONDATA]__",renderer="",queryString;if(standalone){var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src.replace(/^[^\?]+\??/,""),renderer=getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);return lottie},void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return factory(root)}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"../node_modules/konva/lib/Animation.js":function(t,e,i){"use strict";i.d(e,{f:function(){return a}});i("../node_modules/core-js/modules/es.array.splice.js");var r=i("../node_modules/konva/lib/Global.js"),n=i("../node_modules/konva/lib/Util.js"),s=r.zA.performance&&r.zA.performance.now?function(){return r.zA.performance.now()}:function(){return(new Date).getTime()},a=function(){function t(e,i){this.id=t.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:s(),frameRate:0},this.func=e,this.setLayers(i)}var e=t.prototype;return e.setLayers=function(t){var e=[];return e=t?t.length>0?t:[t]:[],this.layers=e,this},e.getLayers=function(){return this.layers},e.addLayer=function(t){var e,i=this.layers,r=i.length;for(e=0;e<r;e++)if(i[e]._id===t._id)return!1;return this.layers.push(t),!0},e.isRunning=function(){var e,i=t.animations,r=i.length;for(e=0;e<r;e++)if(i[e].id===this.id)return!0;return!1},e.start=function(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=s(),t._addAnimation(this),this},e.stop=function(){return t._removeAnimation(this),this},e._updateFrameObject=function(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff},t._addAnimation=function(t){this.animations.push(t),this._handleAnimation()},t._removeAnimation=function(t){var e,i=t.id,r=this.animations,n=r.length;for(e=0;e<n;e++)if(r[e].id===i){this.animations.splice(e,1);break}},t._runFrames=function(){var t,e,i,r,n,a,o,h,l={},c=this.animations;for(r=0;r<c.length;r++)if(e=(t=c[r]).layers,i=t.func,t._updateFrameObject(s()),a=e.length,!i||!1!==i.call(t,t.frame))for(n=0;n<a;n++)void 0!==(o=e[n])._id&&(l[o._id]=o);for(h in l)l.hasOwnProperty(h)&&l[h].batchDraw()},t._animationLoop=function(){var e=t;e.animations.length?(e._runFrames(),n.Z.requestAnimFrame(e._animationLoop)):e.animRunning=!1},t._handleAnimation=function(){this.animRunning||(this.animRunning=!0,n.Z.requestAnimFrame(this._animationLoop))},t}();a.animations=[],a.animIdCounter=0,a.animRunning=!1},"../node_modules/konva/lib/Canvas.js":function(t,e,i){"use strict";i.d(e,{RF:function(){return p},Xz:function(){return d},hh:function(){return f}});var r,n=i("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),s=i("../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js"),a=i("../node_modules/konva/lib/Util.js"),o=i("../node_modules/konva/lib/Context.js"),h=i("../node_modules/konva/lib/Global.js"),l=i("../node_modules/konva/lib/Factory.js"),c=i("../node_modules/konva/lib/Validators.js");var d=function(){function t(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var e=(t||{}).pixelRatio||h.So.pixelRatio||function(){if(r)return r;var t=a.Z.createCanvasElement().getContext("2d");return r=(h.So._global.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}();this.pixelRatio=e,this._canvas=a.Z.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}var e=t.prototype;return e.getContext=function(){return this.context},e.getPixelRatio=function(){return this.pixelRatio},e.setPixelRatio=function(t){var e=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/e,this.getHeight()/e)},e.setWidth=function(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";var e=this.pixelRatio;this.getContext()._context.scale(e,e)},e.setHeight=function(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";var e=this.pixelRatio;this.getContext()._context.scale(e,e)},e.getWidth=function(){return this.width},e.getHeight=function(){return this.height},e.setSize=function(t,e){this.setWidth(t||0),this.setHeight(e||0)},e.toDataURL=function(t,e){try{return this._canvas.toDataURL(t,e)}catch(i){try{return this._canvas.toDataURL()}catch(r){return a.Z.error("Unable to get data URL. "+r.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}},t}();l.F.addGetterSetter(d,"pixelRatio",void 0,(0,c.Kg)());var p=function(t){function e(e){var i;return void 0===e&&(e={width:0,height:0}),(i=t.call(this,e)||this).context=new o.xn((0,n.Z)(i)),i.setSize(e.width,e.height),i}return(0,s.Z)(e,t),e}(d),f=function(t){function e(e){var i;return void 0===e&&(e={width:0,height:0}),(i=t.call(this,e)||this).hitCanvas=!0,i.context=new o.jR((0,n.Z)(i)),i.setSize(e.width,e.height),i}return(0,s.Z)(e,t),e}(d)},"../node_modules/konva/lib/Container.js":function(t,e,i){"use strict";i.d(e,{W:function(){return l}});var r=i("../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js"),n=(i("../node_modules/core-js/modules/web.dom-collections.for-each.js"),i("../node_modules/core-js/modules/es.array.find.js"),i("../node_modules/core-js/modules/es.array.slice.js"),i("../node_modules/core-js/modules/es.object.to-string.js"),i("../node_modules/core-js/modules/es.function.name.js"),i("../node_modules/core-js/modules/es.array.from.js"),i("../node_modules/core-js/modules/es.string.iterator.js"),i("../node_modules/core-js/modules/es.symbol.js"),i("../node_modules/core-js/modules/es.symbol.description.js"),i("../node_modules/core-js/modules/es.symbol.iterator.js"),i("../node_modules/core-js/modules/es.array.iterator.js"),i("../node_modules/core-js/modules/web.dom-collections.iterator.js"),i("../node_modules/konva/lib/Factory.js")),s=i("../node_modules/konva/lib/Node.js"),a=i("../node_modules/konva/lib/Validators.js");function o(t,e){var i="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(i)return(i=i.call(t)).next.bind(i);if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"===typeof t)return h(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return h(t,e)}(t))||e&&t&&"number"===typeof t.length){i&&(t=i);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}var l=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).children=[],e}(0,r.Z)(e,t);var i=e.prototype;return i.getChildren=function(t){if(!t)return this.children||[];var e=this.children||[],i=[];return e.forEach((function(e){t(e)&&i.push(e)})),i},i.hasChildren=function(){return this.getChildren().length>0},i.removeChildren=function(){return this.getChildren().forEach((function(t){t.parent=null,t.index=0,t.remove()})),this.children=[],this._requestDraw(),this},i.destroyChildren=function(){return this.getChildren().forEach((function(t){t.parent=null,t.index=0,t.destroy()})),this.children=[],this._requestDraw(),this},i.add=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];if(arguments.length>1){for(var r=0;r<arguments.length;r++)this.add(arguments[r]);return this}var n=e[0];return n.getParent()?(n.moveTo(this),this):(this._validateAdd(n),n.index=this.getChildren().length,n.parent=this,n._clearCaches(),this.getChildren().push(n),this._fire("add",{child:n}),this._requestDraw(),this)},i.destroy=function(){return this.hasChildren()&&this.destroyChildren(),t.prototype.destroy.call(this),this},i.find=function(t){return this._generalFind(t,!1)},i.findOne=function(t){var e=this._generalFind(t,!0);return e.length>0?e[0]:void 0},i._generalFind=function(t,e){var i=[];return this._descendants((function(r){var n=r._isMatch(t);return n&&i.push(r),!(!n||!e)})),i},i._descendants=function(t){for(var e,i=o(this.getChildren());!(e=i()).done;){var r=e.value;if(t(r))return!0;if(r.hasChildren()&&r._descendants(t))return!0}return!1},i.toObject=function(){var t=s.N.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach((function(e){t.children.push(e.toObject())})),t},i.isAncestorOf=function(t){for(var e=t.getParent();e;){if(e._id===this._id)return!0;e=e.getParent()}return!1},i.clone=function(t){var e=s.N.prototype.clone.call(this,t);return this.getChildren().forEach((function(t){e.add(t.clone())})),e},i.getAllIntersections=function(t){var e=[];return this.find("Shape").forEach((function(i){i.isVisible()&&i.intersects(t)&&e.push(i)})),e},i._clearSelfAndDescendantCache=function(e){var i;t.prototype._clearSelfAndDescendantCache.call(this,e),this.isCached()||null===(i=this.children)||void 0===i||i.forEach((function(t){t._clearSelfAndDescendantCache(e)}))},i._setChildrenIndices=function(){var t;null===(t=this.children)||void 0===t||t.forEach((function(t,e){t.index=e})),this._requestDraw()},i.drawScene=function(t,e){var i=this.getLayer(),r=t||i&&i.getCanvas(),n=r&&r.getContext(),s=this._getCanvasCache(),a=s&&s.scene,o=r&&r.isCache;if(!this.isVisible()&&!o)return this;if(a){n.save();var h=this.getAbsoluteTransform(e).getMatrix();n.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this._drawCachedSceneCanvas(n),n.restore()}else this._drawChildren("drawScene",r,e);return this},i.drawHit=function(t,e){if(!this.shouldDrawHit(e))return this;var i=this.getLayer(),r=t||i&&i.hitCanvas,n=r&&r.getContext(),s=this._getCanvasCache();if(s&&s.hit){n.save();var a=this.getAbsoluteTransform(e).getMatrix();n.transform(a[0],a[1],a[2],a[3],a[4],a[5]),this._drawCachedHitCanvas(n),n.restore()}else this._drawChildren("drawHit",r,e);return this},i._drawChildren=function(t,e,i){var r,n=e&&e.getContext(),s=this.clipWidth(),a=this.clipHeight(),o=this.clipFunc(),h=s&&a||o,l=i===this;if(h){n.save();var c=this.getAbsoluteTransform(i),d=c.getMatrix();if(n.transform(d[0],d[1],d[2],d[3],d[4],d[5]),n.beginPath(),o)o.call(this,n,this);else{var p=this.clipX(),f=this.clipY();n.rect(p,f,s,a)}n.clip(),d=c.copy().invert().getMatrix(),n.transform(d[0],d[1],d[2],d[3],d[4],d[5])}var u=!l&&"source-over"!==this.globalCompositeOperation()&&"drawScene"===t;u&&(n.save(),n._applyGlobalCompositeOperation(this)),null===(r=this.children)||void 0===r||r.forEach((function(r){r[t](e,i)})),u&&n.restore(),h&&n.restore()},i.getClientRect=function(t){var e,i,r,n,s,a=(t=t||{}).skipTransform,o=t.relativeTo,h={x:1/0,y:1/0,width:0,height:0},l=this;null===(e=this.children)||void 0===e||e.forEach((function(e){if(e.visible()){var a=e.getClientRect({relativeTo:l,skipShadow:t.skipShadow,skipStroke:t.skipStroke});0===a.width&&0===a.height||(void 0===i?(i=a.x,r=a.y,n=a.x+a.width,s=a.y+a.height):(i=Math.min(i,a.x),r=Math.min(r,a.y),n=Math.max(n,a.x+a.width),s=Math.max(s,a.y+a.height)))}}));for(var c=this.find("Shape"),d=!1,p=0;p<c.length;p++){if(c[p]._isVisible(this)){d=!0;break}}return h=d&&void 0!==i?{x:i,y:r,width:n-i,height:s-r}:{x:0,y:0,width:0,height:0},a?h:this._transformedRect(h,o)},e}(s.N);n.F.addComponentsGetterSetter(l,"clip",["x","y","width","height"]),n.F.addGetterSetter(l,"clipX",void 0,(0,a.Kg)()),n.F.addGetterSetter(l,"clipY",void 0,(0,a.Kg)()),n.F.addGetterSetter(l,"clipWidth",void 0,(0,a.Kg)()),n.F.addGetterSetter(l,"clipHeight",void 0,(0,a.Kg)()),n.F.addGetterSetter(l,"clipFunc")},"../node_modules/konva/lib/Context.js":function(t,e,i){"use strict";i.d(e,{_y:function(){return h},jR:function(){return c},xn:function(){return l}});var r=i("../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js"),n=(i("../node_modules/core-js/modules/es.array.join.js"),i("../node_modules/core-js/modules/es.array.map.js"),i("../node_modules/core-js/modules/es.array.fill.js"),i("../node_modules/core-js/modules/es.array.slice.js"),i("../node_modules/konva/lib/Util.js")),s=i("../node_modules/konva/lib/Global.js");function a(t){var e,i,r=[],s=t.length,a=n.Z;for(e=0;e<s;e++)i=t[e],a._isNumber(i)?i=Math.round(1e3*i)/1e3:a._isString(i)||(i+=""),r.push(i);return r}var o=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],h=function(){function t(t){this.canvas=t,this._context=t._canvas.getContext("2d"),s.So.enableTrace&&(this.traceArr=[],this._enableTrace())}var e=t.prototype;return e.fillShape=function(t){t.fillEnabled()&&this._fill(t)},e._fill=function(t){},e.strokeShape=function(t){t.hasStroke()&&this._stroke(t)},e._stroke=function(t){},e.fillStrokeShape=function(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))},e.getTrace=function(t,e){var i,r,s,a,o=this.traceArr,h=o.length,l="";for(i=0;i<h;i++)(s=(r=o[i]).method)?(a=r.args,l+=s,t?l+="()":n.Z._isArray(a[0])?l+="(["+a.join(",")+"])":(e&&(a=a.map((function(t){return"number"===typeof t?Math.floor(t):t}))),l+="("+a.join(",")+")")):(l+=r.property,t||(l+="="+r.val)),l+=";";return l},e.clearTrace=function(){this.traceArr=[]},e._trace=function(t){var e=this.traceArr;e.push(t),e.length>=100&&e.shift()},e.reset=function(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)},e.getCanvas=function(){return this.canvas},e.clear=function(t){var e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth()/e.pixelRatio,e.getHeight()/e.pixelRatio)},e._applyLineCap=function(t){var e=t.getLineCap();e&&this.setAttr("lineCap",e)},e._applyOpacity=function(t){var e=t.getAbsoluteOpacity();1!==e&&this.setAttr("globalAlpha",e)},e._applyLineJoin=function(t){var e=t.attrs.lineJoin;e&&this.setAttr("lineJoin",e)},e.setAttr=function(t,e){this._context[t]=e},e.arc=function(t,e,i,r,n,s){this._context.arc(t,e,i,r,n,s)},e.arcTo=function(t,e,i,r,n){this._context.arcTo(t,e,i,r,n)},e.beginPath=function(){this._context.beginPath()},e.bezierCurveTo=function(t,e,i,r,n,s){this._context.bezierCurveTo(t,e,i,r,n,s)},e.clearRect=function(t,e,i,r){this._context.clearRect(t,e,i,r)},e.clip=function(){this._context.clip()},e.closePath=function(){this._context.closePath()},e.createImageData=function(t,e){var i=arguments;return 2===i.length?this._context.createImageData(t,e):1===i.length?this._context.createImageData(t):void 0},e.createLinearGradient=function(t,e,i,r){return this._context.createLinearGradient(t,e,i,r)},e.createPattern=function(t,e){return this._context.createPattern(t,e)},e.createRadialGradient=function(t,e,i,r,n,s){return this._context.createRadialGradient(t,e,i,r,n,s)},e.drawImage=function(t,e,i,r,n,s,a,o,h){var l=arguments,c=this._context;3===l.length?c.drawImage(t,e,i):5===l.length?c.drawImage(t,e,i,r,n):9===l.length&&c.drawImage(t,e,i,r,n,s,a,o,h)},e.ellipse=function(t,e,i,r,n,s,a,o){this._context.ellipse(t,e,i,r,n,s,a,o)},e.isPointInPath=function(t,e){return this._context.isPointInPath(t,e)},e.fill=function(t){t?this._context.fill(t):this._context.fill()},e.fillRect=function(t,e,i,r){this._context.fillRect(t,e,i,r)},e.strokeRect=function(t,e,i,r){this._context.strokeRect(t,e,i,r)},e.fillText=function(t,e,i,r){r?this._context.fillText(t,e,i,r):this._context.fillText(t,e,i)},e.measureText=function(t){return this._context.measureText(t)},e.getImageData=function(t,e,i,r){return this._context.getImageData(t,e,i,r)},e.lineTo=function(t,e){this._context.lineTo(t,e)},e.moveTo=function(t,e){this._context.moveTo(t,e)},e.rect=function(t,e,i,r){this._context.rect(t,e,i,r)},e.putImageData=function(t,e,i){this._context.putImageData(t,e,i)},e.quadraticCurveTo=function(t,e,i,r){this._context.quadraticCurveTo(t,e,i,r)},e.restore=function(){this._context.restore()},e.rotate=function(t){this._context.rotate(t)},e.save=function(){this._context.save()},e.scale=function(t,e){this._context.scale(t,e)},e.setLineDash=function(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)},e.getLineDash=function(){return this._context.getLineDash()},e.setTransform=function(t,e,i,r,n,s){this._context.setTransform(t,e,i,r,n,s)},e.stroke=function(t){t?this._context.stroke(t):this._context.stroke()},e.strokeText=function(t,e,i,r){this._context.strokeText(t,e,i,r)},e.transform=function(t,e,i,r,n,s){this._context.transform(t,e,i,r,n,s)},e.translate=function(t,e){this._context.translate(t,e)},e._enableTrace=function(){var t,e,i=this,r=o.length,n=this.setAttr,s=function(t){var r,n=i[t];i[t]=function(){return e=a(Array.prototype.slice.call(arguments,0)),r=n.apply(i,arguments),i._trace({method:t,args:e}),r}};for(t=0;t<r;t++)s(o[t]);i.setAttr=function(){n.apply(i,arguments);var t=arguments[0],e=arguments[1];"shadowOffsetX"!==t&&"shadowOffsetY"!==t&&"shadowBlur"!==t||(e/=this.canvas.getPixelRatio()),i._trace({property:t,val:e})}},e._applyGlobalCompositeOperation=function(t){var e=t.attrs.globalCompositeOperation;!e||"source-over"===e||this.setAttr("globalCompositeOperation",e)},t}();["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"].forEach((function(t){Object.defineProperty(h.prototype,t,{get:function(){return this._context[t]},set:function(e){this._context[t]=e}})}));var l=function(t){function e(){return t.apply(this,arguments)||this}(0,r.Z)(e,t);var i=e.prototype;return i._fillColor=function(t){var e=t.fill();this.setAttr("fillStyle",e),t._fillFunc(this)},i._fillPattern=function(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)},i._fillLinearGradient=function(t){var e=t._getLinearGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))},i._fillRadialGradient=function(t){var e=t._getRadialGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))},i._fill=function(t){var e=t.fill(),i=t.getFillPriority();if(e&&"color"===i)this._fillColor(t);else{var r=t.getFillPatternImage();if(r&&"pattern"===i)this._fillPattern(t);else{var n=t.getFillLinearGradientColorStops();if(n&&"linear-gradient"===i)this._fillLinearGradient(t);else{var s=t.getFillRadialGradientColorStops();s&&"radial-gradient"===i?this._fillRadialGradient(t):e?this._fillColor(t):r?this._fillPattern(t):n?this._fillLinearGradient(t):s&&this._fillRadialGradient(t)}}}},i._strokeLinearGradient=function(t){var e=t.getStrokeLinearGradientStartPoint(),i=t.getStrokeLinearGradientEndPoint(),r=t.getStrokeLinearGradientColorStops(),n=this.createLinearGradient(e.x,e.y,i.x,i.y);if(r){for(var s=0;s<r.length;s+=2)n.addColorStop(r[s],r[s+1]);this.setAttr("strokeStyle",n)}},i._stroke=function(t){var e=t.dash(),i=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!i){this.save();var r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(t),e&&t.dashEnabled()&&(this.setLineDash(e),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),i||this.restore()}},i._applyShadow=function(t){var e,i,r,n=null!==(e=t.getShadowRGBA())&&void 0!==e?e:"black",s=null!==(i=t.getShadowBlur())&&void 0!==i?i:5,a=null!==(r=t.getShadowOffset())&&void 0!==r?r:{x:0,y:0},o=t.getAbsoluteScale(),h=this.canvas.getPixelRatio(),l=o.x*h,c=o.y*h;this.setAttr("shadowColor",n),this.setAttr("shadowBlur",s*Math.min(Math.abs(l),Math.abs(c))),this.setAttr("shadowOffsetX",a.x*l),this.setAttr("shadowOffsetY",a.y*c)},e}(h),c=function(t){function e(){return t.apply(this,arguments)||this}(0,r.Z)(e,t);var i=e.prototype;return i._fill=function(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()},i.strokeShape=function(t){t.hasHitStroke()&&this._stroke(t)},i._stroke=function(t){if(t.hasHitStroke()){var e=t.getStrokeScaleEnabled();if(!e){this.save();var i=this.getCanvas().getPixelRatio();this.setTransform(i,0,0,i,0,0)}this._applyLineCap(t);var r=t.hitStrokeWidth(),n="auto"===r?t.strokeWidth():r;this.setAttr("lineWidth",n),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),e||this.restore()}},e}(h)},"../node_modules/konva/lib/DragAndDrop.js":function(t,e,i){"use strict";i.d(e,{DD:function(){return s}});i("../node_modules/core-js/modules/web.dom-collections.for-each.js"),i("../node_modules/core-js/modules/es.array.iterator.js"),i("../node_modules/core-js/modules/es.map.js"),i("../node_modules/core-js/modules/es.object.to-string.js"),i("../node_modules/core-js/modules/es.string.iterator.js"),i("../node_modules/core-js/modules/esnext.map.delete-all.js"),i("../node_modules/core-js/modules/esnext.map.every.js"),i("../node_modules/core-js/modules/esnext.map.filter.js"),i("../node_modules/core-js/modules/esnext.map.find.js"),i("../node_modules/core-js/modules/esnext.map.find-key.js"),i("../node_modules/core-js/modules/esnext.map.includes.js"),i("../node_modules/core-js/modules/esnext.map.key-of.js"),i("../node_modules/core-js/modules/esnext.map.map-keys.js"),i("../node_modules/core-js/modules/esnext.map.map-values.js"),i("../node_modules/core-js/modules/esnext.map.merge.js"),i("../node_modules/core-js/modules/esnext.map.reduce.js"),i("../node_modules/core-js/modules/esnext.map.some.js"),i("../node_modules/core-js/modules/esnext.map.update.js"),i("../node_modules/core-js/modules/web.dom-collections.iterator.js"),i("../node_modules/core-js/modules/es.array.find.js");var r=i("../node_modules/konva/lib/Global.js"),n=i("../node_modules/konva/lib/Util.js"),s={get isDragging(){var t=!1;return s._dragElements.forEach((function(e){"dragging"===e.dragStatus&&(t=!0)})),t},justDragged:!1,get node(){var t;return s._dragElements.forEach((function(e){t=e.node})),t},_dragElements:new Map,_drag:function(t){var e=[];s._dragElements.forEach((function(i,r){var s=i.node,a=s.getStage();a.setPointersPositions(t),void 0===i.pointerId&&(i.pointerId=n.Z._getFirstPointerId(t));var o=a._changedPointerPositions.find((function(t){return t.id===i.pointerId}));if(o){if("dragging"!==i.dragStatus){var h=s.dragDistance();if(Math.max(Math.abs(o.x-i.startPointerPos.x),Math.abs(o.y-i.startPointerPos.y))<h)return;if(s.startDrag({evt:t}),!s.isDragging())return}s._setDragPosition(t,i),e.push(s)}})),e.forEach((function(e){e.fire("dragmove",{type:"dragmove",target:e,evt:t},!0)}))},_endDragBefore:function(t){s._dragElements.forEach((function(e){var i=e.node.getStage();if(t&&i.setPointersPositions(t),i._changedPointerPositions.find((function(t){return t.id===e.pointerId}))){"dragging"!==e.dragStatus&&"stopped"!==e.dragStatus||(s.justDragged=!0,r.So._mouseListenClick=!1,r.So._touchListenClick=!1,r.So._pointerListenClick=!1,e.dragStatus="stopped");var n=e.node.getLayer()||e.node instanceof r.So.Stage&&e.node;n&&n.batchDraw()}}))},_endDragAfter:function(t){s._dragElements.forEach((function(e,i){"stopped"===e.dragStatus&&e.node.fire("dragend",{type:"dragend",target:e.node,evt:t},!0),"dragging"!==e.dragStatus&&s._dragElements.delete(i)}))}};r.So.isBrowser&&(window.addEventListener("mouseup",s._endDragBefore,!0),window.addEventListener("touchend",s._endDragBefore,!0),window.addEventListener("mousemove",s._drag),window.addEventListener("touchmove",s._drag),window.addEventListener("mouseup",s._endDragAfter,!1),window.addEventListener("touchend",s._endDragAfter,!1))},"../node_modules/konva/lib/Factory.js":function(t,e,i){"use strict";i.d(e,{F:function(){return o}});var r=i("../node_modules/konva/lib/Util.js"),n=i("../node_modules/konva/lib/Validators.js"),s="get",a="set",o={addGetterSetter:function(t,e,i,r,n){o.addGetter(t,e,i),o.addSetter(t,e,r,n),o.addOverloadedGetterSetter(t,e)},addGetter:function(t,e,i){var n=s+r.Z._capitalize(e);t.prototype[n]=t.prototype[n]||function(){var t=this.attrs[e];return void 0===t?i:t}},addSetter:function(t,e,i,n){var s=a+r.Z._capitalize(e);t.prototype[s]||o.overWriteSetter(t,e,i,n)},overWriteSetter:function(t,e,i,n){var s=a+r.Z._capitalize(e);t.prototype[s]=function(t){return i&&void 0!==t&&null!==t&&(t=i.call(this,t,e)),this._setAttr(e,t),n&&n.call(this),this}},addComponentsGetterSetter:function(t,e,i,h,l){var c,d,p=i.length,f=r.Z._capitalize,u=s+f(e),m=a+f(e);t.prototype[u]=function(){var t={};for(c=0;c<p;c++)t[d=i[c]]=this.getAttr(e+f(d));return t};var g=(0,n.uZ)(i);t.prototype[m]=function(t){var i,r=this.attrs[e];for(i in h&&(t=h.call(this,t)),g&&g.call(this,t,e),t)t.hasOwnProperty(i)&&this._setAttr(e+f(i),t[i]);return this._fireChangeEvent(e,r,t),l&&l.call(this),this},o.addOverloadedGetterSetter(t,e)},addOverloadedGetterSetter:function(t,e){var i=r.Z._capitalize(e),n=a+i,o=s+i;t.prototype[e]=function(){return arguments.length?(this[n](arguments[0]),this):this[o]()}},addDeprecatedGetterSetter:function(t,e,i,n){r.Z.error("Adding deprecated "+e);var a=s+r.Z._capitalize(e),h=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";t.prototype[a]=function(){r.Z.error(h);var t=this.attrs[e];return void 0===t?i:t},o.addSetter(t,e,n,(function(){r.Z.error(h)})),o.addOverloadedGetterSetter(t,e)},backCompat:function(t,e){r.Z.each(e,(function(e,i){var n=t.prototype[i],o=s+r.Z._capitalize(e),h=a+r.Z._capitalize(e);function l(){n.apply(this,arguments),r.Z.error('"'+e+'" method is deprecated and will be removed soon. Use ""'+i+'" instead.')}t.prototype[e]=l,t.prototype[o]=l,t.prototype[h]=l}))},afterSetFilter:function(){this._filterUpToDate=!1}}},"../node_modules/konva/lib/Global.js":function(t,e,i){"use strict";i.d(e,{DA:function(){return a},So:function(){return s},zA:function(){return n}});i("../node_modules/core-js/modules/es.object.to-string.js");var r=Math.PI/180;var n="undefined"!==typeof global?global:"undefined"!==typeof window?window:"undefined"!==typeof WorkerGlobalScope?self:{},s={_global:n,version:"8.3.1",isBrowser:"undefined"!==typeof window&&("[object Window]"==={}.toString.call(window)||"[object global]"==={}.toString.call(window)),isUnminified:/param/.test(function(t){}.toString()),dblClickWindow:400,getAngle:function(t){return s.angleDeg?t*r:t},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:"undefined"!==typeof window&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:function(){return s.DD.isDragging},isDragReady:function(){return!!s.DD.node},document:n.document,_injectGlobal:function(t){n.Konva=t}},a=function(t){s[t.prototype.getClassName()]=t};s._injectGlobal(s)},"../node_modules/konva/lib/Group.js":function(t,e,i){"use strict";i.d(e,{Z:function(){return o}});var r=i("../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js"),n=i("../node_modules/konva/lib/Util.js"),s=i("../node_modules/konva/lib/Container.js"),a=i("../node_modules/konva/lib/Global.js"),o=function(t){function e(){return t.apply(this,arguments)||this}return(0,r.Z)(e,t),e.prototype._validateAdd=function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&n.Z.throw("You may only add groups and shapes to groups.")},e}(s.W);o.prototype.nodeType="Group",(0,a.DA)(o)},"../node_modules/konva/lib/Layer.js":function(t,e,i){"use strict";i.d(e,{m:function(){return u}});var r=i("../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js"),n=i("../node_modules/konva/lib/Util.js"),s=i("../node_modules/konva/lib/Container.js"),a=i("../node_modules/konva/lib/Node.js"),o=i("../node_modules/konva/lib/Factory.js"),h=i("../node_modules/konva/lib/Canvas.js"),l=i("../node_modules/konva/lib/Validators.js"),c=i("../node_modules/konva/lib/Shape.js"),d=i("../node_modules/konva/lib/Global.js"),p=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],f=p.length,u=function(t){function e(e){var i;return(i=t.call(this,e)||this).canvas=new h.RF,i.hitCanvas=new h.hh({pixelRatio:1}),i._waitingForDraw=!1,i.on("visibleChange.konva",i._checkVisibility),i._checkVisibility(),i.on("imageSmoothingEnabledChange.konva",i._setSmoothEnabled),i._setSmoothEnabled(),i}(0,r.Z)(e,t);var i=e.prototype;return i.createPNGStream=function(){return this.canvas._canvas.createPNGStream()},i.getCanvas=function(){return this.canvas},i.getNativeCanvasElement=function(){return this.canvas._canvas},i.getHitCanvas=function(){return this.hitCanvas},i.getContext=function(){return this.getCanvas().getContext()},i.clear=function(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this},i.setZIndex=function(e){t.prototype.setZIndex.call(this,e);var i=this.getStage();return i&&i.content&&(i.content.removeChild(this.getNativeCanvasElement()),e<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[e+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement())),this},i.moveToTop=function(){a.N.prototype.moveToTop.call(this);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0},i.moveUp=function(){if(!a.N.prototype.moveUp.call(this))return!1;var t=this.getStage();return!(!t||!t.content)&&(t.content.removeChild(this.getNativeCanvasElement()),this.index<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement()),!0)},i.moveDown=function(){if(a.N.prototype.moveDown.call(this)){var t=this.getStage();if(t){var e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[this.index+1].getCanvas()._canvas))}return!0}return!1},i.moveToBottom=function(){if(a.N.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[1].getCanvas()._canvas))}return!0}return!1},i.getLayer=function(){return this},i.remove=function(){var t=this.getNativeCanvasElement();return a.N.prototype.remove.call(this),t&&t.parentNode&&n.Z._isInDocument(t)&&t.parentNode.removeChild(t),this},i.getStage=function(){return this.parent},i.setSize=function(t){var e=t.width,i=t.height;return this.canvas.setSize(e,i),this.hitCanvas.setSize(e,i),this._setSmoothEnabled(),this},i._validateAdd=function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&n.Z.throw("You may only add groups and shapes to a layer.")},i._toKonvaCanvas=function(t){return(t=t||{}).width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=void 0!==t.x?t.x:this.x(),t.y=void 0!==t.y?t.y:this.y(),a.N.prototype._toKonvaCanvas.call(this,t)},i._checkVisibility=function(){var t=this.visible();this.canvas._canvas.style.display=t?"block":"none"},i._setSmoothEnabled=function(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()},i.getWidth=function(){if(this.parent)return this.parent.width()},i.setWidth=function(){n.Z.warn('Can not change width of layer. Use "stage.width(value)" function instead.')},i.getHeight=function(){if(this.parent)return this.parent.height()},i.setHeight=function(){n.Z.warn('Can not change height of layer. Use "stage.height(value)" function instead.')},i.batchDraw=function(){var t=this;return this._waitingForDraw||(this._waitingForDraw=!0,n.Z.requestAnimFrame((function(){t.draw(),t._waitingForDraw=!1}))),this},i.getIntersection=function(t){if(!this.isListening()||!this.isVisible())return null;for(var e=1,i=!1;;){for(var r=0;r<f;r++){var n=p[r],s=this._getIntersection({x:t.x+n.x*e,y:t.y+n.y*e}),a=s.shape;if(a)return a;if(i=!!s.antialiased,!s.antialiased)break}if(!i)return null;e+=1}},i._getIntersection=function(t){var e=this.hitCanvas.pixelRatio,i=this.hitCanvas.context.getImageData(Math.round(t.x*e),Math.round(t.y*e),1,1).data,r=i[3];if(255===r){var s=n.Z._rgbToHex(i[0],i[1],i[2]),a=c.J["#"+s];return a?{shape:a}:{antialiased:!0}}return r>0?{antialiased:!0}:{}},i.drawScene=function(t,e){var i=this.getLayer(),r=t||i&&i.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&r.getContext().clear(),s.W.prototype.drawScene.call(this,r,e),this._fire("draw",{node:this}),this},i.drawHit=function(t,e){var i=this.getLayer(),r=t||i&&i.hitCanvas;return i&&i.clearBeforeDraw()&&i.getHitCanvas().getContext().clear(),s.W.prototype.drawHit.call(this,r,e),this},i.enableHitGraph=function(){return this.hitGraphEnabled(!0),this},i.disableHitGraph=function(){return this.hitGraphEnabled(!1),this},i.setHitGraphEnabled=function(t){n.Z.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)},i.getHitGraphEnabled=function(t){return n.Z.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()},i.toggleHitCanvas=function(){if(this.parent&&this.parent.content){var t=this.parent;!!this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}},e}(s.W);u.prototype.nodeType="Layer",(0,d.DA)(u),o.F.addGetterSetter(u,"imageSmoothingEnabled",!0),o.F.addGetterSetter(u,"clearBeforeDraw",!0),o.F.addGetterSetter(u,"hitGraphEnabled",!0,(0,l.I0)())},"../node_modules/konva/lib/Node.js":function(t,e,i){"use strict";i.d(e,{N:function(){return w}});i("../node_modules/core-js/modules/es.array.join.js"),i("../node_modules/core-js/modules/es.array.iterator.js"),i("../node_modules/core-js/modules/es.map.js"),i("../node_modules/core-js/modules/es.object.to-string.js"),i("../node_modules/core-js/modules/es.string.iterator.js"),i("../node_modules/core-js/modules/esnext.map.delete-all.js"),i("../node_modules/core-js/modules/esnext.map.every.js"),i("../node_modules/core-js/modules/esnext.map.filter.js"),i("../node_modules/core-js/modules/esnext.map.find.js"),i("../node_modules/core-js/modules/esnext.map.find-key.js"),i("../node_modules/core-js/modules/esnext.map.includes.js"),i("../node_modules/core-js/modules/esnext.map.key-of.js"),i("../node_modules/core-js/modules/esnext.map.map-keys.js"),i("../node_modules/core-js/modules/esnext.map.map-values.js"),i("../node_modules/core-js/modules/esnext.map.merge.js"),i("../node_modules/core-js/modules/esnext.map.reduce.js"),i("../node_modules/core-js/modules/esnext.map.some.js"),i("../node_modules/core-js/modules/esnext.map.update.js"),i("../node_modules/core-js/modules/web.dom-collections.iterator.js"),i("../node_modules/core-js/modules/es.array.map.js"),i("../node_modules/core-js/modules/web.dom-collections.for-each.js"),i("../node_modules/core-js/modules/es.array.filter.js"),i("../node_modules/core-js/modules/es.regexp.exec.js"),i("../node_modules/core-js/modules/es.string.split.js"),i("../node_modules/core-js/modules/es.array.splice.js"),i("../node_modules/core-js/modules/es.array.concat.js"),i("../node_modules/core-js/modules/es.array.slice.js"),i("../node_modules/core-js/modules/web.url.to-json.js"),i("../node_modules/core-js/modules/es.string.replace.js"),i("../node_modules/core-js/modules/es.function.name.js"),i("../node_modules/core-js/modules/es.object.get-prototype-of.js");var r=i("../node_modules/konva/lib/Util.js"),n=i("../node_modules/konva/lib/Factory.js"),s=i("../node_modules/konva/lib/Canvas.js"),a=i("../node_modules/konva/lib/Global.js"),o=i("../node_modules/konva/lib/DragAndDrop.js"),h=i("../node_modules/konva/lib/Validators.js"),l="absoluteOpacity",c="allEventListeners",d="absoluteTransform",p="absoluteScale",f="canvas",u="listening",m="mouseenter",g="mouseleave",y="Shape",v=" ",b="stage",_="transform",x="visible",S=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(v),P=1,w=function(){function t(t){this._id=P++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}var e=t.prototype;return e.hasChildren=function(){return!1},e._clearCache=function(t){t!==_&&t!==d||!this._cache.get(t)?t?this._cache.delete(t):this._cache.clear():this._cache.get(t).dirty=!0},e._getCache=function(t,e){var i=this._cache.get(t);return(void 0===i||(t===_||t===d)&&!0===i.dirty)&&(i=e.call(this),this._cache.set(t,i)),i},e._calculate=function(t,e,i){var r=this;if(!this._attachedDepsListeners.get(t)){var n=e.map((function(t){return t+"Change.konva"})).join(v);this.on(n,(function(){r._clearCache(t)})),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,i)},e._getCanvasCache=function(){return this._cache.get(f)},e._clearSelfAndDescendantCache=function(t){this._clearCache(t),t===d&&this.fire("absoluteTransformChange")},e.clearCache=function(){return this._cache.delete(f),this._clearSelfAndDescendantCache(),this._requestDraw(),this},e.cache=function(t){var e=t||{},i={};void 0!==e.x&&void 0!==e.y&&void 0!==e.width&&void 0!==e.height||(i=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var n=Math.ceil(e.width||i.width),a=Math.ceil(e.height||i.height),o=e.pixelRatio,h=void 0===e.x?i.x:e.x,c=void 0===e.y?i.y:e.y,d=e.offset||0,u=e.drawBorder||!1,m=e.hitCanvasPixelRatio||1;if(n&&a){n+=2*d,a+=2*d,h-=d,c-=d;var g=new s.RF({pixelRatio:o,width:n,height:a}),y=new s.RF({pixelRatio:o,width:0,height:0}),v=new s.hh({pixelRatio:m,width:n,height:a}),b=g.getContext(),_=v.getContext();return v.isCache=!0,g.isCache=!0,this._cache.delete(f),this._filterUpToDate=!1,!1===e.imageSmoothingEnabled&&(g.getContext()._context.imageSmoothingEnabled=!1,y.getContext()._context.imageSmoothingEnabled=!1),b.save(),_.save(),b.translate(-h,-c),_.translate(-h,-c),this._isUnderCache=!0,this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(p),this.drawScene(g,this),this.drawHit(v,this),this._isUnderCache=!1,b.restore(),_.restore(),u&&(b.save(),b.beginPath(),b.rect(0,0,n,a),b.closePath(),b.setAttr("strokeStyle","red"),b.setAttr("lineWidth",5),b.stroke(),b.restore()),this._cache.set(f,{scene:g,filter:y,hit:v,x:h,y:c}),this._requestDraw(),this}r.Z.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.")},e.isCached=function(){return this._cache.has(f)},e.getClientRect=function(t){throw new Error('abstract "getClientRect" method call')},e._transformedRect=function(t,e){var i,r,n,s,a=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],o=this.getAbsoluteTransform(e);return a.forEach((function(t){var e=o.point(t);void 0===i&&(i=n=e.x,r=s=e.y),i=Math.min(i,e.x),r=Math.min(r,e.y),n=Math.max(n,e.x),s=Math.max(s,e.y)})),{x:i,y:r,width:n-i,height:s-r}},e._drawCachedSceneCanvas=function(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);var e=this._getCanvasCache();t.translate(e.x,e.y);var i=this._getCachedSceneCanvas(),r=i.pixelRatio;t.drawImage(i._canvas,0,0,i.width/r,i.height/r),t.restore()},e._drawCachedHitCanvas=function(t){var e=this._getCanvasCache(),i=e.hit;t.save(),t.translate(e.x,e.y),t.drawImage(i._canvas,0,0,i.width/i.pixelRatio,i.height/i.pixelRatio),t.restore()},e._getCachedSceneCanvas=function(){var t,e,i,n,s=this.filters(),a=this._getCanvasCache(),o=a.scene,h=a.filter,l=h.getContext();if(s){if(!this._filterUpToDate){var c=o.pixelRatio;h.setSize(o.width/o.pixelRatio,o.height/o.pixelRatio);try{for(t=s.length,l.clear(),l.drawImage(o._canvas,0,0,o.getWidth()/c,o.getHeight()/c),e=l.getImageData(0,0,h.getWidth(),h.getHeight()),i=0;i<t;i++)"function"===typeof(n=s[i])?(n.call(this,e),l.putImageData(e,0,0)):r.Z.error("Filter should be type of function, but got "+typeof n+" instead. Please check correct filters")}catch(d){r.Z.error("Unable to apply filter. "+d.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return h}return o},e.on=function(t,e){if(this._cache&&this._cache.delete(c),3===arguments.length)return this._delegate.apply(this,arguments);var i,r,n,s,a=t.split(v),o=a.length;for(i=0;i<o;i++)n=(r=a[i].split("."))[0],s=r[1]||"",this.eventListeners[n]||(this.eventListeners[n]=[]),this.eventListeners[n].push({name:s,handler:e});return this},e.off=function(t,e){var i,r,n,s,a,o=(t||"").split(v),h=o.length;if(this._cache&&this._cache.delete(c),!t)for(r in this.eventListeners)this._off(r);for(i=0;i<h;i++)if(s=(n=o[i].split("."))[0],a=n[1],s)this.eventListeners[s]&&this._off(s,a,e);else for(r in this.eventListeners)this._off(r,a,e);return this},e.dispatchEvent=function(t){var e={target:this,type:t.type,evt:t};return this.fire(t.type,e),this},e.addEventListener=function(t,e){return this.on(t,(function(t){e.call(this,t.evt)})),this},e.removeEventListener=function(t){return this.off(t),this},e._delegate=function(t,e,i){var n=this;this.on(t,(function(t){for(var s=t.target.findAncestors(e,!0,n),a=0;a<s.length;a++)(t=r.Z.cloneObject(t)).currentTarget=s[a],i.call(s[a],t)}))},e.remove=function(){return this.isDragging()&&this.stopDrag(),o.DD._dragElements.delete(this._id),this._remove(),this},e._clearCaches=function(){this._clearSelfAndDescendantCache(d),this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(p),this._clearSelfAndDescendantCache(b),this._clearSelfAndDescendantCache(x),this._clearSelfAndDescendantCache(u)},e._remove=function(){this._clearCaches();var t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)},e.destroy=function(){return this.remove(),this},e.getAttr=function(t){var e="get"+r.Z._capitalize(t);return r.Z._isFunction(this[e])?this[e]():this.attrs[t]},e.getAncestors=function(){for(var t=this.getParent(),e=[];t;)e.push(t),t=t.getParent();return e},e.getAttrs=function(){return this.attrs||{}},e.setAttrs=function(t){var e=this;return this._batchTransformChanges((function(){var i,n;if(!t)return e;for(i in t)"children"!==i&&(n="set"+r.Z._capitalize(i),r.Z._isFunction(e[n])?e[n](t[i]):e._setAttr(i,t[i]))})),this},e.isListening=function(){return this._getCache(u,this._isListening)},e._isListening=function(t){if(!this.listening())return!1;var e=this.getParent();return!e||e===t||this===t||e._isListening(t)},e.isVisible=function(){return this._getCache(x,this._isVisible)},e._isVisible=function(t){if(!this.visible())return!1;var e=this.getParent();return!e||e===t||this===t||e._isVisible(t)},e.shouldDrawHit=function(t,e){if(void 0===e&&(e=!1),t)return this._isVisible(t)&&this._isListening(t);var i=this.getLayer(),r=!1;o.DD._dragElements.forEach((function(t){"dragging"===t.dragStatus&&("Stage"===t.node.nodeType||t.node.getLayer()===i)&&(r=!0)}));var n=!e&&!a.So.hitOnDragEnabled&&r;return this.isListening()&&this.isVisible()&&!n},e.show=function(){return this.visible(!0),this},e.hide=function(){return this.visible(!1),this},e.getZIndex=function(){return this.index||0},e.getAbsoluteZIndex=function(){var t,e,i,r,n=this.getDepth(),s=this,a=0;return"Stage"!==s.nodeType&&function o(h){for(t=[],e=h.length,i=0;i<e;i++)r=h[i],a++,r.nodeType!==y&&(t=t.concat(r.getChildren().slice())),r._id===s._id&&(i=e);t.length>0&&t[0].getDepth()<=n&&o(t)}(s.getStage().getChildren()),a},e.getDepth=function(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t},e._batchTransformChanges=function(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(_),this._clearSelfAndDescendantCache(d)),this._needClearTransformCache=!1},e.setPosition=function(t){var e=this;return this._batchTransformChanges((function(){e.x(t.x),e.y(t.y)})),this},e.getPosition=function(){return{x:this.x(),y:this.y()}},e.getRelativePointerPosition=function(){if(!this.getStage())return null;var t=this.getStage().getPointerPosition();if(!t)return null;var e=this.getAbsoluteTransform().copy();return e.invert(),e.point(t)},e.getAbsolutePosition=function(t){for(var e=!1,i=this.parent;i;){if(i.isCached()){e=!0;break}i=i.parent}e&&!t&&(t=!0);var n=this.getAbsoluteTransform(t).getMatrix(),s=new r.w,a=this.offset();return s.m=n.slice(),s.translate(a.x,a.y),s.getTranslation()},e.setAbsolutePosition=function(t){var e=this._clearTransform();this.attrs.x=e.x,this.attrs.y=e.y,delete e.x,delete e.y,this._clearCache(_);var i=this._getAbsoluteTransform().copy();return i.invert(),i.translate(t.x,t.y),t={x:this.attrs.x+i.getTranslation().x,y:this.attrs.y+i.getTranslation().y},this._setTransform(e),this.setPosition({x:t.x,y:t.y}),this._clearCache(_),this._clearSelfAndDescendantCache(d),this},e._setTransform=function(t){var e;for(e in t)this.attrs[e]=t[e]},e._clearTransform=function(){var t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t},e.move=function(t){var e=t.x,i=t.y,r=this.x(),n=this.y();return void 0!==e&&(r+=e),void 0!==i&&(n+=i),this.setPosition({x:r,y:n}),this},e._eachAncestorReverse=function(t,e){var i,r,n=[],s=this.getParent();if(!e||e._id!==this._id){for(n.unshift(this);s&&(!e||s._id!==e._id);)n.unshift(s),s=s.parent;for(i=n.length,r=0;r<i;r++)t(n[r])}},e.rotate=function(t){return this.rotation(this.rotation()+t),this},e.moveToTop=function(){if(!this.parent)return r.Z.warn("Node has no parent. moveToTop function is ignored."),!1;var t=this.index;return t<this.parent.getChildren().length-1&&(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0)},e.moveUp=function(){if(!this.parent)return r.Z.warn("Node has no parent. moveUp function is ignored."),!1;var t=this.index;return t<this.parent.getChildren().length-1&&(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0)},e.moveDown=function(){if(!this.parent)return r.Z.warn("Node has no parent. moveDown function is ignored."),!1;var t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0)},e.moveToBottom=function(){if(!this.parent)return r.Z.warn("Node has no parent. moveToBottom function is ignored."),!1;var t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)},e.setZIndex=function(t){if(!this.parent)return r.Z.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&r.Z.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this},e.getAbsoluteOpacity=function(){return this._getCache(l,this._getAbsoluteOpacity)},e._getAbsoluteOpacity=function(){var t=this.opacity(),e=this.getParent();return e&&!e._isUnderCache&&(t*=e.getAbsoluteOpacity()),t},e.moveTo=function(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this},e.toObject=function(){var t,e,i,n,s={},a=this.getAttrs();for(t in s.attrs={},a)e=a[t],r.Z.isObject(e)&&!r.Z._isPlainObject(e)&&!r.Z._isArray(e)||(i="function"===typeof this[t]&&this[t],delete a[t],n=i?i.call(this):null,a[t]=e,n!==e&&(s.attrs[t]=e));return s.className=this.getClassName(),r.Z._prepareToStringify(s)},e.toJSON=function(){return JSON.stringify(this.toObject())},e.getParent=function(){return this.parent},e.findAncestors=function(t,e,i){var r=[];e&&this._isMatch(t)&&r.push(this);for(var n=this.parent;n;){if(n===i)return r;n._isMatch(t)&&r.push(n),n=n.parent}return r},e.isAncestorOf=function(t){return!1},e.findAncestor=function(t,e,i){return this.findAncestors(t,e,i)[0]},e._isMatch=function(t){if(!t)return!1;if("function"===typeof t)return t(this);var e,i,n=t.replace(/ /g,"").split(","),s=n.length;for(e=0;e<s;e++)if(i=n[e],r.Z.isValidSelector(i)||(r.Z.warn('Selector "'+i+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),r.Z.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),r.Z.warn("Konva is awesome, right?")),"#"===i.charAt(0)){if(this.id()===i.slice(1))return!0}else if("."===i.charAt(0)){if(this.hasName(i.slice(1)))return!0}else if(this.className===i||this.nodeType===i)return!0;return!1},e.getLayer=function(){var t=this.getParent();return t?t.getLayer():null},e.getStage=function(){return this._getCache(b,this._getStage)},e._getStage=function(){var t=this.getParent();return t?t.getStage():void 0},e.fire=function(t,e,i){return void 0===e&&(e={}),e.target=e.target||this,i?this._fireAndBubble(t,e):this._fire(t,e),this},e.getAbsoluteTransform=function(t){return t?this._getAbsoluteTransform(t):this._getCache(d,this._getAbsoluteTransform)},e._getAbsoluteTransform=function(t){var e;if(t)return e=new r.w,this._eachAncestorReverse((function(t){var i=t.transformsEnabled();"all"===i?e.multiply(t.getTransform()):"position"===i&&e.translate(t.x()-t.offsetX(),t.y()-t.offsetY())}),t),e;e=this._cache.get(d)||new r.w,this.parent?this.parent.getAbsoluteTransform().copyInto(e):e.reset();var i=this.transformsEnabled();if("all"===i)e.multiply(this.getTransform());else if("position"===i){var n=this.attrs.x||0,s=this.attrs.y||0,a=this.attrs.offsetX||0,o=this.attrs.offsetY||0;e.translate(n-a,s-o)}return e.dirty=!1,e},e.getAbsoluteScale=function(t){for(var e=this;e;)e._isUnderCache&&(t=e),e=e.getParent();var i=this.getAbsoluteTransform(t).decompose();return{x:i.scaleX,y:i.scaleY}},e.getAbsoluteRotation=function(){return this.getAbsoluteTransform().decompose().rotation},e.getTransform=function(){return this._getCache(_,this._getTransform)},e._getTransform=function(){var t,e,i=this._cache.get(_)||new r.w;i.reset();var n=this.x(),s=this.y(),o=a.So.getAngle(this.rotation()),h=null!==(t=this.attrs.scaleX)&&void 0!==t?t:1,l=null!==(e=this.attrs.scaleY)&&void 0!==e?e:1,c=this.attrs.skewX||0,d=this.attrs.skewY||0,p=this.attrs.offsetX||0,f=this.attrs.offsetY||0;return 0===n&&0===s||i.translate(n,s),0!==o&&i.rotate(o),0===c&&0===d||i.skew(c,d),1===h&&1===l||i.scale(h,l),0===p&&0===f||i.translate(-1*p,-1*f),i.dirty=!1,i},e.clone=function(t){var e,i,n,s,a,o=r.Z.cloneObject(this.attrs);for(e in t)o[e]=t[e];var h=new this.constructor(o);for(e in this.eventListeners)for(n=(i=this.eventListeners[e]).length,s=0;s<n;s++)(a=i[s]).name.indexOf("konva")<0&&(h.eventListeners[e]||(h.eventListeners[e]=[]),h.eventListeners[e].push(a));return h},e._toKonvaCanvas=function(t){t=t||{};var e=this.getClientRect(),i=this.getStage(),r=void 0!==t.x?t.x:e.x,n=void 0!==t.y?t.y:e.y,a=t.pixelRatio||1,o=new s.RF({width:t.width||e.width||(i?i.width():0),height:t.height||e.height||(i?i.height():0),pixelRatio:a}),h=o.getContext();return h.save(),(r||n)&&h.translate(-1*r,-1*n),this.drawScene(o),h.restore(),o},e.toCanvas=function(t){return this._toKonvaCanvas(t)._canvas},e.toDataURL=function(t){var e=(t=t||{}).mimeType||null,i=t.quality||null,r=this._toKonvaCanvas(t).toDataURL(e,i);return t.callback&&t.callback(r),r},e.toImage=function(t){if(!t||!t.callback)throw"callback required for toImage method config argument";var e=t.callback;delete t.callback,r.Z._urlToImage(this.toDataURL(t),(function(t){e(t)}))},e.setSize=function(t){return this.width(t.width),this.height(t.height),this},e.getSize=function(){return{width:this.width(),height:this.height()}},e.getClassName=function(){return this.className||this.nodeType},e.getType=function(){return this.nodeType},e.getDragDistance=function(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():a.So.dragDistance},e._off=function(t,e,i){var r,n,s,a=this.eventListeners[t];for(r=0;r<a.length;r++)if(n=a[r].name,s=a[r].handler,("konva"!==n||"konva"===e)&&(!e||n===e)&&(!i||i===s)){if(a.splice(r,1),0===a.length){delete this.eventListeners[t];break}r--}},e._fireChangeEvent=function(t,e,i){this._fire(t+"Change",{oldVal:e,newVal:i})},e.addName=function(t){if(!this.hasName(t)){var e=this.name(),i=e?e+" "+t:t;this.name(i)}return this},e.hasName=function(t){if(!t)return!1;var e=this.name();return!!e&&-1!==(e||"").split(/\s/g).indexOf(t)},e.removeName=function(t){var e=(this.name()||"").split(/\s/g),i=e.indexOf(t);return-1!==i&&(e.splice(i,1),this.name(e.join(" "))),this},e.setAttr=function(t,e){var i=this["set"+r.Z._capitalize(t)];return r.Z._isFunction(i)?i.call(this,e):this._setAttr(t,e),this},e._requestDraw=function(){if(a.So.autoDrawEnabled){var t=this.getLayer()||this.getStage();null===t||void 0===t||t.batchDraw()}},e._setAttr=function(t,e){var i=this.attrs[t];(i!==e||r.Z.isObject(e))&&(void 0===e||null===e?delete this.attrs[t]:this.attrs[t]=e,this._shouldFireChangeEvents&&this._fireChangeEvent(t,i,e),this._requestDraw())},e._setComponentAttr=function(t,e,i){var r;void 0!==i&&((r=this.attrs[t])||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=i,this._fireChangeEvent(t,r,i))},e._fireAndBubble=function(t,e,i){if(e&&this.nodeType===y&&(e.target=this),!((t===m||t===g)&&(i&&(this===i||this.isAncestorOf&&this.isAncestorOf(i))||"Stage"===this.nodeType&&!i))){this._fire(t,e);var r=(t===m||t===g)&&i&&i.isAncestorOf&&i.isAncestorOf(this)&&!i.isAncestorOf(this.parent);(e&&!e.cancelBubble||!e)&&this.parent&&this.parent.isListening()&&!r&&(i&&i.parent?this._fireAndBubble.call(this.parent,t,e,i):this._fireAndBubble.call(this.parent,t,e))}},e._getProtoListeners=function(t){var e=this._cache.get(c);if(!e){e={};for(var i=Object.getPrototypeOf(this);i;)if(i.eventListeners){for(var r in i.eventListeners){var n=i.eventListeners[r],s=e[r]||[];e[r]=n.concat(s)}i=Object.getPrototypeOf(i)}else i=Object.getPrototypeOf(i);this._cache.set(c,e)}return e[t]},e._fire=function(t,e){(e=e||{}).currentTarget=this,e.type=t;var i=this._getProtoListeners(t);if(i)for(var r=0;r<i.length;r++)i[r].handler.call(this,e);var n=this.eventListeners[t];if(n)for(r=0;r<n.length;r++)n[r].handler.call(this,e)},e.draw=function(){return this.drawScene(),this.drawHit(),this},e._createDragElement=function(t){var e=t?t.pointerId:void 0,i=this.getStage(),r=this.getAbsolutePosition(),n=i._getPointerById(e)||i._changedPointerPositions[0]||r;o.DD._dragElements.set(this._id,{node:this,startPointerPos:n,offset:{x:n.x-r.x,y:n.y-r.y},dragStatus:"ready",pointerId:e})},e.startDrag=function(t,e){void 0===e&&(e=!0),o.DD._dragElements.has(this._id)||this._createDragElement(t),o.DD._dragElements.get(this._id).dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},e)},e._setDragPosition=function(t,e){var i=this.getStage()._getPointerById(e.pointerId);if(i){var n={x:i.x-e.offset.x,y:i.y-e.offset.y},s=this.dragBoundFunc();if(void 0!==s){var a=s.call(this,n,t);a?n=a:r.Z.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}this._lastPos&&this._lastPos.x===n.x&&this._lastPos.y===n.y||(this.setAbsolutePosition(n),this._requestDraw()),this._lastPos=n}},e.stopDrag=function(t){var e=o.DD._dragElements.get(this._id);e&&(e.dragStatus="stopped"),o.DD._endDragBefore(t),o.DD._endDragAfter(t)},e.setDraggable=function(t){this._setAttr("draggable",t),this._dragChange()},e.isDragging=function(){var t=o.DD._dragElements.get(this._id);return!!t&&"dragging"===t.dragStatus},e._listenDrag=function(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",(function(t){var e=this;if((!(void 0!==t.evt.button)||a.So.dragButtons.indexOf(t.evt.button)>=0)&&!this.isDragging()){var i=!1;o.DD._dragElements.forEach((function(t){e.isAncestorOf(t.node)&&(i=!0)})),i||this._createDragElement(t)}}))},e._dragChange=function(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;var t=o.DD._dragElements.get(this._id),e=t&&"dragging"===t.dragStatus,i=t&&"ready"===t.dragStatus;e?this.stopDrag():i&&o.DD._dragElements.delete(this._id)}},e._dragCleanup=function(){this.off("mousedown.konva"),this.off("touchstart.konva")},e.isClientRectOnScreen=function(t){void 0===t&&(t={x:0,y:0});var e=this.getStage();if(!e)return!1;var i={x:-t.x,y:-t.y,width:e.width()+t.x,height:e.height()+t.y};return r.Z.haveIntersection(i,this.getClientRect())},t.create=function(t,e){return r.Z._isString(t)&&(t=JSON.parse(t)),this._createNode(t,e)},t._createNode=function(e,i){var n,s,o,h=t.prototype.getClassName.call(e),l=e.children;if(i&&(e.attrs.container=i),a.So[h]||(r.Z.warn('Can not find a node with class name "'+h+'". Fallback to "Shape".'),h="Shape"),n=new(0,a.So[h])(e.attrs),l)for(s=l.length,o=0;o<s;o++)n.add(t._createNode(l[o]));return n},t}();w.prototype.nodeType="Node",w.prototype._attrsAffectingSize=[],w.prototype.eventListeners={},w.prototype.on.call(w.prototype,S,(function(){this._batchingTransformChange?this._needClearTransformCache=!0:(this._clearCache(_),this._clearSelfAndDescendantCache(d))})),w.prototype.on.call(w.prototype,"visibleChange.konva",(function(){this._clearSelfAndDescendantCache(x)})),w.prototype.on.call(w.prototype,"listeningChange.konva",(function(){this._clearSelfAndDescendantCache(u)})),w.prototype.on.call(w.prototype,"opacityChange.konva",(function(){this._clearSelfAndDescendantCache(l)}));var C=n.F.addGetterSetter;C(w,"zIndex"),C(w,"absolutePosition"),C(w,"position"),C(w,"x",0,(0,h.Kg)()),C(w,"y",0,(0,h.Kg)()),C(w,"globalCompositeOperation","source-over",(0,h.sY)()),C(w,"opacity",1,(0,h.Kg)()),C(w,"name","",(0,h.sY)()),C(w,"id","",(0,h.sY)()),C(w,"rotation",0,(0,h.Kg)()),n.F.addComponentsGetterSetter(w,"scale",["x","y"]),C(w,"scaleX",1,(0,h.Kg)()),C(w,"scaleY",1,(0,h.Kg)()),n.F.addComponentsGetterSetter(w,"skew",["x","y"]),C(w,"skewX",0,(0,h.Kg)()),C(w,"skewY",0,(0,h.Kg)()),n.F.addComponentsGetterSetter(w,"offset",["x","y"]),C(w,"offsetX",0,(0,h.Kg)()),C(w,"offsetY",0,(0,h.Kg)()),C(w,"dragDistance",null,(0,h.Kg)()),C(w,"width",0,(0,h.Kg)()),C(w,"height",0,(0,h.Kg)()),C(w,"listening",!0,(0,h.I0)()),C(w,"preventDefault",!0,(0,h.I0)()),C(w,"filters",null,(function(t){return this._filterUpToDate=!1,t})),C(w,"visible",!0,(0,h.I0)()),C(w,"transformsEnabled","all",(0,h.sY)()),C(w,"size"),C(w,"dragBoundFunc"),C(w,"draggable",!1,(0,h.I0)()),n.F.backCompat(w,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"})},"../node_modules/konva/lib/PointerEvents.js":function(t,e,i){"use strict";i.d(e,{I5:function(){return l},Xg:function(){return c},q0:function(){return h},rl:function(){return a},yM:function(){return o}});i("../node_modules/core-js/modules/es.array.iterator.js"),i("../node_modules/core-js/modules/es.map.js"),i("../node_modules/core-js/modules/es.object.to-string.js"),i("../node_modules/core-js/modules/es.string.iterator.js"),i("../node_modules/core-js/modules/esnext.map.delete-all.js"),i("../node_modules/core-js/modules/esnext.map.every.js"),i("../node_modules/core-js/modules/esnext.map.filter.js"),i("../node_modules/core-js/modules/esnext.map.find.js"),i("../node_modules/core-js/modules/esnext.map.find-key.js"),i("../node_modules/core-js/modules/esnext.map.includes.js"),i("../node_modules/core-js/modules/esnext.map.key-of.js"),i("../node_modules/core-js/modules/esnext.map.map-keys.js"),i("../node_modules/core-js/modules/esnext.map.map-values.js"),i("../node_modules/core-js/modules/esnext.map.merge.js"),i("../node_modules/core-js/modules/esnext.map.reduce.js"),i("../node_modules/core-js/modules/esnext.map.some.js"),i("../node_modules/core-js/modules/esnext.map.update.js"),i("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=i("../node_modules/konva/lib/Global.js"),n=new Map,s=void 0!==r.So._global.PointerEvent;function a(t){return n.get(t)}function o(t){return{evt:t,pointerId:t.pointerId}}function h(t,e){return n.get(t)===e}function l(t,e){c(t),e.getStage()&&(n.set(t,e),s&&e._fire("gotpointercapture",o(new PointerEvent("gotpointercapture"))))}function c(t,e){var i=n.get(t);if(i){var r=i.getStage();r&&r.content,n.delete(t),s&&i._fire("lostpointercapture",o(new PointerEvent("lostpointercapture")))}}},"../node_modules/konva/lib/Shape.js":function(t,e,i){"use strict";i.d(e,{J:function(){return v},b:function(){return b}});var r,n=i("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),s=i("../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js"),a=(i("../node_modules/core-js/modules/es.array.fill.js"),i("../node_modules/konva/lib/Global.js")),o=i("../node_modules/konva/lib/Util.js"),h=i("../node_modules/konva/lib/Factory.js"),l=i("../node_modules/konva/lib/Node.js"),c=i("../node_modules/konva/lib/Validators.js"),d=i("../node_modules/konva/lib/PointerEvents.js"),p="hasShadow",f="shadowRGBA",u="patternImage",m="linearGradient",g="radialGradient";function y(){return r||(r=o.Z.createCanvasElement().getContext("2d"))}var v={};var b=function(t){function e(e){var i,r;for(i=t.call(this,e)||this;!(r=o.Z.getRandomColor())||r in v;);return i.colorKey=r,v[r]=(0,n.Z)(i),i}(0,s.Z)(e,t);var i=e.prototype;return i.getContext=function(){return o.Z.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()},i.getCanvas=function(){return o.Z.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()},i.getSceneFunc=function(){return this.attrs.sceneFunc||this._sceneFunc},i.getHitFunc=function(){return this.attrs.hitFunc||this._hitFunc},i.hasShadow=function(){return this._getCache(p,this._hasShadow)},i._hasShadow=function(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())},i._getFillPattern=function(){return this._getCache(u,this.__getFillPattern)},i.__getFillPattern=function(){if(this.fillPatternImage()){var t=y().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(t&&t.setTransform){var e=new o.w;e.translate(this.fillPatternX(),this.fillPatternY()),e.rotate(a.So.getAngle(this.fillPatternRotation())),e.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),e.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());var i=e.getMatrix();t.setTransform({a:i[0],b:i[1],c:i[2],d:i[3],e:i[4],f:i[5]})}return t}},i._getLinearGradient=function(){return this._getCache(m,this.__getLinearGradient)},i.__getLinearGradient=function(){var t=this.fillLinearGradientColorStops();if(t){for(var e=y(),i=this.fillLinearGradientStartPoint(),r=this.fillLinearGradientEndPoint(),n=e.createLinearGradient(i.x,i.y,r.x,r.y),s=0;s<t.length;s+=2)n.addColorStop(t[s],t[s+1]);return n}},i._getRadialGradient=function(){return this._getCache(g,this.__getRadialGradient)},i.__getRadialGradient=function(){var t=this.fillRadialGradientColorStops();if(t){for(var e=y(),i=this.fillRadialGradientStartPoint(),r=this.fillRadialGradientEndPoint(),n=e.createRadialGradient(i.x,i.y,this.fillRadialGradientStartRadius(),r.x,r.y,this.fillRadialGradientEndRadius()),s=0;s<t.length;s+=2)n.addColorStop(t[s],t[s+1]);return n}},i.getShadowRGBA=function(){return this._getCache(f,this._getShadowRGBA)},i._getShadowRGBA=function(){if(this.hasShadow()){var t=o.Z.colorToRGBA(this.shadowColor());return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}},i.hasFill=function(){var t=this;return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],(function(){return t.fillEnabled()&&!!(t.fill()||t.fillPatternImage()||t.fillLinearGradientColorStops()||t.fillRadialGradientColorStops())}))},i.hasStroke=function(){var t=this;return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],(function(){return t.strokeEnabled()&&t.strokeWidth()&&!(!t.stroke()&&!t.strokeLinearGradientColorStops())}))},i.hasHitStroke=function(){var t=this.hitStrokeWidth();return"auto"===t?this.hasStroke():this.strokeEnabled()&&!!t},i.intersects=function(t){var e=this.getStage().bufferHitCanvas;return e.getContext().clear(),this.drawHit(e,null,!0),e.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]>0},i.destroy=function(){return l.N.prototype.destroy.call(this),delete v[this.colorKey],delete this.colorKey,this},i._useBufferCanvas=function(t){var e;if(!this.getStage())return!1;if(!(null===(e=this.attrs.perfectDrawEnabled)||void 0===e||e))return!1;var i=t||this.hasFill(),r=this.hasStroke(),n=1!==this.getAbsoluteOpacity();if(i&&r&&n)return!0;var s=this.hasShadow(),a=this.shadowForStrokeEnabled();return!!(i&&r&&s&&a)},i.setStrokeHitEnabled=function(t){o.Z.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)},i.getStrokeHitEnabled=function(){return 0!==this.hitStrokeWidth()},i.getSelfRect=function(){var t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}},i.getClientRect=function(t){void 0===t&&(t={});var e=t.skipTransform,i=t.relativeTo,r=this.getSelfRect(),n=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,s=r.width+n,a=r.height+n,o=!t.skipShadow&&this.hasShadow(),h=o?this.shadowOffsetX():0,l=o?this.shadowOffsetY():0,c=s+Math.abs(h),d=a+Math.abs(l),p=o&&this.shadowBlur()||0,f=c+2*p,u=d+2*p,m=0;Math.round(n/2)!==n/2&&(m=1);var g={width:f+m,height:u+m,x:-Math.round(n/2+p)+Math.min(h,0)+r.x,y:-Math.round(n/2+p)+Math.min(l,0)+r.y};return e?g:this._transformedRect(g,i)},i.drawScene=function(t,e){var i,r,n=this.getLayer(),s=t||n.getCanvas(),a=s.getContext(),o=this._getCanvasCache(),h=this.getSceneFunc(),l=this.hasShadow(),c=s.isCache,d=e===this;if(!this.isVisible()&&!d)return this;if(o){a.save();var p=this.getAbsoluteTransform(e).getMatrix();return a.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this._drawCachedSceneCanvas(a),a.restore(),this}if(!h)return this;if(a.save(),this._useBufferCanvas()&&!c){(r=(i=this.getStage().bufferCanvas).getContext()).clear(),r.save(),r._applyLineJoin(this);var f=this.getAbsoluteTransform(e).getMatrix();r.transform(f[0],f[1],f[2],f[3],f[4],f[5]),h.call(this,r,this),r.restore();var u=i.pixelRatio;l&&a._applyShadow(this),a._applyOpacity(this),a._applyGlobalCompositeOperation(this),a.drawImage(i._canvas,0,0,i.width/u,i.height/u)}else{if(a._applyLineJoin(this),!d){f=this.getAbsoluteTransform(e).getMatrix();a.transform(f[0],f[1],f[2],f[3],f[4],f[5]),a._applyOpacity(this),a._applyGlobalCompositeOperation(this)}l&&a._applyShadow(this),h.call(this,a,this)}return a.restore(),this},i.drawHit=function(t,e,i){if(void 0===i&&(i=!1),!this.shouldDrawHit(e,i))return this;var r=this.getLayer(),n=t||r.hitCanvas,s=n&&n.getContext(),a=this.hitFunc()||this.sceneFunc(),h=this._getCanvasCache(),l=h&&h.hit;if(this.colorKey||o.Z.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),l){s.save();var c=this.getAbsoluteTransform(e).getMatrix();return s.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedHitCanvas(s),s.restore(),this}if(!a)return this;if(s.save(),s._applyLineJoin(this),!(this===e)){var d=this.getAbsoluteTransform(e).getMatrix();s.transform(d[0],d[1],d[2],d[3],d[4],d[5])}return a.call(this,s,this),s.restore(),this},i.drawHitFromCache=function(t){void 0===t&&(t=0);var e,i,r,n,s,a=this._getCanvasCache(),h=this._getCachedSceneCanvas(),l=a.hit,c=l.getContext(),d=l.getWidth(),p=l.getHeight();c.clear(),c.drawImage(h._canvas,0,0,d,p);try{for(r=(i=(e=c.getImageData(0,0,d,p)).data).length,n=o.Z._hexToRgb(this.colorKey),s=0;s<r;s+=4)i[s+3]>t?(i[s]=n.r,i[s+1]=n.g,i[s+2]=n.b,i[s+3]=255):i[s+3]=0;c.putImageData(e,0,0)}catch(f){o.Z.error("Unable to draw hit graph from cached scene canvas. "+f.message)}return this},i.hasPointerCapture=function(t){return d.q0(t,this)},i.setPointerCapture=function(t){d.I5(t,this)},i.releaseCapture=function(t){d.Xg(t,this)},e}(l.N);b.prototype._fillFunc=function(t){t.fill()},b.prototype._strokeFunc=function(t){t.stroke()},b.prototype._fillFuncHit=function(t){t.fill()},b.prototype._strokeFuncHit=function(t){t.stroke()},b.prototype._centroid=!1,b.prototype.nodeType="Shape",(0,a.DA)(b),b.prototype.eventListeners={},b.prototype.on.call(b.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",(function(){this._clearCache(p)})),b.prototype.on.call(b.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",(function(){this._clearCache(f)})),b.prototype.on.call(b.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",(function(){this._clearCache(u)})),b.prototype.on.call(b.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",(function(){this._clearCache(m)})),b.prototype.on.call(b.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",(function(){this._clearCache(g)})),h.F.addGetterSetter(b,"stroke",void 0,(0,c.if)()),h.F.addGetterSetter(b,"strokeWidth",2,(0,c.Kg)()),h.F.addGetterSetter(b,"fillAfterStrokeEnabled",!1),h.F.addGetterSetter(b,"hitStrokeWidth","auto",(0,c.hi)()),h.F.addGetterSetter(b,"strokeHitEnabled",!0,(0,c.I0)()),h.F.addGetterSetter(b,"perfectDrawEnabled",!0,(0,c.I0)()),h.F.addGetterSetter(b,"shadowForStrokeEnabled",!0,(0,c.I0)()),h.F.addGetterSetter(b,"lineJoin"),h.F.addGetterSetter(b,"lineCap"),h.F.addGetterSetter(b,"sceneFunc"),h.F.addGetterSetter(b,"hitFunc"),h.F.addGetterSetter(b,"dash"),h.F.addGetterSetter(b,"dashOffset",0,(0,c.Kg)()),h.F.addGetterSetter(b,"shadowColor",void 0,(0,c.sY)()),h.F.addGetterSetter(b,"shadowBlur",0,(0,c.Kg)()),h.F.addGetterSetter(b,"shadowOpacity",1,(0,c.Kg)()),h.F.addComponentsGetterSetter(b,"shadowOffset",["x","y"]),h.F.addGetterSetter(b,"shadowOffsetX",0,(0,c.Kg)()),h.F.addGetterSetter(b,"shadowOffsetY",0,(0,c.Kg)()),h.F.addGetterSetter(b,"fillPatternImage"),h.F.addGetterSetter(b,"fill",void 0,(0,c.if)()),h.F.addGetterSetter(b,"fillPatternX",0,(0,c.Kg)()),h.F.addGetterSetter(b,"fillPatternY",0,(0,c.Kg)()),h.F.addGetterSetter(b,"fillLinearGradientColorStops"),h.F.addGetterSetter(b,"strokeLinearGradientColorStops"),h.F.addGetterSetter(b,"fillRadialGradientStartRadius",0),h.F.addGetterSetter(b,"fillRadialGradientEndRadius",0),h.F.addGetterSetter(b,"fillRadialGradientColorStops"),h.F.addGetterSetter(b,"fillPatternRepeat","repeat"),h.F.addGetterSetter(b,"fillEnabled",!0),h.F.addGetterSetter(b,"strokeEnabled",!0),h.F.addGetterSetter(b,"shadowEnabled",!0),h.F.addGetterSetter(b,"dashEnabled",!0),h.F.addGetterSetter(b,"strokeScaleEnabled",!0),h.F.addGetterSetter(b,"fillPriority","color"),h.F.addComponentsGetterSetter(b,"fillPatternOffset",["x","y"]),h.F.addGetterSetter(b,"fillPatternOffsetX",0,(0,c.Kg)()),h.F.addGetterSetter(b,"fillPatternOffsetY",0,(0,c.Kg)()),h.F.addComponentsGetterSetter(b,"fillPatternScale",["x","y"]),h.F.addGetterSetter(b,"fillPatternScaleX",1,(0,c.Kg)()),h.F.addGetterSetter(b,"fillPatternScaleY",1,(0,c.Kg)()),h.F.addComponentsGetterSetter(b,"fillLinearGradientStartPoint",["x","y"]),h.F.addComponentsGetterSetter(b,"strokeLinearGradientStartPoint",["x","y"]),h.F.addGetterSetter(b,"fillLinearGradientStartPointX",0),h.F.addGetterSetter(b,"strokeLinearGradientStartPointX",0),h.F.addGetterSetter(b,"fillLinearGradientStartPointY",0),h.F.addGetterSetter(b,"strokeLinearGradientStartPointY",0),h.F.addComponentsGetterSetter(b,"fillLinearGradientEndPoint",["x","y"]),h.F.addComponentsGetterSetter(b,"strokeLinearGradientEndPoint",["x","y"]),h.F.addGetterSetter(b,"fillLinearGradientEndPointX",0),h.F.addGetterSetter(b,"strokeLinearGradientEndPointX",0),h.F.addGetterSetter(b,"fillLinearGradientEndPointY",0),h.F.addGetterSetter(b,"strokeLinearGradientEndPointY",0),h.F.addComponentsGetterSetter(b,"fillRadialGradientStartPoint",["x","y"]),h.F.addGetterSetter(b,"fillRadialGradientStartPointX",0),h.F.addGetterSetter(b,"fillRadialGradientStartPointY",0),h.F.addComponentsGetterSetter(b,"fillRadialGradientEndPoint",["x","y"]),h.F.addGetterSetter(b,"fillRadialGradientEndPointX",0),h.F.addGetterSetter(b,"fillRadialGradientEndPointY",0),h.F.addGetterSetter(b,"fillPatternRotation",0),h.F.backCompat(b,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})},"../node_modules/konva/lib/Stage.js":function(t,e,i){"use strict";i.d(e,{H:function(){return V},U:function(){return O}});var r,n,s,a=i("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),o=i("../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js"),h=(i("../node_modules/core-js/modules/es.array.slice.js"),i("../node_modules/core-js/modules/es.array.splice.js"),i("../node_modules/core-js/modules/es.array.find.js"),i("../node_modules/core-js/modules/web.dom-collections.for-each.js"),i("../node_modules/core-js/modules/es.object.assign.js"),i("../node_modules/konva/lib/Util.js")),l=i("../node_modules/konva/lib/Factory.js"),c=i("../node_modules/konva/lib/Container.js"),d=i("../node_modules/konva/lib/Global.js"),p=i("../node_modules/konva/lib/Canvas.js"),f=i("../node_modules/konva/lib/DragAndDrop.js"),u=i("../node_modules/konva/lib/PointerEvents.js"),m="mouseleave",g="mouseover",y="mouseenter",v="mousemove",b="mousedown",_="mouseup",x="pointermove",S="pointerdown",P="pointerup",w="pointercancel",C="pointerout",E="pointerleave",k="pointerover",A="pointerenter",T="contextmenu",F="touchstart",M="touchend",D="touchmove",I="touchcancel",R="wheel",G=[[y,"_pointerenter"],[b,"_pointerdown"],[v,"_pointermove"],[_,"_pointerup"],[m,"_pointerleave"],[F,"_pointerdown"],[D,"_pointermove"],[M,"_pointerup"],[I,"_pointercancel"],[g,"_pointerover"],[R,"_wheel"],[T,"_contextmenu"],[S,"_pointerdown"],[x,"_pointermove"],[P,"_pointerup"],[w,"_pointercancel"],["lostpointercapture","_lostpointercapture"]],L={mouse:(r={},r.pointerout="mouseout",r.pointerleave=m,r.pointerover=g,r.pointerenter=y,r.pointermove=v,r.pointerdown=b,r.pointerup=_,r.pointercancel="mousecancel",r.pointerclick="click",r.pointerdblclick="dblclick",r),touch:(n={},n.pointerout="touchout",n.pointerleave="touchleave",n.pointerover="touchover",n.pointerenter="touchenter",n.pointermove=D,n.pointerdown=F,n.pointerup=M,n.pointercancel=I,n.pointerclick="tap",n.pointerdblclick="dbltap",n),pointer:(s={},s.pointerout=C,s.pointerleave=E,s.pointerover=k,s.pointerenter=A,s.pointermove=x,s.pointerdown=S,s.pointerup=P,s.pointercancel=w,s.pointerclick="pointerclick",s.pointerdblclick="pointerdblclick",s)},j=function(t){return t.indexOf("pointer")>=0?"pointer":t.indexOf("touch")>=0?"touch":"mouse"},N=function(t){var e=j(t);return"pointer"===e?d.So.pointerEventsEnabled&&L.pointer:"touch"===e?L.touch:"mouse"===e?L.mouse:void 0};function B(t){return void 0===t&&(t={}),(t.clipFunc||t.clipWidth||t.clipHeight)&&h.Z.warn("Stage does not support clipping. Please use clip for Layers or Groups."),t}var O=[],V=function(t){function e(e){var i;return(i=t.call(this,B(e))||this)._pointerPositions=[],i._changedPointerPositions=[],i._buildDOM(),i._bindContentEvents(),O.push((0,a.Z)(i)),i.on("widthChange.konva heightChange.konva",i._resizeDOM),i.on("visibleChange.konva",i._checkVisibility),i.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",(function(){B(i.attrs)})),i._checkVisibility(),i}(0,o.Z)(e,t);var i=e.prototype;return i._validateAdd=function(t){var e="Layer"===t.getType(),i="FastLayer"===t.getType();e||i||h.Z.throw("You may only add layers to the stage.")},i._checkVisibility=function(){if(this.content){var t=this.visible()?"":"none";this.content.style.display=t}},i.setContainer=function(t){if("string"===typeof t){if("."===t.charAt(0)){var e=t.slice(1);t=document.getElementsByClassName(e)[0]}else{var i;i="#"!==t.charAt(0)?t:t.slice(1),t=document.getElementById(i)}if(!t)throw"Can not find container in document with id "+i}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this},i.shouldDrawHit=function(){return!0},i.clear=function(){var t,e=this.children,i=e.length;for(t=0;t<i;t++)e[t].clear();return this},i.clone=function(t){return t||(t={}),t.container="undefined"!==typeof document&&document.createElement("div"),c.W.prototype.clone.call(this,t)},i.destroy=function(){t.prototype.destroy.call(this);var e=this.content;e&&h.Z._isInDocument(e)&&this.container().removeChild(e);var i=O.indexOf(this);return i>-1&&O.splice(i,1),this},i.getPointerPosition=function(){var t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(h.Z.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)},i._getPointerById=function(t){return this._pointerPositions.find((function(e){return e.id===t}))},i.getPointersPositions=function(){return this._pointerPositions},i.getStage=function(){return this},i.getContent=function(){return this.content},i._toKonvaCanvas=function(t){(t=t||{}).x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();var e=new p.RF({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),i=e.getContext()._context,r=this.children;return(t.x||t.y)&&i.translate(-1*t.x,-1*t.y),r.forEach((function(e){if(e.isVisible()){var r=e._toKonvaCanvas(t);i.drawImage(r._canvas,t.x,t.y,r.getWidth()/r.getPixelRatio(),r.getHeight()/r.getPixelRatio())}})),e},i.getIntersection=function(t){if(!t)return null;var e,i=this.children;for(e=i.length-1;e>=0;e--){var r=i[e].getIntersection(t);if(r)return r}return null},i._resizeDOM=function(){var t=this.width(),e=this.height();this.content&&(this.content.style.width=t+"px",this.content.style.height=e+"px"),this.bufferCanvas.setSize(t,e),this.bufferHitCanvas.setSize(t,e),this.children.forEach((function(i){i.setSize({width:t,height:e}),i.draw()}))},i.add=function(e){for(var i=arguments.length,r=new Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];if(arguments.length>1){for(var s=0;s<arguments.length;s++)this.add(arguments[s]);return this}t.prototype.add.call(this,e);var a=this.children.length;return a>5&&h.Z.warn("The stage has "+a+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),d.So.isBrowser&&this.content.appendChild(e.canvas._canvas),this},i.getParent=function(){return null},i.getLayer=function(){return null},i.hasPointerCapture=function(t){return u.q0(t,this)},i.setPointerCapture=function(t){u.I5(t,this)},i.releaseCapture=function(t){u.Xg(t,this)},i.getLayers=function(){return this.children},i._bindContentEvents=function(){var t=this;d.So.isBrowser&&G.forEach((function(e){var i=e[0],r=e[1];t.content.addEventListener(i,(function(e){t[r](e)}))}))},i._pointerenter=function(t){this.setPointersPositions(t);var e=N(t.type);this._fire(e.pointerenter,{evt:t,target:this,currentTarget:this})},i._pointerover=function(t){this.setPointersPositions(t);var e=N(t.type);this._fire(e.pointerover,{evt:t,target:this,currentTarget:this})},i._getTargetShape=function(t){var e=this[t+"targetShape"];return e&&!e.getStage()&&(e=null),e},i._pointerleave=function(t){var e=N(t.type),i=j(t.type);if(e){this.setPointersPositions(t);var r=this._getTargetShape(i),n=!f.DD.isDragging||d.So.hitOnDragEnabled;r&&n?(r._fireAndBubble(e.pointerout,{evt:t}),r._fireAndBubble(e.pointerleave,{evt:t}),this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this[i+"targetShape"]=null):n&&(this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this._fire(e.pointerout,{evt:t,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[]}},i._pointerdown=function(t){var e=this,i=N(t.type),r=j(t.type);if(i){this.setPointersPositions(t);var n=!1;this._changedPointerPositions.forEach((function(s){var a=e.getIntersection(s);if(f.DD.justDragged=!1,d.So["_"+r+"ListenClick"]=!0,a&&a.isListening()){d.So.capturePointerEventsEnabled&&a.setPointerCapture(s.id),e[r+"ClickStartShape"]=a,a._fireAndBubble(i.pointerdown,{evt:t,pointerId:s.id}),n=!0;var o=t.type.indexOf("touch")>=0;a.preventDefault()&&t.cancelable&&o&&t.preventDefault()}})),n||this._fire(i.pointerdown,{evt:t,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}},i._pointermove=function(t){var e=this,i=N(t.type),r=j(t.type);if(i&&(f.DD.isDragging&&f.DD.node.preventDefault()&&t.cancelable&&t.preventDefault(),this.setPointersPositions(t),!f.DD.isDragging||d.So.hitOnDragEnabled)){var n={},s=!1,a=this._getTargetShape(r);this._changedPointerPositions.forEach((function(o){var h=u.rl(o.id)||e.getIntersection(o),l=o.id,c={evt:t,pointerId:l},d=a!==h;if(d&&a&&(a._fireAndBubble(i.pointerout,Object.assign({},c),h),a._fireAndBubble(i.pointerleave,Object.assign({},c),h)),h){if(n[h._id])return;n[h._id]=!0}h&&h.isListening()?(s=!0,d&&(h._fireAndBubble(i.pointerover,Object.assign({},c),a),h._fireAndBubble(i.pointerenter,Object.assign({},c),a),e[r+"targetShape"]=h),h._fireAndBubble(i.pointermove,Object.assign({},c))):a&&(e._fire(i.pointerover,{evt:t,target:e,currentTarget:e,pointerId:l}),e[r+"targetShape"]=null)})),s||this._fire(i.pointermove,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}},i._pointerup=function(t){var e=this,i=N(t.type),r=j(t.type);if(i){this.setPointersPositions(t);var n=this[r+"ClickStartShape"],s=this[r+"ClickEndShape"],a={},o=!1;this._changedPointerPositions.forEach((function(h){var l=u.rl(h.id)||e.getIntersection(h);if(l){if(l.releaseCapture(h.id),a[l._id])return;a[l._id]=!0}var c=h.id,p={evt:t,pointerId:c},m=!1;d.So["_"+r+"InDblClickWindow"]?(m=!0,clearTimeout(e[r+"DblTimeout"])):f.DD.justDragged||(d.So["_"+r+"InDblClickWindow"]=!0,clearTimeout(e[r+"DblTimeout"])),e[r+"DblTimeout"]=setTimeout((function(){d.So["_"+r+"InDblClickWindow"]=!1}),d.So.dblClickWindow),l&&l.isListening()?(o=!0,e[r+"ClickEndShape"]=l,l._fireAndBubble(i.pointerup,Object.assign({},p)),d.So["_"+r+"ListenClick"]&&n&&n===l&&(l._fireAndBubble(i.pointerclick,Object.assign({},p)),m&&s&&s===l&&l._fireAndBubble(i.pointerdblclick,Object.assign({},p)))):(e[r+"ClickEndShape"]=null,d.So["_"+r+"ListenClick"]&&e._fire(i.pointerclick,{evt:t,target:e,currentTarget:e,pointerId:c}),m&&e._fire(i.pointerdblclick,{evt:t,target:e,currentTarget:e,pointerId:c}))})),o||this._fire(i.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),d.So["_"+r+"ListenClick"]=!1,t.cancelable&&t.preventDefault()}},i._contextmenu=function(t){this.setPointersPositions(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(T,{evt:t}):this._fire(T,{evt:t,target:this,currentTarget:this})},i._wheel=function(t){this.setPointersPositions(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(R,{evt:t}):this._fire(R,{evt:t,target:this,currentTarget:this})},i._pointercancel=function(t){this.setPointersPositions(t);var e=u.rl(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble(P,u.yM(t)),u.Xg(t.pointerId)},i._lostpointercapture=function(t){u.Xg(t.pointerId)},i.setPointersPositions=function(t){var e=this,i=this._getContentPosition(),r=null,n=null;void 0!==(t=t||window.event).touches?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(t.touches,(function(t){e._pointerPositions.push({id:t.identifier,x:(t.clientX-i.left)/i.scaleX,y:(t.clientY-i.top)/i.scaleY})})),Array.prototype.forEach.call(t.changedTouches||t.touches,(function(t){e._changedPointerPositions.push({id:t.identifier,x:(t.clientX-i.left)/i.scaleX,y:(t.clientY-i.top)/i.scaleY})}))):(r=(t.clientX-i.left)/i.scaleX,n=(t.clientY-i.top)/i.scaleY,this.pointerPos={x:r,y:n},this._pointerPositions=[{x:r,y:n,id:h.Z._getFirstPointerId(t)}],this._changedPointerPositions=[{x:r,y:n,id:h.Z._getFirstPointerId(t)}])},i._setPointerPosition=function(t){h.Z.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)},i._getContentPosition=function(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}},i._buildDOM=function(){if(this.bufferCanvas=new p.RF({width:this.width(),height:this.height()}),this.bufferHitCanvas=new p.hh({pixelRatio:1,width:this.width(),height:this.height()}),d.So.isBrowser){var t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}},i.cache=function(){return h.Z.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this},i.clearCache=function(){return this},i.batchDraw=function(){return this.getChildren().forEach((function(t){t.batchDraw()})),this},e}(c.W);V.prototype.nodeType="Stage",(0,d.DA)(V),l.F.addGetterSetter(V,"container")},"../node_modules/konva/lib/Tween.js":function(t,e,i){"use strict";i.d(e,{k:function(){return d},z:function(){return p}});var r=i("../node_modules/konva/lib/Util.js"),n=i("../node_modules/konva/lib/Animation.js"),s=i("../node_modules/konva/lib/Node.js"),a=i("../node_modules/konva/lib/Global.js"),o={node:1,duration:1,easing:1,onFinish:1,yoyo:1},h=0,l=["fill","stroke","shadowColor"],c=function(){function t(t,e,i,r,n,s,a){this.prop=t,this.propFunc=e,this.begin=r,this._pos=r,this.duration=s,this._change=0,this.prevPos=0,this.yoyo=a,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=i,this._change=n-this.begin,this.pause()}var e=t.prototype;return e.fire=function(t){var e=this[t];e&&e()},e.setTime=function(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())},e.getTime=function(){return this._time},e.setPosition=function(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t},e.getPosition=function(t){return void 0===t&&(t=this._time),this.func(t,this.begin,this._change,this.duration)},e.play=function(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")},e.reverse=function(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")},e.seek=function(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")},e.reset=function(){this.pause(),this._time=0,this.update(),this.fire("onReset")},e.finish=function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")},e.update=function(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")},e.onEnterFrame=function(){var t=this.getTimer()-this._startTime;2===this.state?this.setTime(t):3===this.state&&this.setTime(this.duration-t)},e.pause=function(){this.state=1,this.fire("onPause")},e.getTimer=function(){return(new Date).getTime()},t}(),d=function(){function t(e){var i,s,l=this,d=e.node,f=d._id,u=e.easing||p.Linear,m=!!e.yoyo;i="undefined"===typeof e.duration?.3:0===e.duration?.001:e.duration,this.node=d,this._id=h++;var g=d.getLayer()||(d instanceof a.So.Stage?d.getLayers():null);for(s in g||r.Z.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.f((function(){l.tween.onEnterFrame()}),g),this.tween=new c(s,(function(t){l._tweenFunc(t)}),u,0,1,1e3*i,m),this._addListeners(),t.attrs[f]||(t.attrs[f]={}),t.attrs[f][this._id]||(t.attrs[f][this._id]={}),t.tweens[f]||(t.tweens[f]={}),e)void 0===o[s]&&this._addAttr(s,e[s]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}var e=t.prototype;return e._addAttr=function(e,i){var n,s,a,o,h,c,d,p,f=this.node,u=f._id;if((a=t.tweens[u][e])&&delete t.attrs[u][a][e],n=f.getAttr(e),r.Z._isArray(i))if(s=[],h=Math.max(i.length,n.length),"points"===e&&i.length!==n.length&&(i.length>n.length?(d=n,n=r.Z._prepareArrayForTween(n,i,f.closed())):(c=i,i=r.Z._prepareArrayForTween(i,n,f.closed()))),0===e.indexOf("fill"))for(o=0;o<h;o++)if(o%2===0)s.push(i[o]-n[o]);else{var m=r.Z.colorToRGBA(n[o]);p=r.Z.colorToRGBA(i[o]),n[o]=m,s.push({r:p.r-m.r,g:p.g-m.g,b:p.b-m.b,a:p.a-m.a})}else for(o=0;o<h;o++)s.push(i[o]-n[o]);else-1!==l.indexOf(e)?(n=r.Z.colorToRGBA(n),s={r:(p=r.Z.colorToRGBA(i)).r-n.r,g:p.g-n.g,b:p.b-n.b,a:p.a-n.a}):s=i-n;t.attrs[u][this._id][e]={start:n,diff:s,end:i,trueEnd:c,trueStart:d},t.tweens[u][e]=this._id},e._tweenFunc=function(e){var i,n,s,a,o,h,c,d,p=this.node,f=t.attrs[p._id][this._id];for(i in f){if(s=(n=f[i]).start,a=n.diff,d=n.end,r.Z._isArray(s))if(o=[],c=Math.max(s.length,d.length),0===i.indexOf("fill"))for(h=0;h<c;h++)h%2===0?o.push((s[h]||0)+a[h]*e):o.push("rgba("+Math.round(s[h].r+a[h].r*e)+","+Math.round(s[h].g+a[h].g*e)+","+Math.round(s[h].b+a[h].b*e)+","+(s[h].a+a[h].a*e)+")");else for(h=0;h<c;h++)o.push((s[h]||0)+a[h]*e);else o=-1!==l.indexOf(i)?"rgba("+Math.round(s.r+a.r*e)+","+Math.round(s.g+a.g*e)+","+Math.round(s.b+a.b*e)+","+(s.a+a.a*e)+")":s+a*e;p.setAttr(i,o)}},e._addListeners=function(){var e=this;this.tween.onPlay=function(){e.anim.start()},this.tween.onReverse=function(){e.anim.start()},this.tween.onPause=function(){e.anim.stop()},this.tween.onFinish=function(){var i=e.node,r=t.attrs[i._id][e._id];r.points&&r.points.trueEnd&&i.setAttr("points",r.points.trueEnd),e.onFinish&&e.onFinish.call(e)},this.tween.onReset=function(){var i=e.node,r=t.attrs[i._id][e._id];r.points&&r.points.trueStart&&i.points(r.points.trueStart),e.onReset&&e.onReset()},this.tween.onUpdate=function(){e.onUpdate&&e.onUpdate.call(e)}},e.play=function(){return this.tween.play(),this},e.reverse=function(){return this.tween.reverse(),this},e.reset=function(){return this.tween.reset(),this},e.seek=function(t){return this.tween.seek(1e3*t),this},e.pause=function(){return this.tween.pause(),this},e.finish=function(){return this.tween.finish(),this},e.destroy=function(){var e,i=this.node._id,r=this._id,n=t.tweens[i];for(e in this.pause(),n)delete t.tweens[i][e];delete t.attrs[i][r]},t}();d.attrs={},d.tweens={},s.N.prototype.to=function(t){var e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()},new d(t).play()};var p={BackEaseIn:function(t,e,i,r){var n=1.70158;return i*(t/=r)*t*((n+1)*t-n)+e},BackEaseOut:function(t,e,i,r){var n=1.70158;return i*((t=t/r-1)*t*((n+1)*t+n)+1)+e},BackEaseInOut:function(t,e,i,r){var n=1.70158;return(t/=r/2)<1?i/2*(t*t*((1+(n*=1.525))*t-n))+e:i/2*((t-=2)*t*((1+(n*=1.525))*t+n)+2)+e},ElasticEaseIn:function(t,e,i,r,n,s){var a=0;return 0===t?e:1===(t/=r)?e+i:(s||(s=.3*r),!n||n<Math.abs(i)?(n=i,a=s/4):a=s/(2*Math.PI)*Math.asin(i/n),-n*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/s)+e)},ElasticEaseOut:function(t,e,i,r,n,s){var a=0;return 0===t?e:1===(t/=r)?e+i:(s||(s=.3*r),!n||n<Math.abs(i)?(n=i,a=s/4):a=s/(2*Math.PI)*Math.asin(i/n),n*Math.pow(2,-10*t)*Math.sin((t*r-a)*(2*Math.PI)/s)+i+e)},ElasticEaseInOut:function(t,e,i,r,n,s){var a=0;return 0===t?e:2===(t/=r/2)?e+i:(s||(s=r*(.3*1.5)),!n||n<Math.abs(i)?(n=i,a=s/4):a=s/(2*Math.PI)*Math.asin(i/n),t<1?n*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/s)*-.5+e:n*Math.pow(2,-10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/s)*.5+i+e)},BounceEaseOut:function(t,e,i,r){return(t/=r)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn:function(t,e,i,r){return i-p.BounceEaseOut(r-t,0,i,r)+e},BounceEaseInOut:function(t,e,i,r){return t<r/2?.5*p.BounceEaseIn(2*t,0,i,r)+e:.5*p.BounceEaseOut(2*t-r,0,i,r)+.5*i+e},EaseIn:function(t,e,i,r){return i*(t/=r)*t+e},EaseOut:function(t,e,i,r){return-i*(t/=r)*(t-2)+e},EaseInOut:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},StrongEaseIn:function(t,e,i,r){return i*(t/=r)*t*t*t*t+e},StrongEaseOut:function(t,e,i,r){return i*((t=t/r-1)*t*t*t*t+1)+e},StrongEaseInOut:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},Linear:function(t,e,i,r){return i*t/r+e}}},"../node_modules/konva/lib/Util.js":function(t,e,i){"use strict";i.d(e,{Z:function(){return p},w:function(){return n}});i("../node_modules/core-js/modules/es.array.slice.js"),i("../node_modules/core-js/modules/es.object.to-string.js"),i("../node_modules/core-js/modules/web.dom-collections.for-each.js"),i("../node_modules/core-js/modules/es.regexp.to-string.js"),i("../node_modules/core-js/modules/es.regexp.exec.js"),i("../node_modules/core-js/modules/es.string.replace.js"),i("../node_modules/core-js/modules/es.string.match.js"),i("../node_modules/core-js/modules/es.array.map.js"),i("../node_modules/core-js/modules/es.string.split.js"),i("../node_modules/core-js/modules/es.number.constructor.js"),i("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var r=i("../node_modules/konva/lib/Global.js"),n=function(){function t(t){void 0===t&&(t=[1,0,0,1,0,0]),this.dirty=!1,this.m=t&&t.slice()||[1,0,0,1,0,0]}var e=t.prototype;return e.reset=function(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0},e.copy=function(){return new t(this.m)},e.copyInto=function(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]},e.point=function(t){var e=this.m;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}},e.translate=function(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this},e.scale=function(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this},e.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),r=this.m[0]*e+this.m[2]*i,n=this.m[1]*e+this.m[3]*i,s=this.m[0]*-i+this.m[2]*e,a=this.m[1]*-i+this.m[3]*e;return this.m[0]=r,this.m[1]=n,this.m[2]=s,this.m[3]=a,this},e.getTranslation=function(){return{x:this.m[4],y:this.m[5]}},e.skew=function(t,e){var i=this.m[0]+this.m[2]*e,r=this.m[1]+this.m[3]*e,n=this.m[2]+this.m[0]*t,s=this.m[3]+this.m[1]*t;return this.m[0]=i,this.m[1]=r,this.m[2]=n,this.m[3]=s,this},e.multiply=function(t){var e=this.m[0]*t.m[0]+this.m[2]*t.m[1],i=this.m[1]*t.m[0]+this.m[3]*t.m[1],r=this.m[0]*t.m[2]+this.m[2]*t.m[3],n=this.m[1]*t.m[2]+this.m[3]*t.m[3],s=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],a=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=i,this.m[2]=r,this.m[3]=n,this.m[4]=s,this.m[5]=a,this},e.invert=function(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,i=-this.m[1]*t,r=-this.m[2]*t,n=this.m[0]*t,s=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),a=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=e,this.m[1]=i,this.m[2]=r,this.m[3]=n,this.m[4]=s,this.m[5]=a,this},e.getMatrix=function(){return this.m},e.setAbsolutePosition=function(t,e){var i=this.m[0],r=this.m[1],n=this.m[2],s=this.m[3],a=this.m[4],o=(i*(e-this.m[5])-r*(t-a))/(i*s-r*n),h=(t-a-n*o)/i;return this.translate(h,o)},e.decompose=function(){var t=this.m[0],e=this.m[1],i=this.m[2],r=this.m[3],n=t*r-e*i,s={x:this.m[4],y:this.m[5],rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(0!=t||0!=e){var a=Math.sqrt(t*t+e*e);s.rotation=e>0?Math.acos(t/a):-Math.acos(t/a),s.scaleX=a,s.scaleY=n/a,s.skewX=(t*i+e*r)/n,s.skewY=0}else if(0!=i||0!=r){var o=Math.sqrt(i*i+r*r);s.rotation=Math.PI/2-(r>0?Math.acos(-i/o):-Math.acos(i/o)),s.scaleX=n/o,s.scaleY=o,s.skewX=0,s.skewY=(t*i+e*r)/n}return s.rotation=p._getRotation(s.rotation),s},t}(),s=Math.PI/180,a=180/Math.PI,o="Konva error: ",h={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},l=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,c=[],d="undefined"!==typeof requestAnimationFrame&&requestAnimationFrame||function(t){setTimeout(t,60)},p={_isElement:function(t){return!(!t||1!=t.nodeType)},_isFunction:function(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isPlainObject:function(t){return!!t&&t.constructor===Object},_isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},_isNumber:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&!isNaN(t)&&isFinite(t)},_isString:function(t){return"[object String]"===Object.prototype.toString.call(t)},_isBoolean:function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},isObject:function(t){return t instanceof Object},isValidSelector:function(t){if("string"!==typeof t)return!1;var e=t[0];return"#"===e||"."===e||e===e.toUpperCase()},_sign:function(t){return 0===t||t>0?1:-1},requestAnimFrame:function(t){c.push(t),1===c.length&&d((function(){var t=c;c=[],t.forEach((function(t){t()}))}))},createCanvasElement:function(){var t=document.createElement("canvas");try{t.style=t.style||{}}catch(e){}return t},createImageElement:function(){return document.createElement("img")},_isInDocument:function(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_urlToImage:function(t,e){var i=p.createImageElement();i.onload=function(){e(i)},i.src=t},_rgbToHex:function(t,e,i){return((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1)},_hexToRgb:function(t){t=t.replace("#","");var e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:255&e}},getRandomColor:function(){for(var t=(16777215*Math.random()<<0).toString(16);t.length<6;)t="0"+t;return"#"+t},getRGB:function(t){var e;return t in h?{r:(e=h[t])[0],g:e[1],b:e[2]}:"#"===t[0]?this._hexToRgb(t.substring(1)):"rgb("===t.substr(0,4)?(e=l.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA:function(t){return t=t||"black",p._namedColorToRBA(t)||p._hex3ColorToRGBA(t)||p._hex6ColorToRGBA(t)||p._rgbColorToRGBA(t)||p._rgbaColorToRGBA(t)||p._hslColorToRGBA(t)},_namedColorToRBA:function(t){var e=h[t.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA:function(t){if(0===t.indexOf("rgb(")){var e=(t=t.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA:function(t){if(0===t.indexOf("rgba(")){var e=(t=t.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex6ColorToRGBA:function(t){if("#"===t[0]&&7===t.length)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}},_hex3ColorToRGBA:function(t){if("#"===t[0]&&4===t.length)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}},_hslColorToRGBA:function(t){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)){var e,i,r,n=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t),s=(n[0],n.slice(1)),a=Number(s[0])/360,o=Number(s[1])/100,h=Number(s[2])/100;if(0===o)return r=255*h,{r:Math.round(r),g:Math.round(r),b:Math.round(r),a:1};for(var l=2*h-(e=h<.5?h*(1+o):h+o-h*o),c=[0,0,0],d=0;d<3;d++)(i=a+1/3*-(d-1))<0&&i++,i>1&&i--,r=6*i<1?l+6*(e-l)*i:2*i<1?e:3*i<2?l+(e-l)*(2/3-i)*6:l,c[d]=255*r;return{r:Math.round(c[0]),g:Math.round(c[1]),b:Math.round(c[2]),a:1}}},haveIntersection:function(t,e){return!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y)},cloneObject:function(t){var e={};for(var i in t)this._isPlainObject(t[i])?e[i]=this.cloneObject(t[i]):this._isArray(t[i])?e[i]=this.cloneArray(t[i]):e[i]=t[i];return e},cloneArray:function(t){return t.slice(0)},degToRad:function(t){return t*s},radToDeg:function(t){return t*a},_degToRad:function(t){return p.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),p.degToRad(t)},_radToDeg:function(t){return p.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),p.radToDeg(t)},_getRotation:function(t){return r.So.angleDeg?p.radToDeg(t):t},_capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},throw:function(t){throw new Error(o+t)},error:function(t){console.error(o+t)},warn:function(t){r.So.showWarnings&&console.warn("Konva warning: "+t)},each:function(t,e){for(var i in t)e(i,t[i])},_inRange:function(t,e,i){return e<=t&&t<i},_getProjectionToSegment:function(t,e,i,r,n,s){var a,o,h,l=(t-i)*(t-i)+(e-r)*(e-r);if(0==l)a=t,o=e,h=(n-i)*(n-i)+(s-r)*(s-r);else{var c=((n-t)*(i-t)+(s-e)*(r-e))/l;c<0?(a=t,o=e,h=(t-n)*(t-n)+(e-s)*(e-s)):c>1?(a=i,o=r,h=(i-n)*(i-n)+(r-s)*(r-s)):h=((a=t+c*(i-t))-n)*(a-n)+((o=e+c*(r-e))-s)*(o-s)}return[a,o,h]},_getProjectionToLine:function(t,e,i){var r=p.cloneObject(t),n=Number.MAX_VALUE;return e.forEach((function(s,a){if(i||a!==e.length-1){var o=e[(a+1)%e.length],h=p._getProjectionToSegment(s.x,s.y,o.x,o.y,t.x,t.y),l=h[0],c=h[1],d=h[2];d<n&&(r.x=l,r.y=c,n=d)}})),r},_prepareArrayForTween:function(t,e,i){var r,n=[],s=[];if(t.length>e.length){var a=e;e=t,t=a}for(r=0;r<t.length;r+=2)n.push({x:t[r],y:t[r+1]});for(r=0;r<e.length;r+=2)s.push({x:e[r],y:e[r+1]});var o=[];return s.forEach((function(t){var e=p._getProjectionToLine(t,n,i);o.push(e.x),o.push(e.y)})),o},_prepareToStringify:function(t){var e;for(var i in t.visitedByCircularReferenceRemoval=!0,t)if(t.hasOwnProperty(i)&&t[i]&&"object"==typeof t[i])if(e=Object.getOwnPropertyDescriptor(t,i),t[i].visitedByCircularReferenceRemoval||p._isElement(t[i])){if(!e.configurable)return null;delete t[i]}else if(null===p._prepareToStringify(t[i])){if(!e.configurable)return null;delete t[i]}return delete t.visitedByCircularReferenceRemoval,t},_assign:function(t,e){for(var i in e)t[i]=e[i];return t},_getFirstPointerId:function(t){return t.touches?t.changedTouches[0].identifier:t.pointerId||999}}},"../node_modules/konva/lib/Validators.js":function(t,e,i){"use strict";i.d(e,{I0:function(){return f},Jj:function(){return h},Kg:function(){return o},hi:function(){return l},if:function(){return d},q8:function(){return p},sY:function(){return c},uZ:function(){return u},xj:function(){return a}});i("../node_modules/core-js/modules/es.object.to-string.js"),i("../node_modules/core-js/modules/web.dom-collections.for-each.js");var r=i("../node_modules/konva/lib/Global.js"),n=i("../node_modules/konva/lib/Util.js");function s(t){return n.Z._isString(t)?'"'+t+'"':"[object Number]"===Object.prototype.toString.call(t)||n.Z._isBoolean(t)?t:Object.prototype.toString.call(t)}function a(t){return t>255?255:t<0?0:Math.round(t)}function o(){if(r.So.isUnminified)return function(t,e){return n.Z._isNumber(t)||n.Z.warn(s(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}}function h(t){if(r.So.isUnminified)return function(e,i){var r=n.Z._isNumber(e),a=n.Z._isArray(e)&&e.length==t;return r||a||n.Z.warn(s(e)+' is a not valid value for "'+i+'" attribute. The value should be a number or Array<number>('+t+")"),e}}function l(){if(r.So.isUnminified)return function(t,e){return n.Z._isNumber(t)||"auto"===t||n.Z.warn(s(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}}function c(){if(r.So.isUnminified)return function(t,e){return n.Z._isString(t)||n.Z.warn(s(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}}function d(){if(r.So.isUnminified)return function(t,e){var i=n.Z._isString(t),r="[object CanvasGradient]"===Object.prototype.toString.call(t)||t&&t.addColorStop;return i||r||n.Z.warn(s(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}}function p(){if(r.So.isUnminified)return function(t,e){return n.Z._isArray(t)?t.forEach((function(t){n.Z._isNumber(t)||n.Z.warn('"'+e+'" attribute has non numeric element '+t+". Make sure that all elements are numbers.")})):n.Z.warn(s(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.'),t}}function f(){if(r.So.isUnminified)return function(t,e){return!0===t||!1===t||n.Z.warn(s(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}}function u(t){if(r.So.isUnminified)return function(e,i){return n.Z.isObject(e)||n.Z.warn(s(e)+' is a not valid value for "'+i+'" attribute. The value should be an object with properties '+t),e}}},"../node_modules/konva/lib/index.js":function(t,e,i){"use strict";i.d(e,{Z:function(){return dt}});var r=i("../node_modules/konva/lib/Global.js"),n=i("../node_modules/konva/lib/Util.js"),s=i("../node_modules/konva/lib/Node.js"),a=i("../node_modules/konva/lib/Container.js"),o=i("../node_modules/konva/lib/Stage.js"),h=i("../node_modules/konva/lib/Layer.js"),l=i("../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js"),c=function(t){function e(e){var i;return(i=t.call(this,e)||this).listening(!1),n.Z.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.'),i}return(0,l.Z)(e,t),e}(h.m);c.prototype.nodeType="FastLayer",(0,r.DA)(c);var d=i("../node_modules/konva/lib/Group.js"),p=i("../node_modules/konva/lib/DragAndDrop.js"),f=i("../node_modules/konva/lib/Shape.js"),u=i("../node_modules/konva/lib/Animation.js"),m=i("../node_modules/konva/lib/Tween.js"),g=i("../node_modules/konva/lib/Context.js"),y=i("../node_modules/konva/lib/Canvas.js"),v=n.Z._assign(r.So,{Util:n.Z,Transform:n.w,Node:s.N,Container:a.W,Stage:o.H,stages:o.U,Layer:h.m,FastLayer:c,Group:d.Z,DD:p.DD,Shape:f.b,shapes:f.J,Animation:u.f,Tween:m.k,Easings:m.z,Context:g._y,Canvas:y.Xz}),b=i("../node_modules/konva/lib/Factory.js"),_=i("../node_modules/konva/lib/Validators.js"),x=function(t){function e(){return t.apply(this,arguments)||this}(0,l.Z)(e,t);var i=e.prototype;return i._sceneFunc=function(t){var e=r.So.getAngle(this.angle()),i=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,e,i),t.arc(0,0,this.innerRadius(),e,0,!i),t.closePath(),t.fillStrokeShape(this)},i.getWidth=function(){return 2*this.outerRadius()},i.getHeight=function(){return 2*this.outerRadius()},i.setWidth=function(t){this.outerRadius(t/2)},i.setHeight=function(t){this.outerRadius(t/2)},i.getSelfRect=function(){var t=this.outerRadius(),e=Math.PI/180,i=1*e,r=this.angle()*e+i;this.clockwise()&&(r,r=360);for(var n=[],s=[],a=0;a<r;a+=i)n.push(Math.cos(a)),s.push(Math.sin(a));var o=Math.round(t*Math.min.apply(Math,n)),h=Math.round(t*Math.max.apply(Math,n)),l=Math.round(t*Math.min.apply(Math,s));return{x:o||0,y:l||0,width:h-o,height:Math.round(t*Math.max.apply(Math,s))-l}},e}(f.b);x.prototype._centroid=!0,x.prototype.className="Arc",x.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,r.DA)(x),b.F.addGetterSetter(x,"innerRadius",0,(0,_.Kg)()),b.F.addGetterSetter(x,"outerRadius",0,(0,_.Kg)()),b.F.addGetterSetter(x,"angle",0,(0,_.Kg)()),b.F.addGetterSetter(x,"clockwise",!1,(0,_.I0)());var S=i("../node_modules/konva/lib/shapes/Line.js"),P=i("../node_modules/konva/lib/shapes/Path.js"),w=function(t){function e(){return t.apply(this,arguments)||this}(0,l.Z)(e,t);var i=e.prototype;return i._sceneFunc=function(e){t.prototype._sceneFunc.call(this,e);var i=2*Math.PI,r=this.points(),n=r,s=0!==this.tension()&&r.length>4;s&&(n=this.getTensionPoints());var a,o,h=this.pointerLength(),l=r.length;if(s){var c=[n[n.length-4],n[n.length-3],n[n.length-2],n[n.length-1],r[l-2],r[l-1]],d=P.y.calcLength(n[n.length-4],n[n.length-3],"C",c),p=P.y.getPointOnQuadraticBezier(Math.min(1,1-h/d),c[0],c[1],c[2],c[3],c[4],c[5]);a=r[l-2]-p.x,o=r[l-1]-p.y}else a=r[l-2]-r[l-4],o=r[l-1]-r[l-3];var f=(Math.atan2(o,a)+i)%i,u=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(r[l-2],r[l-1]),e.rotate(f),e.moveTo(0,0),e.lineTo(-h,u/2),e.lineTo(-h,-u/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(r[0],r[1]),s?(a=(n[0]+n[2])/2-r[0],o=(n[1]+n[3])/2-r[1]):(a=r[2]-r[0],o=r[3]-r[1]),e.rotate((Math.atan2(-o,-a)+i)%i),e.moveTo(0,0),e.lineTo(-h,u/2),e.lineTo(-h,-u/2),e.closePath(),e.restore(),this.__fillStroke(e))},i.__fillStroke=function(t){var e=this.dashEnabled();e&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),e&&(this.attrs.dashEnabled=!0)},i.getSelfRect=function(){var e=t.prototype.getSelfRect.call(this),i=this.pointerWidth()/2;return{x:e.x-i,y:e.y-i,width:e.width+2*i,height:e.height+2*i}},e}(S.x);w.prototype.className="Arrow",(0,r.DA)(w),b.F.addGetterSetter(w,"pointerLength",10,(0,_.Kg)()),b.F.addGetterSetter(w,"pointerWidth",10,(0,_.Kg)()),b.F.addGetterSetter(w,"pointerAtBeginning",!1),b.F.addGetterSetter(w,"pointerAtEnding",!0);var C=function(t){function e(){return t.apply(this,arguments)||this}(0,l.Z)(e,t);var i=e.prototype;return i._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,2*Math.PI,!1),t.closePath(),t.fillStrokeShape(this)},i.getWidth=function(){return 2*this.radius()},i.getHeight=function(){return 2*this.radius()},i.setWidth=function(t){this.radius()!==t/2&&this.radius(t/2)},i.setHeight=function(t){this.radius()!==t/2&&this.radius(t/2)},e}(f.b);C.prototype._centroid=!0,C.prototype.className="Circle",C.prototype._attrsAffectingSize=["radius"],(0,r.DA)(C),b.F.addGetterSetter(C,"radius",0,(0,_.Kg)());var E=function(t){function e(){return t.apply(this,arguments)||this}(0,l.Z)(e,t);var i=e.prototype;return i._sceneFunc=function(t){var e=this.radiusX(),i=this.radiusY();t.beginPath(),t.save(),e!==i&&t.scale(1,i/e),t.arc(0,0,e,0,2*Math.PI,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)},i.getWidth=function(){return 2*this.radiusX()},i.getHeight=function(){return 2*this.radiusY()},i.setWidth=function(t){this.radiusX(t/2)},i.setHeight=function(t){this.radiusY(t/2)},e}(f.b);E.prototype.className="Ellipse",E.prototype._centroid=!0,E.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,r.DA)(E),b.F.addComponentsGetterSetter(E,"radius",["x","y"]),b.F.addGetterSetter(E,"radiusX",0,(0,_.Kg)()),b.F.addGetterSetter(E,"radiusY",0,(0,_.Kg)());var k=i("../node_modules/konva/lib/shapes/Image.js"),A=(i("../node_modules/core-js/modules/es.array.find.js"),["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height"]),T="up",F="right",M="down",D="left",I=A.length,R=function(t){function e(e){var i;return(i=t.call(this,e)||this).on("add.konva",(function(t){this._addListeners(t.child),this._sync()})),i}(0,l.Z)(e,t);var i=e.prototype;return i.getText=function(){return this.find("Text")[0]},i.getTag=function(){return this.find("Tag")[0]},i._addListeners=function(t){var e,i=this,r=function(){i._sync()};for(e=0;e<I;e++)t.on(A[e]+"Change.konva",r)},i.getWidth=function(){return this.getText().width()},i.getHeight=function(){return this.getText().height()},i._sync=function(){var t,e,i,r,n,s,a,o=this.getText(),h=this.getTag();if(o&&h){switch(t=o.width(),e=o.height(),i=h.pointerDirection(),r=h.pointerWidth(),a=h.pointerHeight(),n=0,s=0,i){case T:n=t/2,s=-1*a;break;case F:n=t+r,s=e/2;break;case M:n=t/2,s=e+a;break;case D:n=-1*r,s=e/2}h.setAttrs({x:-1*n,y:-1*s,width:t,height:e}),o.setAttrs({x:-1*n,y:-1*s})}},e}(d.Z);R.prototype.className="Label",(0,r.DA)(R);var G=function(t){function e(){return t.apply(this,arguments)||this}(0,l.Z)(e,t);var i=e.prototype;return i._sceneFunc=function(t){var e=this.width(),i=this.height(),r=this.pointerDirection(),n=this.pointerWidth(),s=this.pointerHeight(),a=this.cornerRadius(),o=0,h=0,l=0,c=0;"number"===typeof a?o=h=l=c=Math.min(a,e/2,i/2):(o=Math.min(a[0]||0,e/2,i/2),h=Math.min(a[1]||0,e/2,i/2),c=Math.min(a[2]||0,e/2,i/2),l=Math.min(a[3]||0,e/2,i/2)),t.beginPath(),t.moveTo(o,0),r===T&&(t.lineTo((e-n)/2,0),t.lineTo(e/2,-1*s),t.lineTo((e+n)/2,0)),t.lineTo(e-h,0),t.arc(e-h,h,h,3*Math.PI/2,0,!1),r===F&&(t.lineTo(e,(i-s)/2),t.lineTo(e+n,i/2),t.lineTo(e,(i+s)/2)),t.lineTo(e,i-c),t.arc(e-c,i-c,c,0,Math.PI/2,!1),r===M&&(t.lineTo((e+n)/2,i),t.lineTo(e/2,i+s),t.lineTo((e-n)/2,i)),t.lineTo(l,i),t.arc(l,i-l,l,Math.PI/2,Math.PI,!1),r===D&&(t.lineTo(0,(i+s)/2),t.lineTo(-1*n,i/2),t.lineTo(0,(i-s)/2)),t.lineTo(0,o),t.arc(o,o,o,Math.PI,3*Math.PI/2,!1),t.closePath(),t.fillStrokeShape(this)},i.getSelfRect=function(){var t=0,e=0,i=this.pointerWidth(),r=this.pointerHeight(),n=this.pointerDirection(),s=this.width(),a=this.height();return n===T?(e-=r,a+=r):n===M?a+=r:n===D?(t-=1.5*i,s+=i):n===F&&(s+=1.5*i),{x:t,y:e,width:s,height:a}},e}(f.b);G.prototype.className="Tag",(0,r.DA)(G),b.F.addGetterSetter(G,"pointerDirection","none"),b.F.addGetterSetter(G,"pointerWidth",0,(0,_.Kg)()),b.F.addGetterSetter(G,"pointerHeight",0,(0,_.Kg)()),b.F.addGetterSetter(G,"cornerRadius",0,(0,_.Jj)(4));var L=i("../node_modules/konva/lib/shapes/Rect.js"),j=(i("../node_modules/core-js/modules/web.dom-collections.for-each.js"),function(t){function e(){return t.apply(this,arguments)||this}(0,l.Z)(e,t);var i=e.prototype;return i._sceneFunc=function(t){var e=this._getPoints();t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var i=1;i<e.length;i++)t.lineTo(e[i].x,e[i].y);t.closePath(),t.fillStrokeShape(this)},i._getPoints=function(){for(var t=this.attrs.sides,e=this.attrs.radius||0,i=[],r=0;r<t;r++)i.push({x:e*Math.sin(2*r*Math.PI/t),y:-1*e*Math.cos(2*r*Math.PI/t)});return i},i.getSelfRect=function(){var t=this._getPoints(),e=t[0].x,i=t[0].y,r=t[0].x,n=t[0].y;return t.forEach((function(t){e=Math.min(e,t.x),i=Math.max(i,t.x),r=Math.min(r,t.y),n=Math.max(n,t.y)})),{x:e,y:r,width:i-e,height:n-r}},i.getWidth=function(){return 2*this.radius()},i.getHeight=function(){return 2*this.radius()},i.setWidth=function(t){this.radius(t/2)},i.setHeight=function(t){this.radius(t/2)},e}(f.b));j.prototype.className="RegularPolygon",j.prototype._centroid=!0,j.prototype._attrsAffectingSize=["radius"],(0,r.DA)(j),b.F.addGetterSetter(j,"radius",0,(0,_.Kg)()),b.F.addGetterSetter(j,"sides",0,(0,_.Kg)());var N=2*Math.PI,B=function(t){function e(){return t.apply(this,arguments)||this}(0,l.Z)(e,t);var i=e.prototype;return i._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,N,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),N,0,!0),t.closePath(),t.fillStrokeShape(this)},i.getWidth=function(){return 2*this.outerRadius()},i.getHeight=function(){return 2*this.outerRadius()},i.setWidth=function(t){this.outerRadius(t/2)},i.setHeight=function(t){this.outerRadius(t/2)},e}(f.b);B.prototype.className="Ring",B.prototype._centroid=!0,B.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,r.DA)(B),b.F.addGetterSetter(B,"innerRadius",0,(0,_.Kg)()),b.F.addGetterSetter(B,"outerRadius",0,(0,_.Kg)());var O=function(t){function e(e){var i;return(i=t.call(this,e)||this)._updated=!0,i.anim=new u.f((function(){var t=i._updated;return i._updated=!1,t})),i.on("animationChange.konva",(function(){this.frameIndex(0)})),i.on("frameIndexChange.konva",(function(){this._updated=!0})),i.on("frameRateChange.konva",(function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})),i}(0,l.Z)(e,t);var i=e.prototype;return i._sceneFunc=function(t){var e=this.animation(),i=this.frameIndex(),r=4*i,n=this.animations()[e],s=this.frameOffsets(),a=n[r+0],o=n[r+1],h=n[r+2],l=n[r+3],c=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,h,l),t.closePath(),t.fillStrokeShape(this)),c)if(s){var d=s[e],p=2*i;t.drawImage(c,a,o,h,l,d[p+0],d[p+1],h,l)}else t.drawImage(c,a,o,h,l,0,0,h,l)},i._hitFunc=function(t){var e=this.animation(),i=this.frameIndex(),r=4*i,n=this.animations()[e],s=this.frameOffsets(),a=n[r+2],o=n[r+3];if(t.beginPath(),s){var h=s[e],l=2*i;t.rect(h[l+0],h[l+1],a,o)}else t.rect(0,0,a,o);t.closePath(),t.fillShape(this)},i._useBufferCanvas=function(){return t.prototype._useBufferCanvas.call(this,!0)},i._setInterval=function(){var t=this;this.interval=setInterval((function(){t._updateIndex()}),1e3/this.frameRate())},i.start=function(){if(!this.isRunning()){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}},i.stop=function(){this.anim.stop(),clearInterval(this.interval)},i.isRunning=function(){return this.anim.isRunning()},i._updateIndex=function(){var t=this.frameIndex(),e=this.animation();t<this.animations()[e].length/4-1?this.frameIndex(t+1):this.frameIndex(0)},e}(f.b);O.prototype.className="Sprite",(0,r.DA)(O),b.F.addGetterSetter(O,"animation"),b.F.addGetterSetter(O,"animations"),b.F.addGetterSetter(O,"frameOffsets"),b.F.addGetterSetter(O,"image"),b.F.addGetterSetter(O,"frameIndex",0,(0,_.Kg)()),b.F.addGetterSetter(O,"frameRate",17,(0,_.Kg)()),b.F.backCompat(O,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});var V=function(t){function e(){return t.apply(this,arguments)||this}(0,l.Z)(e,t);var i=e.prototype;return i._sceneFunc=function(t){var e=this.innerRadius(),i=this.outerRadius(),r=this.numPoints();t.beginPath(),t.moveTo(0,0-i);for(var n=1;n<2*r;n++){var s=n%2===0?i:e,a=s*Math.sin(n*Math.PI/r),o=-1*s*Math.cos(n*Math.PI/r);t.lineTo(a,o)}t.closePath(),t.fillStrokeShape(this)},i.getWidth=function(){return 2*this.outerRadius()},i.getHeight=function(){return 2*this.outerRadius()},i.setWidth=function(t){this.outerRadius(t/2)},i.setHeight=function(t){this.outerRadius(t/2)},e}(f.b);V.prototype.className="Star",V.prototype._centroid=!0,V.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,r.DA)(V),b.F.addGetterSetter(V,"numPoints",5,(0,_.Kg)()),b.F.addGetterSetter(V,"innerRadius",0,(0,_.Kg)()),b.F.addGetterSetter(V,"outerRadius",0,(0,_.Kg)());var z=i("../node_modules/konva/lib/shapes/Text.js"),H=(i("../node_modules/core-js/modules/es.array.fill.js"),i("../node_modules/core-js/modules/es.regexp.exec.js"),i("../node_modules/core-js/modules/es.string.split.js"),"normal");function Z(t){t.fillText(this.partialText,0,0)}function W(t){t.strokeText(this.partialText,0,0)}var q=function(t){function e(e){var i;return(i=t.call(this,e)||this).dummyCanvas=n.Z.createCanvasElement(),i.dataArray=[],i.dataArray=P.y.parsePathData(i.attrs.data),i.on("dataChange.konva",(function(){this.dataArray=P.y.parsePathData(this.attrs.data),this._setTextData()})),i.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva",i._setTextData),i._setTextData(),i}(0,l.Z)(e,t);var i=e.prototype;return i._sceneFunc=function(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();var e=this.textDecoration(),i=this.fill(),r=this.fontSize(),n=this.glyphInfo;"underline"===e&&t.beginPath();for(var s=0;s<n.length;s++){t.save();var a=n[s].p0;t.translate(a.x,a.y),t.rotate(n[s].rotation),this.partialText=n[s].text,t.fillStrokeShape(this),"underline"===e&&(0===s&&t.moveTo(0,r/2+1),t.lineTo(r,r/2+1)),t.restore()}"underline"===e&&(t.strokeStyle=i,t.lineWidth=r/20,t.stroke()),t.restore()},i._hitFunc=function(t){t.beginPath();var e=this.glyphInfo;if(e.length>=1){var i=e[0].p0;t.moveTo(i.x,i.y)}for(var r=0;r<e.length;r++){var n=e[r].p1;t.lineTo(n.x,n.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()},i.getTextWidth=function(){return this.textWidth},i.getTextHeight=function(){return n.Z.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight},i.setText=function(t){return z.x.prototype.setText.call(this,t)},i._getContextFont=function(){return z.x.prototype._getContextFont.call(this)},i._getTextSize=function(t){var e=this.dummyCanvas.getContext("2d");e.save(),e.font=this._getContextFont();var i=e.measureText(t);return e.restore(),{width:i.width,height:parseInt(this.attrs.fontSize,10)}},i._setTextData=function(){var t=this,e=this._getTextSize(this.attrs.text),i=this.letterSpacing(),r=this.align(),n=this.kerningFunc();this.textWidth=e.width,this.textHeight=e.height;var s=Math.max(this.textWidth+((this.attrs.text||"").length-1)*i,0);this.glyphInfo=[];for(var a=0,o=0;o<t.dataArray.length;o++)t.dataArray[o].pathLength>0&&(a+=t.dataArray[o].pathLength);var h=0;"center"===r&&(h=Math.max(0,a/2-s/2)),"right"===r&&(h=Math.max(0,a-s));for(var l,c,d,p=(0,z.W)(this.text()),f=this.text().split(" ").length-1,u=-1,m=0,g=function(){m=0;for(var e=t.dataArray,i=u+1;i<e.length;i++){if(e[i].pathLength>0)return u=i,e[i];"M"===e[i].command&&(l={x:e[i].points[0],y:e[i].points[1]})}return{}},y=function(e){var n=t._getTextSize(e).width+i;" "===e&&"justify"===r&&(n+=(a-s)/f);var o=0,h=0;for(c=void 0;Math.abs(n-o)/n>.01&&h<20;){h++;for(var p=o;void 0===d;)(d=g())&&p+d.pathLength<n&&(p+=d.pathLength,d=void 0);if(d==={}||void 0===l)return;var u=!1;switch(d.command){case"L":P.y.getLineLength(l.x,l.y,d.points[0],d.points[1])>n?c=P.y.getPointOnLine(n,l.x,l.y,d.points[0],d.points[1],l.x,l.y):d=void 0;break;case"A":var y=d.points[4],v=d.points[5],b=d.points[4]+v;0===m?m=y+1e-8:n>o?m+=Math.PI/180*v/Math.abs(v):m-=Math.PI/360*v/Math.abs(v),(v<0&&m<b||v>=0&&m>b)&&(m=b,u=!0),c=P.y.getPointOnEllipticalArc(d.points[0],d.points[1],d.points[2],d.points[3],m,d.points[6]);break;case"C":0===m?m=n>d.pathLength?1e-8:n/d.pathLength:n>o?m+=(n-o)/d.pathLength/2:m=Math.max(m-(o-n)/d.pathLength/2,0),m>1&&(m=1,u=!0),c=P.y.getPointOnCubicBezier(m,d.start.x,d.start.y,d.points[0],d.points[1],d.points[2],d.points[3],d.points[4],d.points[5]);break;case"Q":0===m?m=n/d.pathLength:n>o?m+=(n-o)/d.pathLength:m-=(o-n)/d.pathLength,m>1&&(m=1,u=!0),c=P.y.getPointOnQuadraticBezier(m,d.start.x,d.start.y,d.points[0],d.points[1],d.points[2],d.points[3])}void 0!==c&&(o=P.y.getLineLength(l.x,l.y,c.x,c.y)),u&&(u=!1,d=void 0)}},v=h/(t._getTextSize("C").width+i)-1,b=0;b<v&&(y("C"),void 0!==l&&void 0!==c);b++)l=c;for(var _=0;_<p.length&&(y(p[_]),void 0!==l&&void 0!==c);_++){var x=P.y.getLineLength(l.x,l.y,c.x,c.y),S=0;if(n)try{S=n(p[_-1],p[_])*this.fontSize()}catch(E){S=0}l.x+=S,c.x+=S,this.textWidth+=S;var w=P.y.getPointOnLine(S+x/2,l.x,l.y,c.x,c.y),C=Math.atan2(c.y-l.y,c.x-l.x);this.glyphInfo.push({transposeX:w.x,transposeY:w.y,text:p[_],rotation:C,p0:l,p1:c}),l=c}},i.getSelfRect=function(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var t=[];this.glyphInfo.forEach((function(e){t.push(e.p0.x),t.push(e.p0.y),t.push(e.p1.x),t.push(e.p1.y)}));for(var e,i,r=t[0]||0,n=t[0]||0,s=t[1]||0,a=t[1]||0,o=0;o<t.length/2;o++)e=t[2*o],i=t[2*o+1],r=Math.min(r,e),n=Math.max(n,e),s=Math.min(s,i),a=Math.max(a,i);var h=this.fontSize();return{x:r-h/2,y:s-h/2,width:n-r+h,height:a-s+h}},e}(f.b);q.prototype._fillFunc=Z,q.prototype._strokeFunc=W,q.prototype._fillFuncHit=Z,q.prototype._strokeFuncHit=W,q.prototype.className="TextPath",q.prototype._attrsAffectingSize=["text","fontSize","data"],(0,r.DA)(q),b.F.addGetterSetter(q,"data"),b.F.addGetterSetter(q,"fontFamily","Arial"),b.F.addGetterSetter(q,"fontSize",12,(0,_.Kg)()),b.F.addGetterSetter(q,"fontStyle",H),b.F.addGetterSetter(q,"align","left"),b.F.addGetterSetter(q,"letterSpacing",0,(0,_.Kg)()),b.F.addGetterSetter(q,"textBaseline","middle"),b.F.addGetterSetter(q,"fontVariant",H),b.F.addGetterSetter(q,"text",""),b.F.addGetterSetter(q,"textDecoration",null),b.F.addGetterSetter(q,"kerningFunc",null);var Y=i("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),X=(i("../node_modules/core-js/modules/es.array.join.js"),i("../node_modules/core-js/modules/es.array.map.js"),i("../node_modules/core-js/modules/es.object.assign.js"),i("../node_modules/core-js/modules/es.function.name.js"),i("../node_modules/core-js/modules/es.string.replace.js"),"tr-konva"),K=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map((function(t){return t+".tr-konva"})).join(" "),U="nodesRect",J=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],$={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},Q="ontouchstart"in r.So._global;var tt=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function et(t,e,i){var r=i.x+(t.x-i.x)*Math.cos(e)-(t.y-i.y)*Math.sin(e),n=i.y+(t.x-i.x)*Math.sin(e)+(t.y-i.y)*Math.cos(e);return Object.assign(Object.assign({},t),{rotation:t.rotation+e,x:r,y:n})}function it(t,e){var i=function(t){return{x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)}}(t);return et(t,e,i)}var rt=function(t){function e(e){var i;return(i=t.call(this,e)||this)._transforming=!1,i._createElements(),i._handleMouseMove=i._handleMouseMove.bind((0,Y.Z)(i)),i._handleMouseUp=i._handleMouseUp.bind((0,Y.Z)(i)),i.update=i.update.bind((0,Y.Z)(i)),i.on(K,i.update),i.getNode()&&i.update(),i}(0,l.Z)(e,t);var i=e.prototype;return i.attachTo=function(t){return this.setNode(t),this},i.setNode=function(t){return n.Z.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])},i.getNode=function(){return this._nodes&&this._nodes[0]},i._getEventNamespace=function(){return X+this._id},i.setNodes=function(t){var e=this;return void 0===t&&(t=[]),this._nodes&&this._nodes.length&&this.detach(),this._nodes=t,1===t.length&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach((function(t){var i=function(){1===e.nodes().length&&e.useSingleNodeRotation()&&e.rotation(e.nodes()[0].getAbsoluteRotation()),e._resetTransformCache(),e._transforming||e.isDragging()||e.update()},r=t._attrsAffectingSize.map((function(t){return t+"Change."+e._getEventNamespace()})).join(" ");t.on(r,i),t.on(J.map((function(t){return t+"."+e._getEventNamespace()})).join(" "),i),t.on("absoluteTransformChange."+e._getEventNamespace(),i),e._proxyDrag(t)})),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this},i._proxyDrag=function(t){var e,i=this;t.on("dragstart."+this._getEventNamespace(),(function(r){e=t.getAbsolutePosition(),i.isDragging()||t===i.findOne(".back")||i.startDrag(r,!1)})),t.on("dragmove."+this._getEventNamespace(),(function(r){if(e){var n=t.getAbsolutePosition(),s=n.x-e.x,a=n.y-e.y;i.nodes().forEach((function(e){if(e!==t&&!e.isDragging()){var i=e.getAbsolutePosition();e.setAbsolutePosition({x:i.x+s,y:i.y+a}),e.startDrag(r)}})),e=null}}))},i.getNodes=function(){return this._nodes||[]},i.getActiveAnchor=function(){return this._movingAnchorName},i.detach=function(){var t=this;this._nodes&&this._nodes.forEach((function(e){e.off("."+t._getEventNamespace())})),this._nodes=[],this._resetTransformCache()},i._resetTransformCache=function(){this._clearCache(U),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")},i._getNodeRect=function(){return this._getCache(U,this.__getNodeRect)},i.__getNodeShape=function(t,e,i){void 0===e&&(e=this.rotation());var n=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),s=t.getAbsoluteScale(i),a=t.getAbsolutePosition(i),o=n.x*s.x-t.offsetX()*s.x,h=n.y*s.y-t.offsetY()*s.y,l=(r.So.getAngle(t.getAbsoluteRotation())+2*Math.PI)%(2*Math.PI);return et({x:a.x+o*Math.cos(l)+h*Math.sin(-l),y:a.y+h*Math.cos(l)+o*Math.sin(l),width:n.width*s.x,height:n.height*s.y,rotation:l},-r.So.getAngle(e),{x:0,y:0})},i.__getNodeRect=function(){var t=this;if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};var e=[];this.nodes().map((function(i){var r=i.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:t.ignoreStroke()}),n=[{x:r.x,y:r.y},{x:r.x+r.width,y:r.y},{x:r.x+r.width,y:r.y+r.height},{x:r.x,y:r.y+r.height}],s=i.getAbsoluteTransform();n.forEach((function(t){var i=s.point(t);e.push(i)}))}));var i,s,a,o,h=new n.w;h.rotate(-r.So.getAngle(this.rotation())),e.forEach((function(t){var e=h.point(t);void 0===i&&(i=a=e.x,s=o=e.y),i=Math.min(i,e.x),s=Math.min(s,e.y),a=Math.max(a,e.x),o=Math.max(o,e.y)})),h.invert();var l=h.point({x:i,y:s});return{x:l.x,y:l.y,width:a-i,height:o-s,rotation:r.So.getAngle(this.rotation())}},i.getX=function(){return this._getNodeRect().x},i.getY=function(){return this._getNodeRect().y},i.getWidth=function(){return this._getNodeRect().width},i.getHeight=function(){return this._getNodeRect().height},i._createElements=function(){this._createBack(),tt.forEach(function(t){this._createAnchor(t)}.bind(this)),this._createAnchor("rotater")},i._createAnchor=function(t){var e=this,i=new L.U({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:Q?10:"auto"}),s=this;i.on("mousedown touchstart",(function(t){s._handleMouseDown(t)})),i.on("dragstart",(function(t){i.stopDrag(),t.cancelBubble=!0})),i.on("dragend",(function(t){t.cancelBubble=!0})),i.on("mouseenter",(function(){var s=r.So.getAngle(e.rotation()),a=function(t,e){if("rotater"===t)return"crosshair";e+=n.Z.degToRad($[t]||0);var i=(n.Z.radToDeg(e)%360+360)%360;return n.Z._inRange(i,337.5,360)||n.Z._inRange(i,0,22.5)?"ns-resize":n.Z._inRange(i,22.5,67.5)?"nesw-resize":n.Z._inRange(i,67.5,112.5)?"ew-resize":n.Z._inRange(i,112.5,157.5)?"nwse-resize":n.Z._inRange(i,157.5,202.5)?"ns-resize":n.Z._inRange(i,202.5,247.5)?"nesw-resize":n.Z._inRange(i,247.5,292.5)?"ew-resize":n.Z._inRange(i,292.5,337.5)?"nwse-resize":(n.Z.error("Transformer has unknown angle for cursor detection: "+i),"pointer")}(t,s);i.getStage().content&&(i.getStage().content.style.cursor=a),e._cursorChange=!0})),i.on("mouseout",(function(){i.getStage().content&&(i.getStage().content.style.cursor=""),e._cursorChange=!1})),this.add(i)},i._createBack=function(){var t=this,e=new f.b({name:"back",width:0,height:0,draggable:!0,sceneFunc:function(t){var e=this.getParent(),i=e.padding();t.beginPath(),t.rect(-i,-i,this.width()+2*i,this.height()+2*i),t.moveTo(this.width()/2,-i),e.rotateEnabled()&&t.lineTo(this.width()/2,-e.rotateAnchorOffset()*n.Z._sign(this.height())-i),t.fillStrokeShape(this)},hitFunc:function(e,i){if(t.shouldOverdrawWholeArea()){var r=t.padding();e.beginPath(),e.rect(-r,-r,i.width()+2*r,i.height()+2*r),e.fillStrokeShape(i)}}});this.add(e),this._proxyDrag(e),e.on("dragstart",(function(t){t.cancelBubble=!0})),e.on("dragmove",(function(t){t.cancelBubble=!0})),e.on("dragend",(function(t){t.cancelBubble=!0})),this.on("dragmove",(function(e){t.update()}))},i._handleMouseDown=function(t){this._movingAnchorName=t.target.name().split(" ")[0];var e=this._getNodeRect(),i=e.width,r=e.height,n=Math.sqrt(Math.pow(i,2)+Math.pow(r,2));this.sin=Math.abs(r/n),this.cos=Math.abs(i/n),"undefined"!==typeof window&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var s=t.target.getAbsolutePosition(),a=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:a.x-s.x,y:a.y-s.y},this._fire("transformstart",{evt:t,target:this.getNode()}),this._nodes.forEach((function(e){e._fire("transformstart",{evt:t,target:e})}))},i._handleMouseMove=function(t){var e,i,n,s=this.findOne("."+this._movingAnchorName),a=s.getStage();a.setPointersPositions(t);var o=a.getPointerPosition(),h={x:o.x-this._anchorDragOffset.x,y:o.y-this._anchorDragOffset.y},l=s.getAbsolutePosition();this.anchorDragBoundFunc()&&(h=this.anchorDragBoundFunc()(l,h,t)),s.setAbsolutePosition(h);var c=s.getAbsolutePosition();if(l.x!==c.x||l.y!==c.y)if("rotater"!==this._movingAnchorName){var d=this.keepRatio()||t.shiftKey,p=this.centeredScaling()||t.altKey;if("top-left"===this._movingAnchorName){if(d){var f=p?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};n=Math.sqrt(Math.pow(f.x-s.x(),2)+Math.pow(f.y-s.y(),2));var u=this.findOne(".top-left").x()>f.x?-1:1,m=this.findOne(".top-left").y()>f.y?-1:1;e=n*this.cos*u,i=n*this.sin*m,this.findOne(".top-left").x(f.x-e),this.findOne(".top-left").y(f.y-i)}}else if("top-center"===this._movingAnchorName)this.findOne(".top-left").y(s.y());else if("top-right"===this._movingAnchorName){if(d){f=p?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};n=Math.sqrt(Math.pow(s.x()-f.x,2)+Math.pow(f.y-s.y(),2));u=this.findOne(".top-right").x()<f.x?-1:1,m=this.findOne(".top-right").y()>f.y?-1:1;e=n*this.cos*u,i=n*this.sin*m,this.findOne(".top-right").x(f.x+e),this.findOne(".top-right").y(f.y-i)}var g=s.position();this.findOne(".top-left").y(g.y),this.findOne(".bottom-right").x(g.x)}else if("middle-left"===this._movingAnchorName)this.findOne(".top-left").x(s.x());else if("middle-right"===this._movingAnchorName)this.findOne(".bottom-right").x(s.x());else if("bottom-left"===this._movingAnchorName){if(d){f=p?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};n=Math.sqrt(Math.pow(f.x-s.x(),2)+Math.pow(s.y()-f.y,2));u=f.x<s.x()?-1:1,m=s.y()<f.y?-1:1;e=n*this.cos*u,i=n*this.sin*m,s.x(f.x-e),s.y(f.y+i)}g=s.position(),this.findOne(".top-left").x(g.x),this.findOne(".bottom-right").y(g.y)}else if("bottom-center"===this._movingAnchorName)this.findOne(".bottom-right").y(s.y());else if("bottom-right"===this._movingAnchorName){if(d){f=p?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};n=Math.sqrt(Math.pow(s.x()-f.x,2)+Math.pow(s.y()-f.y,2));u=this.findOne(".bottom-right").x()<f.x?-1:1,m=this.findOne(".bottom-right").y()<f.y?-1:1;e=n*this.cos*u,i=n*this.sin*m,this.findOne(".bottom-right").x(f.x+e),this.findOne(".bottom-right").y(f.y+i)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(p=this.centeredScaling()||t.altKey){var y=this.findOne(".top-left"),v=this.findOne(".bottom-right"),b=y.x(),_=y.y(),x=this.getWidth()-v.x(),S=this.getHeight()-v.y();v.move({x:-b,y:-_}),y.move({x:x,y:S})}var P=this.findOne(".top-left").getAbsolutePosition();e=P.x,i=P.y;var w=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),C=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:e,y:i,width:w,height:C,rotation:r.So.getAngle(this.rotation())},t)}else{var E=this._getNodeRect();e=s.x()-E.width/2,i=-s.y()+E.height/2;var k=Math.atan2(-i,e)+Math.PI/2;E.height<0&&(k-=Math.PI);var A=r.So.getAngle(this.rotation())+k,T=r.So.getAngle(this.rotationSnapTolerance()),F=function(t,e,i){for(var n=e,s=0;s<t.length;s++){var a=r.So.getAngle(t[s]),o=Math.abs(a-e)%(2*Math.PI);Math.min(o,2*Math.PI-o)<i&&(n=a)}return n}(this.rotationSnaps(),A,T),M=it(E,F-E.rotation);this._fitNodesInto(M,t)}},i._handleMouseUp=function(t){this._removeEvents(t)},i.getAbsoluteTransform=function(){return this.getTransform()},i._removeEvents=function(t){if(this._transforming){this._transforming=!1,"undefined"!==typeof window&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var e=this.getNode();this._fire("transformend",{evt:t,target:e}),e&&this._nodes.forEach((function(e){e._fire("transformend",{evt:t,target:e})})),this._movingAnchorName=null}},i._fitNodesInto=function(t,e){var i=this,s=this._getNodeRect();if(n.Z._inRange(t.width,2*-this.padding()-1,1))this.update();else if(n.Z._inRange(t.height,2*-this.padding()-1,1))this.update();else{var a=this.flipEnabled(),o=new n.w;if(o.rotate(r.So.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){var h=o.point({x:2*-this.padding(),y:0});if(t.x+=h.x,t.y+=h.y,t.width+=2*this.padding(),this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=h.x,this._anchorDragOffset.y-=h.y,!a)return void this.update()}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){var l=o.point({x:2*this.padding(),y:0});if(this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=l.x,this._anchorDragOffset.y-=l.y,t.width+=2*this.padding(),!a)return void this.update()}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){var c=o.point({x:0,y:2*-this.padding()});if(t.x+=c.x,t.y+=c.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=c.x,this._anchorDragOffset.y-=c.y,t.height+=2*this.padding(),!a)return void this.update()}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){var d=o.point({x:0,y:2*this.padding()});if(this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y,t.height+=2*this.padding(),!a)return void this.update()}if(this.boundBoxFunc()){var p=this.boundBoxFunc()(s,t);p?t=p:n.Z.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}var f=1e7,u=new n.w;u.translate(s.x,s.y),u.rotate(s.rotation),u.scale(s.width/f,s.height/f);var m=new n.w;m.translate(t.x,t.y),m.rotate(t.rotation),m.scale(t.width/f,t.height/f);var g=m.multiply(u.invert());this._nodes.forEach((function(t){var r,s=t.getParent().getAbsoluteTransform(),a=t.getTransform().copy();a.translate(t.offsetX(),t.offsetY());var o=new n.w;o.multiply(s.copy().invert()).multiply(g).multiply(s).multiply(a);var h=o.decompose();t.setAttrs(h),i._fire("transform",{evt:e,target:t}),t._fire("transform",{evt:e,target:t}),null===(r=t.getLayer())||void 0===r||r.batchDraw()})),this.rotation(n.Z._getRotation(t.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}},i.forceUpdate=function(){this._resetTransformCache(),this.update()},i._batchChangeChild=function(t,e){this.findOne(t).setAttrs(e)},i.update=function(){var t,e=this,i=this._getNodeRect();this.rotation(n.Z._getRotation(i.rotation));var r=i.width,s=i.height,a=this.enabledAnchors(),o=this.resizeEnabled(),h=this.padding(),l=this.anchorSize();this.find("._anchor").forEach((function(t){t.setAttrs({width:l,height:l,offsetX:l/2,offsetY:l/2,stroke:e.anchorStroke(),strokeWidth:e.anchorStrokeWidth(),fill:e.anchorFill(),cornerRadius:e.anchorCornerRadius()})})),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:l/2+h,offsetY:l/2+h,visible:o&&a.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:r/2,y:0,offsetY:l/2+h,visible:o&&a.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:r,y:0,offsetX:l/2-h,offsetY:l/2+h,visible:o&&a.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:s/2,offsetX:l/2+h,visible:o&&a.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:r,y:s/2,offsetX:l/2-h,visible:o&&a.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:s,offsetX:l/2+h,offsetY:l/2-h,visible:o&&a.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:r/2,y:s,offsetY:l/2-h,visible:o&&a.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:r,y:s,offsetX:l/2-h,offsetY:l/2-h,visible:o&&a.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:r/2,y:-this.rotateAnchorOffset()*n.Z._sign(s)-h,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:r,height:s,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0}),null===(t=this.getLayer())||void 0===t||t.batchDraw()},i.isTransforming=function(){return this._transforming},i.stopTransform=function(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}},i.destroy=function(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),d.Z.prototype.destroy.call(this),this.detach(),this._removeEvents(),this},i.toObject=function(){return s.N.prototype.toObject.call(this)},e}(d.Z);rt.prototype.className="Transformer",(0,r.DA)(rt),b.F.addGetterSetter(rt,"enabledAnchors",tt,(function(t){return t instanceof Array||n.Z.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach((function(t){-1===tt.indexOf(t)&&n.Z.warn("Unknown anchor name: "+t+". Available names are: "+tt.join(", "))})),t||[]})),b.F.addGetterSetter(rt,"flipEnabled",!0,(0,_.I0)()),b.F.addGetterSetter(rt,"resizeEnabled",!0),b.F.addGetterSetter(rt,"anchorSize",10,(0,_.Kg)()),b.F.addGetterSetter(rt,"rotateEnabled",!0),b.F.addGetterSetter(rt,"rotationSnaps",[]),b.F.addGetterSetter(rt,"rotateAnchorOffset",50,(0,_.Kg)()),b.F.addGetterSetter(rt,"rotationSnapTolerance",5,(0,_.Kg)()),b.F.addGetterSetter(rt,"borderEnabled",!0),b.F.addGetterSetter(rt,"anchorStroke","rgb(0, 161, 255)"),b.F.addGetterSetter(rt,"anchorStrokeWidth",1,(0,_.Kg)()),b.F.addGetterSetter(rt,"anchorFill","white"),b.F.addGetterSetter(rt,"anchorCornerRadius",0,(0,_.Kg)()),b.F.addGetterSetter(rt,"borderStroke","rgb(0, 161, 255)"),b.F.addGetterSetter(rt,"borderStrokeWidth",1,(0,_.Kg)()),b.F.addGetterSetter(rt,"borderDash"),b.F.addGetterSetter(rt,"keepRatio",!0),b.F.addGetterSetter(rt,"centeredScaling",!1),b.F.addGetterSetter(rt,"ignoreStroke",!1),b.F.addGetterSetter(rt,"padding",0,(0,_.Kg)()),b.F.addGetterSetter(rt,"node"),b.F.addGetterSetter(rt,"nodes"),b.F.addGetterSetter(rt,"boundBoxFunc"),b.F.addGetterSetter(rt,"anchorDragBoundFunc"),b.F.addGetterSetter(rt,"shouldOverdrawWholeArea",!1),b.F.addGetterSetter(rt,"useSingleNodeRotation",!0),b.F.backCompat(rt,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});var nt=function(t){function e(){return t.apply(this,arguments)||this}(0,l.Z)(e,t);var i=e.prototype;return i._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.radius(),0,r.So.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)},i.getWidth=function(){return 2*this.radius()},i.getHeight=function(){return 2*this.radius()},i.setWidth=function(t){this.radius(t/2)},i.setHeight=function(t){this.radius(t/2)},e}(f.b);function st(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}nt.prototype.className="Wedge",nt.prototype._centroid=!0,nt.prototype._attrsAffectingSize=["radius"],(0,r.DA)(nt),b.F.addGetterSetter(nt,"radius",0,(0,_.Kg)()),b.F.addGetterSetter(nt,"angle",0,(0,_.Kg)()),b.F.addGetterSetter(nt,"clockwise",!1),b.F.backCompat(nt,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var at=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],ot=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];b.F.addGetterSetter(s.N,"blurRadius",0,(0,_.Kg)(),b.F.afterSetFilter);b.F.addGetterSetter(s.N,"brightness",0,(0,_.Kg)(),b.F.afterSetFilter);b.F.addGetterSetter(s.N,"contrast",0,(0,_.Kg)(),b.F.afterSetFilter);function ht(t,e,i,r,n){var s=i-e,a=n-r;return 0===s?r+a/2:0===a?r:a*((t-e)/s)+r}b.F.addGetterSetter(s.N,"embossStrength",.5,(0,_.Kg)(),b.F.afterSetFilter),b.F.addGetterSetter(s.N,"embossWhiteLevel",.5,(0,_.Kg)(),b.F.afterSetFilter),b.F.addGetterSetter(s.N,"embossDirection","top-left",null,b.F.afterSetFilter),b.F.addGetterSetter(s.N,"embossBlend",!1,null,b.F.afterSetFilter);b.F.addGetterSetter(s.N,"enhance",0,(0,_.Kg)(),b.F.afterSetFilter);b.F.addGetterSetter(s.N,"hue",0,(0,_.Kg)(),b.F.afterSetFilter),b.F.addGetterSetter(s.N,"saturation",0,(0,_.Kg)(),b.F.afterSetFilter),b.F.addGetterSetter(s.N,"luminance",0,(0,_.Kg)(),b.F.afterSetFilter);b.F.addGetterSetter(s.N,"hue",0,(0,_.Kg)(),b.F.afterSetFilter),b.F.addGetterSetter(s.N,"saturation",0,(0,_.Kg)(),b.F.afterSetFilter),b.F.addGetterSetter(s.N,"value",0,(0,_.Kg)(),b.F.afterSetFilter);function lt(t,e,i){var r=4*(i*t.width+e),n=[];return n.push(t.data[r++],t.data[r++],t.data[r++],t.data[r++]),n}function ct(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}b.F.addGetterSetter(s.N,"kaleidoscopePower",2,(0,_.Kg)(),b.F.afterSetFilter),b.F.addGetterSetter(s.N,"kaleidoscopeAngle",0,(0,_.Kg)(),b.F.afterSetFilter);b.F.addGetterSetter(s.N,"threshold",0,(0,_.Kg)(),b.F.afterSetFilter);b.F.addGetterSetter(s.N,"noise",.2,(0,_.Kg)(),b.F.afterSetFilter);b.F.addGetterSetter(s.N,"pixelSize",8,(0,_.Kg)(),b.F.afterSetFilter);b.F.addGetterSetter(s.N,"levels",.5,(0,_.Kg)(),b.F.afterSetFilter);b.F.addGetterSetter(s.N,"red",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),b.F.addGetterSetter(s.N,"green",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),b.F.addGetterSetter(s.N,"blue",0,_.xj,b.F.afterSetFilter);b.F.addGetterSetter(s.N,"red",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),b.F.addGetterSetter(s.N,"green",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),b.F.addGetterSetter(s.N,"blue",0,_.xj,b.F.afterSetFilter),b.F.addGetterSetter(s.N,"alpha",1,(function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t}));b.F.addGetterSetter(s.N,"threshold",.5,(0,_.Kg)(),b.F.afterSetFilter);var dt=v.Util._assign(v,{Arc:x,Arrow:w,Circle:C,Ellipse:E,Image:k.E,Label:R,Tag:G,Line:S.x,Path:P.y,Rect:L.U,RegularPolygon:j,Ring:B,Sprite:O,Star:V,Text:z.x,TextPath:q,Transformer:rt,Wedge:nt,Filters:{Blur:function(t){var e=Math.round(this.blurRadius());e>0&&function(t,e){var i,r,n,s,a,o,h,l,c,d,p,f,u,m,g,y,v,b,_,x,S,P,w,C,E=t.data,k=t.width,A=t.height,T=e+e+1,F=k-1,M=A-1,D=e+1,I=D*(D+1)/2,R=new st,G=null,L=R,j=null,N=null,B=at[e],O=ot[e];for(n=1;n<T;n++)L=L.next=new st,n===D&&(G=L);for(L.next=R,h=o=0,r=0;r<A;r++){for(y=v=b=_=l=c=d=p=0,f=D*(x=E[o]),u=D*(S=E[o+1]),m=D*(P=E[o+2]),g=D*(w=E[o+3]),l+=I*x,c+=I*S,d+=I*P,p+=I*w,L=R,n=0;n<D;n++)L.r=x,L.g=S,L.b=P,L.a=w,L=L.next;for(n=1;n<D;n++)s=o+((F<n?F:n)<<2),l+=(L.r=x=E[s])*(C=D-n),c+=(L.g=S=E[s+1])*C,d+=(L.b=P=E[s+2])*C,p+=(L.a=w=E[s+3])*C,y+=x,v+=S,b+=P,_+=w,L=L.next;for(j=R,N=G,i=0;i<k;i++)E[o+3]=w=p*B>>O,0!==w?(w=255/w,E[o]=(l*B>>O)*w,E[o+1]=(c*B>>O)*w,E[o+2]=(d*B>>O)*w):E[o]=E[o+1]=E[o+2]=0,l-=f,c-=u,d-=m,p-=g,f-=j.r,u-=j.g,m-=j.b,g-=j.a,s=h+((s=i+e+1)<F?s:F)<<2,l+=y+=j.r=E[s],c+=v+=j.g=E[s+1],d+=b+=j.b=E[s+2],p+=_+=j.a=E[s+3],j=j.next,f+=x=N.r,u+=S=N.g,m+=P=N.b,g+=w=N.a,y-=x,v-=S,b-=P,_-=w,N=N.next,o+=4;h+=k}for(i=0;i<k;i++){for(v=b=_=y=c=d=p=l=0,f=D*(x=E[o=i<<2]),u=D*(S=E[o+1]),m=D*(P=E[o+2]),g=D*(w=E[o+3]),l+=I*x,c+=I*S,d+=I*P,p+=I*w,L=R,n=0;n<D;n++)L.r=x,L.g=S,L.b=P,L.a=w,L=L.next;for(a=k,n=1;n<=e;n++)o=a+i<<2,l+=(L.r=x=E[o])*(C=D-n),c+=(L.g=S=E[o+1])*C,d+=(L.b=P=E[o+2])*C,p+=(L.a=w=E[o+3])*C,y+=x,v+=S,b+=P,_+=w,L=L.next,n<M&&(a+=k);for(o=i,j=R,N=G,r=0;r<A;r++)E[3+(s=o<<2)]=w=p*B>>O,w>0?(w=255/w,E[s]=(l*B>>O)*w,E[s+1]=(c*B>>O)*w,E[s+2]=(d*B>>O)*w):E[s]=E[s+1]=E[s+2]=0,l-=f,c-=u,d-=m,p-=g,f-=j.r,u-=j.g,m-=j.b,g-=j.a,s=i+((s=r+D)<M?s:M)*k<<2,l+=y+=j.r=E[s],c+=v+=j.g=E[s+1],d+=b+=j.b=E[s+2],p+=_+=j.a=E[s+3],j=j.next,f+=x=N.r,u+=S=N.g,m+=P=N.b,g+=w=N.a,y-=x,v-=S,b-=P,_-=w,N=N.next,o+=k}}(t,e)},Brighten:function(t){var e,i=255*this.brightness(),r=t.data,n=r.length;for(e=0;e<n;e+=4)r[e]+=i,r[e+1]+=i,r[e+2]+=i},Contrast:function(t){var e,i=Math.pow((this.contrast()+100)/100,2),r=t.data,n=r.length,s=150,a=150,o=150;for(e=0;e<n;e+=4)s=r[e],a=r[e+1],o=r[e+2],s/=255,s-=.5,s*=i,s+=.5,a/=255,a-=.5,a*=i,a+=.5,o/=255,o-=.5,o*=i,o+=.5,s=(s*=255)<0?0:s>255?255:s,a=(a*=255)<0?0:a>255?255:a,o=(o*=255)<0?0:o>255?255:o,r[e]=s,r[e+1]=a,r[e+2]=o},Emboss:function(t){var e=10*this.embossStrength(),i=255*this.embossWhiteLevel(),r=this.embossDirection(),s=this.embossBlend(),a=0,o=0,h=t.data,l=t.width,c=t.height,d=4*l,p=c;switch(r){case"top-left":a=-1,o=-1;break;case"top":a=-1,o=0;break;case"top-right":a=-1,o=1;break;case"right":a=0,o=1;break;case"bottom-right":a=1,o=1;break;case"bottom":a=1,o=0;break;case"bottom-left":a=1,o=-1;break;case"left":a=0,o=-1;break;default:n.Z.error("Unknown emboss direction: "+r)}do{var f=(p-1)*d,u=a;p+u<1&&(u=0),p+u>c&&(u=0);var m=(p-1+u)*l*4,g=l;do{var y=f+4*(g-1),v=o;g+v<1&&(v=0),g+v>l&&(v=0);var b=m+4*(g-1+v),_=h[y]-h[b],x=h[y+1]-h[b+1],S=h[y+2]-h[b+2],P=_,w=P>0?P:-P;if((x>0?x:-x)>w&&(P=x),(S>0?S:-S)>w&&(P=S),P*=e,s){var C=h[y]+P,E=h[y+1]+P,k=h[y+2]+P;h[y]=C>255?255:C<0?0:C,h[y+1]=E>255?255:E<0?0:E,h[y+2]=k>255?255:k<0?0:k}else{var A=i-P;A<0?A=0:A>255&&(A=255),h[y]=h[y+1]=h[y+2]=A}}while(--g)}while(--p)},Enhance:function(t){var e,i,r,n,s=t.data,a=s.length,o=s[0],h=o,l=s[1],c=l,d=s[2],p=d,f=this.enhance();if(0!==f){for(n=0;n<a;n+=4)(e=s[n+0])<o?o=e:e>h&&(h=e),(i=s[n+1])<l?l=i:i>c&&(c=i),(r=s[n+2])<d?d=r:r>p&&(p=r);var u,m,g,y,v,b,_,x,S;for(h===o&&(h=255,o=0),c===l&&(c=255,l=0),p===d&&(p=255,d=0),f>0?(m=h+f*(255-h),g=o-f*(o-0),v=c+f*(255-c),b=l-f*(l-0),x=p+f*(255-p),S=d-f*(d-0)):(m=h+f*(h-(u=.5*(h+o))),g=o+f*(o-u),v=c+f*(c-(y=.5*(c+l))),b=l+f*(l-y),x=p+f*(p-(_=.5*(p+d))),S=d+f*(d-_)),n=0;n<a;n+=4)s[n+0]=ht(s[n+0],o,h,g,m),s[n+1]=ht(s[n+1],l,c,b,v),s[n+2]=ht(s[n+2],d,p,S,x)}},Grayscale:function(t){var e,i,r=t.data,n=r.length;for(e=0;e<n;e+=4)i=.34*r[e]+.5*r[e+1]+.16*r[e+2],r[e]=i,r[e+1]=i,r[e+2]=i},HSL:function(t){var e,i,r,n,s,a=t.data,o=a.length,h=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c=127*this.luminance(),d=1*h*Math.cos(l*Math.PI/180),p=1*h*Math.sin(l*Math.PI/180),f=.299+.701*d+.167*p,u=.587-.587*d+.33*p,m=.114-.114*d-.497*p,g=.299-.299*d-.328*p,y=.587+.413*d+.035*p,v=.114-.114*d+.293*p,b=.299-.3*d+1.25*p,_=.587-.586*d-1.05*p,x=.114+.886*d-.2*p;for(e=0;e<o;e+=4)i=a[e+0],r=a[e+1],n=a[e+2],s=a[e+3],a[e+0]=f*i+u*r+m*n+c,a[e+1]=g*i+y*r+v*n+c,a[e+2]=b*i+_*r+x*n+c,a[e+3]=s},HSV:function(t){var e,i,r,n,s,a=t.data,o=a.length,h=Math.pow(2,this.value()),l=Math.pow(2,this.saturation()),c=Math.abs(this.hue()+360)%360,d=h*l*Math.cos(c*Math.PI/180),p=h*l*Math.sin(c*Math.PI/180),f=.299*h+.701*d+.167*p,u=.587*h-.587*d+.33*p,m=.114*h-.114*d-.497*p,g=.299*h-.299*d-.328*p,y=.587*h+.413*d+.035*p,v=.114*h-.114*d+.293*p,b=.299*h-.3*d+1.25*p,_=.587*h-.586*d-1.05*p,x=.114*h+.886*d-.2*p;for(e=0;e<o;e+=4)i=a[e+0],r=a[e+1],n=a[e+2],s=a[e+3],a[e+0]=f*i+u*r+m*n,a[e+1]=g*i+y*r+v*n,a[e+2]=b*i+_*r+x*n,a[e+3]=s},Invert:function(t){var e,i=t.data,r=i.length;for(e=0;e<r;e+=4)i[e]=255-i[e],i[e+1]=255-i[e+1],i[e+2]=255-i[e+2]},Kaleidoscope:function(t){var e,i,r,s,a,o,h,l,c,d=t.width,p=t.height,f=Math.round(this.kaleidoscopePower()),u=Math.round(this.kaleidoscopeAngle()),m=Math.floor(d*(u%360)/360);if(!(f<1)){var g=n.Z.createCanvasElement();g.width=d,g.height=p;var y=g.getContext("2d").getImageData(0,0,d,p);!function(t,e,i){var r,n,s,a,o=t.data,h=e.data,l=t.width,c=t.height,d=i.polarCenterX||l/2,p=i.polarCenterY||c/2,f=0,u=0,m=0,g=0,y=Math.sqrt(d*d+p*p);n=l-d,s=c-p,y=(a=Math.sqrt(n*n+s*s))>y?a:y;var v,b,_,x,S=c,P=l,w=360/P*Math.PI/180;for(b=0;b<P;b+=1)for(_=Math.sin(b*w),x=Math.cos(b*w),v=0;v<S;v+=1)n=Math.floor(d+y*v/S*x),f=o[0+(r=4*((s=Math.floor(p+y*v/S*_))*l+n))],u=o[r+1],m=o[r+2],g=o[r+3],h[0+(r=4*(b+v*l))]=f,h[r+1]=u,h[r+2]=m,h[r+3]=g}(t,y,{polarCenterX:d/2,polarCenterY:p/2});for(var v=d/Math.pow(2,f);v<=8;)v*=2,f-=1;var b=v=Math.ceil(v),_=0,x=b,S=1;for(m+v>d&&(_=b,x=0,S=-1),i=0;i<p;i+=1)for(e=_;e!==x;e+=S)l=4*(d*i+Math.round(e+m)%d),s=y.data[l+0],a=y.data[l+1],o=y.data[l+2],h=y.data[l+3],c=4*(d*i+e),y.data[c+0]=s,y.data[c+1]=a,y.data[c+2]=o,y.data[c+3]=h;for(i=0;i<p;i+=1)for(b=Math.floor(v),r=0;r<f;r+=1){for(e=0;e<b+1;e+=1)l=4*(d*i+e),s=y.data[l+0],a=y.data[l+1],o=y.data[l+2],h=y.data[l+3],c=4*(d*i+2*b-e-1),y.data[c+0]=s,y.data[c+1]=a,y.data[c+2]=o,y.data[c+3]=h;b*=2}!function(t,e,i){var r,n,s,a,o,h,l=t.data,c=e.data,d=t.width,p=t.height,f=i.polarCenterX||d/2,u=i.polarCenterY||p/2,m=0,g=0,y=0,v=0,b=Math.sqrt(f*f+u*u);n=d-f,s=p-u,b=(h=Math.sqrt(n*n+s*s))>b?h:b;var _,x,S,P=p,w=d,C=i.polarRotation||0;for(n=0;n<d;n+=1)for(s=0;s<p;s+=1)a=n-f,o=s-u,_=Math.sqrt(a*a+o*o)*P/b,x=(x=(180*Math.atan2(o,a)/Math.PI+360+C)%360)*w/360,S=Math.floor(x),m=l[0+(r=4*(Math.floor(_)*d+S))],g=l[r+1],y=l[r+2],v=l[r+3],c[0+(r=4*(s*d+n))]=m,c[r+1]=g,c[r+2]=y,c[r+3]=v}(y,t,{polarRotation:0})}},Mask:function(t){var e=function(t,e){var i=lt(t,0,0),r=lt(t,t.width-1,0),n=lt(t,0,t.height-1),s=lt(t,t.width-1,t.height-1),a=e||10;if(ct(i,r)<a&&ct(r,s)<a&&ct(s,n)<a&&ct(n,i)<a){for(var o=function(t){for(var e=[0,0,0],i=0;i<t.length;i++)e[0]+=t[i][0],e[1]+=t[i][1],e[2]+=t[i][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}([r,i,s,n]),h=[],l=0;l<t.width*t.height;l++){var c=ct(o,[t.data[4*l],t.data[4*l+1],t.data[4*l+2]]);h[l]=c<a?0:255}return h}}(t,this.threshold());return e&&function(t,e){for(var i=0;i<t.width*t.height;i++)t.data[4*i+3]=e[i]}(t,e=function(t,e,i){for(var r=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],n=Math.round(Math.sqrt(r.length)),s=Math.floor(n/2),a=[],o=0;o<i;o++)for(var h=0;h<e;h++){for(var l=o*e+h,c=0,d=0;d<n;d++)for(var p=0;p<n;p++){var f=o+d-s,u=h+p-s;if(f>=0&&f<i&&u>=0&&u<e){var m=r[d*n+p];c+=t[f*e+u]*m}}a[l]=c}return a}(e=function(t,e,i){for(var r=[1,1,1,1,1,1,1,1,1],n=Math.round(Math.sqrt(r.length)),s=Math.floor(n/2),a=[],o=0;o<i;o++)for(var h=0;h<e;h++){for(var l=o*e+h,c=0,d=0;d<n;d++)for(var p=0;p<n;p++){var f=o+d-s,u=h+p-s;if(f>=0&&f<i&&u>=0&&u<e){var m=r[d*n+p];c+=t[f*e+u]*m}}a[l]=c>=1020?255:0}return a}(e=function(t,e,i){for(var r=[1,1,1,1,0,1,1,1,1],n=Math.round(Math.sqrt(r.length)),s=Math.floor(n/2),a=[],o=0;o<i;o++)for(var h=0;h<e;h++){for(var l=o*e+h,c=0,d=0;d<n;d++)for(var p=0;p<n;p++){var f=o+d-s,u=h+p-s;if(f>=0&&f<i&&u>=0&&u<e){var m=r[d*n+p];c+=t[f*e+u]*m}}a[l]=2040===c?255:0}return a}(e,t.width,t.height),t.width,t.height),t.width,t.height)),t},Noise:function(t){var e,i=255*this.noise(),r=t.data,n=r.length,s=i/2;for(e=0;e<n;e+=4)r[e+0]+=s-2*s*Math.random(),r[e+1]+=s-2*s*Math.random(),r[e+2]+=s-2*s*Math.random()},Pixelate:function(t){var e,i,r,s,a,o,h,l,c,d,p,f,u,m,g=Math.ceil(this.pixelSize()),y=t.width,v=t.height,b=Math.ceil(y/g),_=Math.ceil(v/g),x=t.data;if(g<=0)n.Z.error("pixelSize value can not be <= 0");else for(f=0;f<b;f+=1)for(u=0;u<_;u+=1){for(s=0,a=0,o=0,h=0,c=(l=f*g)+g,p=(d=u*g)+g,m=0,e=l;e<c;e+=1)if(!(e>=y))for(i=d;i<p;i+=1)i>=v||(s+=x[(r=4*(y*i+e))+0],a+=x[r+1],o+=x[r+2],h+=x[r+3],m+=1);for(s/=m,a/=m,o/=m,h/=m,e=l;e<c;e+=1)if(!(e>=y))for(i=d;i<p;i+=1)i>=v||(x[(r=4*(y*i+e))+0]=s,x[r+1]=a,x[r+2]=o,x[r+3]=h)}},Posterize:function(t){var e,i=Math.round(254*this.levels())+1,r=t.data,n=r.length,s=255/i;for(e=0;e<n;e+=1)r[e]=Math.floor(r[e]/s)*s},RGB:function(t){var e,i,r=t.data,n=r.length,s=this.red(),a=this.green(),o=this.blue();for(e=0;e<n;e+=4)i=(.34*r[e]+.5*r[e+1]+.16*r[e+2])/255,r[e]=i*s,r[e+1]=i*a,r[e+2]=i*o,r[e+3]=r[e+3]},RGBA:function(t){var e,i,r=t.data,n=r.length,s=this.red(),a=this.green(),o=this.blue(),h=this.alpha();for(e=0;e<n;e+=4)i=1-h,r[e]=s*h+r[e]*i,r[e+1]=a*h+r[e+1]*i,r[e+2]=o*h+r[e+2]*i},Sepia:function(t){var e,i,r,n,s=t.data,a=s.length;for(e=0;e<a;e+=4)i=s[e+0],r=s[e+1],n=s[e+2],s[e+0]=Math.min(255,.393*i+.769*r+.189*n),s[e+1]=Math.min(255,.349*i+.686*r+.168*n),s[e+2]=Math.min(255,.272*i+.534*r+.131*n)},Solarize:function(t){var e=t.data,i=t.width,r=4*i,n=t.height;do{var s=(n-1)*r,a=i;do{var o=s+4*(a-1),h=e[o],l=e[o+1],c=e[o+2];h>127&&(h=255-h),l>127&&(l=255-l),c>127&&(c=255-c),e[o]=h,e[o+1]=l,e[o+2]=c}while(--a)}while(--n)},Threshold:function(t){var e,i=255*this.threshold(),r=t.data,n=r.length;for(e=0;e<n;e+=1)r[e]=r[e]<i?0:255}}})},"../node_modules/konva/lib/shapes/Image.js":function(t,e,i){"use strict";i.d(e,{E:function(){return l}});var r=i("../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js"),n=i("../node_modules/konva/lib/Util.js"),s=i("../node_modules/konva/lib/Factory.js"),a=i("../node_modules/konva/lib/Shape.js"),o=i("../node_modules/konva/lib/Validators.js"),h=i("../node_modules/konva/lib/Global.js"),l=function(t){function e(e){var i;return(i=t.call(this,e)||this).on("imageChange.konva",(function(){i._setImageLoad()})),i._setImageLoad(),i}(0,r.Z)(e,t);var i=e.prototype;return i._setImageLoad=function(){var t=this,e=this.image();e&&e.complete||e&&4===e.readyState||e&&e.addEventListener&&e.addEventListener("load",(function(){t._requestDraw()}))},i._useBufferCanvas=function(){return t.prototype._useBufferCanvas.call(this,!0)},i._sceneFunc=function(t){var e,i=this.getWidth(),r=this.getHeight(),n=this.attrs.image;if(n){var s=this.attrs.cropWidth,a=this.attrs.cropHeight;e=s&&a?[n,this.cropX(),this.cropY(),s,a,0,0,i,r]:[n,0,0,i,r]}(this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,i,r),t.closePath(),t.fillStrokeShape(this)),n&&t.drawImage.apply(t,e)},i._hitFunc=function(t){var e=this.width(),i=this.height();t.beginPath(),t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)},i.getWidth=function(){var t,e;return null!==(t=this.attrs.width)&&void 0!==t?t:null===(e=this.image())||void 0===e?void 0:e.width},i.getHeight=function(){var t,e;return null!==(t=this.attrs.height)&&void 0!==t?t:null===(e=this.image())||void 0===e?void 0:e.height},e.fromURL=function(t,i){var r=n.Z.createImageElement();r.onload=function(){var t=new e({image:r});i(t)},r.crossOrigin="Anonymous",r.src=t},e}(a.b);l.prototype.className="Image",(0,h.DA)(l),s.F.addGetterSetter(l,"image"),s.F.addComponentsGetterSetter(l,"crop",["x","y","width","height"]),s.F.addGetterSetter(l,"cropX",0,(0,o.Kg)()),s.F.addGetterSetter(l,"cropY",0,(0,o.Kg)()),s.F.addGetterSetter(l,"cropWidth",0,(0,o.Kg)()),s.F.addGetterSetter(l,"cropHeight",0,(0,o.Kg)())},"../node_modules/konva/lib/shapes/Line.js":function(t,e,i){"use strict";i.d(e,{x:function(){return d}});var r=i("../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),n=i("../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js"),s=(i("../node_modules/core-js/modules/es.array.concat.js"),i("../node_modules/konva/lib/Factory.js")),a=i("../node_modules/konva/lib/Shape.js"),o=i("../node_modules/konva/lib/Validators.js"),h=i("../node_modules/konva/lib/Global.js");function l(t,e,i,r,n,s,a){var o=Math.sqrt(Math.pow(i-t,2)+Math.pow(r-e,2)),h=Math.sqrt(Math.pow(n-i,2)+Math.pow(s-r,2)),l=a*o/(o+h),c=a*h/(o+h);return[i-l*(n-t),r-l*(s-e),i+c*(n-t),r+c*(s-e)]}function c(t,e){var i,r,n=t.length,s=[];for(i=2;i<n-2;i+=2)r=l(t[i-2],t[i-1],t[i],t[i+1],t[i+2],t[i+3],e),isNaN(r[0])||(s.push(r[0]),s.push(r[1]),s.push(t[i]),s.push(t[i+1]),s.push(r[2]),s.push(r[3]));return s}var d=function(t){function e(e){var i;return(i=t.call(this,e)||this).on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",(function(){this._clearCache("tensionPoints")})),i}(0,n.Z)(e,t);var i=e.prototype;return i._sceneFunc=function(t){var e,i,r,n=this.points(),s=n.length,a=this.tension(),o=this.closed(),h=this.bezier();if(s){if(t.beginPath(),t.moveTo(n[0],n[1]),0!==a&&s>4){for(i=(e=this.getTensionPoints()).length,r=o?0:4,o||t.quadraticCurveTo(e[0],e[1],e[2],e[3]);r<i-2;)t.bezierCurveTo(e[r++],e[r++],e[r++],e[r++],e[r++],e[r++]);o||t.quadraticCurveTo(e[i-2],e[i-1],n[s-2],n[s-1])}else if(h)for(r=2;r<s;)t.bezierCurveTo(n[r++],n[r++],n[r++],n[r++],n[r++],n[r++]);else for(r=2;r<s;r+=2)t.lineTo(n[r],n[r+1]);o?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}},i.getTensionPoints=function(){return this._getCache("tensionPoints",this._getTensionPoints)},i._getTensionPoints=function(){return this.closed()?this._getTensionPointsClosed():c(this.points(),this.tension())},i._getTensionPointsClosed=function(){var t=this.points(),e=t.length,i=this.tension(),r=l(t[e-2],t[e-1],t[0],t[1],t[2],t[3],i),n=l(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],i),s=c(t,i);return[r[2],r[3]].concat(s).concat([n[0],n[1],t[e-2],t[e-1],n[2],n[3],r[0],r[1],t[0],t[1]])},i.getWidth=function(){return this.getSelfRect().width},i.getHeight=function(){return this.getSelfRect().height},i.getSelfRect=function(){var t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};for(var e,i,n=(t=0!==this.tension()?[t[0],t[1]].concat((0,r.Z)(this._getTensionPoints()),[t[t.length-2],t[t.length-1]]):this.points())[0],s=t[0],a=t[1],o=t[1],h=0;h<t.length/2;h++)e=t[2*h],i=t[2*h+1],n=Math.min(n,e),s=Math.max(s,e),a=Math.min(a,i),o=Math.max(o,i);return{x:n,y:a,width:s-n,height:o-a}},e}(a.b);d.prototype.className="Line",d.prototype._attrsAffectingSize=["points","bezier","tension"],(0,h.DA)(d),s.F.addGetterSetter(d,"closed",!1),s.F.addGetterSetter(d,"bezier",!1),s.F.addGetterSetter(d,"tension",0,(0,o.Kg)()),s.F.addGetterSetter(d,"points",[],(0,o.q8)())},"../node_modules/konva/lib/shapes/Path.js":function(t,e,i){"use strict";i.d(e,{y:function(){return o}});var r=i("../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js"),n=(i("../node_modules/core-js/modules/web.dom-collections.for-each.js"),i("../node_modules/core-js/modules/es.array.concat.js"),i("../node_modules/core-js/modules/es.array.slice.js"),i("../node_modules/core-js/modules/es.regexp.exec.js"),i("../node_modules/core-js/modules/es.string.replace.js"),i("../node_modules/core-js/modules/es.regexp.constructor.js"),i("../node_modules/core-js/modules/es.regexp.to-string.js"),i("../node_modules/core-js/modules/es.string.split.js"),i("../node_modules/konva/lib/Factory.js")),s=i("../node_modules/konva/lib/Shape.js"),a=i("../node_modules/konva/lib/Global.js"),o=function(t){function e(i){var r;(r=t.call(this,i)||this).dataArray=[],r.pathLength=0,r.dataArray=e.parsePathData(r.data()),r.pathLength=0;for(var n=0;n<r.dataArray.length;++n)r.pathLength+=r.dataArray[n].pathLength;return r.on("dataChange.konva",(function(){this.dataArray=e.parsePathData(this.data()),this.pathLength=0;for(var t=0;t<this.dataArray.length;++t)this.pathLength+=this.dataArray[t].pathLength})),r}(0,r.Z)(e,t);var i=e.prototype;return i._sceneFunc=function(t){var e=this.dataArray;t.beginPath();for(var i=!1,r=0;r<e.length;r++){var n=e[r].command,s=e[r].points;switch(n){case"L":t.lineTo(s[0],s[1]);break;case"M":t.moveTo(s[0],s[1]);break;case"C":t.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case"Q":t.quadraticCurveTo(s[0],s[1],s[2],s[3]);break;case"A":var a=s[0],o=s[1],h=s[2],l=s[3],c=s[4],d=s[5],p=s[6],f=s[7],u=h>l?h:l,m=h>l?1:h/l,g=h>l?l/h:1;t.translate(a,o),t.rotate(p),t.scale(m,g),t.arc(0,0,u,c,c+d,1-f),t.scale(1/m,1/g),t.rotate(-p),t.translate(-a,-o);break;case"z":i=!0,t.closePath()}}i||this.hasFill()?t.fillStrokeShape(this):t.strokeShape(this)},i.getSelfRect=function(){var t=[];this.dataArray.forEach((function(i){if("A"===i.command){var r=i.points[4],n=i.points[5],s=i.points[4]+n,a=Math.PI/180;if(Math.abs(r-s)<a&&(a=Math.abs(r-s)),n<0)for(var o=r-a;o>s;o-=a){var h=e.getPointOnEllipticalArc(i.points[0],i.points[1],i.points[2],i.points[3],o,0);t.push(h.x,h.y)}else for(var l=r+a;l<s;l+=a){var c=e.getPointOnEllipticalArc(i.points[0],i.points[1],i.points[2],i.points[3],l,0);t.push(c.x,c.y)}}else if("C"===i.command)for(var d=0;d<=1;d+=.01){var p=e.getPointOnCubicBezier(d,i.start.x,i.start.y,i.points[0],i.points[1],i.points[2],i.points[3],i.points[4],i.points[5]);t.push(p.x,p.y)}else t=t.concat(i.points)}));for(var i,r,n=t[0],s=t[0],a=t[1],o=t[1],h=0;h<t.length/2;h++)i=t[2*h],r=t[2*h+1],isNaN(i)||(n=Math.min(n,i),s=Math.max(s,i)),isNaN(r)||(a=Math.min(a,r),o=Math.max(o,r));return{x:Math.round(n),y:Math.round(a),width:Math.round(s-n),height:Math.round(o-a)}},i.getLength=function(){return this.pathLength},i.getPointAtLength=function(t){var i,r=0,n=this.dataArray.length;if(!n)return null;for(;r<n&&t>this.dataArray[r].pathLength;)t-=this.dataArray[r].pathLength,++r;if(r===n)return{x:(i=this.dataArray[r-1].points.slice(-2))[0],y:i[1]};if(t<.01)return{x:(i=this.dataArray[r].points.slice(0,2))[0],y:i[1]};var s=this.dataArray[r],a=s.points;switch(s.command){case"L":return e.getPointOnLine(t,s.start.x,s.start.y,a[0],a[1]);case"C":return e.getPointOnCubicBezier(t/s.pathLength,s.start.x,s.start.y,a[0],a[1],a[2],a[3],a[4],a[5]);case"Q":return e.getPointOnQuadraticBezier(t/s.pathLength,s.start.x,s.start.y,a[0],a[1],a[2],a[3]);case"A":var o=a[0],h=a[1],l=a[2],c=a[3],d=a[4],p=a[5],f=a[6];return d+=p*t/s.pathLength,e.getPointOnEllipticalArc(o,h,l,c,d,f)}return null},e.getLineLength=function(t,e,i,r){return Math.sqrt((i-t)*(i-t)+(r-e)*(r-e))},e.getPointOnLine=function(t,e,i,r,n,s,a){void 0===s&&(s=e),void 0===a&&(a=i);var o=(n-i)/(r-e+1e-8),h=Math.sqrt(t*t/(1+o*o));r<e&&(h*=-1);var l,c=o*h;if(r===e)l={x:s,y:a+c};else if((a-i)/(s-e+1e-8)===o)l={x:s+h,y:a+c};else{var d,p,f=this.getLineLength(e,i,r,n),u=(s-e)*(r-e)+(a-i)*(n-i);d=e+(u/=f*f)*(r-e),p=i+u*(n-i);var m=this.getLineLength(s,a,d,p),g=Math.sqrt(t*t-m*m);h=Math.sqrt(g*g/(1+o*o)),r<e&&(h*=-1),l={x:d+h,y:p+(c=o*h)}}return l},e.getPointOnCubicBezier=function(t,e,i,r,n,s,a,o,h){function l(t){return t*t*t}function c(t){return 3*t*t*(1-t)}function d(t){return 3*t*(1-t)*(1-t)}function p(t){return(1-t)*(1-t)*(1-t)}return{x:o*l(t)+s*c(t)+r*d(t)+e*p(t),y:h*l(t)+a*c(t)+n*d(t)+i*p(t)}},e.getPointOnQuadraticBezier=function(t,e,i,r,n,s,a){function o(t){return t*t}function h(t){return 2*t*(1-t)}function l(t){return(1-t)*(1-t)}return{x:s*o(t)+r*h(t)+e*l(t),y:a*o(t)+n*h(t)+i*l(t)}},e.getPointOnEllipticalArc=function(t,e,i,r,n,s){var a=Math.cos(s),o=Math.sin(s),h=i*Math.cos(n),l=r*Math.sin(n);return{x:t+(h*a-l*o),y:e+(h*o+l*a)}},e.parsePathData=function(t){if(!t)return[];var e=t,i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(var r=0;r<i.length;r++)e=e.replace(new RegExp(i[r],"g"),"|"+i[r]);var n,s=e.split("|"),a=[],o=[],h=0,l=0,c=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(r=1;r<s.length;r++){var d=s[r],p=d.charAt(0);for(d=d.slice(1),o.length=0;n=c.exec(d);)o.push(n[0]);for(var f=[],u=0,m=o.length;u<m;u++)if("00"!==o[u]){var g=parseFloat(o[u]);isNaN(g)?f.push(0):f.push(g)}else f.push(0,0);for(;f.length>0&&!isNaN(f[0]);){var y,v,b,_,x,S,P,w,C,E,k=null,A=[],T=h,F=l;switch(p){case"l":h+=f.shift(),l+=f.shift(),k="L",A.push(h,l);break;case"L":h=f.shift(),l=f.shift(),A.push(h,l);break;case"m":var M=f.shift(),D=f.shift();if(h+=M,l+=D,k="M",a.length>2&&"z"===a[a.length-1].command)for(var I=a.length-2;I>=0;I--)if("M"===a[I].command){h=a[I].points[0]+M,l=a[I].points[1]+D;break}A.push(h,l),p="l";break;case"M":h=f.shift(),l=f.shift(),k="M",A.push(h,l),p="L";break;case"h":h+=f.shift(),k="L",A.push(h,l);break;case"H":h=f.shift(),k="L",A.push(h,l);break;case"v":l+=f.shift(),k="L",A.push(h,l);break;case"V":l=f.shift(),k="L",A.push(h,l);break;case"C":A.push(f.shift(),f.shift(),f.shift(),f.shift()),h=f.shift(),l=f.shift(),A.push(h,l);break;case"c":A.push(h+f.shift(),l+f.shift(),h+f.shift(),l+f.shift()),h+=f.shift(),l+=f.shift(),k="C",A.push(h,l);break;case"S":v=h,b=l,"C"===(y=a[a.length-1]).command&&(v=h+(h-y.points[2]),b=l+(l-y.points[3])),A.push(v,b,f.shift(),f.shift()),h=f.shift(),l=f.shift(),k="C",A.push(h,l);break;case"s":v=h,b=l,"C"===(y=a[a.length-1]).command&&(v=h+(h-y.points[2]),b=l+(l-y.points[3])),A.push(v,b,h+f.shift(),l+f.shift()),h+=f.shift(),l+=f.shift(),k="C",A.push(h,l);break;case"Q":A.push(f.shift(),f.shift()),h=f.shift(),l=f.shift(),A.push(h,l);break;case"q":A.push(h+f.shift(),l+f.shift()),h+=f.shift(),l+=f.shift(),k="Q",A.push(h,l);break;case"T":v=h,b=l,"Q"===(y=a[a.length-1]).command&&(v=h+(h-y.points[0]),b=l+(l-y.points[1])),h=f.shift(),l=f.shift(),k="Q",A.push(v,b,h,l);break;case"t":v=h,b=l,"Q"===(y=a[a.length-1]).command&&(v=h+(h-y.points[0]),b=l+(l-y.points[1])),h+=f.shift(),l+=f.shift(),k="Q",A.push(v,b,h,l);break;case"A":_=f.shift(),x=f.shift(),S=f.shift(),P=f.shift(),w=f.shift(),C=h,E=l,h=f.shift(),l=f.shift(),k="A",A=this.convertEndpointToCenterParameterization(C,E,h,l,P,w,_,x,S);break;case"a":_=f.shift(),x=f.shift(),S=f.shift(),P=f.shift(),w=f.shift(),C=h,E=l,h+=f.shift(),l+=f.shift(),k="A",A=this.convertEndpointToCenterParameterization(C,E,h,l,P,w,_,x,S)}a.push({command:k||p,points:A,start:{x:T,y:F},pathLength:this.calcLength(T,F,k||p,A)})}"z"!==p&&"Z"!==p||a.push({command:"z",points:[],start:void 0,pathLength:0})}return a},e.calcLength=function(t,i,r,n){var s,a,o,h,l=e;switch(r){case"L":return l.getLineLength(t,i,n[0],n[1]);case"C":for(s=0,a=l.getPointOnCubicBezier(0,t,i,n[0],n[1],n[2],n[3],n[4],n[5]),h=.01;h<=1;h+=.01)o=l.getPointOnCubicBezier(h,t,i,n[0],n[1],n[2],n[3],n[4],n[5]),s+=l.getLineLength(a.x,a.y,o.x,o.y),a=o;return s;case"Q":for(s=0,a=l.getPointOnQuadraticBezier(0,t,i,n[0],n[1],n[2],n[3]),h=.01;h<=1;h+=.01)o=l.getPointOnQuadraticBezier(h,t,i,n[0],n[1],n[2],n[3]),s+=l.getLineLength(a.x,a.y,o.x,o.y),a=o;return s;case"A":s=0;var c=n[4],d=n[5],p=n[4]+d,f=Math.PI/180;if(Math.abs(c-p)<f&&(f=Math.abs(c-p)),a=l.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],c,0),d<0)for(h=c-f;h>p;h-=f)o=l.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],h,0),s+=l.getLineLength(a.x,a.y,o.x,o.y),a=o;else for(h=c+f;h<p;h+=f)o=l.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],h,0),s+=l.getLineLength(a.x,a.y,o.x,o.y),a=o;return o=l.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],p,0),s+=l.getLineLength(a.x,a.y,o.x,o.y)}return 0},e.convertEndpointToCenterParameterization=function(t,e,i,r,n,s,a,o,h){var l=h*(Math.PI/180),c=Math.cos(l)*(t-i)/2+Math.sin(l)*(e-r)/2,d=-1*Math.sin(l)*(t-i)/2+Math.cos(l)*(e-r)/2,p=c*c/(a*a)+d*d/(o*o);p>1&&(a*=Math.sqrt(p),o*=Math.sqrt(p));var f=Math.sqrt((a*a*(o*o)-a*a*(d*d)-o*o*(c*c))/(a*a*(d*d)+o*o*(c*c)));n===s&&(f*=-1),isNaN(f)&&(f=0);var u=f*a*d/o,m=f*-o*c/a,g=(t+i)/2+Math.cos(l)*u-Math.sin(l)*m,y=(e+r)/2+Math.sin(l)*u+Math.cos(l)*m,v=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},b=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(v(t)*v(e))},_=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(b(t,e))},x=_([1,0],[(c-u)/a,(d-m)/o]),S=[(c-u)/a,(d-m)/o],P=[(-1*c-u)/a,(-1*d-m)/o],w=_(S,P);return b(S,P)<=-1&&(w=Math.PI),b(S,P)>=1&&(w=0),0===s&&w>0&&(w-=2*Math.PI),1===s&&w<0&&(w+=2*Math.PI),[g,y,a,o,x,w,l,s]},e}(s.b);o.prototype.className="Path",o.prototype._attrsAffectingSize=["data"],(0,a.DA)(o),n.F.addGetterSetter(o,"data")},"../node_modules/konva/lib/shapes/Rect.js":function(t,e,i){"use strict";i.d(e,{U:function(){return h}});var r=i("../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js"),n=i("../node_modules/konva/lib/Factory.js"),s=i("../node_modules/konva/lib/Shape.js"),a=i("../node_modules/konva/lib/Global.js"),o=i("../node_modules/konva/lib/Validators.js"),h=function(t){function e(){return t.apply(this,arguments)||this}return(0,r.Z)(e,t),e.prototype._sceneFunc=function(t){var e=this.cornerRadius(),i=this.width(),r=this.height();if(t.beginPath(),e){var n=0,s=0,a=0,o=0;"number"===typeof e?n=s=a=o=Math.min(e,i/2,r/2):(n=Math.min(e[0]||0,i/2,r/2),s=Math.min(e[1]||0,i/2,r/2),o=Math.min(e[2]||0,i/2,r/2),a=Math.min(e[3]||0,i/2,r/2)),t.moveTo(n,0),t.lineTo(i-s,0),t.arc(i-s,s,s,3*Math.PI/2,0,!1),t.lineTo(i,r-o),t.arc(i-o,r-o,o,0,Math.PI/2,!1),t.lineTo(a,r),t.arc(a,r-a,a,Math.PI/2,Math.PI,!1),t.lineTo(0,n),t.arc(n,n,n,Math.PI,3*Math.PI/2,!1)}else t.rect(0,0,i,r);t.closePath(),t.fillStrokeShape(this)},e}(s.b);h.prototype.className="Rect",(0,a.DA)(h),n.F.addGetterSetter(h,"cornerRadius",0,(0,o.Jj)(4))},"../node_modules/konva/lib/shapes/Text.js":function(t,e,i){"use strict";i.d(e,{W:function(){return l},x:function(){return _}});var r=i("../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js"),n=(i("../node_modules/core-js/modules/es.array.from.js"),i("../node_modules/core-js/modules/es.string.iterator.js"),i("../node_modules/core-js/modules/es.array.join.js"),i("../node_modules/core-js/modules/es.array.map.js"),i("../node_modules/core-js/modules/es.regexp.exec.js"),i("../node_modules/core-js/modules/es.string.split.js"),i("../node_modules/core-js/modules/es.string.trim.js"),i("../node_modules/core-js/modules/es.array.fill.js"),i("../node_modules/core-js/modules/es.array.slice.js"),i("../node_modules/core-js/modules/es.string.trim-end.js"),i("../node_modules/core-js/modules/es.array.splice.js"),i("../node_modules/core-js/modules/es.string.trim-start.js"),i("../node_modules/konva/lib/Util.js")),s=i("../node_modules/konva/lib/Factory.js"),a=i("../node_modules/konva/lib/Shape.js"),o=i("../node_modules/konva/lib/Validators.js"),h=i("../node_modules/konva/lib/Global.js");function l(t){return Array.from(t)}var c,d="auto",p="justify",f="left",u="middle",m="normal",g=" ",y=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],v=y.length;function b(){return c||(c=n.Z.createCanvasElement().getContext("2d"))}var _=function(t){function e(e){var i;i=t.call(this,function(t){return(t=t||{}).fillLinearGradientColorStops||t.fillRadialGradientColorStops||t.fillPatternImage||(t.fill=t.fill||"black"),t}(e))||this,i._partialTextX=0,i._partialTextY=0;for(var r=0;r<v;r++)i.on(y[r]+"Change.konva",i._setTextData);return i._setTextData(),i}(0,r.Z)(e,t);var i=e.prototype;return i._sceneFunc=function(t){var e=this.textArr,i=e.length;if(this.text()){var r,n=this.padding(),s=this.fontSize(),a=this.lineHeight()*s,o=this.verticalAlign(),h=0,c=this.align(),d=this.getWidth(),m=this.letterSpacing(),g=this.fill(),y=this.textDecoration(),v=-1!==y.indexOf("underline"),b=-1!==y.indexOf("line-through"),_=0,x=(_=a/2,0),S=0;for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",u),t.setAttr("textAlign",f),o===u?h=(this.getHeight()-i*a-2*n)/2:"bottom"===o&&(h=this.getHeight()-i*a-2*n),t.translate(n,h+n),r=0;r<i;r++){x=0,S=0;var P,w,C,E=e[r],k=E.text,A=E.width,T=r!==i-1;if(t.save(),"right"===c?x+=d-A-2*n:"center"===c&&(x+=(d-A-2*n)/2),v&&(t.save(),t.beginPath(),t.moveTo(x,_+S+Math.round(s/2)),w=0===(P=k.split(" ").length-1),C=c===p&&T&&!w?d-2*n:A,t.lineTo(x+Math.round(C),_+S+Math.round(s/2)),t.lineWidth=s/15,t.strokeStyle=g,t.stroke(),t.restore()),b&&(t.save(),t.beginPath(),t.moveTo(x,_+S),w=0===(P=k.split(" ").length-1),C=c===p&&T&&!w?d-2*n:A,t.lineTo(x+Math.round(C),_+S),t.lineWidth=s/15,t.strokeStyle=g,t.stroke(),t.restore()),0!==m||c===p){P=k.split(" ").length-1;for(var F=l(k),M=0;M<F.length;M++){var D=F[M];" "===D&&r!==i-1&&c===p&&(x+=(d-2*n-A)/P),this._partialTextX=x,this._partialTextY=_+S,this._partialText=D,t.fillStrokeShape(this),x+=this.measureSize(D).width+m}}else this._partialTextX=x,this._partialTextY=_+S,this._partialText=k,t.fillStrokeShape(this);t.restore(),i>1&&(_+=a)}}},i._hitFunc=function(t){var e=this.getWidth(),i=this.getHeight();t.beginPath(),t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)},i.setText=function(t){var e=n.Z._isString(t)?t:null===t||void 0===t?"":t+"";return this._setAttr("text",e),this},i.getWidth=function(){return this.attrs.width===d||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width},i.getHeight=function(){return this.attrs.height===d||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height},i.getTextWidth=function(){return this.textWidth},i.getTextHeight=function(){return n.Z.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight},i.measureSize=function(t){var e,i=b(),r=this.fontSize();return i.save(),i.font=this._getContextFont(),e=i.measureText(t),i.restore(),{width:e.width,height:r}},i._getContextFont=function(){return this.fontStyle()+g+this.fontVariant()+g+(this.fontSize()+"px ")+this.fontFamily().split(",").map((function(t){var e=(t=t.trim()).indexOf(" ")>=0,i=t.indexOf('"')>=0||t.indexOf("'")>=0;return e&&!i&&(t='"'+t+'"'),t})).join(", ")},i._addTextLine=function(t){this.align()===p&&(t=t.trim());var e=this._getTextWidth(t);return this.textArr.push({text:t,width:e})},i._getTextWidth=function(t){var e=this.letterSpacing(),i=t.length;return b().measureText(t).width+(i?e*(i-1):0)},i._setTextData=function(){var t=this.text().split("\n"),e=+this.fontSize(),i=0,r=this.lineHeight()*e,n=this.attrs.width,s=this.attrs.height,a=n!==d&&void 0!==n,o=s!==d&&void 0!==s,h=this.padding(),l=n-2*h,c=s-2*h,p=0,f=this.wrap(),u="none"!==f,m="char"!==f&&u,y=this.ellipsis();this.textArr=[],b().font=this._getContextFont();for(var v=y?this._getTextWidth("…"):0,_=0,x=t.length;_<x;++_){var S=t[_],P=this._getTextWidth(S);if(a&&P>l)for(;S.length>0;){for(var w=0,C=S.length,E="",k=0;w<C;){var A=w+C>>>1,T=S.slice(0,A+1),F=this._getTextWidth(T)+v;F<=l?(w=A+1,E=T,k=F):C=A}if(!E)break;if(m){var M,D=S[E.length];(M=(D===g||"-"===D)&&k<=l?E.length:Math.max(E.lastIndexOf(g),E.lastIndexOf("-"))+1)>0&&(w=M,E=E.slice(0,w),k=this._getTextWidth(E))}if(E=E.trimRight(),this._addTextLine(E),i=Math.max(i,k),p+=r,!u||o&&p+r>c){var I=this.textArr[this.textArr.length-1];if(I)if(y)this._getTextWidth(I.text+"…")<l||(I.text=I.text.slice(0,I.text.length-3)),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(I.text+"…");break}if((S=(S=S.slice(w)).trimLeft()).length>0&&(P=this._getTextWidth(S))<=l){this._addTextLine(S),p+=r,i=Math.max(i,P);break}}else this._addTextLine(S),p+=r,i=Math.max(i,P);if(o&&p+r>c)break}this.textHeight=e,this.textWidth=i},i.getStrokeScaleEnabled=function(){return!0},e}(a.b);_.prototype._fillFunc=function(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)},_.prototype._strokeFunc=function(t){t.strokeText(this._partialText,this._partialTextX,this._partialTextY)},_.prototype.className="Text",_.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,h.DA)(_),s.F.overWriteSetter(_,"width",(0,o.hi)()),s.F.overWriteSetter(_,"height",(0,o.hi)()),s.F.addGetterSetter(_,"fontFamily","Arial"),s.F.addGetterSetter(_,"fontSize",12,(0,o.Kg)()),s.F.addGetterSetter(_,"fontStyle",m),s.F.addGetterSetter(_,"fontVariant",m),s.F.addGetterSetter(_,"padding",0,(0,o.Kg)()),s.F.addGetterSetter(_,"align",f),s.F.addGetterSetter(_,"verticalAlign","top"),s.F.addGetterSetter(_,"lineHeight",1,(0,o.Kg)()),s.F.addGetterSetter(_,"wrap","word"),s.F.addGetterSetter(_,"ellipsis",!1,(0,o.I0)()),s.F.addGetterSetter(_,"letterSpacing",0,(0,o.Kg)()),s.F.addGetterSetter(_,"text","",(0,o.sY)()),s.F.addGetterSetter(_,"textDecoration","")}}]),window.jsExecEndTimeStamp=Date.now(),window.cachedPerformanceEntries||(window.cachedPerformanceEntries=[]),window.cachedPerformanceEntries.push({name:"jsExec: js/initial_vendors_public_3.356a41863a58ce9cde54.js",entryType:"jsExec",startTime:window.jsExecStartTimeStamp,endTime:window.jsExecEndTimeStamp})})();
//# sourceMappingURL=initial_vendors_public_3.356a41863a58ce9cde54.js.map